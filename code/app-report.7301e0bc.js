var di=Object.defineProperty;var hi=(X,O,Q)=>O in X?di(X,O,{enumerable:!0,configurable:!0,writable:!0,value:Q}):X[O]=Q;var jt=(X,O,Q)=>(hi(X,typeof O!="symbol"?O+"":O,Q),Q);import{t as t$8,n as n$f,e as e$c,s as s$9,i as i$8,a as smallBreakPoint,r as recordPWABuilderProcessStep,A as AnalyticsBehavior,x as x$2,m as mediumBreakPoint,l as largeBreakPoint,b as xLargeBreakPoint,c as xxxLargeBreakPoint,o as o$b,g as getManifestContext,d as i$9,f as e$d,h as t$9,j as e$e,k as A$2,p as createManifestContextFromEmpty,B as BreakpointValues,q as setManifestContext,u as resolveUrl$2,v as o$c}from"./index.096edba8.js";import"./test-publish-pane.85f306d6.js";import"./arrow-link.b865ef08.js";import{F as FindWebManifest,a as FindServiceWorker,A as AuditServiceWorker,R as Report}from"./app-report.api.0e9a7110.js";const languages$1=[{code:"ab",name:"Abkhaz"},{code:"aa",name:"Afar"},{code:"af",name:"Afrikaans"},{code:"ak",name:"Akan"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"an",name:"Aragonese"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"av",name:"Avaric"},{code:"ae",name:"Avestan"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"ba",name:"Bashkir"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bh",name:"Bihari"},{code:"bi",name:"Bislama"},{code:"bs",name:"Bosnian"},{code:"br",name:"Breton"},{code:"bg",name:"Bulgarian"},{code:"my",name:"Burmese"},{code:"ca",name:"Catalan; Valencian"},{code:"ch",name:"Chamorro"},{code:"ce",name:"Chechen"},{code:"ny",name:"Chichewa; Chewa; Nyanja"},{code:"zh",name:"Chinese"},{code:"cv",name:"Chuvash"},{code:"kw",name:"Cornish"},{code:"co",name:"Corsican"},{code:"cr",name:"Cree"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Divehi; Dhivehi; Maldivian;"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"fo",name:"Faroese"},{code:"fj",name:"Fijian"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"ff",name:"Fula; Fulah; Pulaar; Pular"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek, Modern"},{code:"gn",name:"Guaran\xED"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian; Haitian Creole"},{code:"ha",name:"Hausa"},{code:"he",name:"Hebrew (modern)"},{code:"hz",name:"Herero"},{code:"hi",name:"Hindi"},{code:"ho",name:"Hiri Motu"},{code:"hu",name:"Hungarian"},{code:"ia",name:"Interlingua"},{code:"id",name:"Indonesian"},{code:"ie",name:"Interlingue"},{code:"ga",name:"Irish"},{code:"ig",name:"Igbo"},{code:"ik",name:"Inupiaq"},{code:"io",name:"Ido"},{code:"is",name:"Icelandic"},{code:"it",name:"Italian"},{code:"iu",name:"Inuktitut"},{code:"ja",name:"Japanese"},{code:"jv",name:"Javanese"},{code:"kl",name:"Kalaallisut, Greenlandic"},{code:"kn",name:"Kannada"},{code:"kr",name:"Kanuri"},{code:"ks",name:"Kashmiri"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"ki",name:"Kikuyu, Gikuyu"},{code:"rw",name:"Kinyarwanda"},{code:"ky",name:"Kirghiz, Kyrgyz"},{code:"kv",name:"Komi"},{code:"kg",name:"Kongo"},{code:"ko",name:"Korean"},{code:"ku",name:"Kurdish"},{code:"kj",name:"Kwanyama, Kuanyama"},{code:"la",name:"Latin"},{code:"lb",name:"Luxembourgish, Letzeburgesch"},{code:"lg",name:"Luganda"},{code:"li",name:"Limburgish, Limburgan, Limburger"},{code:"ln",name:"Lingala"},{code:"lo",name:"Lao"},{code:"lt",name:"Lithuanian"},{code:"lu",name:"Luba-Katanga"},{code:"lv",name:"Latvian"},{code:"gv",name:"Manx"},{code:"mk",name:"Macedonian"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"M\u0101ori"},{code:"mr",name:"Marathi (Mar\u0101\u1E6Dh\u012B)"},{code:"mh",name:"Marshallese"},{code:"mn",name:"Mongolian"},{code:"na",name:"Nauru"},{code:"nv",name:"Navajo, Navaho"},{code:"nb",name:"Norwegian Bokm\xE5l"},{code:"nd",name:"North Ndebele"},{code:"ne",name:"Nepali"},{code:"ng",name:"Ndonga"},{code:"nn",name:"Norwegian Nynorsk"},{code:"no",name:"Norwegian"},{code:"ii",name:"Nuosu"},{code:"nr",name:"South Ndebele"},{code:"oc",name:"Occitan"},{code:"oj",name:"Ojibwe, Ojibwa"},{code:"cu",name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic"},{code:"om",name:"Oromo"},{code:"or",name:"Oriya"},{code:"os",name:"Ossetian, Ossetic"},{code:"pa",name:"Panjabi, Punjabi"},{code:"pi",name:"P\u0101li"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"ps",name:"Pashto, Pushto"},{code:"pt",name:"Portuguese"},{code:"qu",name:"Quechua"},{code:"rm",name:"Romansh"},{code:"rn",name:"Kirundi"},{code:"ro",name:"Romanian, Moldavian, Moldovan"},{code:"ru",name:"Russian"},{code:"sa",name:"Sanskrit (Sa\u1E41sk\u1E5Bta)"},{code:"sc",name:"Sardinian"},{code:"sd",name:"Sindhi"},{code:"se",name:"Northern Sami"},{code:"sm",name:"Samoan"},{code:"sg",name:"Sango"},{code:"sr",name:"Serbian"},{code:"gd",name:"Scottish Gaelic; Gaelic"},{code:"sn",name:"Shona"},{code:"si",name:"Sinhala, Sinhalese"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovene"},{code:"so",name:"Somali"},{code:"st",name:"Southern Sotho"},{code:"es",name:"Spanish; Castilian"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"ss",name:"Swati"},{code:"sv",name:"Swedish"},{code:"ta",name:"Tamil"},{code:"te",name:"Telugu"},{code:"tg",name:"Tajik"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"bo",name:"Tibetan Standard, Tibetan, Central"},{code:"tk",name:"Turkmen"},{code:"tl",name:"Tagalog"},{code:"tn",name:"Tswana"},{code:"to",name:"Tonga (Tonga Islands)"},{code:"tr",name:"Turkish"},{code:"ts",name:"Tsonga"},{code:"tt",name:"Tatar"},{code:"tw",name:"Twi"},{code:"ty",name:"Tahitian"},{code:"ug",name:"Uighur, Uyghur"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"uz",name:"Uzbek"},{code:"ve",name:"Venda"},{code:"vi",name:"Vietnamese"},{code:"vo",name:"Volap\xFCk"},{code:"wa",name:"Walloon"},{code:"cy",name:"Welsh"},{code:"wo",name:"Wolof"},{code:"fy",name:"Western Frisian"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"za",name:"Zhuang, Chuang"}],languageCodes$1=languages$1.map(X=>({formatted:X.name,code:X.code})),possibleManiKeys=["background_color","description","dir","display","lang","name","orientation","prefer_related_applications","related_applications","scope","short_name","start_url","theme_color","shortcuts","categories","screenshots","iarc_rating_id","icons","share_target","display_override","edge_side_panel"];function isStandardOrientation(X){return["any","natural","landscape","landscape-primary","landscape-secondary","portrait","portrait-primary","portrait-secondary"].includes(X)}function isValidJSON(X){try{const O=JSON.parse(JSON.stringify(X));return!!(O&&typeof O=="object")}catch{return!1}}async function findMissingKeys(X){return new Promise(O=>{let Q=[];const j=Object.keys(X);possibleManiKeys.forEach(U=>{j.includes(U)===!1&&Q.push(U)}),O(Q)})}function isValidLanguageCode(X){let O=X.split("-")[0],Q=!1;return languageCodes$1.forEach(j=>{j.code===O&&(Q=!0)}),Q}function getDimensions(X){return(X||"0x0").split(" ").map(O=>{const Q=O.split("x");return{width:Number.parseInt(Q[0]||"0",10),height:Number.parseInt(Q[1]||"0",10)}})}function isAtLeast(X,O,Q){return getDimensions(X).some(U=>U.width>=O&&U.height>=Q)}function validateSingleRelatedApp(X){return!(!platformOptions$1.includes(X.platform)||!isValidURL(X.url))}function isValidURL(X){var O=new RegExp("^((https?:)?\\/\\/)?(?:\\S+(?::\\S*)?@)?(([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?","i");return!!O.test(X)}const platformOptions$1=["windows","chrome_web_store","play","itunes","webapp","f-droid","amazon"],validProtocols=["bitcoin","dat","dweb","ftp","geo","gopher","im","ipfs","ipns","irc","ircs","magnet","mailto","matrix","mms","news","nntp","sip","sms","smsto","ssb","ssh","tel","urn","webcal","wtai","xmpp"],required_fields=["icons","name","short_name","start_url"],recommended_fields=["display","background_color","theme_color","orientation","screenshots"],optional_fields=["iarc_rating_id","related_applications","prefer_related_applications","lang","dir","description","scope","categories"],widgetsSchema={type:"array",minItems:1,items:{type:"object",properties:{name:{type:"string"},description:{type:"string"},tag:{type:"string"},template:{type:"string"},ms_ac_template:{type:"string"},data:{type:"string"},type:{type:"string"},screenshots:{type:"array",minItems:1,items:{type:"object",properties:{src:{type:"string"},sizes:{type:"string"},label:{type:"string"}},required:["src","sizes","label"]}},icons:{type:"array",minItems:1,items:{type:"object",properties:{src:{type:"string"},sizes:{type:"string"}},required:["src","sizes"]}},auth:{type:"boolean"},update:{type:"number"}},required:["name","description","screenshots","tag","ms_ac_template"]}},fileHandlersSchema={type:"array",minItems:1,items:{type:"object",properties:{action:{type:"string"},accept:{type:"object",minProperties:1,patternProperties:{".*":{type:"array",minItems:1,items:{type:"string"}}}}},required:["action","accept"]}};var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(X){return X&&X.__esModule&&Object.prototype.hasOwnProperty.call(X,"default")?X.default:X}var ajv$1={exports:{}},core$2={},validate={},boolSchema={},errors={},codegen={},code$2={};(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.regexpCode=X.getEsmExportName=X.getProperty=X.safeStringify=X.stringify=X.strConcat=X.addCodeArg=X.str=X._=X.nil=X._Code=X.Name=X.IDENTIFIER=X._CodeOrName=void 0;class O{}X._CodeOrName=O,X.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class Q extends O{constructor(de){if(super(),!X.IDENTIFIER.test(de))throw new Error("CodeGen: name must be a valid identifier");this.str=de}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}X.Name=Q;class j extends O{constructor(de){super(),this._items=typeof de=="string"?[de]:de}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const de=this._items[0];return de===""||de==='""'}get str(){var de;return(de=this._str)!==null&&de!==void 0?de:this._str=this._items.reduce((he,fe)=>`${he}${fe}`,"")}get names(){var de;return(de=this._names)!==null&&de!==void 0?de:this._names=this._items.reduce((he,fe)=>(fe instanceof Q&&(he[fe.str]=(he[fe.str]||0)+1),he),{})}}X._Code=j,X.nil=new j("");function U(ne,...de){const he=[ne[0]];let fe=0;for(;fe<de.length;)W(he,de[fe]),he.push(ne[++fe]);return new j(he)}X._=U;const F=new j("+");function q(ne,...de){const he=[te(ne[0])];let fe=0;for(;fe<de.length;)he.push(F),W(he,de[fe]),he.push(F,te(ne[++fe]));return Y(he),new j(he)}X.str=q;function W(ne,de){de instanceof j?ne.push(...de._items):de instanceof Q?ne.push(de):ne.push(J(de))}X.addCodeArg=W;function Y(ne){let de=1;for(;de<ne.length-1;){if(ne[de]===F){const he=G(ne[de-1],ne[de+1]);if(he!==void 0){ne.splice(de-1,3,he);continue}ne[de++]="+"}de++}}function G(ne,de){if(de==='""')return ne;if(ne==='""')return de;if(typeof ne=="string")return de instanceof Q||ne[ne.length-1]!=='"'?void 0:typeof de!="string"?`${ne.slice(0,-1)}${de}"`:de[0]==='"'?ne.slice(0,-1)+de.slice(1):void 0;if(typeof de=="string"&&de[0]==='"'&&!(ne instanceof Q))return`"${ne}${de.slice(1)}`}function K(ne,de){return de.emptyStr()?ne:ne.emptyStr()?de:q`${ne}${de}`}X.strConcat=K;function J(ne){return typeof ne=="number"||typeof ne=="boolean"||ne===null?ne:te(Array.isArray(ne)?ne.join(","):ne)}function ee(ne){return new j(te(ne))}X.stringify=ee;function te(ne){return JSON.stringify(ne).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}X.safeStringify=te;function re(ne){return typeof ne=="string"&&X.IDENTIFIER.test(ne)?new j(`.${ne}`):U`[${ne}]`}X.getProperty=re;function oe(ne){if(typeof ne=="string"&&X.IDENTIFIER.test(ne))return new j(`${ne}`);throw new Error(`CodeGen: invalid export name: ${ne}, use explicit $id name mapping`)}X.getEsmExportName=oe;function se(ne){return new j(ne.toString())}X.regexpCode=se})(code$2);var scope={};(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.ValueScope=X.ValueScopeName=X.Scope=X.varKinds=X.UsedValueState=void 0;const O=code$2;class Q extends Error{constructor(G){super(`CodeGen: "code" for ${G} not defined`),this.value=G.value}}var j;(function(Y){Y[Y.Started=0]="Started",Y[Y.Completed=1]="Completed"})(j=X.UsedValueState||(X.UsedValueState={})),X.varKinds={const:new O.Name("const"),let:new O.Name("let"),var:new O.Name("var")};class U{constructor({prefixes:G,parent:K}={}){this._names={},this._prefixes=G,this._parent=K}toName(G){return G instanceof O.Name?G:this.name(G)}name(G){return new O.Name(this._newName(G))}_newName(G){const K=this._names[G]||this._nameGroup(G);return`${G}${K.index++}`}_nameGroup(G){var K,J;if(((J=(K=this._parent)===null||K===void 0?void 0:K._prefixes)===null||J===void 0?void 0:J.has(G))||this._prefixes&&!this._prefixes.has(G))throw new Error(`CodeGen: prefix "${G}" is not allowed in this scope`);return this._names[G]={prefix:G,index:0}}}X.Scope=U;class F extends O.Name{constructor(G,K){super(K),this.prefix=G}setValue(G,{property:K,itemIndex:J}){this.value=G,this.scopePath=(0,O._)`.${new O.Name(K)}[${J}]`}}X.ValueScopeName=F;const q=(0,O._)`\n`;class W extends U{constructor(G){super(G),this._values={},this._scope=G.scope,this.opts={...G,_n:G.lines?q:O.nil}}get(){return this._scope}name(G){return new F(G,this._newName(G))}value(G,K){var J;if(K.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const ee=this.toName(G),{prefix:te}=ee,re=(J=K.key)!==null&&J!==void 0?J:K.ref;let oe=this._values[te];if(oe){const de=oe.get(re);if(de)return de}else oe=this._values[te]=new Map;oe.set(re,ee);const se=this._scope[te]||(this._scope[te]=[]),ne=se.length;return se[ne]=K.ref,ee.setValue(K,{property:te,itemIndex:ne}),ee}getValue(G,K){const J=this._values[G];if(!!J)return J.get(K)}scopeRefs(G,K=this._values){return this._reduceValues(K,J=>{if(J.scopePath===void 0)throw new Error(`CodeGen: name "${J}" has no value`);return(0,O._)`${G}${J.scopePath}`})}scopeCode(G=this._values,K,J){return this._reduceValues(G,ee=>{if(ee.value===void 0)throw new Error(`CodeGen: name "${ee}" has no value`);return ee.value.code},K,J)}_reduceValues(G,K,J={},ee){let te=O.nil;for(const re in G){const oe=G[re];if(!oe)continue;const se=J[re]=J[re]||new Map;oe.forEach(ne=>{if(se.has(ne))return;se.set(ne,j.Started);let de=K(ne);if(de){const he=this.opts.es5?X.varKinds.var:X.varKinds.const;te=(0,O._)`${te}${he} ${ne} = ${de};${this.opts._n}`}else if(de=ee==null?void 0:ee(ne))te=(0,O._)`${te}${de}${this.opts._n}`;else throw new Q(ne);se.set(ne,j.Completed)})}return te}}X.ValueScope=W})(scope);(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.or=X.and=X.not=X.CodeGen=X.operators=X.varKinds=X.ValueScopeName=X.ValueScope=X.Scope=X.Name=X.regexpCode=X.stringify=X.getProperty=X.nil=X.strConcat=X.str=X._=void 0;const O=code$2,Q=scope;var j=code$2;Object.defineProperty(X,"_",{enumerable:!0,get:function(){return j._}}),Object.defineProperty(X,"str",{enumerable:!0,get:function(){return j.str}}),Object.defineProperty(X,"strConcat",{enumerable:!0,get:function(){return j.strConcat}}),Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return j.nil}}),Object.defineProperty(X,"getProperty",{enumerable:!0,get:function(){return j.getProperty}}),Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return j.stringify}}),Object.defineProperty(X,"regexpCode",{enumerable:!0,get:function(){return j.regexpCode}}),Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return j.Name}});var U=scope;Object.defineProperty(X,"Scope",{enumerable:!0,get:function(){return U.Scope}}),Object.defineProperty(X,"ValueScope",{enumerable:!0,get:function(){return U.ValueScope}}),Object.defineProperty(X,"ValueScopeName",{enumerable:!0,get:function(){return U.ValueScopeName}}),Object.defineProperty(X,"varKinds",{enumerable:!0,get:function(){return U.varKinds}}),X.operators={GT:new O._Code(">"),GTE:new O._Code(">="),LT:new O._Code("<"),LTE:new O._Code("<="),EQ:new O._Code("==="),NEQ:new O._Code("!=="),NOT:new O._Code("!"),OR:new O._Code("||"),AND:new O._Code("&&"),ADD:new O._Code("+")};class F{optimizeNodes(){return this}optimizeNames(ae,pe){return this}}class q extends F{constructor(ae,pe,Se){super(),this.varKind=ae,this.name=pe,this.rhs=Se}render({es5:ae,_n:pe}){const Se=ae?Q.varKinds.var:this.varKind,Pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${Se} ${this.name}${Pe};`+pe}optimizeNames(ae,pe){if(!!ae[this.name.str])return this.rhs&&(this.rhs=Ie(this.rhs,ae,pe)),this}get names(){return this.rhs instanceof O._CodeOrName?this.rhs.names:{}}}class W extends F{constructor(ae,pe,Se){super(),this.lhs=ae,this.rhs=pe,this.sideEffects=Se}render({_n:ae}){return`${this.lhs} = ${this.rhs};`+ae}optimizeNames(ae,pe){if(!(this.lhs instanceof O.Name&&!ae[this.lhs.str]&&!this.sideEffects))return this.rhs=Ie(this.rhs,ae,pe),this}get names(){const ae=this.lhs instanceof O.Name?{}:{...this.lhs.names};return Be(ae,this.rhs)}}class Y extends W{constructor(ae,pe,Se,Pe){super(ae,Se,Pe),this.op=pe}render({_n:ae}){return`${this.lhs} ${this.op}= ${this.rhs};`+ae}}class G extends F{constructor(ae){super(),this.label=ae,this.names={}}render({_n:ae}){return`${this.label}:`+ae}}class K extends F{constructor(ae){super(),this.label=ae,this.names={}}render({_n:ae}){return`break${this.label?` ${this.label}`:""};`+ae}}class J extends F{constructor(ae){super(),this.error=ae}render({_n:ae}){return`throw ${this.error};`+ae}get names(){return this.error.names}}class ee extends F{constructor(ae){super(),this.code=ae}render({_n:ae}){return`${this.code};`+ae}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ae,pe){return this.code=Ie(this.code,ae,pe),this}get names(){return this.code instanceof O._CodeOrName?this.code.names:{}}}class te extends F{constructor(ae=[]){super(),this.nodes=ae}render(ae){return this.nodes.reduce((pe,Se)=>pe+Se.render(ae),"")}optimizeNodes(){const{nodes:ae}=this;let pe=ae.length;for(;pe--;){const Se=ae[pe].optimizeNodes();Array.isArray(Se)?ae.splice(pe,1,...Se):Se?ae[pe]=Se:ae.splice(pe,1)}return ae.length>0?this:void 0}optimizeNames(ae,pe){const{nodes:Se}=this;let Pe=Se.length;for(;Pe--;){const Te=Se[Pe];Te.optimizeNames(ae,pe)||(Ue(ae,Te.names),Se.splice(Pe,1))}return Se.length>0?this:void 0}get names(){return this.nodes.reduce((ae,pe)=>Ae(ae,pe.names),{})}}class re extends te{render(ae){return"{"+ae._n+super.render(ae)+"}"+ae._n}}class oe extends te{}class se extends re{}se.kind="else";class ne extends re{constructor(ae,pe){super(pe),this.condition=ae}render(ae){let pe=`if(${this.condition})`+super.render(ae);return this.else&&(pe+="else "+this.else.render(ae)),pe}optimizeNodes(){super.optimizeNodes();const ae=this.condition;if(ae===!0)return this.nodes;let pe=this.else;if(pe){const Se=pe.optimizeNodes();pe=this.else=Array.isArray(Se)?new se(Se):Se}if(pe)return ae===!1?pe instanceof ne?pe:pe.nodes:this.nodes.length?this:new ne(Xe(ae),pe instanceof ne?[pe]:pe.nodes);if(!(ae===!1||!this.nodes.length))return this}optimizeNames(ae,pe){var Se;if(this.else=(Se=this.else)===null||Se===void 0?void 0:Se.optimizeNames(ae,pe),!!(super.optimizeNames(ae,pe)||this.else))return this.condition=Ie(this.condition,ae,pe),this}get names(){const ae=super.names;return Be(ae,this.condition),this.else&&Ae(ae,this.else.names),ae}}ne.kind="if";class de extends re{}de.kind="for";class he extends de{constructor(ae){super(),this.iteration=ae}render(ae){return`for(${this.iteration})`+super.render(ae)}optimizeNames(ae,pe){if(!!super.optimizeNames(ae,pe))return this.iteration=Ie(this.iteration,ae,pe),this}get names(){return Ae(super.names,this.iteration.names)}}class fe extends de{constructor(ae,pe,Se,Pe){super(),this.varKind=ae,this.name=pe,this.from=Se,this.to=Pe}render(ae){const pe=ae.es5?Q.varKinds.var:this.varKind,{name:Se,from:Pe,to:Te}=this;return`for(${pe} ${Se}=${Pe}; ${Se}<${Te}; ${Se}++)`+super.render(ae)}get names(){const ae=Be(super.names,this.from);return Be(ae,this.to)}}class Oe extends de{constructor(ae,pe,Se,Pe){super(),this.loop=ae,this.varKind=pe,this.name=Se,this.iterable=Pe}render(ae){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ae)}optimizeNames(ae,pe){if(!!super.optimizeNames(ae,pe))return this.iterable=Ie(this.iterable,ae,pe),this}get names(){return Ae(super.names,this.iterable.names)}}class ce extends re{constructor(ae,pe,Se){super(),this.name=ae,this.args=pe,this.async=Se}render(ae){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ae)}}ce.kind="func";class me extends te{render(ae){return"return "+super.render(ae)}}me.kind="return";class we extends re{render(ae){let pe="try"+super.render(ae);return this.catch&&(pe+=this.catch.render(ae)),this.finally&&(pe+=this.finally.render(ae)),pe}optimizeNodes(){var ae,pe;return super.optimizeNodes(),(ae=this.catch)===null||ae===void 0||ae.optimizeNodes(),(pe=this.finally)===null||pe===void 0||pe.optimizeNodes(),this}optimizeNames(ae,pe){var Se,Pe;return super.optimizeNames(ae,pe),(Se=this.catch)===null||Se===void 0||Se.optimizeNames(ae,pe),(Pe=this.finally)===null||Pe===void 0||Pe.optimizeNames(ae,pe),this}get names(){const ae=super.names;return this.catch&&Ae(ae,this.catch.names),this.finally&&Ae(ae,this.finally.names),ae}}class ke extends re{constructor(ae){super(),this.error=ae}render(ae){return`catch(${this.error})`+super.render(ae)}}ke.kind="catch";class Ce extends re{render(ae){return"finally"+super.render(ae)}}Ce.kind="finally";class Qe{constructor(ae,pe={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...pe,_n:pe.lines?`
`:""},this._extScope=ae,this._scope=new Q.Scope({parent:ae}),this._nodes=[new oe]}toString(){return this._root.render(this.opts)}name(ae){return this._scope.name(ae)}scopeName(ae){return this._extScope.name(ae)}scopeValue(ae,pe){const Se=this._extScope.value(ae,pe);return(this._values[Se.prefix]||(this._values[Se.prefix]=new Set)).add(Se),Se}getScopeValue(ae,pe){return this._extScope.getValue(ae,pe)}scopeRefs(ae){return this._extScope.scopeRefs(ae,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ae,pe,Se,Pe){const Te=this._scope.toName(pe);return Se!==void 0&&Pe&&(this._constants[Te.str]=Se),this._leafNode(new q(ae,Te,Se)),Te}const(ae,pe,Se){return this._def(Q.varKinds.const,ae,pe,Se)}let(ae,pe,Se){return this._def(Q.varKinds.let,ae,pe,Se)}var(ae,pe,Se){return this._def(Q.varKinds.var,ae,pe,Se)}assign(ae,pe,Se){return this._leafNode(new W(ae,pe,Se))}add(ae,pe){return this._leafNode(new Y(ae,X.operators.ADD,pe))}code(ae){return typeof ae=="function"?ae():ae!==O.nil&&this._leafNode(new ee(ae)),this}object(...ae){const pe=["{"];for(const[Se,Pe]of ae)pe.length>1&&pe.push(","),pe.push(Se),(Se!==Pe||this.opts.es5)&&(pe.push(":"),(0,O.addCodeArg)(pe,Pe));return pe.push("}"),new O._Code(pe)}if(ae,pe,Se){if(this._blockNode(new ne(ae)),pe&&Se)this.code(pe).else().code(Se).endIf();else if(pe)this.code(pe).endIf();else if(Se)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ae){return this._elseNode(new ne(ae))}else(){return this._elseNode(new se)}endIf(){return this._endBlockNode(ne,se)}_for(ae,pe){return this._blockNode(ae),pe&&this.code(pe).endFor(),this}for(ae,pe){return this._for(new he(ae),pe)}forRange(ae,pe,Se,Pe,Te=this.opts.es5?Q.varKinds.var:Q.varKinds.let){const De=this._scope.toName(ae);return this._for(new fe(Te,De,pe,Se),()=>Pe(De))}forOf(ae,pe,Se,Pe=Q.varKinds.const){const Te=this._scope.toName(ae);if(this.opts.es5){const De=pe instanceof O.Name?pe:this.var("_arr",pe);return this.forRange("_i",0,(0,O._)`${De}.length`,Ne=>{this.var(Te,(0,O._)`${De}[${Ne}]`),Se(Te)})}return this._for(new Oe("of",Pe,Te,pe),()=>Se(Te))}forIn(ae,pe,Se,Pe=this.opts.es5?Q.varKinds.var:Q.varKinds.const){if(this.opts.ownProperties)return this.forOf(ae,(0,O._)`Object.keys(${pe})`,Se);const Te=this._scope.toName(ae);return this._for(new Oe("in",Pe,Te,pe),()=>Se(Te))}endFor(){return this._endBlockNode(de)}label(ae){return this._leafNode(new G(ae))}break(ae){return this._leafNode(new K(ae))}return(ae){const pe=new me;if(this._blockNode(pe),this.code(ae),pe.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(me)}try(ae,pe,Se){if(!pe&&!Se)throw new Error('CodeGen: "try" without "catch" and "finally"');const Pe=new we;if(this._blockNode(Pe),this.code(ae),pe){const Te=this.name("e");this._currNode=Pe.catch=new ke(Te),pe(Te)}return Se&&(this._currNode=Pe.finally=new Ce,this.code(Se)),this._endBlockNode(ke,Ce)}throw(ae){return this._leafNode(new J(ae))}block(ae,pe){return this._blockStarts.push(this._nodes.length),ae&&this.code(ae).endBlock(pe),this}endBlock(ae){const pe=this._blockStarts.pop();if(pe===void 0)throw new Error("CodeGen: not in self-balancing block");const Se=this._nodes.length-pe;if(Se<0||ae!==void 0&&Se!==ae)throw new Error(`CodeGen: wrong number of nodes: ${Se} vs ${ae} expected`);return this._nodes.length=pe,this}func(ae,pe=O.nil,Se,Pe){return this._blockNode(new ce(ae,pe,Se)),Pe&&this.code(Pe).endFunc(),this}endFunc(){return this._endBlockNode(ce)}optimize(ae=1){for(;ae-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ae){return this._currNode.nodes.push(ae),this}_blockNode(ae){this._currNode.nodes.push(ae),this._nodes.push(ae)}_endBlockNode(ae,pe){const Se=this._currNode;if(Se instanceof ae||pe&&Se instanceof pe)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${pe?`${ae.kind}/${pe.kind}`:ae.kind}"`)}_elseNode(ae){const pe=this._currNode;if(!(pe instanceof ne))throw new Error('CodeGen: "else" without "if"');return this._currNode=pe.else=ae,this}get _root(){return this._nodes[0]}get _currNode(){const ae=this._nodes;return ae[ae.length-1]}set _currNode(ae){const pe=this._nodes;pe[pe.length-1]=ae}}X.CodeGen=Qe;function Ae($e,ae){for(const pe in ae)$e[pe]=($e[pe]||0)+(ae[pe]||0);return $e}function Be($e,ae){return ae instanceof O._CodeOrName?Ae($e,ae.names):$e}function Ie($e,ae,pe){if($e instanceof O.Name)return Se($e);if(!Pe($e))return $e;return new O._Code($e._items.reduce((Te,De)=>(De instanceof O.Name&&(De=Se(De)),De instanceof O._Code?Te.push(...De._items):Te.push(De),Te),[]));function Se(Te){const De=pe[Te.str];return De===void 0||ae[Te.str]!==1?Te:(delete ae[Te.str],De)}function Pe(Te){return Te instanceof O._Code&&Te._items.some(De=>De instanceof O.Name&&ae[De.str]===1&&pe[De.str]!==void 0)}}function Ue($e,ae){for(const pe in ae)$e[pe]=($e[pe]||0)-(ae[pe]||0)}function Xe($e){return typeof $e=="boolean"||typeof $e=="number"||$e===null?!$e:(0,O._)`!${xe($e)}`}X.not=Xe;const Ke=ye(X.operators.AND);function We(...$e){return $e.reduce(Ke)}X.and=We;const Ze=ye(X.operators.OR);function _e(...$e){return $e.reduce(Ze)}X.or=_e;function ye($e){return(ae,pe)=>ae===O.nil?pe:pe===O.nil?ae:(0,O._)`${xe(ae)} ${$e} ${xe(pe)}`}function xe($e){return $e instanceof O.Name?$e:(0,O._)`(${$e})`}})(codegen);var util$1={};(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.checkStrictMode=X.getErrorPath=X.Type=X.useFunc=X.setEvaluated=X.evaluatedPropsToName=X.mergeEvaluated=X.eachItem=X.unescapeJsonPointer=X.escapeJsonPointer=X.escapeFragment=X.unescapeFragment=X.schemaRefOrVal=X.schemaHasRulesButRef=X.schemaHasRules=X.checkUnknownRules=X.alwaysValidSchema=X.toHash=void 0;const O=codegen,Q=code$2;function j(ce){const me={};for(const we of ce)me[we]=!0;return me}X.toHash=j;function U(ce,me){return typeof me=="boolean"?me:Object.keys(me).length===0?!0:(F(ce,me),!q(me,ce.self.RULES.all))}X.alwaysValidSchema=U;function F(ce,me=ce.schema){const{opts:we,self:ke}=ce;if(!we.strictSchema||typeof me=="boolean")return;const Ce=ke.RULES.keywords;for(const Qe in me)Ce[Qe]||Oe(ce,`unknown keyword: "${Qe}"`)}X.checkUnknownRules=F;function q(ce,me){if(typeof ce=="boolean")return!ce;for(const we in ce)if(me[we])return!0;return!1}X.schemaHasRules=q;function W(ce,me){if(typeof ce=="boolean")return!ce;for(const we in ce)if(we!=="$ref"&&me.all[we])return!0;return!1}X.schemaHasRulesButRef=W;function Y({topSchemaRef:ce,schemaPath:me},we,ke,Ce){if(!Ce){if(typeof we=="number"||typeof we=="boolean")return we;if(typeof we=="string")return(0,O._)`${we}`}return(0,O._)`${ce}${me}${(0,O.getProperty)(ke)}`}X.schemaRefOrVal=Y;function G(ce){return ee(decodeURIComponent(ce))}X.unescapeFragment=G;function K(ce){return encodeURIComponent(J(ce))}X.escapeFragment=K;function J(ce){return typeof ce=="number"?`${ce}`:ce.replace(/~/g,"~0").replace(/\//g,"~1")}X.escapeJsonPointer=J;function ee(ce){return ce.replace(/~1/g,"/").replace(/~0/g,"~")}X.unescapeJsonPointer=ee;function te(ce,me){if(Array.isArray(ce))for(const we of ce)me(we);else me(ce)}X.eachItem=te;function re({mergeNames:ce,mergeToName:me,mergeValues:we,resultToName:ke}){return(Ce,Qe,Ae,Be)=>{const Ie=Ae===void 0?Qe:Ae instanceof O.Name?(Qe instanceof O.Name?ce(Ce,Qe,Ae):me(Ce,Qe,Ae),Ae):Qe instanceof O.Name?(me(Ce,Ae,Qe),Qe):we(Qe,Ae);return Be===O.Name&&!(Ie instanceof O.Name)?ke(Ce,Ie):Ie}}X.mergeEvaluated={props:re({mergeNames:(ce,me,we)=>ce.if((0,O._)`${we} !== true && ${me} !== undefined`,()=>{ce.if((0,O._)`${me} === true`,()=>ce.assign(we,!0),()=>ce.assign(we,(0,O._)`${we} || {}`).code((0,O._)`Object.assign(${we}, ${me})`))}),mergeToName:(ce,me,we)=>ce.if((0,O._)`${we} !== true`,()=>{me===!0?ce.assign(we,!0):(ce.assign(we,(0,O._)`${we} || {}`),se(ce,we,me))}),mergeValues:(ce,me)=>ce===!0?!0:{...ce,...me},resultToName:oe}),items:re({mergeNames:(ce,me,we)=>ce.if((0,O._)`${we} !== true && ${me} !== undefined`,()=>ce.assign(we,(0,O._)`${me} === true ? true : ${we} > ${me} ? ${we} : ${me}`)),mergeToName:(ce,me,we)=>ce.if((0,O._)`${we} !== true`,()=>ce.assign(we,me===!0?!0:(0,O._)`${we} > ${me} ? ${we} : ${me}`)),mergeValues:(ce,me)=>ce===!0?!0:Math.max(ce,me),resultToName:(ce,me)=>ce.var("items",me)})};function oe(ce,me){if(me===!0)return ce.var("props",!0);const we=ce.var("props",(0,O._)`{}`);return me!==void 0&&se(ce,we,me),we}X.evaluatedPropsToName=oe;function se(ce,me,we){Object.keys(we).forEach(ke=>ce.assign((0,O._)`${me}${(0,O.getProperty)(ke)}`,!0))}X.setEvaluated=se;const ne={};function de(ce,me){return ce.scopeValue("func",{ref:me,code:ne[me.code]||(ne[me.code]=new Q._Code(me.code))})}X.useFunc=de;var he;(function(ce){ce[ce.Num=0]="Num",ce[ce.Str=1]="Str"})(he=X.Type||(X.Type={}));function fe(ce,me,we){if(ce instanceof O.Name){const ke=me===he.Num;return we?ke?(0,O._)`"[" + ${ce} + "]"`:(0,O._)`"['" + ${ce} + "']"`:ke?(0,O._)`"/" + ${ce}`:(0,O._)`"/" + ${ce}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return we?(0,O.getProperty)(ce).toString():"/"+J(ce)}X.getErrorPath=fe;function Oe(ce,me,we=ce.opts.strictSchema){if(!!we){if(me=`strict mode: ${me}`,we===!0)throw new Error(me);ce.self.logger.warn(me)}}X.checkStrictMode=Oe})(util$1);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$t=codegen,names={data:new codegen_1$t.Name("data"),valCxt:new codegen_1$t.Name("valCxt"),instancePath:new codegen_1$t.Name("instancePath"),parentData:new codegen_1$t.Name("parentData"),parentDataProperty:new codegen_1$t.Name("parentDataProperty"),rootData:new codegen_1$t.Name("rootData"),dynamicAnchors:new codegen_1$t.Name("dynamicAnchors"),vErrors:new codegen_1$t.Name("vErrors"),errors:new codegen_1$t.Name("errors"),this:new codegen_1$t.Name("this"),self:new codegen_1$t.Name("self"),scope:new codegen_1$t.Name("scope"),json:new codegen_1$t.Name("json"),jsonPos:new codegen_1$t.Name("jsonPos"),jsonLen:new codegen_1$t.Name("jsonLen"),jsonPart:new codegen_1$t.Name("jsonPart")};names$1.default=names;(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.extendErrors=X.resetErrorsCount=X.reportExtraError=X.reportError=X.keyword$DataError=X.keywordError=void 0;const O=codegen,Q=util$1,j=names$1;X.keywordError={message:({keyword:se})=>(0,O.str)`must pass "${se}" keyword validation`},X.keyword$DataError={message:({keyword:se,schemaType:ne})=>ne?(0,O.str)`"${se}" keyword must be ${ne} ($data)`:(0,O.str)`"${se}" keyword is invalid ($data)`};function U(se,ne=X.keywordError,de,he){const{it:fe}=se,{gen:Oe,compositeRule:ce,allErrors:me}=fe,we=J(se,ne,de);(he!=null?he:ce||me)?Y(Oe,we):G(fe,(0,O._)`[${we}]`)}X.reportError=U;function F(se,ne=X.keywordError,de){const{it:he}=se,{gen:fe,compositeRule:Oe,allErrors:ce}=he,me=J(se,ne,de);Y(fe,me),Oe||ce||G(he,j.default.vErrors)}X.reportExtraError=F;function q(se,ne){se.assign(j.default.errors,ne),se.if((0,O._)`${j.default.vErrors} !== null`,()=>se.if(ne,()=>se.assign((0,O._)`${j.default.vErrors}.length`,ne),()=>se.assign(j.default.vErrors,null)))}X.resetErrorsCount=q;function W({gen:se,keyword:ne,schemaValue:de,data:he,errsCount:fe,it:Oe}){if(fe===void 0)throw new Error("ajv implementation error");const ce=se.name("err");se.forRange("i",fe,j.default.errors,me=>{se.const(ce,(0,O._)`${j.default.vErrors}[${me}]`),se.if((0,O._)`${ce}.instancePath === undefined`,()=>se.assign((0,O._)`${ce}.instancePath`,(0,O.strConcat)(j.default.instancePath,Oe.errorPath))),se.assign((0,O._)`${ce}.schemaPath`,(0,O.str)`${Oe.errSchemaPath}/${ne}`),Oe.opts.verbose&&(se.assign((0,O._)`${ce}.schema`,de),se.assign((0,O._)`${ce}.data`,he))})}X.extendErrors=W;function Y(se,ne){const de=se.const("err",ne);se.if((0,O._)`${j.default.vErrors} === null`,()=>se.assign(j.default.vErrors,(0,O._)`[${de}]`),(0,O._)`${j.default.vErrors}.push(${de})`),se.code((0,O._)`${j.default.errors}++`)}function G(se,ne){const{gen:de,validateName:he,schemaEnv:fe}=se;fe.$async?de.throw((0,O._)`new ${se.ValidationError}(${ne})`):(de.assign((0,O._)`${he}.errors`,ne),de.return(!1))}const K={keyword:new O.Name("keyword"),schemaPath:new O.Name("schemaPath"),params:new O.Name("params"),propertyName:new O.Name("propertyName"),message:new O.Name("message"),schema:new O.Name("schema"),parentSchema:new O.Name("parentSchema")};function J(se,ne,de){const{createErrors:he}=se.it;return he===!1?(0,O._)`{}`:ee(se,ne,de)}function ee(se,ne,de={}){const{gen:he,it:fe}=se,Oe=[te(fe,de),re(se,de)];return oe(se,ne,Oe),he.object(...Oe)}function te({errorPath:se},{instancePath:ne}){const de=ne?(0,O.str)`${se}${(0,Q.getErrorPath)(ne,Q.Type.Str)}`:se;return[j.default.instancePath,(0,O.strConcat)(j.default.instancePath,de)]}function re({keyword:se,it:{errSchemaPath:ne}},{schemaPath:de,parentSchema:he}){let fe=he?ne:(0,O.str)`${ne}/${se}`;return de&&(fe=(0,O.str)`${fe}${(0,Q.getErrorPath)(de,Q.Type.Str)}`),[K.schemaPath,fe]}function oe(se,{params:ne,message:de},he){const{keyword:fe,data:Oe,schemaValue:ce,it:me}=se,{opts:we,propertyName:ke,topSchemaRef:Ce,schemaPath:Qe}=me;he.push([K.keyword,fe],[K.params,typeof ne=="function"?ne(se):ne||(0,O._)`{}`]),we.messages&&he.push([K.message,typeof de=="function"?de(se):de]),we.verbose&&he.push([K.schema,ce],[K.parentSchema,(0,O._)`${Ce}${Qe}`],[j.default.data,Oe]),ke&&he.push([K.propertyName,ke])}})(errors);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$2=errors,codegen_1$s=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(X){const{gen:O,schema:Q,validateName:j}=X;Q===!1?falseSchemaError(X,!1):typeof Q=="object"&&Q.$async===!0?O.return(names_1$6.default.data):(O.assign((0,codegen_1$s._)`${j}.errors`,null),O.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(X,O){const{gen:Q,schema:j}=X;j===!1?(Q.var(O,!1),falseSchemaError(X)):Q.var(O,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(X,O){const{gen:Q,data:j}=X,U={gen:Q,keyword:"false schema",data:j,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:X};(0,errors_1$2.reportError)(U,boolError,void 0,O)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(X){return typeof X=="string"&&jsonTypes.has(X)}rules.isJSONType=isJSONType;function getRules(){const X={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...X,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},X.number,X.string,X.array,X.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:X,self:O},Q){const j=O.RULES.types[Q];return j&&j!==!0&&shouldUseGroup(X,j)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(X,O){return O.rules.some(Q=>shouldUseRule(X,Q))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(X,O){var Q;return X[O.keyword]!==void 0||((Q=O.definition.implements)===null||Q===void 0?void 0:Q.some(j=>X[j]!==void 0))}applicability.shouldUseRule=shouldUseRule;(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.reportTypeError=X.checkDataTypes=X.checkDataType=X.coerceAndCheckDataType=X.getJSONTypes=X.getSchemaTypes=X.DataType=void 0;const O=rules,Q=applicability,j=errors,U=codegen,F=util$1;var q;(function(he){he[he.Correct=0]="Correct",he[he.Wrong=1]="Wrong"})(q=X.DataType||(X.DataType={}));function W(he){const fe=Y(he.type);if(fe.includes("null")){if(he.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!fe.length&&he.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');he.nullable===!0&&fe.push("null")}return fe}X.getSchemaTypes=W;function Y(he){const fe=Array.isArray(he)?he:he?[he]:[];if(fe.every(O.isJSONType))return fe;throw new Error("type must be JSONType or JSONType[]: "+fe.join(","))}X.getJSONTypes=Y;function G(he,fe){const{gen:Oe,data:ce,opts:me}=he,we=J(fe,me.coerceTypes),ke=fe.length>0&&!(we.length===0&&fe.length===1&&(0,Q.schemaHasRulesForType)(he,fe[0]));if(ke){const Ce=oe(fe,ce,me.strictNumbers,q.Wrong);Oe.if(Ce,()=>{we.length?ee(he,fe,we):ne(he)})}return ke}X.coerceAndCheckDataType=G;const K=new Set(["string","number","integer","boolean","null"]);function J(he,fe){return fe?he.filter(Oe=>K.has(Oe)||fe==="array"&&Oe==="array"):[]}function ee(he,fe,Oe){const{gen:ce,data:me,opts:we}=he,ke=ce.let("dataType",(0,U._)`typeof ${me}`),Ce=ce.let("coerced",(0,U._)`undefined`);we.coerceTypes==="array"&&ce.if((0,U._)`${ke} == 'object' && Array.isArray(${me}) && ${me}.length == 1`,()=>ce.assign(me,(0,U._)`${me}[0]`).assign(ke,(0,U._)`typeof ${me}`).if(oe(fe,me,we.strictNumbers),()=>ce.assign(Ce,me))),ce.if((0,U._)`${Ce} !== undefined`);for(const Ae of Oe)(K.has(Ae)||Ae==="array"&&we.coerceTypes==="array")&&Qe(Ae);ce.else(),ne(he),ce.endIf(),ce.if((0,U._)`${Ce} !== undefined`,()=>{ce.assign(me,Ce),te(he,Ce)});function Qe(Ae){switch(Ae){case"string":ce.elseIf((0,U._)`${ke} == "number" || ${ke} == "boolean"`).assign(Ce,(0,U._)`"" + ${me}`).elseIf((0,U._)`${me} === null`).assign(Ce,(0,U._)`""`);return;case"number":ce.elseIf((0,U._)`${ke} == "boolean" || ${me} === null
              || (${ke} == "string" && ${me} && ${me} == +${me})`).assign(Ce,(0,U._)`+${me}`);return;case"integer":ce.elseIf((0,U._)`${ke} === "boolean" || ${me} === null
              || (${ke} === "string" && ${me} && ${me} == +${me} && !(${me} % 1))`).assign(Ce,(0,U._)`+${me}`);return;case"boolean":ce.elseIf((0,U._)`${me} === "false" || ${me} === 0 || ${me} === null`).assign(Ce,!1).elseIf((0,U._)`${me} === "true" || ${me} === 1`).assign(Ce,!0);return;case"null":ce.elseIf((0,U._)`${me} === "" || ${me} === 0 || ${me} === false`),ce.assign(Ce,null);return;case"array":ce.elseIf((0,U._)`${ke} === "string" || ${ke} === "number"
              || ${ke} === "boolean" || ${me} === null`).assign(Ce,(0,U._)`[${me}]`)}}}function te({gen:he,parentData:fe,parentDataProperty:Oe},ce){he.if((0,U._)`${fe} !== undefined`,()=>he.assign((0,U._)`${fe}[${Oe}]`,ce))}function re(he,fe,Oe,ce=q.Correct){const me=ce===q.Correct?U.operators.EQ:U.operators.NEQ;let we;switch(he){case"null":return(0,U._)`${fe} ${me} null`;case"array":we=(0,U._)`Array.isArray(${fe})`;break;case"object":we=(0,U._)`${fe} && typeof ${fe} == "object" && !Array.isArray(${fe})`;break;case"integer":we=ke((0,U._)`!(${fe} % 1) && !isNaN(${fe})`);break;case"number":we=ke();break;default:return(0,U._)`typeof ${fe} ${me} ${he}`}return ce===q.Correct?we:(0,U.not)(we);function ke(Ce=U.nil){return(0,U.and)((0,U._)`typeof ${fe} == "number"`,Ce,Oe?(0,U._)`isFinite(${fe})`:U.nil)}}X.checkDataType=re;function oe(he,fe,Oe,ce){if(he.length===1)return re(he[0],fe,Oe,ce);let me;const we=(0,F.toHash)(he);if(we.array&&we.object){const ke=(0,U._)`typeof ${fe} != "object"`;me=we.null?ke:(0,U._)`!${fe} || ${ke}`,delete we.null,delete we.array,delete we.object}else me=U.nil;we.number&&delete we.integer;for(const ke in we)me=(0,U.and)(me,re(ke,fe,Oe,ce));return me}X.checkDataTypes=oe;const se={message:({schema:he})=>`must be ${he}`,params:({schema:he,schemaValue:fe})=>typeof he=="string"?(0,U._)`{type: ${he}}`:(0,U._)`{type: ${fe}}`};function ne(he){const fe=de(he);(0,j.reportError)(fe,se)}X.reportTypeError=ne;function de(he){const{gen:fe,data:Oe,schema:ce}=he,me=(0,F.schemaRefOrVal)(he,ce,"type");return{gen:fe,keyword:"type",data:Oe,schema:ce.type,schemaCode:me,schemaValue:me,parentSchema:ce,params:{},it:he}}})(dataType);var defaults$3={};Object.defineProperty(defaults$3,"__esModule",{value:!0});defaults$3.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util$1;function assignDefaults(X,O){const{properties:Q,items:j}=X.schema;if(O==="object"&&Q)for(const U in Q)assignDefault(X,U,Q[U].default);else O==="array"&&Array.isArray(j)&&j.forEach((U,F)=>assignDefault(X,F,U.default))}defaults$3.assignDefaults=assignDefaults;function assignDefault(X,O,Q){const{gen:j,compositeRule:U,data:F,opts:q}=X;if(Q===void 0)return;const W=(0,codegen_1$r._)`${F}${(0,codegen_1$r.getProperty)(O)}`;if(U){(0,util_1$p.checkStrictMode)(X,`default is ignored for: ${W}`);return}let Y=(0,codegen_1$r._)`${W} === undefined`;q.useDefaults==="empty"&&(Y=(0,codegen_1$r._)`${Y} || ${W} === null || ${W} === ""`),j.if(Y,(0,codegen_1$r._)`${W} = ${(0,codegen_1$r.stringify)(Q)}`)}var keyword$1={},code$1={};Object.defineProperty(code$1,"__esModule",{value:!0});code$1.validateUnion=code$1.validateArray=code$1.usePattern=code$1.callValidateCode=code$1.schemaProperties=code$1.allSchemaProperties=code$1.noPropertyInData=code$1.propertyInData=code$1.isOwnProperty=code$1.hasPropFunc=code$1.reportMissingProp=code$1.checkMissingProp=code$1.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util$1,names_1$5=names$1,util_2$1=util$1;function checkReportMissingProp(X,O){const{gen:Q,data:j,it:U}=X;Q.if(noPropertyInData(Q,j,O,U.opts.ownProperties),()=>{X.setParams({missingProperty:(0,codegen_1$q._)`${O}`},!0),X.error()})}code$1.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:X,data:O,it:{opts:Q}},j,U){return(0,codegen_1$q.or)(...j.map(F=>(0,codegen_1$q.and)(noPropertyInData(X,O,F,Q.ownProperties),(0,codegen_1$q._)`${U} = ${F}`)))}code$1.checkMissingProp=checkMissingProp;function reportMissingProp(X,O){X.setParams({missingProperty:O},!0),X.error()}code$1.reportMissingProp=reportMissingProp;function hasPropFunc(X){return X.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$q._)`Object.prototype.hasOwnProperty`})}code$1.hasPropFunc=hasPropFunc;function isOwnProperty(X,O,Q){return(0,codegen_1$q._)`${hasPropFunc(X)}.call(${O}, ${Q})`}code$1.isOwnProperty=isOwnProperty;function propertyInData(X,O,Q,j){const U=(0,codegen_1$q._)`${O}${(0,codegen_1$q.getProperty)(Q)} !== undefined`;return j?(0,codegen_1$q._)`${U} && ${isOwnProperty(X,O,Q)}`:U}code$1.propertyInData=propertyInData;function noPropertyInData(X,O,Q,j){const U=(0,codegen_1$q._)`${O}${(0,codegen_1$q.getProperty)(Q)} === undefined`;return j?(0,codegen_1$q.or)(U,(0,codegen_1$q.not)(isOwnProperty(X,O,Q))):U}code$1.noPropertyInData=noPropertyInData;function allSchemaProperties(X){return X?Object.keys(X).filter(O=>O!=="__proto__"):[]}code$1.allSchemaProperties=allSchemaProperties;function schemaProperties(X,O){return allSchemaProperties(O).filter(Q=>!(0,util_1$o.alwaysValidSchema)(X,O[Q]))}code$1.schemaProperties=schemaProperties;function callValidateCode({schemaCode:X,data:O,it:{gen:Q,topSchemaRef:j,schemaPath:U,errorPath:F},it:q},W,Y,G){const K=G?(0,codegen_1$q._)`${X}, ${O}, ${j}${U}`:O,J=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,F)],[names_1$5.default.parentData,q.parentData],[names_1$5.default.parentDataProperty,q.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];q.opts.dynamicRef&&J.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const ee=(0,codegen_1$q._)`${K}, ${Q.object(...J)}`;return Y!==codegen_1$q.nil?(0,codegen_1$q._)`${W}.call(${Y}, ${ee})`:(0,codegen_1$q._)`${W}(${ee})`}code$1.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$q._)`new RegExp`;function usePattern({gen:X,it:{opts:O}},Q){const j=O.unicodeRegExp?"u":"",{regExp:U}=O.code,F=U(Q,j);return X.scopeValue("pattern",{key:F.toString(),ref:F,code:(0,codegen_1$q._)`${U.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(X,U)}(${Q}, ${j})`})}code$1.usePattern=usePattern;function validateArray(X){const{gen:O,data:Q,keyword:j,it:U}=X,F=O.name("valid");if(U.allErrors){const W=O.let("valid",!0);return q(()=>O.assign(W,!1)),W}return O.var(F,!0),q(()=>O.break()),F;function q(W){const Y=O.const("len",(0,codegen_1$q._)`${Q}.length`);O.forRange("i",0,Y,G=>{X.subschema({keyword:j,dataProp:G,dataPropType:util_1$o.Type.Num},F),O.if((0,codegen_1$q.not)(F),W)})}}code$1.validateArray=validateArray;function validateUnion(X){const{gen:O,schema:Q,keyword:j,it:U}=X;if(!Array.isArray(Q))throw new Error("ajv implementation error");if(Q.some(Y=>(0,util_1$o.alwaysValidSchema)(U,Y))&&!U.opts.unevaluated)return;const q=O.let("valid",!1),W=O.name("_valid");O.block(()=>Q.forEach((Y,G)=>{const K=X.subschema({keyword:j,schemaProp:G,compositeRule:!0},W);O.assign(q,(0,codegen_1$q._)`${q} || ${W}`),X.mergeValidEvaluated(K,W)||O.if((0,codegen_1$q.not)(q))})),X.result(q,()=>X.reset(),()=>X.error(!0))}code$1.validateUnion=validateUnion;Object.defineProperty(keyword$1,"__esModule",{value:!0});keyword$1.validateKeywordUsage=keyword$1.validSchemaType=keyword$1.funcKeywordCode=keyword$1.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code$1,errors_1$1=errors;function macroKeywordCode(X,O){const{gen:Q,keyword:j,schema:U,parentSchema:F,it:q}=X,W=O.macro.call(q.self,U,F,q),Y=useKeyword(Q,j,W);q.opts.validateSchema!==!1&&q.self.validateSchema(W,!0);const G=Q.name("valid");X.subschema({schema:W,schemaPath:codegen_1$p.nil,errSchemaPath:`${q.errSchemaPath}/${j}`,topSchemaRef:Y,compositeRule:!0},G),X.pass(G,()=>X.error(!0))}keyword$1.macroKeywordCode=macroKeywordCode;function funcKeywordCode(X,O){var Q;const{gen:j,keyword:U,schema:F,parentSchema:q,$data:W,it:Y}=X;checkAsyncKeyword(Y,O);const G=!W&&O.compile?O.compile.call(Y.self,F,q,Y):O.validate,K=useKeyword(j,U,G),J=j.let("valid");X.block$data(J,ee),X.ok((Q=O.valid)!==null&&Q!==void 0?Q:J);function ee(){if(O.errors===!1)oe(),O.modifying&&modifyData(X),se(()=>X.error());else{const ne=O.async?te():re();O.modifying&&modifyData(X),se(()=>addErrs(X,ne))}}function te(){const ne=j.let("ruleErrs",null);return j.try(()=>oe((0,codegen_1$p._)`await `),de=>j.assign(J,!1).if((0,codegen_1$p._)`${de} instanceof ${Y.ValidationError}`,()=>j.assign(ne,(0,codegen_1$p._)`${de}.errors`),()=>j.throw(de))),ne}function re(){const ne=(0,codegen_1$p._)`${K}.errors`;return j.assign(ne,null),oe(codegen_1$p.nil),ne}function oe(ne=O.async?(0,codegen_1$p._)`await `:codegen_1$p.nil){const de=Y.opts.passContext?names_1$4.default.this:names_1$4.default.self,he=!("compile"in O&&!W||O.schema===!1);j.assign(J,(0,codegen_1$p._)`${ne}${(0,code_1$9.callValidateCode)(X,K,de,he)}`,O.modifying)}function se(ne){var de;j.if((0,codegen_1$p.not)((de=O.valid)!==null&&de!==void 0?de:J),ne)}}keyword$1.funcKeywordCode=funcKeywordCode;function modifyData(X){const{gen:O,data:Q,it:j}=X;O.if(j.parentData,()=>O.assign(Q,(0,codegen_1$p._)`${j.parentData}[${j.parentDataProperty}]`))}function addErrs(X,O){const{gen:Q}=X;Q.if((0,codegen_1$p._)`Array.isArray(${O})`,()=>{Q.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${O} : ${names_1$4.default.vErrors}.concat(${O})`).assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`),(0,errors_1$1.extendErrors)(X)},()=>X.error())}function checkAsyncKeyword({schemaEnv:X},O){if(O.async&&!X.$async)throw new Error("async keyword in sync schema")}function useKeyword(X,O,Q){if(Q===void 0)throw new Error(`keyword "${O}" failed to compile`);return X.scopeValue("keyword",typeof Q=="function"?{ref:Q}:{ref:Q,code:(0,codegen_1$p.stringify)(Q)})}function validSchemaType(X,O,Q=!1){return!O.length||O.some(j=>j==="array"?Array.isArray(X):j==="object"?X&&typeof X=="object"&&!Array.isArray(X):typeof X==j||Q&&typeof X=="undefined")}keyword$1.validSchemaType=validSchemaType;function validateKeywordUsage({schema:X,opts:O,self:Q,errSchemaPath:j},U,F){if(Array.isArray(U.keyword)?!U.keyword.includes(F):U.keyword!==F)throw new Error("ajv implementation error");const q=U.dependencies;if(q!=null&&q.some(W=>!Object.prototype.hasOwnProperty.call(X,W)))throw new Error(`parent schema must have dependencies of ${F}: ${q.join(",")}`);if(U.validateSchema&&!U.validateSchema(X[F])){const Y=`keyword "${F}" value is invalid at path "${j}": `+Q.errorsText(U.validateSchema.errors);if(O.validateSchema==="log")Q.logger.error(Y);else throw new Error(Y)}}keyword$1.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util$1;function getSubschema(X,{keyword:O,schemaProp:Q,schema:j,schemaPath:U,errSchemaPath:F,topSchemaRef:q}){if(O!==void 0&&j!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(O!==void 0){const W=X.schema[O];return Q===void 0?{schema:W,schemaPath:(0,codegen_1$o._)`${X.schemaPath}${(0,codegen_1$o.getProperty)(O)}`,errSchemaPath:`${X.errSchemaPath}/${O}`}:{schema:W[Q],schemaPath:(0,codegen_1$o._)`${X.schemaPath}${(0,codegen_1$o.getProperty)(O)}${(0,codegen_1$o.getProperty)(Q)}`,errSchemaPath:`${X.errSchemaPath}/${O}/${(0,util_1$n.escapeFragment)(Q)}`}}if(j!==void 0){if(U===void 0||F===void 0||q===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:j,schemaPath:U,topSchemaRef:q,errSchemaPath:F}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(X,O,{dataProp:Q,dataPropType:j,data:U,dataTypes:F,propertyName:q}){if(U!==void 0&&Q!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:W}=O;if(Q!==void 0){const{errorPath:G,dataPathArr:K,opts:J}=O,ee=W.let("data",(0,codegen_1$o._)`${O.data}${(0,codegen_1$o.getProperty)(Q)}`,!0);Y(ee),X.errorPath=(0,codegen_1$o.str)`${G}${(0,util_1$n.getErrorPath)(Q,j,J.jsPropertySyntax)}`,X.parentDataProperty=(0,codegen_1$o._)`${Q}`,X.dataPathArr=[...K,X.parentDataProperty]}if(U!==void 0){const G=U instanceof codegen_1$o.Name?U:W.let("data",U,!0);Y(G),q!==void 0&&(X.propertyName=q)}F&&(X.dataTypes=F);function Y(G){X.data=G,X.dataLevel=O.dataLevel+1,X.dataTypes=[],O.definedProperties=new Set,X.parentData=O.data,X.dataNames=[...O.dataNames,G]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(X,{jtdDiscriminator:O,jtdMetadata:Q,compositeRule:j,createErrors:U,allErrors:F}){j!==void 0&&(X.compositeRule=j),U!==void 0&&(X.createErrors=U),F!==void 0&&(X.allErrors=F),X.jtdDiscriminator=O,X.jtdMetadata=Q}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function X(O,Q){if(O===Q)return!0;if(O&&Q&&typeof O=="object"&&typeof Q=="object"){if(O.constructor!==Q.constructor)return!1;var j,U,F;if(Array.isArray(O)){if(j=O.length,j!=Q.length)return!1;for(U=j;U--!==0;)if(!X(O[U],Q[U]))return!1;return!0}if(O.constructor===RegExp)return O.source===Q.source&&O.flags===Q.flags;if(O.valueOf!==Object.prototype.valueOf)return O.valueOf()===Q.valueOf();if(O.toString!==Object.prototype.toString)return O.toString()===Q.toString();if(F=Object.keys(O),j=F.length,j!==Object.keys(Q).length)return!1;for(U=j;U--!==0;)if(!Object.prototype.hasOwnProperty.call(Q,F[U]))return!1;for(U=j;U--!==0;){var q=F[U];if(!X(O[q],Q[q]))return!1}return!0}return O!==O&&Q!==Q},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(X,O,Q){typeof O=="function"&&(Q=O,O={}),Q=O.cb||Q;var j=typeof Q=="function"?Q:Q.pre||function(){},U=Q.post||function(){};_traverse(O,j,U,X,"",X)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(X,O,Q,j,U,F,q,W,Y,G){if(j&&typeof j=="object"&&!Array.isArray(j)){O(j,U,F,q,W,Y,G);for(var K in j){var J=j[K];if(Array.isArray(J)){if(K in traverse$1.arrayKeywords)for(var ee=0;ee<J.length;ee++)_traverse(X,O,Q,J[ee],U+"/"+K+"/"+ee,F,U,K,j,ee)}else if(K in traverse$1.propsKeywords){if(J&&typeof J=="object")for(var te in J)_traverse(X,O,Q,J[te],U+"/"+K+"/"+escapeJsonPtr(te),F,U,K,j,te)}else(K in traverse$1.keywords||X.allKeys&&!(K in traverse$1.skipKeywords))&&_traverse(X,O,Q,J,U+"/"+K,F,U,K,j)}Q(j,U,F,q,W,Y,G)}}function escapeJsonPtr(X){return X.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(resolve$1,"__esModule",{value:!0});resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const util_1$m=util$1,equal$2=fastDeepEqual,traverse=jsonSchemaTraverse.exports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(X,O=!0){return typeof X=="boolean"?!0:O===!0?!hasRef(X):O?countKeys(X)<=O:!1}resolve$1.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(X){for(const O in X){if(REF_KEYWORDS.has(O))return!0;const Q=X[O];if(Array.isArray(Q)&&Q.some(hasRef)||typeof Q=="object"&&hasRef(Q))return!0}return!1}function countKeys(X){let O=0;for(const Q in X){if(Q==="$ref")return 1/0;if(O++,!SIMPLE_INLINED.has(Q)&&(typeof X[Q]=="object"&&(0,util_1$m.eachItem)(X[Q],j=>O+=countKeys(j)),O===1/0))return 1/0}return O}function getFullPath(X,O="",Q){Q!==!1&&(O=normalizeId(O));const j=X.parse(O);return _getFullPath(X,j)}resolve$1.getFullPath=getFullPath;function _getFullPath(X,O){return X.serialize(O).split("#")[0]+"#"}resolve$1._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(X){return X?X.replace(TRAILING_SLASH_HASH,""):""}resolve$1.normalizeId=normalizeId;function resolveUrl$1(X,O,Q){return Q=normalizeId(Q),X.resolve(O,Q)}resolve$1.resolveUrl=resolveUrl$1;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(X,O){if(typeof X=="boolean")return{};const{schemaId:Q,uriResolver:j}=this.opts,U=normalizeId(X[Q]||O),F={"":U},q=getFullPath(j,U,!1),W={},Y=new Set;return traverse(X,{allKeys:!0},(J,ee,te,re)=>{if(re===void 0)return;const oe=q+ee;let se=F[re];typeof J[Q]=="string"&&(se=ne.call(this,J[Q])),de.call(this,J.$anchor),de.call(this,J.$dynamicAnchor),F[ee]=se;function ne(he){const fe=this.opts.uriResolver.resolve;if(he=normalizeId(se?fe(se,he):he),Y.has(he))throw K(he);Y.add(he);let Oe=this.refs[he];return typeof Oe=="string"&&(Oe=this.refs[Oe]),typeof Oe=="object"?G(J,Oe.schema,he):he!==normalizeId(oe)&&(he[0]==="#"?(G(J,W[he],he),W[he]=J):this.refs[he]=oe),he}function de(he){if(typeof he=="string"){if(!ANCHOR.test(he))throw new Error(`invalid anchor "${he}"`);ne.call(this,`#${he}`)}}}),W;function G(J,ee,te){if(ee!==void 0&&!equal$2(J,ee))throw K(te)}function K(J){return new Error(`reference "${J}" resolves to more than one schema`)}}resolve$1.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults$3,keyword_1=keyword$1,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$1,util_1$l=util$1,errors_1=errors;function validateFunctionCode(X){if(isSchemaObj(X)&&(checkKeywords(X),schemaCxtHasRules(X))){topSchemaObjCode(X);return}validateFunction(X,()=>(0,boolSchema_1.topBoolOrEmptySchema)(X))}validate.validateFunctionCode=validateFunctionCode;function validateFunction({gen:X,validateName:O,schema:Q,schemaEnv:j,opts:U},F){U.code.es5?X.func(O,(0,codegen_1$n._)`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,j.$async,()=>{X.code((0,codegen_1$n._)`"use strict"; ${funcSourceUrl(Q,U)}`),destructureValCxtES5(X,U),X.code(F)}):X.func(O,(0,codegen_1$n._)`${names_1$3.default.data}, ${destructureValCxt(U)}`,j.$async,()=>X.code(funcSourceUrl(Q,U)).code(F))}function destructureValCxt(X){return(0,codegen_1$n._)`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${X.dynamicRef?(0,codegen_1$n._)`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(X,O){X.if(names_1$3.default.valCxt,()=>{X.var(names_1$3.default.instancePath,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),X.var(names_1$3.default.parentData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),X.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),X.var(names_1$3.default.rootData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),O.dynamicRef&&X.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{X.var(names_1$3.default.instancePath,(0,codegen_1$n._)`""`),X.var(names_1$3.default.parentData,(0,codegen_1$n._)`undefined`),X.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`undefined`),X.var(names_1$3.default.rootData,names_1$3.default.data),O.dynamicRef&&X.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`{}`)})}function topSchemaObjCode(X){const{schema:O,opts:Q,gen:j}=X;validateFunction(X,()=>{Q.$comment&&O.$comment&&commentKeyword(X),checkNoDefault(X),j.let(names_1$3.default.vErrors,null),j.let(names_1$3.default.errors,0),Q.unevaluated&&resetEvaluated(X),typeAndKeywords(X),returnResults(X)})}function resetEvaluated(X){const{gen:O,validateName:Q}=X;X.evaluated=O.const("evaluated",(0,codegen_1$n._)`${Q}.evaluated`),O.if((0,codegen_1$n._)`${X.evaluated}.dynamicProps`,()=>O.assign((0,codegen_1$n._)`${X.evaluated}.props`,(0,codegen_1$n._)`undefined`)),O.if((0,codegen_1$n._)`${X.evaluated}.dynamicItems`,()=>O.assign((0,codegen_1$n._)`${X.evaluated}.items`,(0,codegen_1$n._)`undefined`))}function funcSourceUrl(X,O){const Q=typeof X=="object"&&X[O.schemaId];return Q&&(O.code.source||O.code.process)?(0,codegen_1$n._)`/*# sourceURL=${Q} */`:codegen_1$n.nil}function subschemaCode(X,O){if(isSchemaObj(X)&&(checkKeywords(X),schemaCxtHasRules(X))){subSchemaObjCode(X,O);return}(0,boolSchema_1.boolOrEmptySchema)(X,O)}function schemaCxtHasRules({schema:X,self:O}){if(typeof X=="boolean")return!X;for(const Q in X)if(O.RULES.all[Q])return!0;return!1}function isSchemaObj(X){return typeof X.schema!="boolean"}function subSchemaObjCode(X,O){const{schema:Q,gen:j,opts:U}=X;U.$comment&&Q.$comment&&commentKeyword(X),updateContext(X),checkAsyncSchema(X);const F=j.const("_errs",names_1$3.default.errors);typeAndKeywords(X,F),j.var(O,(0,codegen_1$n._)`${F} === ${names_1$3.default.errors}`)}function checkKeywords(X){(0,util_1$l.checkUnknownRules)(X),checkRefsAndKeywords(X)}function typeAndKeywords(X,O){if(X.opts.jtd)return schemaKeywords(X,[],!1,O);const Q=(0,dataType_1$1.getSchemaTypes)(X.schema),j=(0,dataType_1$1.coerceAndCheckDataType)(X,Q);schemaKeywords(X,Q,!j,O)}function checkRefsAndKeywords(X){const{schema:O,errSchemaPath:Q,opts:j,self:U}=X;O.$ref&&j.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(O,U.RULES)&&U.logger.warn(`$ref: keywords ignored in schema at path "${Q}"`)}function checkNoDefault(X){const{schema:O,opts:Q}=X;O.default!==void 0&&Q.useDefaults&&Q.strictSchema&&(0,util_1$l.checkStrictMode)(X,"default is ignored in the schema root")}function updateContext(X){const O=X.schema[X.opts.schemaId];O&&(X.baseId=(0,resolve_1$2.resolveUrl)(X.opts.uriResolver,X.baseId,O))}function checkAsyncSchema(X){if(X.schema.$async&&!X.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:X,schemaEnv:O,schema:Q,errSchemaPath:j,opts:U}){const F=Q.$comment;if(U.$comment===!0)X.code((0,codegen_1$n._)`${names_1$3.default.self}.logger.log(${F})`);else if(typeof U.$comment=="function"){const q=(0,codegen_1$n.str)`${j}/$comment`,W=X.scopeValue("root",{ref:O.root});X.code((0,codegen_1$n._)`${names_1$3.default.self}.opts.$comment(${F}, ${q}, ${W}.schema)`)}}function returnResults(X){const{gen:O,schemaEnv:Q,validateName:j,ValidationError:U,opts:F}=X;Q.$async?O.if((0,codegen_1$n._)`${names_1$3.default.errors} === 0`,()=>O.return(names_1$3.default.data),()=>O.throw((0,codegen_1$n._)`new ${U}(${names_1$3.default.vErrors})`)):(O.assign((0,codegen_1$n._)`${j}.errors`,names_1$3.default.vErrors),F.unevaluated&&assignEvaluated(X),O.return((0,codegen_1$n._)`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:X,evaluated:O,props:Q,items:j}){Q instanceof codegen_1$n.Name&&X.assign((0,codegen_1$n._)`${O}.props`,Q),j instanceof codegen_1$n.Name&&X.assign((0,codegen_1$n._)`${O}.items`,j)}function schemaKeywords(X,O,Q,j){const{gen:U,schema:F,data:q,allErrors:W,opts:Y,self:G}=X,{RULES:K}=G;if(F.$ref&&(Y.ignoreKeywordsWithRef||!(0,util_1$l.schemaHasRulesButRef)(F,K))){U.block(()=>keywordCode(X,"$ref",K.all.$ref.definition));return}Y.jtd||checkStrictTypes(X,O),U.block(()=>{for(const ee of K.rules)J(ee);J(K.post)});function J(ee){!(0,applicability_1.shouldUseGroup)(F,ee)||(ee.type?(U.if((0,dataType_2.checkDataType)(ee.type,q,Y.strictNumbers)),iterateKeywords(X,ee),O.length===1&&O[0]===ee.type&&Q&&(U.else(),(0,dataType_2.reportTypeError)(X)),U.endIf()):iterateKeywords(X,ee),W||U.if((0,codegen_1$n._)`${names_1$3.default.errors} === ${j||0}`))}}function iterateKeywords(X,O){const{gen:Q,schema:j,opts:{useDefaults:U}}=X;U&&(0,defaults_1.assignDefaults)(X,O.type),Q.block(()=>{for(const F of O.rules)(0,applicability_1.shouldUseRule)(j,F)&&keywordCode(X,F.keyword,F.definition,O.type)})}function checkStrictTypes(X,O){X.schemaEnv.meta||!X.opts.strictTypes||(checkContextTypes(X,O),X.opts.allowUnionTypes||checkMultipleTypes(X,O),checkKeywordTypes(X,X.dataTypes))}function checkContextTypes(X,O){if(!!O.length){if(!X.dataTypes.length){X.dataTypes=O;return}O.forEach(Q=>{includesType(X.dataTypes,Q)||strictTypesError(X,`type "${Q}" not allowed by context "${X.dataTypes.join(",")}"`)}),narrowSchemaTypes(X,O)}}function checkMultipleTypes(X,O){O.length>1&&!(O.length===2&&O.includes("null"))&&strictTypesError(X,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(X,O){const Q=X.self.RULES.all;for(const j in Q){const U=Q[j];if(typeof U=="object"&&(0,applicability_1.shouldUseRule)(X.schema,U)){const{type:F}=U.definition;F.length&&!F.some(q=>hasApplicableType(O,q))&&strictTypesError(X,`missing type "${F.join(",")}" for keyword "${j}"`)}}}function hasApplicableType(X,O){return X.includes(O)||O==="number"&&X.includes("integer")}function includesType(X,O){return X.includes(O)||O==="integer"&&X.includes("number")}function narrowSchemaTypes(X,O){const Q=[];for(const j of X.dataTypes)includesType(O,j)?Q.push(j):O.includes("integer")&&j==="number"&&Q.push("integer");X.dataTypes=Q}function strictTypesError(X,O){O+=` at "${X.schemaEnv.baseId+X.errSchemaPath}" (strictTypes)`,(0,util_1$l.checkStrictMode)(X,O,X.opts.strictTypes)}class KeywordCxt{constructor(O,Q,j){if((0,keyword_1.validateKeywordUsage)(O,Q,j),this.gen=O.gen,this.allErrors=O.allErrors,this.keyword=j,this.data=O.data,this.schema=O.schema[j],this.$data=Q.$data&&O.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(O,this.schema,j,this.$data),this.schemaType=Q.schemaType,this.parentSchema=O.schema,this.params={},this.it=O,this.def=Q,this.$data)this.schemaCode=O.gen.const("vSchema",getData(this.$data,O));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,Q.schemaType,Q.allowUndefined))throw new Error(`${j} value must be ${JSON.stringify(Q.schemaType)}`);("code"in Q?Q.trackErrors:Q.errors!==!1)&&(this.errsCount=O.gen.const("_errs",names_1$3.default.errors))}result(O,Q,j){this.failResult((0,codegen_1$n.not)(O),Q,j)}failResult(O,Q,j){this.gen.if(O),j?j():this.error(),Q?(this.gen.else(),Q(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(O,Q){this.failResult((0,codegen_1$n.not)(O),void 0,Q)}fail(O){if(O===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(O),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(O){if(!this.$data)return this.fail(O);const{schemaCode:Q}=this;this.fail((0,codegen_1$n._)`${Q} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),O)})`)}error(O,Q,j){if(Q){this.setParams(Q),this._error(O,j),this.setParams({});return}this._error(O,j)}_error(O,Q){(O?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,Q)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(O){this.allErrors||this.gen.if(O)}setParams(O,Q){Q?Object.assign(this.params,O):this.params=O}block$data(O,Q,j=codegen_1$n.nil){this.gen.block(()=>{this.check$data(O,j),Q()})}check$data(O=codegen_1$n.nil,Q=codegen_1$n.nil){if(!this.$data)return;const{gen:j,schemaCode:U,schemaType:F,def:q}=this;j.if((0,codegen_1$n.or)((0,codegen_1$n._)`${U} === undefined`,Q)),O!==codegen_1$n.nil&&j.assign(O,!0),(F.length||q.validateSchema)&&(j.elseIf(this.invalid$data()),this.$dataError(),O!==codegen_1$n.nil&&j.assign(O,!1)),j.else()}invalid$data(){const{gen:O,schemaCode:Q,schemaType:j,def:U,it:F}=this;return(0,codegen_1$n.or)(q(),W());function q(){if(j.length){if(!(Q instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const Y=Array.isArray(j)?j:[j];return(0,codegen_1$n._)`${(0,dataType_2.checkDataTypes)(Y,Q,F.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}function W(){if(U.validateSchema){const Y=O.scopeValue("validate$data",{ref:U.validateSchema});return(0,codegen_1$n._)`!${Y}(${Q})`}return codegen_1$n.nil}}subschema(O,Q){const j=(0,subschema_1.getSubschema)(this.it,O);(0,subschema_1.extendSubschemaData)(j,this.it,O),(0,subschema_1.extendSubschemaMode)(j,O);const U={...this.it,...j,items:void 0,props:void 0};return subschemaCode(U,Q),U}mergeEvaluated(O,Q){const{it:j,gen:U}=this;!j.opts.unevaluated||(j.props!==!0&&O.props!==void 0&&(j.props=util_1$l.mergeEvaluated.props(U,O.props,j.props,Q)),j.items!==!0&&O.items!==void 0&&(j.items=util_1$l.mergeEvaluated.items(U,O.items,j.items,Q)))}mergeValidEvaluated(O,Q){const{it:j,gen:U}=this;if(j.opts.unevaluated&&(j.props!==!0||j.items!==!0))return U.if(Q,()=>this.mergeEvaluated(O,codegen_1$n.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(X,O,Q,j){const U=new KeywordCxt(X,Q,O);"code"in Q?Q.code(U,j):U.$data&&Q.validate?(0,keyword_1.funcKeywordCode)(U,Q):"macro"in Q?(0,keyword_1.macroKeywordCode)(U,Q):(Q.compile||Q.validate)&&(0,keyword_1.funcKeywordCode)(U,Q)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(X,{dataLevel:O,dataNames:Q,dataPathArr:j}){let U,F;if(X==="")return names_1$3.default.rootData;if(X[0]==="/"){if(!JSON_POINTER.test(X))throw new Error(`Invalid JSON-pointer: ${X}`);U=X,F=names_1$3.default.rootData}else{const G=RELATIVE_JSON_POINTER.exec(X);if(!G)throw new Error(`Invalid JSON-pointer: ${X}`);const K=+G[1];if(U=G[2],U==="#"){if(K>=O)throw new Error(Y("property/index",K));return j[O-K]}if(K>O)throw new Error(Y("data",K));if(F=Q[O-K],!U)return F}let q=F;const W=U.split("/");for(const G of W)G&&(F=(0,codegen_1$n._)`${F}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(G))}`,q=(0,codegen_1$n._)`${q} && ${F}`);return q;function Y(G,K){return`Cannot access ${G} ${K} levels up, current level is ${O}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(O){super("validation failed"),this.errors=O,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$1;class MissingRefError extends Error{constructor(O,Q,j,U){super(U||`can't resolve reference ${j} from id ${Q}`),this.missingRef=(0,resolve_1$1.resolveUrl)(O,Q,j),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(O,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0});compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$1,util_1$k=util$1,validate_1$1=validate;class SchemaEnv{constructor(O){var Q;this.refs={},this.dynamicAnchors={};let j;typeof O.schema=="object"&&(j=O.schema),this.schema=O.schema,this.schemaId=O.schemaId,this.root=O.root||this,this.baseId=(Q=O.baseId)!==null&&Q!==void 0?Q:(0,resolve_1.normalizeId)(j==null?void 0:j[O.schemaId||"$id"]),this.schemaPath=O.schemaPath,this.localRefs=O.localRefs,this.meta=O.meta,this.$async=j==null?void 0:j.$async,this.refs={}}}compile.SchemaEnv=SchemaEnv;function compileSchema(X){const O=getCompilingSchema.call(this,X);if(O)return O;const Q=(0,resolve_1.getFullPath)(this.opts.uriResolver,X.root.baseId),{es5:j,lines:U}=this.opts.code,{ownProperties:F}=this.opts,q=new codegen_1$m.CodeGen(this.scope,{es5:j,lines:U,ownProperties:F});let W;X.$async&&(W=q.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$m._)`require("ajv/dist/runtime/validation_error").default`}));const Y=q.scopeName("validate");X.validateName=Y;const G={gen:q,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:q.scopeValue("schema",this.opts.code.source===!0?{ref:X.schema,code:(0,codegen_1$m.stringify)(X.schema)}:{ref:X.schema}),validateName:Y,ValidationError:W,schema:X.schema,schemaEnv:X,rootId:Q,baseId:X.baseId||Q,schemaPath:codegen_1$m.nil,errSchemaPath:X.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$m._)`""`,opts:this.opts,self:this};let K;try{this._compilations.add(X),(0,validate_1$1.validateFunctionCode)(G),q.optimize(this.opts.code.optimize);const J=q.toString();K=`${q.scopeRefs(names_1$2.default.scope)}return ${J}`,this.opts.code.process&&(K=this.opts.code.process(K,X));const te=new Function(`${names_1$2.default.self}`,`${names_1$2.default.scope}`,K)(this,this.scope.get());if(this.scope.value(Y,{ref:te}),te.errors=null,te.schema=X.schema,te.schemaEnv=X,X.$async&&(te.$async=!0),this.opts.code.source===!0&&(te.source={validateName:Y,validateCode:J,scopeValues:q._values}),this.opts.unevaluated){const{props:re,items:oe}=G;te.evaluated={props:re instanceof codegen_1$m.Name?void 0:re,items:oe instanceof codegen_1$m.Name?void 0:oe,dynamicProps:re instanceof codegen_1$m.Name,dynamicItems:oe instanceof codegen_1$m.Name},te.source&&(te.source.evaluated=(0,codegen_1$m.stringify)(te.evaluated))}return X.validate=te,X}catch(J){throw delete X.validate,delete X.validateName,K&&this.logger.error("Error compiling schema, function code:",K),J}finally{this._compilations.delete(X)}}compile.compileSchema=compileSchema;function resolveRef(X,O,Q){var j;Q=(0,resolve_1.resolveUrl)(this.opts.uriResolver,O,Q);const U=X.refs[Q];if(U)return U;let F=resolve.call(this,X,Q);if(F===void 0){const q=(j=X.localRefs)===null||j===void 0?void 0:j[Q],{schemaId:W}=this.opts;q&&(F=new SchemaEnv({schema:q,schemaId:W,root:X,baseId:O}))}if(F!==void 0)return X.refs[Q]=inlineOrCompile.call(this,F)}compile.resolveRef=resolveRef;function inlineOrCompile(X){return(0,resolve_1.inlineRef)(X.schema,this.opts.inlineRefs)?X.schema:X.validate?X:compileSchema.call(this,X)}function getCompilingSchema(X){for(const O of this._compilations)if(sameSchemaEnv(O,X))return O}compile.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(X,O){return X.schema===O.schema&&X.root===O.root&&X.baseId===O.baseId}function resolve(X,O){let Q;for(;typeof(Q=this.refs[O])=="string";)O=Q;return Q||this.schemas[O]||resolveSchema.call(this,X,O)}function resolveSchema(X,O){const Q=this.opts.uriResolver.parse(O),j=(0,resolve_1._getFullPath)(this.opts.uriResolver,Q);let U=(0,resolve_1.getFullPath)(this.opts.uriResolver,X.baseId,void 0);if(Object.keys(X.schema).length>0&&j===U)return getJsonPointer.call(this,Q,X);const F=(0,resolve_1.normalizeId)(j),q=this.refs[F]||this.schemas[F];if(typeof q=="string"){const W=resolveSchema.call(this,X,q);return typeof(W==null?void 0:W.schema)!="object"?void 0:getJsonPointer.call(this,Q,W)}if(typeof(q==null?void 0:q.schema)=="object"){if(q.validate||compileSchema.call(this,q),F===(0,resolve_1.normalizeId)(O)){const{schema:W}=q,{schemaId:Y}=this.opts,G=W[Y];return G&&(U=(0,resolve_1.resolveUrl)(this.opts.uriResolver,U,G)),new SchemaEnv({schema:W,schemaId:Y,root:X,baseId:U})}return getJsonPointer.call(this,Q,q)}}compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(X,{baseId:O,schema:Q,root:j}){var U;if(((U=X.fragment)===null||U===void 0?void 0:U[0])!=="/")return;for(const W of X.fragment.slice(1).split("/")){if(typeof Q=="boolean")return;const Y=Q[(0,util_1$k.unescapeFragment)(W)];if(Y===void 0)return;Q=Y;const G=typeof Q=="object"&&Q[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(W)&&G&&(O=(0,resolve_1.resolveUrl)(this.opts.uriResolver,O,G))}let F;if(typeof Q!="boolean"&&Q.$ref&&!(0,util_1$k.schemaHasRulesButRef)(Q,this.RULES)){const W=(0,resolve_1.resolveUrl)(this.opts.uriResolver,O,Q.$ref);F=resolveSchema.call(this,j,W)}const{schemaId:q}=this.opts;if(F=F||new SchemaEnv({schema:Q,schemaId:q,root:j,baseId:O}),F.schema!==F.root.schema)return F}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$2="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1;var require$$9={$id:$id$1,description,type:type$2,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1},uri$1={},uri_all={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(X,O){(function(Q,j){j(O)})(commonjsGlobal,function(Q){function j(){for(var ue=arguments.length,le=Array(ue),ge=0;ge<ue;ge++)le[ge]=arguments[ge];if(le.length>1){le[0]=le[0].slice(0,-1);for(var ve=le.length-1,be=1;be<ve;++be)le[be]=le[be].slice(1,-1);return le[ve]=le[ve].slice(1),le.join("")}else return le[0]}function U(ue){return"(?:"+ue+")"}function F(ue){return ue===void 0?"undefined":ue===null?"null":Object.prototype.toString.call(ue).split(" ").pop().split("]").shift().toLowerCase()}function q(ue){return ue.toUpperCase()}function W(ue){return ue!=null?ue instanceof Array?ue:typeof ue.length!="number"||ue.split||ue.setInterval||ue.call?[ue]:Array.prototype.slice.call(ue):[]}function Y(ue,le){var ge=ue;if(le)for(var ve in le)ge[ve]=le[ve];return ge}function G(ue){var le="[A-Za-z]",ge="[0-9]",ve=j(ge,"[A-Fa-f]"),be=U(U("%[EFef]"+ve+"%"+ve+ve+"%"+ve+ve)+"|"+U("%[89A-Fa-f]"+ve+"%"+ve+ve)+"|"+U("%"+ve+ve)),Ee="[\\:\\/\\?\\#\\[\\]\\@]",Re="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",je=j(Ee,Re),Ve=ue?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ge=ue?"[\\uE000-\\uF8FF]":"[]",Le=j(le,ge,"[\\-\\.\\_\\~]",Ve);U(le+j(le,ge,"[\\+\\-\\.]")+"*"),U(U(be+"|"+j(Le,Re,"[\\:]"))+"*");var ze=U(U("25[0-5]")+"|"+U("2[0-4]"+ge)+"|"+U("1"+ge+ge)+"|"+U("0?[1-9]"+ge)+"|0?0?"+ge),He=U(ze+"\\."+ze+"\\."+ze+"\\."+ze),Me=U(ve+"{1,4}"),Fe=U(U(Me+"\\:"+Me)+"|"+He),Je=U(U(Me+"\\:")+"{6}"+Fe),qe=U("\\:\\:"+U(Me+"\\:")+"{5}"+Fe),ft=U(U(Me)+"?\\:\\:"+U(Me+"\\:")+"{4}"+Fe),lt=U(U(U(Me+"\\:")+"{0,1}"+Me)+"?\\:\\:"+U(Me+"\\:")+"{3}"+Fe),ct=U(U(U(Me+"\\:")+"{0,2}"+Me)+"?\\:\\:"+U(Me+"\\:")+"{2}"+Fe),St=U(U(U(Me+"\\:")+"{0,3}"+Me)+"?\\:\\:"+Me+"\\:"+Fe),mt=U(U(U(Me+"\\:")+"{0,4}"+Me)+"?\\:\\:"+Fe),rt=U(U(U(Me+"\\:")+"{0,5}"+Me)+"?\\:\\:"+Me),dt=U(U(U(Me+"\\:")+"{0,6}"+Me)+"?\\:\\:"),gt=U([Je,qe,ft,lt,ct,St,mt,rt,dt].join("|")),ht=U(U(Le+"|"+be)+"+");U("[vV]"+ve+"+\\."+j(Le,Re,"[\\:]")+"+"),U(U(be+"|"+j(Le,Re))+"*");var Qt=U(be+"|"+j(Le,Re,"[\\:\\@]"));return U(U(be+"|"+j(Le,Re,"[\\@]"))+"+"),U(U(Qt+"|"+j("[\\/\\?]",Ge))+"*"),{NOT_SCHEME:new RegExp(j("[^]",le,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(j("[^\\%\\:]",Le,Re),"g"),NOT_HOST:new RegExp(j("[^\\%\\[\\]\\:]",Le,Re),"g"),NOT_PATH:new RegExp(j("[^\\%\\/\\:\\@]",Le,Re),"g"),NOT_PATH_NOSCHEME:new RegExp(j("[^\\%\\/\\@]",Le,Re),"g"),NOT_QUERY:new RegExp(j("[^\\%]",Le,Re,"[\\:\\@\\/\\?]",Ge),"g"),NOT_FRAGMENT:new RegExp(j("[^\\%]",Le,Re,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(j("[^]",Le,Re),"g"),UNRESERVED:new RegExp(Le,"g"),OTHER_CHARS:new RegExp(j("[^\\%]",Le,je),"g"),PCT_ENCODED:new RegExp(be,"g"),IPV4ADDRESS:new RegExp("^("+He+")$"),IPV6ADDRESS:new RegExp("^\\[?("+gt+")"+U(U("\\%25|\\%(?!"+ve+"{2})")+"("+ht+")")+"?\\]?$")}}var K=G(!1),J=G(!0),ee=function(){function ue(le,ge){var ve=[],be=!0,Ee=!1,Re=void 0;try{for(var je=le[Symbol.iterator](),Ve;!(be=(Ve=je.next()).done)&&(ve.push(Ve.value),!(ge&&ve.length===ge));be=!0);}catch(Ge){Ee=!0,Re=Ge}finally{try{!be&&je.return&&je.return()}finally{if(Ee)throw Re}}return ve}return function(le,ge){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return ue(le,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),te=function(ue){if(Array.isArray(ue)){for(var le=0,ge=Array(ue.length);le<ue.length;le++)ge[le]=ue[le];return ge}else return Array.from(ue)},re=2147483647,oe=36,se=1,ne=26,de=38,he=700,fe=72,Oe=128,ce="-",me=/^xn--/,we=/[^\0-\x7E]/,ke=/[\x2E\u3002\uFF0E\uFF61]/g,Ce={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Qe=oe-se,Ae=Math.floor,Be=String.fromCharCode;function Ie(ue){throw new RangeError(Ce[ue])}function Ue(ue,le){for(var ge=[],ve=ue.length;ve--;)ge[ve]=le(ue[ve]);return ge}function Xe(ue,le){var ge=ue.split("@"),ve="";ge.length>1&&(ve=ge[0]+"@",ue=ge[1]),ue=ue.replace(ke,".");var be=ue.split("."),Ee=Ue(be,le).join(".");return ve+Ee}function Ke(ue){for(var le=[],ge=0,ve=ue.length;ge<ve;){var be=ue.charCodeAt(ge++);if(be>=55296&&be<=56319&&ge<ve){var Ee=ue.charCodeAt(ge++);(Ee&64512)==56320?le.push(((be&1023)<<10)+(Ee&1023)+65536):(le.push(be),ge--)}else le.push(be)}return le}var We=function(le){return String.fromCodePoint.apply(String,te(le))},Ze=function(le){return le-48<10?le-22:le-65<26?le-65:le-97<26?le-97:oe},_e=function(le,ge){return le+22+75*(le<26)-((ge!=0)<<5)},ye=function(le,ge,ve){var be=0;for(le=ve?Ae(le/he):le>>1,le+=Ae(le/ge);le>Qe*ne>>1;be+=oe)le=Ae(le/Qe);return Ae(be+(Qe+1)*le/(le+de))},xe=function(le){var ge=[],ve=le.length,be=0,Ee=Oe,Re=fe,je=le.lastIndexOf(ce);je<0&&(je=0);for(var Ve=0;Ve<je;++Ve)le.charCodeAt(Ve)>=128&&Ie("not-basic"),ge.push(le.charCodeAt(Ve));for(var Ge=je>0?je+1:0;Ge<ve;){for(var Le=be,ze=1,He=oe;;He+=oe){Ge>=ve&&Ie("invalid-input");var Me=Ze(le.charCodeAt(Ge++));(Me>=oe||Me>Ae((re-be)/ze))&&Ie("overflow"),be+=Me*ze;var Fe=He<=Re?se:He>=Re+ne?ne:He-Re;if(Me<Fe)break;var Je=oe-Fe;ze>Ae(re/Je)&&Ie("overflow"),ze*=Je}var qe=ge.length+1;Re=ye(be-Le,qe,Le==0),Ae(be/qe)>re-Ee&&Ie("overflow"),Ee+=Ae(be/qe),be%=qe,ge.splice(be++,0,Ee)}return String.fromCodePoint.apply(String,ge)},$e=function(le){var ge=[];le=Ke(le);var ve=le.length,be=Oe,Ee=0,Re=fe,je=!0,Ve=!1,Ge=void 0;try{for(var Le=le[Symbol.iterator](),ze;!(je=(ze=Le.next()).done);je=!0){var He=ze.value;He<128&&ge.push(Be(He))}}catch(Rt){Ve=!0,Ge=Rt}finally{try{!je&&Le.return&&Le.return()}finally{if(Ve)throw Ge}}var Me=ge.length,Fe=Me;for(Me&&ge.push(ce);Fe<ve;){var Je=re,qe=!0,ft=!1,lt=void 0;try{for(var ct=le[Symbol.iterator](),St;!(qe=(St=ct.next()).done);qe=!0){var mt=St.value;mt>=be&&mt<Je&&(Je=mt)}}catch(Rt){ft=!0,lt=Rt}finally{try{!qe&&ct.return&&ct.return()}finally{if(ft)throw lt}}var rt=Fe+1;Je-be>Ae((re-Ee)/rt)&&Ie("overflow"),Ee+=(Je-be)*rt,be=Je;var dt=!0,gt=!1,ht=void 0;try{for(var Qt=le[Symbol.iterator](),Yt;!(dt=(Yt=Qt.next()).done);dt=!0){var Gt=Yt.value;if(Gt<be&&++Ee>re&&Ie("overflow"),Gt==be){for(var Dt=Ee,Lt=oe;;Lt+=oe){var Nt=Lt<=Re?se:Lt>=Re+ne?ne:Lt-Re;if(Dt<Nt)break;var Ht=Dt-Nt,Kt=oe-Nt;ge.push(Be(_e(Nt+Ht%Kt,0))),Dt=Ae(Ht/Kt)}ge.push(Be(_e(Dt,0))),Re=ye(Ee,rt,Fe==Me),Ee=0,++Fe}}}catch(Rt){gt=!0,ht=Rt}finally{try{!dt&&Qt.return&&Qt.return()}finally{if(gt)throw ht}}++Ee,++be}return ge.join("")},ae=function(le){return Xe(le,function(ge){return me.test(ge)?xe(ge.slice(4).toLowerCase()):ge})},pe=function(le){return Xe(le,function(ge){return we.test(ge)?"xn--"+$e(ge):ge})},Se={version:"2.1.0",ucs2:{decode:Ke,encode:We},decode:xe,encode:$e,toASCII:pe,toUnicode:ae},Pe={};function Te(ue){var le=ue.charCodeAt(0),ge=void 0;return le<16?ge="%0"+le.toString(16).toUpperCase():le<128?ge="%"+le.toString(16).toUpperCase():le<2048?ge="%"+(le>>6|192).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase():ge="%"+(le>>12|224).toString(16).toUpperCase()+"%"+(le>>6&63|128).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase(),ge}function De(ue){for(var le="",ge=0,ve=ue.length;ge<ve;){var be=parseInt(ue.substr(ge+1,2),16);if(be<128)le+=String.fromCharCode(be),ge+=3;else if(be>=194&&be<224){if(ve-ge>=6){var Ee=parseInt(ue.substr(ge+4,2),16);le+=String.fromCharCode((be&31)<<6|Ee&63)}else le+=ue.substr(ge,6);ge+=6}else if(be>=224){if(ve-ge>=9){var Re=parseInt(ue.substr(ge+4,2),16),je=parseInt(ue.substr(ge+7,2),16);le+=String.fromCharCode((be&15)<<12|(Re&63)<<6|je&63)}else le+=ue.substr(ge,9);ge+=9}else le+=ue.substr(ge,3),ge+=3}return le}function Ne(ue,le){function ge(ve){var be=De(ve);return be.match(le.UNRESERVED)?be:ve}return ue.scheme&&(ue.scheme=String(ue.scheme).replace(le.PCT_ENCODED,ge).toLowerCase().replace(le.NOT_SCHEME,"")),ue.userinfo!==void 0&&(ue.userinfo=String(ue.userinfo).replace(le.PCT_ENCODED,ge).replace(le.NOT_USERINFO,Te).replace(le.PCT_ENCODED,q)),ue.host!==void 0&&(ue.host=String(ue.host).replace(le.PCT_ENCODED,ge).toLowerCase().replace(le.NOT_HOST,Te).replace(le.PCT_ENCODED,q)),ue.path!==void 0&&(ue.path=String(ue.path).replace(le.PCT_ENCODED,ge).replace(ue.scheme?le.NOT_PATH:le.NOT_PATH_NOSCHEME,Te).replace(le.PCT_ENCODED,q)),ue.query!==void 0&&(ue.query=String(ue.query).replace(le.PCT_ENCODED,ge).replace(le.NOT_QUERY,Te).replace(le.PCT_ENCODED,q)),ue.fragment!==void 0&&(ue.fragment=String(ue.fragment).replace(le.PCT_ENCODED,ge).replace(le.NOT_FRAGMENT,Te).replace(le.PCT_ENCODED,q)),ue}function Ye(ue){return ue.replace(/^0*(.*)/,"$1")||"0"}function nt(ue,le){var ge=ue.match(le.IPV4ADDRESS)||[],ve=ee(ge,2),be=ve[1];return be?be.split(".").map(Ye).join("."):ue}function Ot(ue,le){var ge=ue.match(le.IPV6ADDRESS)||[],ve=ee(ge,3),be=ve[1],Ee=ve[2];if(be){for(var Re=be.toLowerCase().split("::").reverse(),je=ee(Re,2),Ve=je[0],Ge=je[1],Le=Ge?Ge.split(":").map(Ye):[],ze=Ve.split(":").map(Ye),He=le.IPV4ADDRESS.test(ze[ze.length-1]),Me=He?7:8,Fe=ze.length-Me,Je=Array(Me),qe=0;qe<Me;++qe)Je[qe]=Le[qe]||ze[Fe+qe]||"";He&&(Je[Me-1]=nt(Je[Me-1],le));var ft=Je.reduce(function(rt,dt,gt){if(!dt||dt==="0"){var ht=rt[rt.length-1];ht&&ht.index+ht.length===gt?ht.length++:rt.push({index:gt,length:1})}return rt},[]),lt=ft.sort(function(rt,dt){return dt.length-rt.length})[0],ct=void 0;if(lt&&lt.length>1){var St=Je.slice(0,lt.index),mt=Je.slice(lt.index+lt.length);ct=St.join(":")+"::"+mt.join(":")}else ct=Je.join(":");return Ee&&(ct+="%"+Ee),ct}else return ue}var xt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_t="".match(/(){0}/)[1]===void 0;function tt(ue){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},ve=le.iri!==!1?J:K;le.reference==="suffix"&&(ue=(le.scheme?le.scheme+":":"")+"//"+ue);var be=ue.match(xt);if(be){_t?(ge.scheme=be[1],ge.userinfo=be[3],ge.host=be[4],ge.port=parseInt(be[5],10),ge.path=be[6]||"",ge.query=be[7],ge.fragment=be[8],isNaN(ge.port)&&(ge.port=be[5])):(ge.scheme=be[1]||void 0,ge.userinfo=ue.indexOf("@")!==-1?be[3]:void 0,ge.host=ue.indexOf("//")!==-1?be[4]:void 0,ge.port=parseInt(be[5],10),ge.path=be[6]||"",ge.query=ue.indexOf("?")!==-1?be[7]:void 0,ge.fragment=ue.indexOf("#")!==-1?be[8]:void 0,isNaN(ge.port)&&(ge.port=ue.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?be[4]:void 0)),ge.host&&(ge.host=Ot(nt(ge.host,ve),ve)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",le.reference&&le.reference!=="suffix"&&le.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+le.reference+" reference.");var Ee=Pe[(le.scheme||ge.scheme||"").toLowerCase()];if(!le.unicodeSupport&&(!Ee||!Ee.unicodeSupport)){if(ge.host&&(le.domainHost||Ee&&Ee.domainHost))try{ge.host=Se.toASCII(ge.host.replace(ve.PCT_ENCODED,De).toLowerCase())}catch(Re){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Re}Ne(ge,K)}else Ne(ge,ve);Ee&&Ee.parse&&Ee.parse(ge,le)}else ge.error=ge.error||"URI can not be parsed.";return ge}function kt(ue,le){var ge=le.iri!==!1?J:K,ve=[];return ue.userinfo!==void 0&&(ve.push(ue.userinfo),ve.push("@")),ue.host!==void 0&&ve.push(Ot(nt(String(ue.host),ge),ge).replace(ge.IPV6ADDRESS,function(be,Ee,Re){return"["+Ee+(Re?"%25"+Re:"")+"]"})),(typeof ue.port=="number"||typeof ue.port=="string")&&(ve.push(":"),ve.push(String(ue.port))),ve.length?ve.join(""):void 0}var yt=/^\.\.?\//,$t=/^\/\.(\/|$)/,bt=/^\/\.\.(\/|$)/,Ct=/^\/?(?:.|\n)*?(?=\/|$)/;function ot(ue){for(var le=[];ue.length;)if(ue.match(yt))ue=ue.replace(yt,"");else if(ue.match($t))ue=ue.replace($t,"/");else if(ue.match(bt))ue=ue.replace(bt,"/"),le.pop();else if(ue==="."||ue==="..")ue="";else{var ge=ue.match(Ct);if(ge){var ve=ge[0];ue=ue.slice(ve.length),le.push(ve)}else throw new Error("Unexpected dot segment condition")}return le.join("")}function et(ue){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=le.iri?J:K,ve=[],be=Pe[(le.scheme||ue.scheme||"").toLowerCase()];if(be&&be.serialize&&be.serialize(ue,le),ue.host&&!ge.IPV6ADDRESS.test(ue.host)){if(le.domainHost||be&&be.domainHost)try{ue.host=le.iri?Se.toUnicode(ue.host):Se.toASCII(ue.host.replace(ge.PCT_ENCODED,De).toLowerCase())}catch(je){ue.error=ue.error||"Host's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+je}}Ne(ue,ge),le.reference!=="suffix"&&ue.scheme&&(ve.push(ue.scheme),ve.push(":"));var Ee=kt(ue,le);if(Ee!==void 0&&(le.reference!=="suffix"&&ve.push("//"),ve.push(Ee),ue.path&&ue.path.charAt(0)!=="/"&&ve.push("/")),ue.path!==void 0){var Re=ue.path;!le.absolutePath&&(!be||!be.absolutePath)&&(Re=ot(Re)),Ee===void 0&&(Re=Re.replace(/^\/\//,"/%2F")),ve.push(Re)}return ue.query!==void 0&&(ve.push("?"),ve.push(ue.query)),ue.fragment!==void 0&&(ve.push("#"),ve.push(ue.fragment)),ve.join("")}function vt(ue,le){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=arguments[3],be={};return ve||(ue=tt(et(ue,ge),ge),le=tt(et(le,ge),ge)),ge=ge||{},!ge.tolerant&&le.scheme?(be.scheme=le.scheme,be.userinfo=le.userinfo,be.host=le.host,be.port=le.port,be.path=ot(le.path||""),be.query=le.query):(le.userinfo!==void 0||le.host!==void 0||le.port!==void 0?(be.userinfo=le.userinfo,be.host=le.host,be.port=le.port,be.path=ot(le.path||""),be.query=le.query):(le.path?(le.path.charAt(0)==="/"?be.path=ot(le.path):((ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0)&&!ue.path?be.path="/"+le.path:ue.path?be.path=ue.path.slice(0,ue.path.lastIndexOf("/")+1)+le.path:be.path=le.path,be.path=ot(be.path)),be.query=le.query):(be.path=ue.path,le.query!==void 0?be.query=le.query:be.query=ue.query),be.userinfo=ue.userinfo,be.host=ue.host,be.port=ue.port),be.scheme=ue.scheme),be.fragment=le.fragment,be}function Pt(ue,le,ge){var ve=Y({scheme:"null"},ge);return et(vt(tt(ue,ve),tt(le,ve),ve,!0),ve)}function ut(ue,le){return typeof ue=="string"?ue=et(tt(ue,le),le):F(ue)==="object"&&(ue=tt(et(ue,le),le)),ue}function Tt(ue,le,ge){return typeof ue=="string"?ue=et(tt(ue,ge),ge):F(ue)==="object"&&(ue=et(ue,ge)),typeof le=="string"?le=et(tt(le,ge),ge):F(le)==="object"&&(le=et(le,ge)),ue===le}function It(ue,le){return ue&&ue.toString().replace(!le||!le.iri?K.ESCAPE:J.ESCAPE,Te)}function it(ue,le){return ue&&ue.toString().replace(!le||!le.iri?K.PCT_ENCODED:J.PCT_ENCODED,De)}var pt={scheme:"http",domainHost:!0,parse:function(le,ge){return le.host||(le.error=le.error||"HTTP URIs must have a host."),le},serialize:function(le,ge){var ve=String(le.scheme).toLowerCase()==="https";return(le.port===(ve?443:80)||le.port==="")&&(le.port=void 0),le.path||(le.path="/"),le}},Bt={scheme:"https",domainHost:pt.domainHost,parse:pt.parse,serialize:pt.serialize};function Zt(ue){return typeof ue.secure=="boolean"?ue.secure:String(ue.scheme).toLowerCase()==="wss"}var At={scheme:"ws",domainHost:!0,parse:function(le,ge){var ve=le;return ve.secure=Zt(ve),ve.resourceName=(ve.path||"/")+(ve.query?"?"+ve.query:""),ve.path=void 0,ve.query=void 0,ve},serialize:function(le,ge){if((le.port===(Zt(le)?443:80)||le.port==="")&&(le.port=void 0),typeof le.secure=="boolean"&&(le.scheme=le.secure?"wss":"ws",le.secure=void 0),le.resourceName){var ve=le.resourceName.split("?"),be=ee(ve,2),Ee=be[0],Re=be[1];le.path=Ee&&Ee!=="/"?Ee:void 0,le.query=Re,le.resourceName=void 0}return le.fragment=void 0,le}},Ut={scheme:"wss",domainHost:At.domainHost,parse:At.parse,serialize:At.serialize},Jt={},zt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",at="[0-9A-Fa-f]",ei=U(U("%[EFef]"+at+"%"+at+at+"%"+at+at)+"|"+U("%[89A-Fa-f]"+at+"%"+at+at)+"|"+U("%"+at+at)),ti="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ii="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ri=j(ii,'[\\"\\\\]'),si="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ni=new RegExp(zt,"g"),wt=new RegExp(ei,"g"),oi=new RegExp(j("[^]",ti,"[\\.]",'[\\"]',ri),"g"),Vt=new RegExp(j("[^]",zt,si),"g"),ai=Vt;function Xt(ue){var le=De(ue);return le.match(ni)?le:ue}var Ft={scheme:"mailto",parse:function(le,ge){var ve=le,be=ve.to=ve.path?ve.path.split(","):[];if(ve.path=void 0,ve.query){for(var Ee=!1,Re={},je=ve.query.split("&"),Ve=0,Ge=je.length;Ve<Ge;++Ve){var Le=je[Ve].split("=");switch(Le[0]){case"to":for(var ze=Le[1].split(","),He=0,Me=ze.length;He<Me;++He)be.push(ze[He]);break;case"subject":ve.subject=it(Le[1],ge);break;case"body":ve.body=it(Le[1],ge);break;default:Ee=!0,Re[it(Le[0],ge)]=it(Le[1],ge);break}}Ee&&(ve.headers=Re)}ve.query=void 0;for(var Fe=0,Je=be.length;Fe<Je;++Fe){var qe=be[Fe].split("@");if(qe[0]=it(qe[0]),ge.unicodeSupport)qe[1]=it(qe[1],ge).toLowerCase();else try{qe[1]=Se.toASCII(it(qe[1],ge).toLowerCase())}catch(ft){ve.error=ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+ft}be[Fe]=qe.join("@")}return ve},serialize:function(le,ge){var ve=le,be=W(le.to);if(be){for(var Ee=0,Re=be.length;Ee<Re;++Ee){var je=String(be[Ee]),Ve=je.lastIndexOf("@"),Ge=je.slice(0,Ve).replace(wt,Xt).replace(wt,q).replace(oi,Te),Le=je.slice(Ve+1);try{Le=ge.iri?Se.toUnicode(Le):Se.toASCII(it(Le,ge).toLowerCase())}catch(Fe){ve.error=ve.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+Fe}be[Ee]=Ge+"@"+Le}ve.path=be.join(",")}var ze=le.headers=le.headers||{};le.subject&&(ze.subject=le.subject),le.body&&(ze.body=le.body);var He=[];for(var Me in ze)ze[Me]!==Jt[Me]&&He.push(Me.replace(wt,Xt).replace(wt,q).replace(Vt,Te)+"="+ze[Me].replace(wt,Xt).replace(wt,q).replace(ai,Te));return He.length&&(ve.query=He.join("&")),ve}},li=/^([^\:]+)\:(.*)/,qt={scheme:"urn",parse:function(le,ge){var ve=le.path&&le.path.match(li),be=le;if(ve){var Ee=ge.scheme||be.scheme||"urn",Re=ve[1].toLowerCase(),je=ve[2],Ve=Ee+":"+(ge.nid||Re),Ge=Pe[Ve];be.nid=Re,be.nss=je,be.path=void 0,Ge&&(be=Ge.parse(be,ge))}else be.error=be.error||"URN can not be parsed.";return be},serialize:function(le,ge){var ve=ge.scheme||le.scheme||"urn",be=le.nid,Ee=ve+":"+(ge.nid||be),Re=Pe[Ee];Re&&(le=Re.serialize(le,ge));var je=le,Ve=le.nss;return je.path=(be||ge.nid)+":"+Ve,je}},ci=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Wt={scheme:"urn:uuid",parse:function(le,ge){var ve=le;return ve.uuid=ve.nss,ve.nss=void 0,!ge.tolerant&&(!ve.uuid||!ve.uuid.match(ci))&&(ve.error=ve.error||"UUID is not valid."),ve},serialize:function(le,ge){var ve=le;return ve.nss=(le.uuid||"").toLowerCase(),ve}};Pe[pt.scheme]=pt,Pe[Bt.scheme]=Bt,Pe[At.scheme]=At,Pe[Ut.scheme]=Ut,Pe[Ft.scheme]=Ft,Pe[qt.scheme]=qt,Pe[Wt.scheme]=Wt,Q.SCHEMES=Pe,Q.pctEncChar=Te,Q.pctDecChars=De,Q.parse=tt,Q.removeDotSegments=ot,Q.serialize=et,Q.resolveComponents=vt,Q.resolve=Pt,Q.normalize=ut,Q.equal=Tt,Q.escapeComponent=It,Q.unescapeComponent=it,Object.defineProperty(Q,"__esModule",{value:!0})})})(uri_all,uri_all.exports);Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=uri_all.exports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=void 0;var O=validate;Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return O.KeywordCxt}});var Q=codegen;Object.defineProperty(X,"_",{enumerable:!0,get:function(){return Q._}}),Object.defineProperty(X,"str",{enumerable:!0,get:function(){return Q.str}}),Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return Q.stringify}}),Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return Q.nil}}),Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return Q.Name}}),Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return Q.CodeGen}});const j=validation_error,U=ref_error,F=rules,q=compile,W=codegen,Y=resolve$1,G=dataType,K=util$1,J=require$$9,ee=uri$1,te=(_e,ye)=>new RegExp(_e,ye);te.code="new RegExp";const re=["removeAdditional","useDefaults","coerceTypes"],oe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),se={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ne={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},de=200;function he(_e){var ye,xe,$e,ae,pe,Se,Pe,Te,De,Ne,Ye,nt,Ot,xt,_t,tt,kt,yt,$t,bt,Ct,ot,et,vt,Pt;const ut=_e.strict,Tt=(ye=_e.code)===null||ye===void 0?void 0:ye.optimize,It=Tt===!0||Tt===void 0?1:Tt||0,it=($e=(xe=_e.code)===null||xe===void 0?void 0:xe.regExp)!==null&&$e!==void 0?$e:te,pt=(ae=_e.uriResolver)!==null&&ae!==void 0?ae:ee.default;return{strictSchema:(Se=(pe=_e.strictSchema)!==null&&pe!==void 0?pe:ut)!==null&&Se!==void 0?Se:!0,strictNumbers:(Te=(Pe=_e.strictNumbers)!==null&&Pe!==void 0?Pe:ut)!==null&&Te!==void 0?Te:!0,strictTypes:(Ne=(De=_e.strictTypes)!==null&&De!==void 0?De:ut)!==null&&Ne!==void 0?Ne:"log",strictTuples:(nt=(Ye=_e.strictTuples)!==null&&Ye!==void 0?Ye:ut)!==null&&nt!==void 0?nt:"log",strictRequired:(xt=(Ot=_e.strictRequired)!==null&&Ot!==void 0?Ot:ut)!==null&&xt!==void 0?xt:!1,code:_e.code?{..._e.code,optimize:It,regExp:it}:{optimize:It,regExp:it},loopRequired:(_t=_e.loopRequired)!==null&&_t!==void 0?_t:de,loopEnum:(tt=_e.loopEnum)!==null&&tt!==void 0?tt:de,meta:(kt=_e.meta)!==null&&kt!==void 0?kt:!0,messages:(yt=_e.messages)!==null&&yt!==void 0?yt:!0,inlineRefs:($t=_e.inlineRefs)!==null&&$t!==void 0?$t:!0,schemaId:(bt=_e.schemaId)!==null&&bt!==void 0?bt:"$id",addUsedSchema:(Ct=_e.addUsedSchema)!==null&&Ct!==void 0?Ct:!0,validateSchema:(ot=_e.validateSchema)!==null&&ot!==void 0?ot:!0,validateFormats:(et=_e.validateFormats)!==null&&et!==void 0?et:!0,unicodeRegExp:(vt=_e.unicodeRegExp)!==null&&vt!==void 0?vt:!0,int32range:(Pt=_e.int32range)!==null&&Pt!==void 0?Pt:!0,uriResolver:pt}}class fe{constructor(ye={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ye=this.opts={...ye,...he(ye)};const{es5:xe,lines:$e}=this.opts.code;this.scope=new W.ValueScope({scope:{},prefixes:oe,es5:xe,lines:$e}),this.logger=Ae(ye.logger);const ae=ye.validateFormats;ye.validateFormats=!1,this.RULES=(0,F.getRules)(),Oe.call(this,se,ye,"NOT SUPPORTED"),Oe.call(this,ne,ye,"DEPRECATED","warn"),this._metaOpts=Ce.call(this),ye.formats&&we.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ye.keywords&&ke.call(this,ye.keywords),typeof ye.meta=="object"&&this.addMetaSchema(ye.meta),me.call(this),ye.validateFormats=ae}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ye,meta:xe,schemaId:$e}=this.opts;let ae=J;$e==="id"&&(ae={...J},ae.id=ae.$id,delete ae.$id),xe&&ye&&this.addMetaSchema(ae,ae[$e],!1)}defaultMeta(){const{meta:ye,schemaId:xe}=this.opts;return this.opts.defaultMeta=typeof ye=="object"?ye[xe]||ye:void 0}validate(ye,xe){let $e;if(typeof ye=="string"){if($e=this.getSchema(ye),!$e)throw new Error(`no schema with key or ref "${ye}"`)}else $e=this.compile(ye);const ae=$e(xe);return"$async"in $e||(this.errors=$e.errors),ae}compile(ye,xe){const $e=this._addSchema(ye,xe);return $e.validate||this._compileSchemaEnv($e)}compileAsync(ye,xe){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:$e}=this.opts;return ae.call(this,ye,xe);async function ae(Ne,Ye){await pe.call(this,Ne.$schema);const nt=this._addSchema(Ne,Ye);return nt.validate||Se.call(this,nt)}async function pe(Ne){Ne&&!this.getSchema(Ne)&&await ae.call(this,{$ref:Ne},!0)}async function Se(Ne){try{return this._compileSchemaEnv(Ne)}catch(Ye){if(!(Ye instanceof U.default))throw Ye;return Pe.call(this,Ye),await Te.call(this,Ye.missingSchema),Se.call(this,Ne)}}function Pe({missingSchema:Ne,missingRef:Ye}){if(this.refs[Ne])throw new Error(`AnySchema ${Ne} is loaded but ${Ye} cannot be resolved`)}async function Te(Ne){const Ye=await De.call(this,Ne);this.refs[Ne]||await pe.call(this,Ye.$schema),this.refs[Ne]||this.addSchema(Ye,Ne,xe)}async function De(Ne){const Ye=this._loading[Ne];if(Ye)return Ye;try{return await(this._loading[Ne]=$e(Ne))}finally{delete this._loading[Ne]}}}addSchema(ye,xe,$e,ae=this.opts.validateSchema){if(Array.isArray(ye)){for(const Se of ye)this.addSchema(Se,void 0,$e,ae);return this}let pe;if(typeof ye=="object"){const{schemaId:Se}=this.opts;if(pe=ye[Se],pe!==void 0&&typeof pe!="string")throw new Error(`schema ${Se} must be string`)}return xe=(0,Y.normalizeId)(xe||pe),this._checkUnique(xe),this.schemas[xe]=this._addSchema(ye,$e,xe,ae,!0),this}addMetaSchema(ye,xe,$e=this.opts.validateSchema){return this.addSchema(ye,xe,!0,$e),this}validateSchema(ye,xe){if(typeof ye=="boolean")return!0;let $e;if($e=ye.$schema,$e!==void 0&&typeof $e!="string")throw new Error("$schema must be a string");if($e=$e||this.opts.defaultMeta||this.defaultMeta(),!$e)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ae=this.validate($e,ye);if(!ae&&xe){const pe="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(pe);else throw new Error(pe)}return ae}getSchema(ye){let xe;for(;typeof(xe=ce.call(this,ye))=="string";)ye=xe;if(xe===void 0){const{schemaId:$e}=this.opts,ae=new q.SchemaEnv({schema:{},schemaId:$e});if(xe=q.resolveSchema.call(this,ae,ye),!xe)return;this.refs[ye]=xe}return xe.validate||this._compileSchemaEnv(xe)}removeSchema(ye){if(ye instanceof RegExp)return this._removeAllSchemas(this.schemas,ye),this._removeAllSchemas(this.refs,ye),this;switch(typeof ye){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const xe=ce.call(this,ye);return typeof xe=="object"&&this._cache.delete(xe.schema),delete this.schemas[ye],delete this.refs[ye],this}case"object":{const xe=ye;this._cache.delete(xe);let $e=ye[this.opts.schemaId];return $e&&($e=(0,Y.normalizeId)($e),delete this.schemas[$e],delete this.refs[$e]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ye){for(const xe of ye)this.addKeyword(xe);return this}addKeyword(ye,xe){let $e;if(typeof ye=="string")$e=ye,typeof xe=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),xe.keyword=$e);else if(typeof ye=="object"&&xe===void 0){if(xe=ye,$e=xe.keyword,Array.isArray($e)&&!$e.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ie.call(this,$e,xe),!xe)return(0,K.eachItem)($e,pe=>Ue.call(this,pe)),this;Ke.call(this,xe);const ae={...xe,type:(0,G.getJSONTypes)(xe.type),schemaType:(0,G.getJSONTypes)(xe.schemaType)};return(0,K.eachItem)($e,ae.type.length===0?pe=>Ue.call(this,pe,ae):pe=>ae.type.forEach(Se=>Ue.call(this,pe,ae,Se))),this}getKeyword(ye){const xe=this.RULES.all[ye];return typeof xe=="object"?xe.definition:!!xe}removeKeyword(ye){const{RULES:xe}=this;delete xe.keywords[ye],delete xe.all[ye];for(const $e of xe.rules){const ae=$e.rules.findIndex(pe=>pe.keyword===ye);ae>=0&&$e.rules.splice(ae,1)}return this}addFormat(ye,xe){return typeof xe=="string"&&(xe=new RegExp(xe)),this.formats[ye]=xe,this}errorsText(ye=this.errors,{separator:xe=", ",dataVar:$e="data"}={}){return!ye||ye.length===0?"No errors":ye.map(ae=>`${$e}${ae.instancePath} ${ae.message}`).reduce((ae,pe)=>ae+xe+pe)}$dataMetaSchema(ye,xe){const $e=this.RULES.all;ye=JSON.parse(JSON.stringify(ye));for(const ae of xe){const pe=ae.split("/").slice(1);let Se=ye;for(const Pe of pe)Se=Se[Pe];for(const Pe in $e){const Te=$e[Pe];if(typeof Te!="object")continue;const{$data:De}=Te.definition,Ne=Se[Pe];De&&Ne&&(Se[Pe]=Ze(Ne))}}return ye}_removeAllSchemas(ye,xe){for(const $e in ye){const ae=ye[$e];(!xe||xe.test($e))&&(typeof ae=="string"?delete ye[$e]:ae&&!ae.meta&&(this._cache.delete(ae.schema),delete ye[$e]))}}_addSchema(ye,xe,$e,ae=this.opts.validateSchema,pe=this.opts.addUsedSchema){let Se;const{schemaId:Pe}=this.opts;if(typeof ye=="object")Se=ye[Pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ye!="boolean")throw new Error("schema must be object or boolean")}let Te=this._cache.get(ye);if(Te!==void 0)return Te;$e=(0,Y.normalizeId)(Se||$e);const De=Y.getSchemaRefs.call(this,ye,$e);return Te=new q.SchemaEnv({schema:ye,schemaId:Pe,meta:xe,baseId:$e,localRefs:De}),this._cache.set(Te.schema,Te),pe&&!$e.startsWith("#")&&($e&&this._checkUnique($e),this.refs[$e]=Te),ae&&this.validateSchema(ye,!0),Te}_checkUnique(ye){if(this.schemas[ye]||this.refs[ye])throw new Error(`schema with key or id "${ye}" already exists`)}_compileSchemaEnv(ye){if(ye.meta?this._compileMetaSchema(ye):q.compileSchema.call(this,ye),!ye.validate)throw new Error("ajv implementation error");return ye.validate}_compileMetaSchema(ye){const xe=this.opts;this.opts=this._metaOpts;try{q.compileSchema.call(this,ye)}finally{this.opts=xe}}}X.default=fe,fe.ValidationError=j.default,fe.MissingRefError=U.default;function Oe(_e,ye,xe,$e="error"){for(const ae in _e){const pe=ae;pe in ye&&this.logger[$e](`${xe}: option ${ae}. ${_e[pe]}`)}}function ce(_e){return _e=(0,Y.normalizeId)(_e),this.schemas[_e]||this.refs[_e]}function me(){const _e=this.opts.schemas;if(!!_e)if(Array.isArray(_e))this.addSchema(_e);else for(const ye in _e)this.addSchema(_e[ye],ye)}function we(){for(const _e in this.opts.formats){const ye=this.opts.formats[_e];ye&&this.addFormat(_e,ye)}}function ke(_e){if(Array.isArray(_e)){this.addVocabulary(_e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ye in _e){const xe=_e[ye];xe.keyword||(xe.keyword=ye),this.addKeyword(xe)}}function Ce(){const _e={...this.opts};for(const ye of re)delete _e[ye];return _e}const Qe={log(){},warn(){},error(){}};function Ae(_e){if(_e===!1)return Qe;if(_e===void 0)return console;if(_e.log&&_e.warn&&_e.error)return _e;throw new Error("logger must implement log, warn and error methods")}const Be=/^[a-z_$][a-z0-9_$:-]*$/i;function Ie(_e,ye){const{RULES:xe}=this;if((0,K.eachItem)(_e,$e=>{if(xe.keywords[$e])throw new Error(`Keyword ${$e} is already defined`);if(!Be.test($e))throw new Error(`Keyword ${$e} has invalid name`)}),!!ye&&ye.$data&&!("code"in ye||"validate"in ye))throw new Error('$data keyword must have "code" or "validate" function')}function Ue(_e,ye,xe){var $e;const ae=ye==null?void 0:ye.post;if(xe&&ae)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:pe}=this;let Se=ae?pe.post:pe.rules.find(({type:Te})=>Te===xe);if(Se||(Se={type:xe,rules:[]},pe.rules.push(Se)),pe.keywords[_e]=!0,!ye)return;const Pe={keyword:_e,definition:{...ye,type:(0,G.getJSONTypes)(ye.type),schemaType:(0,G.getJSONTypes)(ye.schemaType)}};ye.before?Xe.call(this,Se,Pe,ye.before):Se.rules.push(Pe),pe.all[_e]=Pe,($e=ye.implements)===null||$e===void 0||$e.forEach(Te=>this.addKeyword(Te))}function Xe(_e,ye,xe){const $e=_e.rules.findIndex(ae=>ae.keyword===xe);$e>=0?_e.rules.splice($e,0,ye):(_e.rules.push(ye),this.logger.warn(`rule ${xe} is not defined`))}function Ke(_e){let{metaSchema:ye}=_e;ye!==void 0&&(_e.$data&&this.opts.$data&&(ye=Ze(ye)),_e.validateSchema=this.compile(ye,!0))}const We={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ze(_e){return{anyOf:[_e,We]}}})(core$2);var draft7={},core$1={},id$1={};Object.defineProperty(id$1,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id$1.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1=ref_error,code_1$8=code$1,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util$1,def$r={keyword:"$ref",schemaType:"string",code(X){const{gen:O,schema:Q,it:j}=X,{baseId:U,schemaEnv:F,validateName:q,opts:W,self:Y}=j,{root:G}=F;if((Q==="#"||Q==="#/")&&U===G.baseId)return J();const K=compile_1$1.resolveRef.call(Y,G,U,Q);if(K===void 0)throw new ref_error_1.default(j.opts.uriResolver,U,Q);if(K instanceof compile_1$1.SchemaEnv)return ee(K);return te(K);function J(){if(F===G)return callRef(X,q,F,F.$async);const re=O.scopeValue("root",{ref:G});return callRef(X,(0,codegen_1$l._)`${re}.validate`,G,G.$async)}function ee(re){const oe=getValidate(X,re);callRef(X,oe,re,re.$async)}function te(re){const oe=O.scopeValue("schema",W.code.source===!0?{ref:re,code:(0,codegen_1$l.stringify)(re)}:{ref:re}),se=O.name("valid"),ne=X.subschema({schema:re,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:oe,errSchemaPath:Q},se);X.mergeEvaluated(ne),X.ok(se)}}};function getValidate(X,O){const{gen:Q}=X;return O.validate?Q.scopeValue("validate",{ref:O.validate}):(0,codegen_1$l._)`${Q.scopeValue("wrapper",{ref:O})}.validate`}ref.getValidate=getValidate;function callRef(X,O,Q,j){const{gen:U,it:F}=X,{allErrors:q,schemaEnv:W,opts:Y}=F,G=Y.passContext?names_1$1.default.this:codegen_1$l.nil;j?K():J();function K(){if(!W.$async)throw new Error("async schema referenced by sync schema");const re=U.let("valid");U.try(()=>{U.code((0,codegen_1$l._)`await ${(0,code_1$8.callValidateCode)(X,O,G)}`),te(O),q||U.assign(re,!0)},oe=>{U.if((0,codegen_1$l._)`!(${oe} instanceof ${F.ValidationError})`,()=>U.throw(oe)),ee(oe),q||U.assign(re,!1)}),X.ok(re)}function J(){X.result((0,code_1$8.callValidateCode)(X,O,G),()=>te(O),()=>ee(O))}function ee(re){const oe=(0,codegen_1$l._)`${re}.errors`;U.assign(names_1$1.default.vErrors,(0,codegen_1$l._)`${names_1$1.default.vErrors} === null ? ${oe} : ${names_1$1.default.vErrors}.concat(${oe})`),U.assign(names_1$1.default.errors,(0,codegen_1$l._)`${names_1$1.default.vErrors}.length`)}function te(re){var oe;if(!F.opts.unevaluated)return;const se=(oe=Q==null?void 0:Q.validate)===null||oe===void 0?void 0:oe.evaluated;if(F.props!==!0)if(se&&!se.dynamicProps)se.props!==void 0&&(F.props=util_1$j.mergeEvaluated.props(U,se.props,F.props));else{const ne=U.var("props",(0,codegen_1$l._)`${re}.evaluated.props`);F.props=util_1$j.mergeEvaluated.props(U,ne,F.props,codegen_1$l.Name)}if(F.items!==!0)if(se&&!se.dynamicItems)se.items!==void 0&&(F.items=util_1$j.mergeEvaluated.items(U,se.items,F.items));else{const ne=U.var("items",(0,codegen_1$l._)`${re}.evaluated.items`);F.items=util_1$j.mergeEvaluated.items(U,ne,F.items,codegen_1$l.Name)}}}ref.callRef=callRef;ref.default=def$r;Object.defineProperty(core$1,"__esModule",{value:!0});const id_1=id$1,ref_1=ref,core=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$1.default=core;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:({keyword:X,schemaCode:O})=>(0,codegen_1$k.str)`must be ${KWDs[X].okStr} ${O}`,params:({keyword:X,schemaCode:O})=>(0,codegen_1$k._)`{comparison: ${KWDs[X].okStr}, limit: ${O}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code(X){const{keyword:O,data:Q,schemaCode:j}=X;X.fail$data((0,codegen_1$k._)`${Q} ${KWDs[O].fail} ${j} || isNaN(${Q})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$h={message:({schemaCode:X})=>(0,codegen_1$j.str)`must be multiple of ${X}`,params:({schemaCode:X})=>(0,codegen_1$j._)`{multipleOf: ${X}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code(X){const{gen:O,data:Q,schemaCode:j,it:U}=X,F=U.opts.multipleOfPrecision,q=O.let("res"),W=F?(0,codegen_1$j._)`Math.abs(Math.round(${q}) - ${q}) > 1e-${F}`:(0,codegen_1$j._)`${q} !== parseInt(${q})`;X.fail$data((0,codegen_1$j._)`(${j} === 0 || (${q} = ${Q}/${j}, ${W}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(X){const O=X.length;let Q=0,j=0,U;for(;j<O;)Q++,U=X.charCodeAt(j++),U>=55296&&U<=56319&&j<O&&(U=X.charCodeAt(j),(U&64512)===56320&&j++);return Q}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util$1,ucs2length_1=ucs2length$1,error$g={message({keyword:X,schemaCode:O}){const Q=X==="maxLength"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${Q} than ${O} characters`},params:({schemaCode:X})=>(0,codegen_1$i._)`{limit: ${X}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code(X){const{keyword:O,data:Q,schemaCode:j,it:U}=X,F=O==="maxLength"?codegen_1$i.operators.GT:codegen_1$i.operators.LT,q=U.opts.unicode===!1?(0,codegen_1$i._)`${Q}.length`:(0,codegen_1$i._)`${(0,util_1$i.useFunc)(X.gen,ucs2length_1.default)}(${Q})`;X.fail$data((0,codegen_1$i._)`${q} ${F} ${j}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code$1,codegen_1$h=codegen,error$f={message:({schemaCode:X})=>(0,codegen_1$h.str)`must match pattern "${X}"`,params:({schemaCode:X})=>(0,codegen_1$h._)`{pattern: ${X}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code(X){const{data:O,$data:Q,schema:j,schemaCode:U,it:F}=X,q=F.opts.unicodeRegExp?"u":"",W=Q?(0,codegen_1$h._)`(new RegExp(${U}, ${q}))`:(0,code_1$7.usePattern)(X,j);X.fail$data((0,codegen_1$h._)`!${W}.test(${O})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$e={message({keyword:X,schemaCode:O}){const Q=X==="maxProperties"?"more":"fewer";return(0,codegen_1$g.str)`must NOT have ${Q} than ${O} properties`},params:({schemaCode:X})=>(0,codegen_1$g._)`{limit: ${X}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code(X){const{keyword:O,data:Q,schemaCode:j}=X,U=O==="maxProperties"?codegen_1$g.operators.GT:codegen_1$g.operators.LT;X.fail$data((0,codegen_1$g._)`Object.keys(${Q}).length ${U} ${j}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code$1,codegen_1$f=codegen,util_1$h=util$1,error$d={message:({params:{missingProperty:X}})=>(0,codegen_1$f.str)`must have required property '${X}'`,params:({params:{missingProperty:X}})=>(0,codegen_1$f._)`{missingProperty: ${X}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code(X){const{gen:O,schema:Q,schemaCode:j,data:U,$data:F,it:q}=X,{opts:W}=q;if(!F&&Q.length===0)return;const Y=Q.length>=W.loopRequired;if(q.allErrors?G():K(),W.strictRequired){const te=X.parentSchema.properties,{definedProperties:re}=X.it;for(const oe of Q)if((te==null?void 0:te[oe])===void 0&&!re.has(oe)){const se=q.schemaEnv.baseId+q.errSchemaPath,ne=`required property "${oe}" is not defined at "${se}" (strictRequired)`;(0,util_1$h.checkStrictMode)(q,ne,q.opts.strictRequired)}}function G(){if(Y||F)X.block$data(codegen_1$f.nil,J);else for(const te of Q)(0,code_1$6.checkReportMissingProp)(X,te)}function K(){const te=O.let("missing");if(Y||F){const re=O.let("valid",!0);X.block$data(re,()=>ee(te,re)),X.ok(re)}else O.if((0,code_1$6.checkMissingProp)(X,Q,te)),(0,code_1$6.reportMissingProp)(X,te),O.else()}function J(){O.forOf("prop",j,te=>{X.setParams({missingProperty:te}),O.if((0,code_1$6.noPropertyInData)(O,U,te,W.ownProperties),()=>X.error())})}function ee(te,re){X.setParams({missingProperty:te}),O.forOf(te,j,()=>{O.assign(re,(0,code_1$6.propertyInData)(O,U,te,W.ownProperties)),O.if((0,codegen_1$f.not)(re),()=>{X.error(),O.break()})},codegen_1$f.nil)}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$c={message({keyword:X,schemaCode:O}){const Q=X==="maxItems"?"more":"fewer";return(0,codegen_1$e.str)`must NOT have ${Q} than ${O} items`},params:({schemaCode:X})=>(0,codegen_1$e._)`{limit: ${X}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code(X){const{keyword:O,data:Q,schemaCode:j}=X,U=O==="maxItems"?codegen_1$e.operators.GT:codegen_1$e.operators.LT;X.fail$data((0,codegen_1$e._)`${Q}.length ${U} ${j}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util$1,equal_1$2=equal$1,error$b={message:({params:{i:X,j:O}})=>(0,codegen_1$d.str)`must NOT have duplicate items (items ## ${O} and ${X} are identical)`,params:({params:{i:X,j:O}})=>(0,codegen_1$d._)`{i: ${X}, j: ${O}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code(X){const{gen:O,data:Q,$data:j,schema:U,parentSchema:F,schemaCode:q,it:W}=X;if(!j&&!U)return;const Y=O.let("valid"),G=F.items?(0,dataType_1.getSchemaTypes)(F.items):[];X.block$data(Y,K,(0,codegen_1$d._)`${q} === false`),X.ok(Y);function K(){const re=O.let("i",(0,codegen_1$d._)`${Q}.length`),oe=O.let("j");X.setParams({i:re,j:oe}),O.assign(Y,!0),O.if((0,codegen_1$d._)`${re} > 1`,()=>(J()?ee:te)(re,oe))}function J(){return G.length>0&&!G.some(re=>re==="object"||re==="array")}function ee(re,oe){const se=O.name("item"),ne=(0,dataType_1.checkDataTypes)(G,se,W.opts.strictNumbers,dataType_1.DataType.Wrong),de=O.const("indices",(0,codegen_1$d._)`{}`);O.for((0,codegen_1$d._)`;${re}--;`,()=>{O.let(se,(0,codegen_1$d._)`${Q}[${re}]`),O.if(ne,(0,codegen_1$d._)`continue`),G.length>1&&O.if((0,codegen_1$d._)`typeof ${se} == "string"`,(0,codegen_1$d._)`${se} += "_"`),O.if((0,codegen_1$d._)`typeof ${de}[${se}] == "number"`,()=>{O.assign(oe,(0,codegen_1$d._)`${de}[${se}]`),X.error(),O.assign(Y,!1).break()}).code((0,codegen_1$d._)`${de}[${se}] = ${re}`)})}function te(re,oe){const se=(0,util_1$g.useFunc)(O,equal_1$2.default),ne=O.name("outer");O.label(ne).for((0,codegen_1$d._)`;${re}--;`,()=>O.for((0,codegen_1$d._)`${oe} = ${re}; ${oe}--;`,()=>O.if((0,codegen_1$d._)`${se}(${Q}[${re}], ${Q}[${oe}])`,()=>{X.error(),O.assign(Y,!1).break(ne)})))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util$1,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:({schemaCode:X})=>(0,codegen_1$c._)`{allowedValue: ${X}}`},def$i={keyword:"const",$data:!0,error:error$a,code(X){const{gen:O,data:Q,$data:j,schemaCode:U,schema:F}=X;j||F&&typeof F=="object"?X.fail$data((0,codegen_1$c._)`!${(0,util_1$f.useFunc)(O,equal_1$1.default)}(${Q}, ${U})`):X.fail((0,codegen_1$c._)`${F} !== ${Q}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util$1,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:({schemaCode:X})=>(0,codegen_1$b._)`{allowedValues: ${X}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code(X){const{gen:O,data:Q,$data:j,schema:U,schemaCode:F,it:q}=X;if(!j&&U.length===0)throw new Error("enum must have non-empty array");const W=U.length>=q.opts.loopEnum;let Y;const G=()=>Y!=null?Y:Y=(0,util_1$e.useFunc)(O,equal_1.default);let K;if(W||j)K=O.let("valid"),X.block$data(K,J);else{if(!Array.isArray(U))throw new Error("ajv implementation error");const te=O.const("vSchema",F);K=(0,codegen_1$b.or)(...U.map((re,oe)=>ee(te,oe)))}X.pass(K);function J(){O.assign(K,!1),O.forOf("v",F,te=>O.if((0,codegen_1$b._)`${G()}(${Q}, ${te})`,()=>O.assign(K,!0).break()))}function ee(te,re){const oe=U[re];return typeof oe=="object"&&oe!==null?(0,codegen_1$b._)`${G()}(${Q}, ${te}[${re}])`:(0,codegen_1$b._)`${Q} === ${oe}`}}};_enum.default=def$h;Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util$1,error$8={message:({params:{len:X}})=>(0,codegen_1$a.str)`must NOT have more than ${X} items`,params:({params:{len:X}})=>(0,codegen_1$a._)`{limit: ${X}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code(X){const{parentSchema:O,it:Q}=X,{items:j}=O;if(!Array.isArray(j)){(0,util_1$d.checkStrictMode)(Q,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(X,j)}};function validateAdditionalItems(X,O){const{gen:Q,schema:j,data:U,keyword:F,it:q}=X;q.items=!0;const W=Q.const("len",(0,codegen_1$a._)`${U}.length`);if(j===!1)X.setParams({len:O.length}),X.pass((0,codegen_1$a._)`${W} <= ${O.length}`);else if(typeof j=="object"&&!(0,util_1$d.alwaysValidSchema)(q,j)){const G=Q.var("valid",(0,codegen_1$a._)`${W} <= ${O.length}`);Q.if((0,codegen_1$a.not)(G),()=>Y(G)),X.ok(G)}function Y(G){Q.forRange("i",O.length,W,K=>{X.subschema({keyword:F,dataProp:K,dataPropType:util_1$d.Type.Num},G),q.allErrors||Q.if((0,codegen_1$a.not)(G),()=>Q.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util$1,code_1$5=code$1,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(X){const{schema:O,it:Q}=X;if(Array.isArray(O))return validateTuple(X,"additionalItems",O);Q.items=!0,!(0,util_1$c.alwaysValidSchema)(Q,O)&&X.ok((0,code_1$5.validateArray)(X))}};function validateTuple(X,O,Q=X.schema){const{gen:j,parentSchema:U,data:F,keyword:q,it:W}=X;K(U),W.opts.unevaluated&&Q.length&&W.items!==!0&&(W.items=util_1$c.mergeEvaluated.items(j,Q.length,W.items));const Y=j.name("valid"),G=j.const("len",(0,codegen_1$9._)`${F}.length`);Q.forEach((J,ee)=>{(0,util_1$c.alwaysValidSchema)(W,J)||(j.if((0,codegen_1$9._)`${G} > ${ee}`,()=>X.subschema({keyword:q,schemaProp:ee,dataProp:ee},Y)),X.ok(Y))});function K(J){const{opts:ee,errSchemaPath:te}=W,re=Q.length,oe=re===J.minItems&&(re===J.maxItems||J[O]===!1);if(ee.strictTuples&&!oe){const se=`"${q}" is ${re}-tuple, but minItems or maxItems/${O} are not specified or different at path "${te}"`;(0,util_1$c.checkStrictMode)(W,se,ee.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$f;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:X=>(0,items_1$1.validateTuple)(X,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util$1,code_1$4=code$1,additionalItems_1$1=additionalItems,error$7={message:({params:{len:X}})=>(0,codegen_1$8.str)`must NOT have more than ${X} items`,params:({params:{len:X}})=>(0,codegen_1$8._)`{limit: ${X}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code(X){const{schema:O,parentSchema:Q,it:j}=X,{prefixItems:U}=Q;j.items=!0,!(0,util_1$b.alwaysValidSchema)(j,O)&&(U?(0,additionalItems_1$1.validateAdditionalItems)(X,U):X.ok((0,code_1$4.validateArray)(X)))}};items2020.default=def$d;var contains$1={};Object.defineProperty(contains$1,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util$1,error$6={message:({params:{min:X,max:O}})=>O===void 0?(0,codegen_1$7.str)`must contain at least ${X} valid item(s)`:(0,codegen_1$7.str)`must contain at least ${X} and no more than ${O} valid item(s)`,params:({params:{min:X,max:O}})=>O===void 0?(0,codegen_1$7._)`{minContains: ${X}}`:(0,codegen_1$7._)`{minContains: ${X}, maxContains: ${O}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code(X){const{gen:O,schema:Q,parentSchema:j,data:U,it:F}=X;let q,W;const{minContains:Y,maxContains:G}=j;F.opts.next?(q=Y===void 0?1:Y,W=G):q=1;const K=O.const("len",(0,codegen_1$7._)`${U}.length`);if(X.setParams({min:q,max:W}),W===void 0&&q===0){(0,util_1$a.checkStrictMode)(F,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(W!==void 0&&q>W){(0,util_1$a.checkStrictMode)(F,'"minContains" > "maxContains" is always invalid'),X.fail();return}if((0,util_1$a.alwaysValidSchema)(F,Q)){let oe=(0,codegen_1$7._)`${K} >= ${q}`;W!==void 0&&(oe=(0,codegen_1$7._)`${oe} && ${K} <= ${W}`),X.pass(oe);return}F.items=!0;const J=O.name("valid");W===void 0&&q===1?te(J,()=>O.if(J,()=>O.break())):q===0?(O.let(J,!0),W!==void 0&&O.if((0,codegen_1$7._)`${U}.length > 0`,ee)):(O.let(J,!1),ee()),X.result(J,()=>X.reset());function ee(){const oe=O.name("_valid"),se=O.let("count",0);te(oe,()=>O.if(oe,()=>re(se)))}function te(oe,se){O.forRange("i",0,K,ne=>{X.subschema({keyword:"contains",dataProp:ne,dataPropType:util_1$a.Type.Num,compositeRule:!0},oe),se()})}function re(oe){O.code((0,codegen_1$7._)`${oe}++`),W===void 0?O.if((0,codegen_1$7._)`${oe} >= ${q}`,()=>O.assign(J,!0).break()):(O.if((0,codegen_1$7._)`${oe} > ${W}`,()=>O.assign(J,!1).break()),q===1?O.assign(J,!0):O.if((0,codegen_1$7._)`${oe} >= ${q}`,()=>O.assign(J,!0)))}}};contains$1.default=def$c;var dependencies={};(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.validateSchemaDeps=X.validatePropertyDeps=X.error=void 0;const O=codegen,Q=util$1,j=code$1;X.error={message:({params:{property:Y,depsCount:G,deps:K}})=>{const J=G===1?"property":"properties";return(0,O.str)`must have ${J} ${K} when property ${Y} is present`},params:({params:{property:Y,depsCount:G,deps:K,missingProperty:J}})=>(0,O._)`{property: ${Y},
    missingProperty: ${J},
    depsCount: ${G},
    deps: ${K}}`};const U={keyword:"dependencies",type:"object",schemaType:"object",error:X.error,code(Y){const[G,K]=F(Y);q(Y,G),W(Y,K)}};function F({schema:Y}){const G={},K={};for(const J in Y){if(J==="__proto__")continue;const ee=Array.isArray(Y[J])?G:K;ee[J]=Y[J]}return[G,K]}function q(Y,G=Y.schema){const{gen:K,data:J,it:ee}=Y;if(Object.keys(G).length===0)return;const te=K.let("missing");for(const re in G){const oe=G[re];if(oe.length===0)continue;const se=(0,j.propertyInData)(K,J,re,ee.opts.ownProperties);Y.setParams({property:re,depsCount:oe.length,deps:oe.join(", ")}),ee.allErrors?K.if(se,()=>{for(const ne of oe)(0,j.checkReportMissingProp)(Y,ne)}):(K.if((0,O._)`${se} && (${(0,j.checkMissingProp)(Y,oe,te)})`),(0,j.reportMissingProp)(Y,te),K.else())}}X.validatePropertyDeps=q;function W(Y,G=Y.schema){const{gen:K,data:J,keyword:ee,it:te}=Y,re=K.name("valid");for(const oe in G)(0,Q.alwaysValidSchema)(te,G[oe])||(K.if((0,j.propertyInData)(K,J,oe,te.opts.ownProperties),()=>{const se=Y.subschema({keyword:ee,schemaProp:oe},re);Y.mergeValidEvaluated(se,re)},()=>K.var(re,!0)),Y.ok(re))}X.validateSchemaDeps=W,X.default=U})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util$1,error$5={message:"property name must be valid",params:({params:X})=>(0,codegen_1$6._)`{propertyName: ${X.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code(X){const{gen:O,schema:Q,data:j,it:U}=X;if((0,util_1$9.alwaysValidSchema)(U,Q))return;const F=O.name("valid");O.forIn("key",j,q=>{X.setParams({propertyName:q}),X.subschema({keyword:"propertyNames",data:q,dataTypes:["string"],propertyName:q,compositeRule:!0},F),O.if((0,codegen_1$6.not)(F),()=>{X.error(!0),U.allErrors||O.break()})}),X.ok(F)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code$1,codegen_1$5=codegen,names_1=names$1,util_1$8=util$1,error$4={message:"must NOT have additional properties",params:({params:X})=>(0,codegen_1$5._)`{additionalProperty: ${X.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code(X){const{gen:O,schema:Q,parentSchema:j,data:U,errsCount:F,it:q}=X;if(!F)throw new Error("ajv implementation error");const{allErrors:W,opts:Y}=q;if(q.props=!0,Y.removeAdditional!=="all"&&(0,util_1$8.alwaysValidSchema)(q,Q))return;const G=(0,code_1$3.allSchemaProperties)(j.properties),K=(0,code_1$3.allSchemaProperties)(j.patternProperties);J(),X.ok((0,codegen_1$5._)`${F} === ${names_1.default.errors}`);function J(){O.forIn("key",U,se=>{!G.length&&!K.length?re(se):O.if(ee(se),()=>re(se))})}function ee(se){let ne;if(G.length>8){const de=(0,util_1$8.schemaRefOrVal)(q,j.properties,"properties");ne=(0,code_1$3.isOwnProperty)(O,de,se)}else G.length?ne=(0,codegen_1$5.or)(...G.map(de=>(0,codegen_1$5._)`${se} === ${de}`)):ne=codegen_1$5.nil;return K.length&&(ne=(0,codegen_1$5.or)(ne,...K.map(de=>(0,codegen_1$5._)`${(0,code_1$3.usePattern)(X,de)}.test(${se})`))),(0,codegen_1$5.not)(ne)}function te(se){O.code((0,codegen_1$5._)`delete ${U}[${se}]`)}function re(se){if(Y.removeAdditional==="all"||Y.removeAdditional&&Q===!1){te(se);return}if(Q===!1){X.setParams({additionalProperty:se}),X.error(),W||O.break();return}if(typeof Q=="object"&&!(0,util_1$8.alwaysValidSchema)(q,Q)){const ne=O.name("valid");Y.removeAdditional==="failing"?(oe(se,ne,!1),O.if((0,codegen_1$5.not)(ne),()=>{X.reset(),te(se)})):(oe(se,ne),W||O.if((0,codegen_1$5.not)(ne),()=>O.break()))}}function oe(se,ne,de){const he={keyword:"additionalProperties",dataProp:se,dataPropType:util_1$8.Type.Str};de===!1&&Object.assign(he,{compositeRule:!0,createErrors:!1,allErrors:!1}),X.subschema(he,ne)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate,code_1$2=code$1,util_1$7=util$1,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(X){const{gen:O,schema:Q,parentSchema:j,data:U,it:F}=X;F.opts.removeAdditional==="all"&&j.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(F,additionalProperties_1$1.default,"additionalProperties"));const q=(0,code_1$2.allSchemaProperties)(Q);for(const J of q)F.definedProperties.add(J);F.opts.unevaluated&&q.length&&F.props!==!0&&(F.props=util_1$7.mergeEvaluated.props(O,(0,util_1$7.toHash)(q),F.props));const W=q.filter(J=>!(0,util_1$7.alwaysValidSchema)(F,Q[J]));if(W.length===0)return;const Y=O.name("valid");for(const J of W)G(J)?K(J):(O.if((0,code_1$2.propertyInData)(O,U,J,F.opts.ownProperties)),K(J),F.allErrors||O.else().var(Y,!0),O.endIf()),X.it.definedProperties.add(J),X.ok(Y);function G(J){return F.opts.useDefaults&&!F.compositeRule&&Q[J].default!==void 0}function K(J){X.subschema({keyword:"properties",schemaProp:J,dataProp:J},Y)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code$1,codegen_1$4=codegen,util_1$6=util$1,util_2=util$1,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(X){const{gen:O,schema:Q,data:j,parentSchema:U,it:F}=X,{opts:q}=F,W=(0,code_1$1.allSchemaProperties)(Q),Y=W.filter(oe=>(0,util_1$6.alwaysValidSchema)(F,Q[oe]));if(W.length===0||Y.length===W.length&&(!F.opts.unevaluated||F.props===!0))return;const G=q.strictSchema&&!q.allowMatchingProperties&&U.properties,K=O.name("valid");F.props!==!0&&!(F.props instanceof codegen_1$4.Name)&&(F.props=(0,util_2.evaluatedPropsToName)(O,F.props));const{props:J}=F;ee();function ee(){for(const oe of W)G&&te(oe),F.allErrors?re(oe):(O.var(K,!0),re(oe),O.if(K))}function te(oe){for(const se in G)new RegExp(oe).test(se)&&(0,util_1$6.checkStrictMode)(F,`property ${se} matches pattern ${oe} (use allowMatchingProperties)`)}function re(oe){O.forIn("key",j,se=>{O.if((0,codegen_1$4._)`${(0,code_1$1.usePattern)(X,oe)}.test(${se})`,()=>{const ne=Y.includes(oe);ne||X.subschema({keyword:"patternProperties",schemaProp:oe,dataProp:se,dataPropType:util_2.Type.Str},K),F.opts.unevaluated&&J!==!0?O.assign((0,codegen_1$4._)`${J}[${se}]`,!0):!ne&&!F.allErrors&&O.if((0,codegen_1$4.not)(K),()=>O.break())})})}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util$1,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(X){const{gen:O,schema:Q,it:j}=X;if((0,util_1$5.alwaysValidSchema)(j,Q)){X.fail();return}const U=O.name("valid");X.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},U),X.failResult(U,()=>X.reset(),()=>X.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code$1,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util$1,error$3={message:"must match exactly one schema in oneOf",params:({params:X})=>(0,codegen_1$3._)`{passingSchemas: ${X.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code(X){const{gen:O,schema:Q,parentSchema:j,it:U}=X;if(!Array.isArray(Q))throw new Error("ajv implementation error");if(U.opts.discriminator&&j.discriminator)return;const F=Q,q=O.let("valid",!1),W=O.let("passing",null),Y=O.name("_valid");X.setParams({passing:W}),O.block(G),X.result(q,()=>X.reset(),()=>X.error(!0));function G(){F.forEach((K,J)=>{let ee;(0,util_1$4.alwaysValidSchema)(U,K)?O.var(Y,!0):ee=X.subschema({keyword:"oneOf",schemaProp:J,compositeRule:!0},Y),J>0&&O.if((0,codegen_1$3._)`${Y} && ${q}`).assign(q,!1).assign(W,(0,codegen_1$3._)`[${W}, ${J}]`).else(),O.if(Y,()=>{O.assign(q,!0),O.assign(W,J),ee&&X.mergeEvaluated(ee,codegen_1$3.Name)})})}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util$1,def$4={keyword:"allOf",schemaType:"array",code(X){const{gen:O,schema:Q,it:j}=X;if(!Array.isArray(Q))throw new Error("ajv implementation error");const U=O.name("valid");Q.forEach((F,q)=>{if((0,util_1$3.alwaysValidSchema)(j,F))return;const W=X.subschema({keyword:"allOf",schemaProp:q},U);X.ok(U),X.mergeEvaluated(W)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util$1,error$2={message:({params:X})=>(0,codegen_1$2.str)`must match "${X.ifClause}" schema`,params:({params:X})=>(0,codegen_1$2._)`{failingKeyword: ${X.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code(X){const{gen:O,parentSchema:Q,it:j}=X;Q.then===void 0&&Q.else===void 0&&(0,util_1$2.checkStrictMode)(j,'"if" without "then" and "else" is ignored');const U=hasSchema(j,"then"),F=hasSchema(j,"else");if(!U&&!F)return;const q=O.let("valid",!0),W=O.name("_valid");if(Y(),X.reset(),U&&F){const K=O.let("ifClause");X.setParams({ifClause:K}),O.if(W,G("then",K),G("else",K))}else U?O.if(W,G("then")):O.if((0,codegen_1$2.not)(W),G("else"));X.pass(q,()=>X.error(!0));function Y(){const K=X.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},W);X.mergeEvaluated(K)}function G(K,J){return()=>{const ee=X.subschema({keyword:K},W);O.assign(q,W),X.mergeValidEvaluated(ee,q),J?O.assign(J,(0,codegen_1$2._)`${K}`):X.setParams({ifClause:K})}}}};function hasSchema(X,O){const Q=X.schema[O];return Q!==void 0&&!(0,util_1$2.alwaysValidSchema)(X,Q)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util$1,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:X,parentSchema:O,it:Q}){O.if===void 0&&(0,util_1$1.checkStrictMode)(Q,`"${X}" without "if" is ignored`)}};thenElse.default=def$2;Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains$1,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(X=!1){const O=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return X?O.push(prefixItems_1.default,items2020_1.default):O.push(additionalItems_1.default,items_1.default),O.push(contains_1.default),O}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:X})=>(0,codegen_1$1.str)`must match format "${X}"`,params:({schemaCode:X})=>(0,codegen_1$1._)`{format: ${X}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(X,O){const{gen:Q,data:j,$data:U,schema:F,schemaCode:q,it:W}=X,{opts:Y,errSchemaPath:G,schemaEnv:K,self:J}=W;if(!Y.validateFormats)return;U?ee():te();function ee(){const re=Q.scopeValue("formats",{ref:J.formats,code:Y.code.formats}),oe=Q.const("fDef",(0,codegen_1$1._)`${re}[${q}]`),se=Q.let("fType"),ne=Q.let("format");Q.if((0,codegen_1$1._)`typeof ${oe} == "object" && !(${oe} instanceof RegExp)`,()=>Q.assign(se,(0,codegen_1$1._)`${oe}.type || "string"`).assign(ne,(0,codegen_1$1._)`${oe}.validate`),()=>Q.assign(se,(0,codegen_1$1._)`"string"`).assign(ne,oe)),X.fail$data((0,codegen_1$1.or)(de(),he()));function de(){return Y.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${q} && !${ne}`}function he(){const fe=K.$async?(0,codegen_1$1._)`(${oe}.async ? await ${ne}(${j}) : ${ne}(${j}))`:(0,codegen_1$1._)`${ne}(${j})`,Oe=(0,codegen_1$1._)`(typeof ${ne} == "function" ? ${fe} : ${ne}.test(${j}))`;return(0,codegen_1$1._)`${ne} && ${ne} !== true && ${se} === ${O} && !${Oe}`}}function te(){const re=J.formats[F];if(!re){de();return}if(re===!0)return;const[oe,se,ne]=he(re);oe===O&&X.pass(fe());function de(){if(Y.strictSchema===!1){J.logger.warn(Oe());return}throw new Error(Oe());function Oe(){return`unknown format "${F}" ignored in schema at path "${G}"`}}function he(Oe){const ce=Oe instanceof RegExp?(0,codegen_1$1.regexpCode)(Oe):Y.code.formats?(0,codegen_1$1._)`${Y.code.formats}${(0,codegen_1$1.getProperty)(F)}`:void 0,me=Q.scopeValue("formats",{key:F,ref:Oe,code:ce});return typeof Oe=="object"&&!(Oe instanceof RegExp)?[Oe.type||"string",Oe.validate,(0,codegen_1$1._)`${me}.validate`]:["string",Oe,me]}function fe(){if(typeof re=="object"&&!(re instanceof RegExp)&&re.async){if(!K.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${ne}(${j})`}return typeof se=="function"?(0,codegen_1$1._)`${ne}(${j})`:(0,codegen_1$1._)`${ne}.test(${j})`}}}};format$1.default=def$1;Object.defineProperty(format$2,"__esModule",{value:!0});const format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0});metadata.contentVocabulary=metadata.metadataVocabulary=void 0;metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$1,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types$1={};(function(X){Object.defineProperty(X,"__esModule",{value:!0}),X.DiscrError=void 0,function(O){O.Tag="tag",O.Mapping="mapping"}(X.DiscrError||(X.DiscrError={}))})(types$1);Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types$1,compile_1=compile,util_1=util$1,error={message:({params:{discrError:X,tagName:O}})=>X===types_1.DiscrError.Tag?`tag "${O}" must be string`:`value of tag "${O}" must be in oneOf`,params:({params:{discrError:X,tag:O,tagName:Q}})=>(0,codegen_1._)`{error: ${X}, tag: ${Q}, tagValue: ${O}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error,code(X){const{gen:O,data:Q,schema:j,parentSchema:U,it:F}=X,{oneOf:q}=U;if(!F.opts.discriminator)throw new Error("discriminator: requires discriminator option");const W=j.propertyName;if(typeof W!="string")throw new Error("discriminator: requires propertyName");if(j.mapping)throw new Error("discriminator: mapping is not supported");if(!q)throw new Error("discriminator: requires oneOf keyword");const Y=O.let("valid",!1),G=O.const("tag",(0,codegen_1._)`${Q}${(0,codegen_1.getProperty)(W)}`);O.if((0,codegen_1._)`typeof ${G} == "string"`,()=>K(),()=>X.error(!1,{discrError:types_1.DiscrError.Tag,tag:G,tagName:W})),X.ok(Y);function K(){const te=ee();O.if(!1);for(const re in te)O.elseIf((0,codegen_1._)`${G} === ${re}`),O.assign(Y,J(te[re]));O.else(),X.error(!1,{discrError:types_1.DiscrError.Mapping,tag:G,tagName:W}),O.endIf()}function J(te){const re=O.name("valid"),oe=X.subschema({keyword:"oneOf",schemaProp:te},re);return X.mergeEvaluated(oe,codegen_1.Name),re}function ee(){var te;const re={},oe=ne(U);let se=!0;for(let fe=0;fe<q.length;fe++){let Oe=q[fe];(Oe==null?void 0:Oe.$ref)&&!(0,util_1.schemaHasRulesButRef)(Oe,F.self.RULES)&&(Oe=compile_1.resolveRef.call(F.self,F.schemaEnv.root,F.baseId,Oe==null?void 0:Oe.$ref),Oe instanceof compile_1.SchemaEnv&&(Oe=Oe.schema));const ce=(te=Oe==null?void 0:Oe.properties)===null||te===void 0?void 0:te[W];if(typeof ce!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${W}"`);se=se&&(oe||ne(Oe)),de(ce,fe)}if(!se)throw new Error(`discriminator: "${W}" must be required`);return re;function ne({required:fe}){return Array.isArray(fe)&&fe.includes(W)}function de(fe,Oe){if(fe.const)he(fe.const,Oe);else if(fe.enum)for(const ce of fe.enum)he(ce,Oe);else throw new Error(`discriminator: "properties/${W}" must have "const" or "enum"`)}function he(fe,Oe){if(typeof fe!="string"||fe in re)throw new Error(`discriminator: "${W}" values must be unique strings`);re[fe]=Oe}}}};discriminator.default=def;const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$1=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}};var require$$3={$schema,$id,title,definitions,type:type$1,properties,default:!0};(function(X,O){Object.defineProperty(O,"__esModule",{value:!0}),O.MissingRefError=O.ValidationError=O.CodeGen=O.Name=O.nil=O.stringify=O.str=O._=O.KeywordCxt=void 0;const Q=core$2,j=draft7,U=discriminator,F=require$$3,q=["/properties"],W="http://json-schema.org/draft-07/schema";class Y extends Q.default{_addVocabularies(){super._addVocabularies(),j.default.forEach(re=>this.addVocabulary(re)),this.opts.discriminator&&this.addKeyword(U.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const re=this.opts.$data?this.$dataMetaSchema(F,q):F;this.addMetaSchema(re,W,!1),this.refs["http://json-schema.org/schema"]=W}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(W)?W:void 0)}}X.exports=O=Y,Object.defineProperty(O,"__esModule",{value:!0}),O.default=Y;var G=validate;Object.defineProperty(O,"KeywordCxt",{enumerable:!0,get:function(){return G.KeywordCxt}});var K=codegen;Object.defineProperty(O,"_",{enumerable:!0,get:function(){return K._}}),Object.defineProperty(O,"str",{enumerable:!0,get:function(){return K.str}}),Object.defineProperty(O,"stringify",{enumerable:!0,get:function(){return K.stringify}}),Object.defineProperty(O,"nil",{enumerable:!0,get:function(){return K.nil}}),Object.defineProperty(O,"Name",{enumerable:!0,get:function(){return K.Name}}),Object.defineProperty(O,"CodeGen",{enumerable:!0,get:function(){return K.CodeGen}});var J=validation_error;Object.defineProperty(O,"ValidationError",{enumerable:!0,get:function(){return J.default}});var ee=ref_error;Object.defineProperty(O,"MissingRefError",{enumerable:!0,get:function(){return ee.default}})})(ajv$1,ajv$1.exports);var ajvModule=getDefaultExportFromCjs(ajv$1.exports);const Ajv=ajvModule.default,ajv=new Ajv({allErrors:!0}),widgetsValidator=ajv.compile(widgetsSchema),fileHandlersValidator=ajv.compile(fileHandlersSchema),maniTests$1=[{infoString:"The name member is a string that represents the name of the web application as it is usually displayed to the user (e.g., amongst a list of other applications, or as a label for an icon)",displayString:"Manifest has name field",category:"required",member:"name",defaultValue:"cool PWA",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=name-string",errorString:"",quickFix:!0,test:function(X){return X&&typeof X=="string"&&X.length>0?X.trim()==X?!0:(this.errorString="name should not have any leading or trailing whitespace",!1):(this.errorString="name is required and must be a string with a length > 0",!1)}},{infoString:"The handle_links field specifies how links to your app are opened, either in your app itself or in the users browser",displayString:"Manifest has handle_links field",category:"enhancement",member:"handle_links",defaultValue:"auto",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=handle_links-string",errorString:"handle_links should be either auto, preferred or not-preferred",quickFix:!0,test:X=>!!(X&&typeof X=="string")},{infoString:"share_target enables your app to get shared content from other apps",displayString:"Manifest has share_target field",category:"enhancement",member:"share_target",defaultValue:JSON.stringify({action:"/share-target/",methods:["GET"],params:{title:"title",text:"text",url:"url"}}),docsLink:"https://docs.pwabuilder.com/#/home/native-features?id=web-share-api",errorString:"share_target must be an object",quickFix:!0,test:X=>X&&typeof X=="object"},{infoString:"The icons member specifies an array of objects representing image files that can serve as application icons for different contexts.",displayString:"Manifest has icons field",category:"required",member:"icons",defaultValue:JSON.stringify([{src:"https://www.pwabuilder.com/assets/icons/icon_192.png",sizes:"192x192",type:"image/png",purpose:"any"},{src:"https://www.pwabuilder.com/assets/icons/icon_512.png",sizes:"512x512",type:"image/png",purpose:"maskable"}]),docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=icons",errorString:"",quickFix:!0,test:function(X){return!(X&&Array.isArray(X)&&X.length>0)?(this.errorString="icons is required and must be non-empty array",!1):X.find(U=>U.purpose==="any maskable")?(this.errorString="Seperate Icons are needed for both maskable and any",!1):X.find(U=>isAtLeast(U.sizes,512,512)&&(U.type==="image/png"||U.type==="image/svg"||U.src.endsWith(".png")||U.src.endsWith(".svg")))?!0:(this.errorString="Need at least one PNG or SVG icon 512x512 or larger",!1)}},{infoString:"The icons member specifies an array of objects representing image files that can serve as application icons for different contexts.",displayString:"Icons have at least one icon with purpose any",category:"recommended",member:"icons",defaultValue:JSON.stringify([{src:"https://www.pwabuilder.com/assets/icons/icon_192.png",sizes:"192x192",type:"image/png",purpose:"any"},{src:"https://www.pwabuilder.com/assets/icons/icon_512.png",sizes:"512x512",type:"image/png",purpose:"maskable"}]),docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=icons",errorString:"Need at least one icon with purpose set to any",quickFix:!0,test:X=>X&&Array.isArray(X)&&X.length>0?X.find(j=>j.purpose==="any")?!0:!X.find(U=>U.purpose==="maskable"):!1},{infoString:"The scope member is a string that represents the name of the web application as it is usually displayed to the user (e.g., amongst a list of other applications, or as a label for an icon)",displayString:"Manifest has scope field",category:"optional",member:"scope",defaultValue:"/",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=scope-string",errorString:"scope must be a string with a length > 0",quickFix:!0,test:X=>X&&typeof X=="string"&&X.length>0},{infoString:"The short_name member is a string that represents the name of the web application displayed to the user if there is not enough space to display name. This name will show in the start menu on Windows and the homescreen on Android.",displayString:"Manifest has a short_name field",category:"required",member:"short_name",defaultValue:"placeholder",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=short_name-string",errorString:"",quickFix:!0,test:function(X){return X&&X.length>=3?X.trim()==X?!0:(this.errorString="short_name should not have any leading or trailing whitespace",!1):(this.errorString="short_name is required and must be a string with a length >= 3",!1)}},{infoString:"The start_url member is a string that represents the start URL of the web application \u2014 the preferred URL that should be loaded when the user launches the web application",displayString:"Manifest has start_url field",category:"required",member:"start_url",defaultValue:"/",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=start_url-string",errorString:"start_url is required and must be a string with a length > 0",quickFix:!0,test:function(X){return X&&typeof X=="string"&&X.length>0?!0:(this.errorString="start_url is required and must be a string with a length > 0",!1)}},{infoString:"The display member is a string that determines the developers' preferred display mode for the website. The display mode changes how much of browser UI is shown to the user and can range from browser (when the full browser window is shown) to fullscreen (when the app is fullscreened).",displayString:"Manifest has display field",category:"recommended",member:"display",defaultValue:"standalone",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=display-string",errorString:"display must be one of the following strings: fullscreen, standalone, minimal-ui, browser",quickFix:!0,test:X=>["fullscreen","standalone","minimal-ui","browser"].includes(X)},{infoString:"The background_color member defines a placeholder background color for the application page to display before its stylesheet is loaded.",displayString:"Manifest has hex encoded background_color",category:"recommended",testRequired:void 0,member:"background_color",defaultValue:"#000000",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=background_color-string",errorString:"background_color should be a valid hex color",quickFix:!0,test:function(X){if(typeof X=="undefined")return this.testRequired=!1,!1;if(typeof X=="string"){const O=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;return this.testRequired=!0,O.test(X)}else return this.testRequired=!0,!1}},{infoString:"The theme_color member is a string that defines the default theme color for the application.",displayString:"Manifest has hex encoded theme_color",category:"recommended",testRequired:void 0,member:"theme_color",defaultValue:"#000000",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=theme_color-string",errorString:"theme_color should be a valid hex color",quickFix:!0,test:function(X){if(typeof X=="undefined")return this.testRequired=!1,!1;if(X&&typeof X=="string"){const O=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;return this.testRequired=!0,O.test(X)}else return this.testRequired=!0,!1}},{infoString:"The orientation mode changes the default orientation of the app. For example, if set to 'portrait', the app will be displayed in landscape mode by default.",displayString:"Manifest has orientation field",category:"recommended",member:"orientation",defaultValue:"any",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=orientation-string",errorString:"orientation must be one of the following strings: any, natural, landscape, landscape-primary, landscape-secondary, portrait, portrait-primary, portrait-secondary",quickFix:!0,test:X=>isStandardOrientation(X)},{infoString:"The screenshots member defines an array of screenshots intended to showcase the application.",displayString:"Manifest has screenshots field",category:"recommended",member:"screenshots",defaultValue:JSON.stringify([{src:"https://www.pwabuilder.com/assets/screenshots/screen1.png",sizes:"2880x1800",type:"image/png",description:"PWABuilder Home Screen"},{src:"https://www.pwabuilder.com/assets/screenshots/screen2.png",sizes:"2880/1800",type:"image/png",description:"PWABuilder Report Card"},{src:"https://www.pwabuilder.com/assets/screenshots/screen3.png",sizes:"2880x1800",type:"image/png",description:"Manifest information on the Report Card"}]),docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=screenshots",errorString:"Screenshots must be an array of screenshot objects",quickFix:!0,testRequired:void 0,test:function(X){return typeof X=="undefined"?(this.testRequired=!1,!0):(this.testRequired=!0,X&&Array.isArray(X))}},{infoString:"The shortcuts member defines an array of shortcuts or links to key tasks or pages within a web app. Shortcuts will show as jumplists on Windows and on the home screen on Android.",displayString:"Manifest has shortcuts field",category:"enhancement",member:"shortcuts",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=shortcuts-array",errorString:"",quickFix:!0,test:function(X){return X&&Array.isArray(X)?X.every(j=>j.icons?j.icons.every(U=>U.type!=="image/webp"&&U.type!=="image/svg+xml"):!0)?!0:(this.errorString="shortcuts cannot contain icons with type image/webp or image/svg+xml",!1):(this.errorString="shortcuts must be an array of shortcut objects",!1)}},{infoString:"The iarc_rating_id member is a string that represents the International Age Rating Coalition (IARC) certification code of the web application. It is intended to be used to determine which ages the web application is appropriate for.",displayString:"Manifest has iarc_rating_id field",category:"optional",member:"iarc_rating_id",defaultValue:"",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=iarc_rating_id-string",quickFix:!0,errorString:"iarc_rating_id must be a string with a length > 0",test:X=>X&&typeof X=="string"&&X.length>0},{infoString:"The related_applications field is an array of objects specifying native applications that are installable by, or accessible to, the underlying platform \u2014 for example, a platform-specific (native) Windows application.",displayString:"Manifest has related_applications field",category:"optional",member:"related_applications",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=related_applications-array",quickFix:!0,test:X=>{const O=X&&Array.isArray(X);return X&&X.length===0?!0:O?X.every(j=>validateSingleRelatedApp(j)):!1},errorString:"related_applications should contain a valid store, url and id"},{infoString:"The prefer_related_applications member is a boolean value that specifies that applications listed in related_applications should be preferred over the web application. If the prefer_related_applications member is set to true, the user agent might suggest installing one of the related applications instead of this web app.",displayString:"Manifest properly sets prefer_related_applications field",category:"optional",testRequired:void 0,member:"prefer_related_applications",defaultValue:!1,docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=prefer_related_applications-boolean",quickFix:!1,test:function(X){return typeof X=="undefined"?(this.testRequired=!1,!1):(this.testRequired=!0,typeof X=="boolean")},errorString:"prefer_related_applications should be set to a boolean value"},{infoString:"The categories member is an array of strings that represent the categories of the web application.",displayString:"Manifest has categories field",category:"optional",testRequired:void 0,member:"categories",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=categories-array",quickFix:!0,test:function(X){return typeof X=="undefined"?(this.testRequired=!1,!0):(this.testRequired=!0,X&&Array.isArray(X))},errorString:"Categories should be an array of string category values"},{member:"lang",displayString:"Manifest specifies a language",infoString:"The lang member is a string that represents the default language of your PWA.",category:"optional",defaultValue:"en",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=lang-string",errorString:"lang should be set to a valid language code",quickFix:!0,test:X=>X&&typeof X=="string"&&X.length>0&&isValidLanguageCode(X)},{member:"dir",displayString:"Manifest specifies a default direction of text",infoString:"The dir member is a string that represents the default text direction of your PWA.",errorString:"dir must be one of the following strings: ltr, rtl, or auto",category:"optional",defaultValue:"ltr",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=dir-string",quickFix:!0,test:X=>X&&typeof X=="string"&&X.length>0&&(X==="ltr"||X==="rtl"||X==="auto")},{member:"description",displayString:"Manifest has description field",infoString:"The description member is a string that represents the description of your PWA.",category:"recommended",defaultValue:"",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=description-string",errorString:"",quickFix:!0,test:function(X){return X&&typeof X=="string"&&X.length>0?X.trim()==X?!0:(this.errorString="description should not have any leading or trailing whitespace",!1):(this.errorString="description must be a string with a length > 0",!1)}},{member:"protocol_handlers",displayString:"Manifest has protocol_handlers field",infoString:"The protocol_handlers member specifies an array of objects that are protocols which this web app can register and handle. Protocol handlers register the application in an OS's application preferences; the registration associates a specific application with the given protocol scheme. For example, when using the protocol handler mailto:// on a web page, registered email applications open.",category:"enhancement",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=protocol_handlers-array",quickFix:!0,errorString:"",test:function(X){return X&&Array.isArray(X)?X.every(j=>{const U=j.url&&j.url.startsWith("/"),F=j.protocol&&j.protocol.length>0,q=F&&(validProtocols.includes(j.protocol)||j.protocol.startsWith("web+")),W=j.url&&j.url.length>0;return U&&F&&W&&q})?!0:(this.errorString="protocol_handlers should all be relative URLs that are within the scope of the app, should have a url and a valid protocol",!1):(this.errorString="protocol_handlers should be a non-empty array",!1)}},{member:"file_handlers",displayString:"Manifest has file_handlers field",infoString:"The file_handlers member specifies an array of objects representing the types of files an installed PWA can handle",category:"enhancement",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=file_handlers-array",quickFix:!0,errorString:"file_handlers array should have objects with action and accept fields",test:X=>fileHandlersValidator(X)},{member:"display_override",displayString:"Manifest has display_override field",infoString:"Its value is an array of display modes that are considered in-order, and the first supported display mode is applied.",category:"enhancement",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=display_override-array",quickFix:!0,errorString:"",test:function(X){return X&&Array.isArray(X)?X.some(j=>j=="window-controls-overlay")?!0:(this.errorString="display_override array should have window-controls-overlay value",!1):(this.errorString="display_override must be a non-empty array",!1)}},{member:"scope_extensions",displayString:"Manifest has scope_extensions field",infoString:"Allow PWA that control multiple subdomains and top level domains to behave as one contiguous app. E.g. a site may span example.com, example.co.uk and support.example.com",category:"optional",defaultValue:[],docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=scope_extensions-array",quickFix:!0,errorString:"scope_extensions should be a valid array with origin",test:X=>X&&Array.isArray(X)?X.every(j=>typeof j=="object"&&typeof j.origin=="string"):!1},{member:"widgets",displayString:"Manifest has widgets field",infoString:"Enable Windows 11 widgets board support",category:"enhancement",defaultValue:[],docsLink:"https://learn.microsoft.com/en-us/microsoft-edge/progressive-web-apps-chromium/how-to/widgets",quickFix:!0,errorString:"widgets should be an array of valid objects",test:X=>widgetsValidator(X)},{member:"id",displayString:"Manifest has an app ID",infoString:"The id member is a string that represents the unique identifier of your PWA to the browser.",category:"recommended",defaultValue:"/",docsLink:"https://developer.chrome.com/blog/pwa-manifest-id",errorString:"id must be a string with a length > 0",quickFix:!0,test:X=>X&&typeof X=="string"&&X.length>0},{member:"launch_handler",displayString:"Manifest has launch_handler field",infoString:"The launch_handler member specifies how your app will launch when navigated to via URL, share_target etc.",category:"recommended",defaultValue:"",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=launch_handlers-string-array",errorString:"",quickFix:!1,test:function(X){return X&&typeof X=="object"?X.client_mode?!0:(this.errorString="launch_handler should have client_mode",!1):(this.errorString="launch_handler should be object",!1)}},{member:"edge_side_panel",displayString:"Manifest has edge_side_panel field",infoString:"The edge_side_panel member specifies if your app supports the side panel in the Edge browser.",category:"enhancement",defaultValue:"",docsLink:"https://docs.pwabuilder.com/#/builder/manifest?id=edge_side_panel-object",errorString:"The value entered for edge_side_panel.preferred_width should be a number",quickFix:!1,test:X=>{let O=X&&typeof X=="object";return O=O&&(typeof X.preferred_width=="number"||!X.hasOwnProperty("preferred_width")),O}}],maniTests=maniTests$1;async function loopThroughKeys(X,O=!1,Q=!1){return new Promise(j=>{let U=[];const F=Object.keys(X);maniTests.forEach(q=>{if(O&&q.category!=="required")return;!F.some(Y=>{if(q.member===Y&&q.test){const G=q.test(X[Y]);return q.valid=!!G,U.push(q),!0}return!1})&&Q&&(q.test&&q.test(void 0),U.push(Object.assign(Object.assign({},q),{valid:!1})))}),j(U)})}async function findSingleField(X,O){return new Promise(async Q=>{let j=!0,U=[];maniTests.forEach(F=>{if(F.member===X&&F.test){const q=F.test(O);q||U.push(F.errorString),j=j&&q}}),j&&Q({valid:j}),Q({valid:j,errors:U})})}globalThis&&globalThis.__asyncValues;async function validateManifest(X,O){return new Promise(async(Q,j)=>{isValidJSON(X)===!1&&j("Manifest is not valid JSON");let F=await loopThroughKeys(X,!1,O);Q(F)})}async function validateSingleField(X,O){return new Promise(async(Q,j)=>{try{const U=await findSingleField(X,O);Q(U)}catch(U){j(U)}})}async function reportMissing(X){return new Promise(async O=>{const Q=await findMissingKeys(X);Q&&Q.length>0?O(Q):O([])})}const manifest_fields={name:{description:["name is a required member that specifies the display name for your application. Anywhere where a name for this application would be displayed, this value will be used. This name should usually align with the store listings associate with your applications. The name of your application also must be at least two characters in length."],purpose:null,example:null,code:'"name": "WebBoard: A Drawing App"',location:"info",required:!0,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=name-string"},short_name:{description:["short_name functions similarly as the name member, except that it will only be used when there is not enough character space to display the applications regular name. It is recommended that short_name be 12 characters or less in length."],purpose:null,example:null,code:'"short_name": "WebBoard"',location:"info",required:!0,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=short_name-string"},description:{description:["description is an optional member that can be used to describe the functionality and purpose of your app. Just like short_name, this data should usually align with any store listings."],purpose:null,example:null,code:'"description": "WebBoard is your go to application for quick doodles, notes, or sketches!"',location:"info",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=description-string"},background_color:{description:["background_color is an optional member that represents the page color of the window that your application will be opened in. This is the color that your app will default to before any styles are loaded. Once styles are loaded, your application will use the background color defined in your CSS.  In order to package with PWABuilder, this field must be a hex encoded string."],purpose:null,example:null,code:'"background_color": "#4F3FB6"',location:"info",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=background_color-string"},theme_color:{description:["theme_color is an optional member that changes the default color used by certain OS features. For example, this would change the color of your title bar when the application is installed on Windows. In order to package with PWABuilder, this field must be a hex encoded string."],purpose:null,example:null,code:'"theme_color": "#4F3FB6"',location:"info",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=theme_color-string"},start_url:{description:["start_url is a required member that specifies the URL that will be launched when a user opens your application. This URL can either be an absolute or relative path."],purpose:null,example:null,code:'"start_url": "https://docs.pwabuilder.com"',location:"settings",required:!0,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=start_url-string"},dir:{description:["dir is an optional member that specifies the text direction for your PWA."],purpose:null,example:null,code:'"dir": "ltr"',location:"settings",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=dir-string"},scope:{description:["scope is an optional member that defines which URL are within the navigation scope of your application. If the user navigates outside of your app's scope, they will be navigated to a normal browser window. scope can often just be set to the base URL of your PWA."],purpose:"Setting a scope ensures that your PWA only navigates within its desired context. Your PWA can maintain UI/UX consistency by opening external content in the browser.",example:null,code:'"scope": "https://docs.pwabuilder.com"',location:"settings",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=scope-string"},lang:{description:['lang is an optional member that specifies the primary language of your app. The language member expects a proper subtag for each langauge. For example, to specify English, you would use "en".'],purpose:null,example:null,code:'"lang": "en"',location:"settings",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=lang-string"},orientation:{description:["orientation is an optional member that specifies the default display orientation for your application."],purpose:"Indicating an orientation will allow your app to opened with an orientation that matches its design. This is especially important if you expect your application to be used on mobile devices.",example:null,code:'"orientation": "portrait"',location:"settings",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=orientation-string"},display:{description:["display is an optional member that specifies the display mode that the website should default to."],purpose:"Setting a display will help you control the look and feel of your application. Using an option that minimizes browser UI can make your PWA feel more like an application and less like a website.",example:null,code:'"display": "standalone"',location:"settings",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=display-string"},display_override:{description:["display_override is similar to the display member, but allows you to select a fallback order for different display modes. In addition to the four display values, display_override can also take the value window-controls-overlay. Window-controls-overlay is a desktop-only display mode and adds a native-style overlay to the top of your application."],purpose:"Using the display_override member gives you further control over how your application is displayed. By setting a custom fallback order, you can ensure your app stays as close to its intended design as possible.",example:null,code:`"display_override": [
  "window-control-overlay",
  "standalone",
  "browser"
]`,location:"settings",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=display_override-array",image:"assets/manifest_examples/display_override_example_image.png"},iarc_rating_id:{description:["iarc_rating_id is an optional member that allows you to specify a suitable age range for your application. A rating ID is obtained by answering a questionnaire about an application, and then providing the associated ID for that application."],purpose:"Having an IARC Rating ID associated with your app allows users to asses if your app may be suitable for children or if it is intended as a product primarily for adults.",example:null,code:'"iarc_rating_id": "e58c174a-81d2-5c3c-32cc-34b8de4a52e9"',location:"platform",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=iarc_rating_id-string",image:"assets/manifest_examples/iarc_example_image.jpg"},related_applications:{description:[`related_applications is an optional member that specifies applications that have similar or adjacent functionality to your application.
        This member allows users and store listings to complement your application with related technology.`],purpose:"Including related applications will allow users to find technology that can supplement your own PWA, or perhaps even make it more useful.",example:null,code:`"related_applications": [
      {
        "platform": "windows",
        "url": "https://www.example-app.com",
        "id": "example.ExampleApp"
      },
      {
        "platform": "play",
        "url": "https://www.example-app-2.com"
      }
    ]`,location:"platform",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=related_applications-array"},prefer_related_applications:{description:["prefer_related_aplications is an optional member that specifies whether or not related_applications should be preferred to this one. This member defaults to false, but if set to true, the browser may recommend an alternate application to the user"],purpose:null,example:["It is important that the value of this field is a boolean."],code:'"prefer_related_applications": true',location:"platform",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=prefer_related_applications-boolean"},shortcuts:{description:["shortcuts is an optional member that specifies a list of key tasks within your application. These shortcuts can be displayed by the operating system to allow a user to launch directly to a specific part of the application."],purpose:"Shortcuts allow users to access certain areas of your PWA quickly and easily. Effectively implemeting shortcuts can reduce friction in your app and make your PWA feel more fully integrated with the native operating system.",example:null,code:`"shortcuts": [
  {
    "name": "About",
    "url": "/about"
  },
  {
    "name": "Send Message",
    "url": "/new-message",
    "description": "Open a chat with another user and send a message to them."
  }
]`,location:"platform",docs_link:"https://docs.pwabuilder.com/#/home/native-features?id=shortcuts",required:!1,image:"assets/manifest_examples/shortcuts_example_image.jpg"},protocol_handlers:{description:["protocol_handlers is an optional member that specifies an array of protocols that the application can handle. A protocol handler will contain protocol and url members to specify how each valid protocol is handled."],purpose:"Making use of protocol handlers can make your application more dynamic and functional. By defining handlers for different protocol schemes, your app can navigate directly to the appropriate content for certain types of links.",example:null,code:`"protocol_handlers": [
  {
    "protocol": "web+music",
    "url": "/play?track=%s"
  }
]`,location:"platform",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=protocol_handlers-array"},categories:{description:["categories is an optional member that specifies an array of categories that the application belongs to."],purpose:"It is often beneficial to use commonly known categories or similar categories to apps that are related to yours.",example:null,code:'"categories": ["games", "finance", "navigation"]',location:"platform",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=categories-array"},icons:{description:["icons is a required member that specifies an array of icons to be used by your application for varying contexts and situations, such as in the action bar of your preferred operating system."],purpose:null,example:["The PWABuilder service enforces several validations to keep the icons for your app optimal:","\u2022 Your icons array must have at least one icon with a size of at least 512x512.","\u2022 If your icons array includes a maskable icon, this must be included as a **separate** icon, and can't be added as a dual icon type (like 'any maskable', for example). This is because using maskable icons as any can result in icons not being displayed optimally.","These validations are implemented so that your progressive web app will always have an icon that looks appropriate, regardless of the operating system or context they are viewed in."],code:`"icons": [
  {
    "src": "https://www.pwabuilder.com/assets/icons/icon_192.png",
    "sizes": "192x192",
    "type": "image/png",
    "purpose": "any"
  },
  {
    "src": "https://www.pwabuilder.com/assets/icons/icon_512.png",
    "sizes": "512x512",
    "type": "image/png",
    "purpose": "maskable"
  }
]`,location:"icons",required:!0,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=icons-array"},screenshots:{description:["screenshots is an optional member that specifies an array of screenshots that can showcase your application in app stores."],purpose:"Including screenshots will allow users to get a sneak peak of your application when it is published and packaged for stores.",example:null,code:`"screenshots" : [
  {
    "src": "screenshot.jpg",
    "sizes": "1280x720",
    "type": "image/jpg",
    "platform": "wide",
  }
]`,location:"screenshots",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=screenshots-array"},share_target:{description:["share_target is an optional member that allows installed PWAs to be registered as a target in the system's share dialog."],purpose:null,example:null,code:`"share_target": {
  "action": "/share-target/",
  "methods": ["GET"],
  "params": {
      "title": "title",
      "text": "text",
      "url": "url"
    }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/home/native-features?id=web-share-api",image:"assets/manifest_examples/share_target_example_image.jpg"},file_handlers:{description:["file_handlers is an optional member that specifies how your progressive web app should handle different file types."],purpose:null,example:null,code:`"file_handlers": [
    {
      "action": "/open-pdf",
      "accept": {
        "application/pdf": [".pdf"]
      },
      "icons": [
        {
          "src": "pdf-icon.png",
          "sizes": "256x256",
          "type": "image/png"
        }
      ],
      "launch_type": "single-client"
    }
  }`,required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=file_handlers-array",image:"assets/manifest_examples/file_handlers_example_image.jpg"},launch_handler:{description:["launch_handlers is an optional member that controls the launch behavior of a web application."],purpose:null,example:null,code:`"launch_handler": {
      "client_mode": "navigate-existing"
  }`,required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=launch_handlers-string-array"},handle_links:{description:["handle_links is an optional member that specifies the default link handling for the web application."],purpose:null,example:null,code:'"handle_links": "preferred"',required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=handle_links-string"},scope_extensions:{description:["scope_extensions is an optional member that specifies a list of origin patterns to associate with. This allows for your app to control multiple subdomains and top-level domains as a single entity."],purpose:null,example:null,code:`"scope_extensions": [
      {"origin": "*.pwabuilder.com"},
      {"origin": "docs.pwabuilder.co.uk"},
      {"origin": "*.pwabuilder.co.uk"},
    ]
  `,required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=scope_extensions-array"},edge_side_panel:{description:["The edge_side_panel member specifies if your app supports the side panel in the Edge browser and if you do, the preferred width for when it opens."],purpose:null,example:null,code:`"edge_side_panel": {
      "preferred_width": 600
    }
  `,location:"platform",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=edge_side_panel-object"},id:{description:["id is an recommended member that functions as a unique identifier for your Progressive Web App that is separate from members that may change over time (such as name or start_url)."],purpose:null,example:null,code:'id: "/?homescreen=1"',location:"info",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=id-string"},widgets:{description:["In Windows 11, PWAs can define widgets, update them, and handle user interactions within them."],purpose:"Various operating systems have widgets dashboards that let users read content and perform tasks.",example:null,code:"",required:!1,docs_link:"https://learn.microsoft.com/en-us/microsoft-edge/progressive-web-apps-chromium/how-to/widgets"},"share_target.action":{description:["The URL within the scope of your app that your app will handle the share action."],purpose:null,example:null,code:`"share_target": {
  "action": "/share-target/",
  "methods": ["GET"],
  "params": {
      "title": "title",
      "text": "text",
      "url": "url"
    }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.method":{description:["GET or POST. Use POST if the shared data includes binary data like images."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.enctype":{description:["The encoding of the data when the method is a POST request. Otherwise, ignored."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.params.title":{description:["Name of the query parameter for the title of the document being shared."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.params.text":{description:["Name of the query parameter for the body of the message being shared."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.params.url":{description:["Name of the query parameter for the URL being shared."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.params.files.name":{description:["Name of the form field used to share files."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.params.files.accept":{description:["A string or array of strings of accepted MIME types or extensions."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1,docs_link:"https://docs.pwabuilder.com/#/builder/manifest?id=share_target-object"},"share_target.extra-step":{description:["When a user selects your app in the system's share dialog, your PWA is launched, and a HTTP request is made to the provided URL. You will need to add this scriot to your SW."],purpose:null,example:null,code:`"share_target": {
"action": "/share-target/",
"methods": ["GET"],
"params": {
    "title": "title",
    "text": "text",
    "url": "url"
  }
}`,location:"share",required:!1}},service_worker_fields={has_service_worker:{description:["Service workers are a specific type of web worker that serve as a proxy between your application and the network. All requests that go to or from your PWA will pass through the service worker first. This allows your service worker to handle requests in situations where the network may be unavailable."],required:!1,docs_link:"https://docs.pwabuilder.com/#/home/sw-intro"},background_sync:{description:["The Background Sync API allows you to register functionality that will occur whenever internet connectivity is next available. In other words, if your app is actively connected to the network, the functionality will occur right away. Otherwise, it will occur whenever your app is next connected to the network."],required:!1,docs_link:"https://docs.pwabuilder.com/#/home/native-features?id=background-sync-overview"},periodic_sync:{description:["Periodic background sync is similar to regular background sync, except that instead of being executed on request, it occurs at regular intervals. For example, you could implement sync functionality that is executed once an hour, once a day, or whatever your use case requires."],required:!1,docs_link:"https://docs.pwabuilder.com/#/home/native-features?id=periodic-background-sync-overview"},push_notifications:{description:["The Notifications API allows for you to send a pop up notification that displays on your users operating system whether your PWA is running or not."],required:!1,docs_link:"https://docs.pwabuilder.com/#/home/native-features?id=push-notifications"},offline_support:{description:["Offline support is whether or not your app has a solution for offline scenarios. This can include serving a 404 page or caching previous content."],required:!1,docs_link:"https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Offline_Service_workers"}};var __defProp$7=Object.defineProperty,__getOwnPropDesc$7=Object.getOwnPropertyDescriptor,__decorateClass$7=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$7(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$7(O,Q,U),U};let ManifestInfoCard=class extends s$9{constructor(){super(),this.field="",this.placement="",this.currentlyHovering=!1,this.currentlyOpen=!1}static get styles(){return[i$8`
    
      .mic-wrapper {
        display: flex;
        flex-direction: column;
      }

      .info-box {
        background-color: var(--font-color);
        width: 340px;
        color: #ffffff;
        padding: 10px;
        border-radius: 0;
        border-top-left-radius: var(--card-border-radius);
        border-top-right-radius: var(--card-border-radius);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .info-box p {
        margin: 0;
        font-size: 16px;
        font-family: var(--font-family);
      }

      .right {
        background-color: transparent;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right:hover {
        cursor: pointer;
      }

      .image-section {
        background: linear-gradient(93.16deg, #EAECF4 16%, #CED0EC 87.75%);
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .image-section img {
        padding: 10px 20px;
        width: 300px;
        height: auto;
      }

      .mic-actions {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        margin: 5px 0;
      }

      .learn-more {
        line-height: 17px;
        display: block;
        width: 100%;
      }

      .learn-more:visited, .learn-more:active, .learn-more:link {
        color: #ffffff;
      }

      .eim {
        background-color: transparent;
        border: none;
        color: #ffffff;
        padding: 0;
        text-decoration: underline;
        height: 25px;
        display: flex;
        align-items: center;
        font-weight: 700;
        font-size: 14px;
        font-family: var(--font-family);
      }

      .eim:hover {
        cursor: pointer;
      }

      sl-menu {
        background-color: var(--font-color);
        border: none;
        padding: 10px;
        padding-top: 0;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        gap: 15px;
        margin: 0;
        border-radius: 0;
        border-bottom-left-radius: var(--card-border-radius);
        border-bottom-right-radius: var(--card-border-radius);
      }

      sl-menu-item {
        border: 1px solid transparent;
      }

      sl-menu-item::part(checked-icon), sl-menu-item::part(submenu-icon) {
        display: none;
      }

      sl-menu-item::part(base){
        color: #ffffff;
        font-size: var(--card-body-font-size);
        font-weight: bold;
        font-family: var(--font-family);
        padding: 0;
        text-decoration: underline;
      }

      sl-menu-item:hover, sl-menu-item::part(base) {
        background-color: unset;
      }

      sl-menu-item:focus {
        border: 1px solid #ffffff;
      }

      /* < 480px */
      ${smallBreakPoint(i$8`
        .info-box{
          width: 240px;
        }

        .image-section img {
          width: 200px;
        }
      `)}

    `]}firstUpdated(){}openME(){recordPWABuilderProcessStep("manifest_tooltip.open_editor_clicked",AnalyticsBehavior.ProcessCheckpoint),recordPWABuilderProcessStep(`manifest_tooltip.${this.field}_open_editor_clicked`,AnalyticsBehavior.ProcessCheckpoint),this.shadowRoot.querySelector(".tooltip").hide();let X=manifest_fields[this.field].location,O=new CustomEvent("open-manifest-editor",{detail:{field:this.field,tab:X},bubbles:!0,composed:!0});this.dispatchEvent(O)}trackLearnMoreAnalytics(){recordPWABuilderProcessStep("manifest_tooltip.learn_more_clicked",AnalyticsBehavior.ProcessCheckpoint),recordPWABuilderProcessStep(`manifest_tooltip.${this.field}_learn_more_clicked`,AnalyticsBehavior.ProcessCheckpoint)}handleHover(X){this.currentlyHovering=X;let O=this.shadowRoot.querySelector("sl-dropdown"),Q=new CustomEvent("trigger-hover",{detail:{tooltip:O,entering:X},bubbles:!0,composed:!0});X?this.hoverTimer=setTimeout(()=>{this.dispatchEvent(Q)},750):setTimeout(()=>{this.closeTooltip(Q)},250)}handleClick(){let X=this.shadowRoot.querySelector("sl-dropdown");X.open||X.show(),this.currentlyOpen=X.open}closeTooltip(X){this.currentlyHovering||(clearTimeout(this.hoverTimer),this.dispatchEvent(X))}handleClickingLink(X){this.shadowRoot.querySelector('a[data-tag="'+X+'"]').click(),this.trackLearnMoreAnalytics()}render(){var X,O;return x$2`
    <div class="mic-wrapper" @mouseenter=${()=>this.handleHover(!0)} @mouseleave=${()=>this.handleHover(!1)}>
      ${this.placement!==""?x$2`
          <sl-dropdown
            distance="10"
            placement="${this.placement}"
            class="tooltip"
            @sl-hide=${()=>this.handleHover(!1)}
          >
          <slot name="trigger" slot="trigger"></slot>
          <div class="info-box">
            ${manifest_fields[this.field].description.map(Q=>x$2`<p class="info-blurb">${Q}</p>`)}
            ${manifest_fields[this.field].image?x$2`
                <div class="image-section">
                  <img src="${manifest_fields[this.field].image}" alt=${`example of ${this.field} in use.`} />
                </div>
              `:null}
            
          </div>
          <sl-menu>
            <sl-menu-item  @click=${()=>this.handleClickingLink(this.field)}><a class="learn-more" data-tag=${this.field} href="${(X=manifest_fields[this.field].docs_link)!=null?X:"https://docs.pwabuilder.com"}" target="blank" rel="noopener noreferrer">Learn More</a></sl-menu-item>
            ${manifest_fields[this.field].location?x$2`<sl-menu-item @click=${()=>this.openME()}>Edit in Manifest</sl-menu-item>`:null}
          </sl-menu>
        </sl-dropdown>
        `:x$2`
          <sl-dropdown
            distance="10"
            class="tooltip"
            @sl-hide=${()=>this.handleHover(!1)}
          >
          <slot name="trigger" slot="trigger"></slot>
          <div class="info-box">
            ${manifest_fields[this.field].description.map(Q=>x$2`<p class="info-blurb">${Q}</p>`)}
            ${manifest_fields[this.field].image?x$2`
                <div class="image-section">
                  <img src="${manifest_fields[this.field].image}" alt=${`example of ${this.field} in use.`} />
                </div>
              `:null}
            >
            <sl-menu>
            <sl-menu-item  @click=${()=>this.handleClickingLink(this.field)}><a class="learn-more" data-tag=${this.field} href="${(O=manifest_fields[this.field].docs_link)!=null?O:"https://docs.pwabuilder.com"}" target="blank" rel="noopener noreferrer">Learn More</a></sl-menu-item>
              ${manifest_fields[this.field].location?x$2`<sl-menu-item @click=${()=>this.openME()}>Edit in Manifest</sl-menu-item>`:null}
          </sl-menu>
          </div>
        </sl-dropdown>
        `}


    </div>
    `}};__decorateClass$7([n$f({type:String})],ManifestInfoCard.prototype,"field",2);__decorateClass$7([n$f({type:String})],ManifestInfoCard.prototype,"placement",2);__decorateClass$7([t$8()],ManifestInfoCard.prototype,"currentlyHovering",2);__decorateClass$7([t$8()],ManifestInfoCard.prototype,"currentlyOpen",2);__decorateClass$7([t$8()],ManifestInfoCard.prototype,"hoverTimer",2);ManifestInfoCard=__decorateClass$7([e$c("manifest-info-card")],ManifestInfoCard);var __defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__decorateClass$6=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$6(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$6(O,Q,U),U};let ServiceWorkerInfoCard=class extends s$9{constructor(){super(),this.field="",this.placement="",this.currentlyHovering=!1}static get styles(){return[i$8`

      .mic-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .info-box {
        background-color: var(--font-color);
        width: 340px;
        color: #ffffff;
        padding: 10px;
        border-radius: var(--card-border-radius);
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .info-box p {
        margin: 0;
        font-size: 16px;
        font-family: var(--font-family);
      }

      .right {
        background-color: transparent;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right:hover {
        cursor: pointer;
      }

      .image-section {
        background: linear-gradient(93.16deg, #EAECF4 16%, #CED0EC 87.75%);
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .image-section img {
        padding: 10px 20px;
        width: 300px;
        height: auto;
      }

      .learn-more {
        line-height: 17px;
        display: block;
        width: 100%;
      }

      .learn-more:visited, .learn-more:active, .learn-more:link {
        color: #ffffff;
      }

      sl-menu {
        background-color: var(--font-color);
        border: none;
        padding: 10px;
        padding-top: 0;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        gap: 15px;
        margin: 0;
        border-radius: 0;
        border-bottom-left-radius: var(--card-border-radius);
        border-bottom-right-radius: var(--card-border-radius);
      }

      sl-menu-item {
        border: 1px solid transparent;
      }

      sl-menu-item::part(checked-icon), sl-menu-item::part(submenu-icon) {
        display: none;
      }

      sl-menu-item::part(base){
        color: #ffffff;
        font-size: var(--card-body-font-size);
        font-weight: bold;
        font-family: var(--font-family);
        padding: 0;
        text-decoration: underline;
      }

      sl-menu-item:hover, sl-menu-item::part(base) {
        background-color: unset;
      }

      sl-menu-item:focus {
        border: 1px solid #ffffff;
      }

      /* < 480px */
      ${smallBreakPoint(i$8`
        .info-box{
          width: 240px;
        }

        .image-section img {
          width: 200px;
        }
      `)}

    `]}firstUpdated(){}trackLearnMoreAnalytics(){recordPWABuilderProcessStep("service_worker.learn_more_clicked",AnalyticsBehavior.ProcessCheckpoint),recordPWABuilderProcessStep(`service_worker.${this.field}_learn_more_clicked`,AnalyticsBehavior.ProcessCheckpoint)}handleHover(X){this.currentlyHovering=X;let O=this.shadowRoot.querySelector("sl-dropdown"),Q=new CustomEvent("trigger-hover",{detail:{tooltip:O,entering:X},bubbles:!0,composed:!0});X?this.hoverTimer=setTimeout(()=>{this.dispatchEvent(Q)},750):setTimeout(()=>{this.closeTooltip(Q)},250)}closeTooltip(X){this.currentlyHovering||(clearTimeout(this.hoverTimer),this.dispatchEvent(X))}handleClickingLink(X){this.shadowRoot.querySelector('a[data-tag="'+X+'"]').click(),this.trackLearnMoreAnalytics()}render(){var X,O;return x$2`
    <div class="mic-wrapper" @mouseenter=${()=>this.handleHover(!0)} @mouseleave=${()=>this.handleHover(!1)}>
      ${this.placement!==""?x$2`
        <sl-dropdown
          distance="10"
          class="tooltip"
          placement=${this.placement}
          @sl-hide=${()=>this.handleHover(!1)}
        >
          <slot name="trigger" slot="trigger"></slot>
          <div class="info-box">
            ${service_worker_fields[this.field].description.map(Q=>x$2`<p class="info-blurb">${Q}</p>`)}
          </div>
          <sl-menu>
            <sl-menu-item @click=${()=>this.handleClickingLink(this.field)}><a class="learn-more" data-tag=${this.field} href="${(X=service_worker_fields[this.field].docs_link)!=null?X:"https://docs.pwabuilder.com"}" target="blank" rel="noopener noreferrer">Learn More</a></sl-menu-item>
          </sl-menu>
        </sl-dropdown>
        `:x$2`
          <sl-dropdown
            distance="10"
            class="tooltip"
            @sl-hide=${()=>this.handleHover(!1)}
          >
          <slot name="trigger" slot="trigger"></slot>
          <div class="info-box">
            ${service_worker_fields[this.field].description.map(Q=>x$2`<p class="info-blurb">${Q}</p>`)}
          </div>
          <sl-menu>
            <sl-menu-item @click=${()=>this.handleClickingLink(this.field)}><a class="learn-more" data-tag=${this.field} href="${(O=service_worker_fields[this.field].docs_link)!=null?O:"https://docs.pwabuilder.com"}" target="blank" rel="noopener noreferrer">Learn More</a></sl-menu-item>
          </sl-menu>
        </sl-dropdown>
        `}

    </div>
    `}};__decorateClass$6([n$f({type:String})],ServiceWorkerInfoCard.prototype,"field",2);__decorateClass$6([n$f({type:String})],ServiceWorkerInfoCard.prototype,"placement",2);__decorateClass$6([t$8()],ServiceWorkerInfoCard.prototype,"currentlyHovering",2);__decorateClass$6([t$8()],ServiceWorkerInfoCard.prototype,"hoverTimer",2);ServiceWorkerInfoCard=__decorateClass$6([e$c("sw-info-card")],ServiceWorkerInfoCard);var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__decorateClass$5=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$5(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$5(O,Q,U),U};let TodoItem=class extends s$9{constructor(){super(),this.field="",this.card="",this.fix="",this.status="",this.displayString="",this.clickable=!1,this.isOpen=!1,this.darkMode=!1}static get styles(){return[i$8`
      .iwrapper {
        display: flex;
        column-gap: .5em;
        align-items: center;
        justify-content: space-between;
        font-size: 16px;
        background-color: #f1f1f1;
        border-radius: var(--card-border-radius);
        padding: .5em;
        margin-bottom: 10px;
        border: 1px solid transparent;
      }
      .clickable:hover {
        cursor: pointer;
        border: 1px solid #CBCDEB;
      }
      .active:hover {
        cursor: pointer;
        border: 1px solid #CBCDEB;
      }
      .iwrapper img {
        height: 16px;
      }
      .left, .right {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .left {
        gap: .5em;
      }
      .left p {
        margin: 0;
        vertical-align: middle;
        line-height: 16px;
        padding-top: 3px;
      }

      .arrow_link {
        margin: 0;
        border-bottom: 1px solid var(--primary-color);
        white-space: nowrap;
      }

      .arrow_anchor {
        font-size: var(--arrow-link-font-size);
        font-weight: bold;
        margin: 0px 0.5em 0px 0px;
        line-height: 1em;
        color: var(--primary-color);
        display: flex;
        column-gap: 10px;
        width: fit-content;
      }

      .arrow_anchor:visited {
        color: var(--primary-color);
      }

      .arrow_anchor:hover {
        cursor: pointer;
      }

      .arrow_anchor:hover img {
        animation: bounce 1s;
      }

      @keyframes bounce {
          0%,
          20%,
          50%,
          80%,
          100% {
            transform: translateY(0);
          }
          40% {
            transform: translateX(-5px);
          }
          60% {
            transform: translateX(5px);
          }
      }
      .arrow {
        width: 16px;
      }

      .right {
        background-color: transparent;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right:hover {
        cursor: pointer;
      }

      /* < 480px */
      ${smallBreakPoint(i$8`
      `)}

      /* 480px - 639px */
      ${mediumBreakPoint(i$8`
      `)}
      /* 640px - 1023px */
      ${largeBreakPoint(i$8`
      `)}
      /*1024px - 1365px*/
      ${xLargeBreakPoint(i$8`
      `)}
      /* > 1920px */
      ${xxxLargeBreakPoint(i$8`
      `)}
    `]}connectedCallback(){super.connectedCallback();const X=window.matchMedia("(prefers-color-scheme: dark)");this.darkMode=X.matches}decideClasses(){return this.status==="retest"||this.field.startsWith("Open")||manifest_fields[this.field]||service_worker_fields[this.field]?this.clickable=!0:this.clickable=!1,{iwrapper:!0,clickable:this.clickable}}bubbleEvent(){manifest_fields[this.field]&&this.shadowRoot.querySelector("manifest-info-card").handleHover(!this.isOpen),service_worker_fields[this.field]&&this.shadowRoot.querySelector("sw-info-card").handleHover(!this.isOpen);let X=new CustomEvent("todo-clicked",{detail:{field:this.field,card:this.card,fix:this.fix,displayString:this.displayString,errorString:this.fix}});this.dispatchEvent(X)}triggerHoverState(X){let O=this.shadowRoot.querySelector(".iwrapper");X.detail.entering?(O==null||O.classList.add("active"),this.isOpen=!0):(O==null||O.classList.remove("active"),this.isOpen=!1)}decideIcon(){switch(this.status){case"required":case"missing":return x$2`<img src=${stop_src$1} alt="yield result icon"/>`;case"enhancement":return x$2`<img src=${enhancement_src$1} alt="app capability result icon"/>`;case"retest":return x$2`<img src=${this.darkMode?retest_src_light:retest_src} style="color: black" alt="retest site icon"/>`}return x$2`<img src=${yield_src$1} alt="yield result icon"/>`}render(){return x$2`
      <div class="${o$b(this.decideClasses())}" @click=${()=>this.bubbleEvent()}>
        <div class="left">
          ${this.decideIcon()}
          <p>${this.fix}</p>
        </div>

        ${manifest_fields[this.field]?x$2`
            <manifest-info-card .field=${this.field} .placement="${"left"}" @trigger-hover=${X=>this.triggerHoverState(X)}>
              <button slot="trigger" type="button" class="right">
                <img src="assets/tooltip.svg" alt="info symbol, additional information available on hover" />
              </button>
            </manifest-info-card>
          `:null}

        ${service_worker_fields[this.field]?x$2`
            <sw-info-card .field=${this.field} .placement="${"left"}" @trigger-hover=${X=>this.triggerHoverState(X)}>
              <button slot="trigger" type="button" class="right">
                <img src="assets/tooltip.svg" alt="info symbol, additional information available on hover" />
              </button>
            </sw-info-card>
          `:null}
      </div>
    `}};__decorateClass$5([n$f({type:String})],TodoItem.prototype,"field",2);__decorateClass$5([n$f({type:String})],TodoItem.prototype,"card",2);__decorateClass$5([n$f({type:String})],TodoItem.prototype,"fix",2);__decorateClass$5([n$f({type:String})],TodoItem.prototype,"status",2);__decorateClass$5([n$f({type:String})],TodoItem.prototype,"displayString",2);__decorateClass$5([t$8()],TodoItem.prototype,"clickable",2);__decorateClass$5([t$8()],TodoItem.prototype,"isOpen",2);__decorateClass$5([t$8()],TodoItem.prototype,"darkMode",2);TodoItem=__decorateClass$5([e$c("todo-item")],TodoItem);const yield_src$1="/assets/new/yield.svg",stop_src$1="/assets/new/stop.svg",enhancement_src$1="/assets/new/enhancement.svg",retest_src="/assets/new/retest-icon.svg",retest_src_light="/assets/new/retest-icon_light.svg";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$7=window,e$b=t$7.ShadowRoot&&(t$7.ShadyCSS===void 0||t$7.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$8=Symbol(),n$e=new WeakMap;class o$a{constructor(O,Q,j){if(this._$cssResult$=!0,j!==s$8)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=O,this.t=Q}get styleSheet(){let O=this.o;const Q=this.t;if(e$b&&O===void 0){const j=Q!==void 0&&Q.length===1;j&&(O=n$e.get(Q)),O===void 0&&((this.o=O=new CSSStyleSheet).replaceSync(this.cssText),j&&n$e.set(Q,O))}return O}toString(){return this.cssText}}const r$6=X=>new o$a(typeof X=="string"?X:X+"",void 0,s$8),i$7=(X,...O)=>{const Q=X.length===1?X[0]:O.reduce((j,U,F)=>j+(q=>{if(q._$cssResult$===!0)return q.cssText;if(typeof q=="number")return q;throw Error("Value passed to 'css' function must be a 'css' function result: "+q+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(U)+X[F+1],X[0]);return new o$a(Q,X,s$8)},S$3=(X,O)=>{e$b?X.adoptedStyleSheets=O.map(Q=>Q instanceof CSSStyleSheet?Q:Q.styleSheet):O.forEach(Q=>{const j=document.createElement("style"),U=t$7.litNonce;U!==void 0&&j.setAttribute("nonce",U),j.textContent=Q.cssText,X.appendChild(j)})},c$5=e$b?X=>X:X=>X instanceof CSSStyleSheet?(O=>{let Q="";for(const j of O.cssRules)Q+=j.cssText;return r$6(Q)})(X):X;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$7;const e$a=window,r$5=e$a.trustedTypes,h$5=r$5?r$5.emptyScript:"",o$9=e$a.reactiveElementPolyfillSupport,n$d={toAttribute(X,O){switch(O){case Boolean:X=X?h$5:null;break;case Object:case Array:X=X==null?X:JSON.stringify(X)}return X},fromAttribute(X,O){let Q=X;switch(O){case Boolean:Q=X!==null;break;case Number:Q=X===null?null:Number(X);break;case Object:case Array:try{Q=JSON.parse(X)}catch{Q=null}}return Q}},a$4=(X,O)=>O!==X&&(O==O||X==X),l$6={attribute:!0,type:String,converter:n$d,reflect:!1,hasChanged:a$4};class d$4 extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(O){var Q;this.finalize(),((Q=this.h)!==null&&Q!==void 0?Q:this.h=[]).push(O)}static get observedAttributes(){this.finalize();const O=[];return this.elementProperties.forEach((Q,j)=>{const U=this._$Ep(j,Q);U!==void 0&&(this._$Ev.set(U,j),O.push(U))}),O}static createProperty(O,Q=l$6){if(Q.state&&(Q.attribute=!1),this.finalize(),this.elementProperties.set(O,Q),!Q.noAccessor&&!this.prototype.hasOwnProperty(O)){const j=typeof O=="symbol"?Symbol():"__"+O,U=this.getPropertyDescriptor(O,j,Q);U!==void 0&&Object.defineProperty(this.prototype,O,U)}}static getPropertyDescriptor(O,Q,j){return{get(){return this[Q]},set(U){const F=this[O];this[Q]=U,this.requestUpdate(O,F,j)},configurable:!0,enumerable:!0}}static getPropertyOptions(O){return this.elementProperties.get(O)||l$6}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const O=Object.getPrototypeOf(this);if(O.finalize(),O.h!==void 0&&(this.h=[...O.h]),this.elementProperties=new Map(O.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const Q=this.properties,j=[...Object.getOwnPropertyNames(Q),...Object.getOwnPropertySymbols(Q)];for(const U of j)this.createProperty(U,Q[U])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(O){const Q=[];if(Array.isArray(O)){const j=new Set(O.flat(1/0).reverse());for(const U of j)Q.unshift(c$5(U))}else O!==void 0&&Q.push(c$5(O));return Q}static _$Ep(O,Q){const j=Q.attribute;return j===!1?void 0:typeof j=="string"?j:typeof O=="string"?O.toLowerCase():void 0}u(){var O;this._$E_=new Promise(Q=>this.enableUpdating=Q),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(O=this.constructor.h)===null||O===void 0||O.forEach(Q=>Q(this))}addController(O){var Q,j;((Q=this._$ES)!==null&&Q!==void 0?Q:this._$ES=[]).push(O),this.renderRoot!==void 0&&this.isConnected&&((j=O.hostConnected)===null||j===void 0||j.call(O))}removeController(O){var Q;(Q=this._$ES)===null||Q===void 0||Q.splice(this._$ES.indexOf(O)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((O,Q)=>{this.hasOwnProperty(Q)&&(this._$Ei.set(Q,this[Q]),delete this[Q])})}createRenderRoot(){var O;const Q=(O=this.shadowRoot)!==null&&O!==void 0?O:this.attachShadow(this.constructor.shadowRootOptions);return S$3(Q,this.constructor.elementStyles),Q}connectedCallback(){var O;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(O=this._$ES)===null||O===void 0||O.forEach(Q=>{var j;return(j=Q.hostConnected)===null||j===void 0?void 0:j.call(Q)})}enableUpdating(O){}disconnectedCallback(){var O;(O=this._$ES)===null||O===void 0||O.forEach(Q=>{var j;return(j=Q.hostDisconnected)===null||j===void 0?void 0:j.call(Q)})}attributeChangedCallback(O,Q,j){this._$AK(O,j)}_$EO(O,Q,j=l$6){var U;const F=this.constructor._$Ep(O,j);if(F!==void 0&&j.reflect===!0){const q=(((U=j.converter)===null||U===void 0?void 0:U.toAttribute)!==void 0?j.converter:n$d).toAttribute(Q,j.type);this._$El=O,q==null?this.removeAttribute(F):this.setAttribute(F,q),this._$El=null}}_$AK(O,Q){var j;const U=this.constructor,F=U._$Ev.get(O);if(F!==void 0&&this._$El!==F){const q=U.getPropertyOptions(F),W=typeof q.converter=="function"?{fromAttribute:q.converter}:((j=q.converter)===null||j===void 0?void 0:j.fromAttribute)!==void 0?q.converter:n$d;this._$El=F,this[F]=W.fromAttribute(Q,q.type),this._$El=null}}requestUpdate(O,Q,j){let U=!0;O!==void 0&&(((j=j||this.constructor.getPropertyOptions(O)).hasChanged||a$4)(this[O],Q)?(this._$AL.has(O)||this._$AL.set(O,Q),j.reflect===!0&&this._$El!==O&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(O,j))):U=!1),!this.isUpdatePending&&U&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(Q){Promise.reject(Q)}const O=this.scheduleUpdate();return O!=null&&await O,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var O;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((U,F)=>this[F]=U),this._$Ei=void 0);let Q=!1;const j=this._$AL;try{Q=this.shouldUpdate(j),Q?(this.willUpdate(j),(O=this._$ES)===null||O===void 0||O.forEach(U=>{var F;return(F=U.hostUpdate)===null||F===void 0?void 0:F.call(U)}),this.update(j)):this._$Ek()}catch(U){throw Q=!1,this._$Ek(),U}Q&&this._$AE(j)}willUpdate(O){}_$AE(O){var Q;(Q=this._$ES)===null||Q===void 0||Q.forEach(j=>{var U;return(U=j.hostUpdated)===null||U===void 0?void 0:U.call(j)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(O)),this.updated(O)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(O){return!0}update(O){this._$EC!==void 0&&(this._$EC.forEach((Q,j)=>this._$EO(j,this[j],Q)),this._$EC=void 0),this._$Ek()}updated(O){}firstUpdated(O){}}d$4.finalized=!0,d$4.elementProperties=new Map,d$4.elementStyles=[],d$4.shadowRootOptions={mode:"open"},o$9==null||o$9({ReactiveElement:d$4}),((s$7=e$a.reactiveElementVersions)!==null&&s$7!==void 0?s$7:e$a.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$6;const i$6=window,s$6=i$6.trustedTypes,e$9=s$6?s$6.createPolicy("lit-html",{createHTML:X=>X}):void 0,o$8="$lit$",n$c=`lit$${(Math.random()+"").slice(9)}$`,l$5="?"+n$c,h$4=`<${l$5}>`,r$4=document,u$2=()=>r$4.createComment(""),d$3=X=>X===null||typeof X!="object"&&typeof X!="function",c$4=Array.isArray,v$1=X=>c$4(X)||typeof(X==null?void 0:X[Symbol.iterator])=="function",a$3=`[ 	
\f\r]`,f$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_$1=/-->/g,m$2=/>/g,p$2=RegExp(`>|${a$3}(?:([^\\s"'>=/]+)(${a$3}*=${a$3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g$2=/'/g,$$1=/"/g,y$1=/^(?:script|style|textarea|title)$/i,w$1=X=>(O,...Q)=>({_$litType$:X,strings:O,values:Q}),x$1=w$1(1),T$1=Symbol.for("lit-noChange"),A$1=Symbol.for("lit-nothing"),E$1=new WeakMap,C$2=r$4.createTreeWalker(r$4,129,null,!1);function P$1(X,O){if(!Array.isArray(X)||!X.hasOwnProperty("raw"))throw Error("invalid template strings array");return e$9!==void 0?e$9.createHTML(O):O}const V$1=(X,O)=>{const Q=X.length-1,j=[];let U,F=O===2?"<svg>":"",q=f$1;for(let W=0;W<Q;W++){const Y=X[W];let G,K,J=-1,ee=0;for(;ee<Y.length&&(q.lastIndex=ee,K=q.exec(Y),K!==null);)ee=q.lastIndex,q===f$1?K[1]==="!--"?q=_$1:K[1]!==void 0?q=m$2:K[2]!==void 0?(y$1.test(K[2])&&(U=RegExp("</"+K[2],"g")),q=p$2):K[3]!==void 0&&(q=p$2):q===p$2?K[0]===">"?(q=U!=null?U:f$1,J=-1):K[1]===void 0?J=-2:(J=q.lastIndex-K[2].length,G=K[1],q=K[3]===void 0?p$2:K[3]==='"'?$$1:g$2):q===$$1||q===g$2?q=p$2:q===_$1||q===m$2?q=f$1:(q=p$2,U=void 0);const te=q===p$2&&X[W+1].startsWith("/>")?" ":"";F+=q===f$1?Y+h$4:J>=0?(j.push(G),Y.slice(0,J)+o$8+Y.slice(J)+n$c+te):Y+n$c+(J===-2?(j.push(void 0),W):te)}return[P$1(X,F+(X[Q]||"<?>")+(O===2?"</svg>":"")),j]};class N$1{constructor({strings:O,_$litType$:Q},j){let U;this.parts=[];let F=0,q=0;const W=O.length-1,Y=this.parts,[G,K]=V$1(O,Q);if(this.el=N$1.createElement(G,j),C$2.currentNode=this.el.content,Q===2){const J=this.el.content,ee=J.firstChild;ee.remove(),J.append(...ee.childNodes)}for(;(U=C$2.nextNode())!==null&&Y.length<W;){if(U.nodeType===1){if(U.hasAttributes()){const J=[];for(const ee of U.getAttributeNames())if(ee.endsWith(o$8)||ee.startsWith(n$c)){const te=K[q++];if(J.push(ee),te!==void 0){const re=U.getAttribute(te.toLowerCase()+o$8).split(n$c),oe=/([.?@])?(.*)/.exec(te);Y.push({type:1,index:F,name:oe[2],strings:re,ctor:oe[1]==="."?H$1:oe[1]==="?"?L$1:oe[1]==="@"?z$1:k$1})}else Y.push({type:6,index:F})}for(const ee of J)U.removeAttribute(ee)}if(y$1.test(U.tagName)){const J=U.textContent.split(n$c),ee=J.length-1;if(ee>0){U.textContent=s$6?s$6.emptyScript:"";for(let te=0;te<ee;te++)U.append(J[te],u$2()),C$2.nextNode(),Y.push({type:2,index:++F});U.append(J[ee],u$2())}}}else if(U.nodeType===8)if(U.data===l$5)Y.push({type:2,index:F});else{let J=-1;for(;(J=U.data.indexOf(n$c,J+1))!==-1;)Y.push({type:7,index:F}),J+=n$c.length-1}F++}}static createElement(O,Q){const j=r$4.createElement("template");return j.innerHTML=O,j}}function S$2(X,O,Q=X,j){var U,F,q,W;if(O===T$1)return O;let Y=j!==void 0?(U=Q._$Co)===null||U===void 0?void 0:U[j]:Q._$Cl;const G=d$3(O)?void 0:O._$litDirective$;return(Y==null?void 0:Y.constructor)!==G&&((F=Y==null?void 0:Y._$AO)===null||F===void 0||F.call(Y,!1),G===void 0?Y=void 0:(Y=new G(X),Y._$AT(X,Q,j)),j!==void 0?((q=(W=Q)._$Co)!==null&&q!==void 0?q:W._$Co=[])[j]=Y:Q._$Cl=Y),Y!==void 0&&(O=S$2(X,Y._$AS(X,O.values),Y,j)),O}class M$1{constructor(O,Q){this._$AV=[],this._$AN=void 0,this._$AD=O,this._$AM=Q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(O){var Q;const{el:{content:j},parts:U}=this._$AD,F=((Q=O==null?void 0:O.creationScope)!==null&&Q!==void 0?Q:r$4).importNode(j,!0);C$2.currentNode=F;let q=C$2.nextNode(),W=0,Y=0,G=U[0];for(;G!==void 0;){if(W===G.index){let K;G.type===2?K=new R$1(q,q.nextSibling,this,O):G.type===1?K=new G.ctor(q,G.name,G.strings,this,O):G.type===6&&(K=new Z$1(q,this,O)),this._$AV.push(K),G=U[++Y]}W!==(G==null?void 0:G.index)&&(q=C$2.nextNode(),W++)}return C$2.currentNode=r$4,F}v(O){let Q=0;for(const j of this._$AV)j!==void 0&&(j.strings!==void 0?(j._$AI(O,j,Q),Q+=j.strings.length-2):j._$AI(O[Q])),Q++}}class R$1{constructor(O,Q,j,U){var F;this.type=2,this._$AH=A$1,this._$AN=void 0,this._$AA=O,this._$AB=Q,this._$AM=j,this.options=U,this._$Cp=(F=U==null?void 0:U.isConnected)===null||F===void 0||F}get _$AU(){var O,Q;return(Q=(O=this._$AM)===null||O===void 0?void 0:O._$AU)!==null&&Q!==void 0?Q:this._$Cp}get parentNode(){let O=this._$AA.parentNode;const Q=this._$AM;return Q!==void 0&&(O==null?void 0:O.nodeType)===11&&(O=Q.parentNode),O}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(O,Q=this){O=S$2(this,O,Q),d$3(O)?O===A$1||O==null||O===""?(this._$AH!==A$1&&this._$AR(),this._$AH=A$1):O!==this._$AH&&O!==T$1&&this._(O):O._$litType$!==void 0?this.g(O):O.nodeType!==void 0?this.$(O):v$1(O)?this.T(O):this._(O)}k(O){return this._$AA.parentNode.insertBefore(O,this._$AB)}$(O){this._$AH!==O&&(this._$AR(),this._$AH=this.k(O))}_(O){this._$AH!==A$1&&d$3(this._$AH)?this._$AA.nextSibling.data=O:this.$(r$4.createTextNode(O)),this._$AH=O}g(O){var Q;const{values:j,_$litType$:U}=O,F=typeof U=="number"?this._$AC(O):(U.el===void 0&&(U.el=N$1.createElement(P$1(U.h,U.h[0]),this.options)),U);if(((Q=this._$AH)===null||Q===void 0?void 0:Q._$AD)===F)this._$AH.v(j);else{const q=new M$1(F,this),W=q.u(this.options);q.v(j),this.$(W),this._$AH=q}}_$AC(O){let Q=E$1.get(O.strings);return Q===void 0&&E$1.set(O.strings,Q=new N$1(O)),Q}T(O){c$4(this._$AH)||(this._$AH=[],this._$AR());const Q=this._$AH;let j,U=0;for(const F of O)U===Q.length?Q.push(j=new R$1(this.k(u$2()),this.k(u$2()),this,this.options)):j=Q[U],j._$AI(F),U++;U<Q.length&&(this._$AR(j&&j._$AB.nextSibling,U),Q.length=U)}_$AR(O=this._$AA.nextSibling,Q){var j;for((j=this._$AP)===null||j===void 0||j.call(this,!1,!0,Q);O&&O!==this._$AB;){const U=O.nextSibling;O.remove(),O=U}}setConnected(O){var Q;this._$AM===void 0&&(this._$Cp=O,(Q=this._$AP)===null||Q===void 0||Q.call(this,O))}}class k$1{constructor(O,Q,j,U,F){this.type=1,this._$AH=A$1,this._$AN=void 0,this.element=O,this.name=Q,this._$AM=U,this.options=F,j.length>2||j[0]!==""||j[1]!==""?(this._$AH=Array(j.length-1).fill(new String),this.strings=j):this._$AH=A$1}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(O,Q=this,j,U){const F=this.strings;let q=!1;if(F===void 0)O=S$2(this,O,Q,0),q=!d$3(O)||O!==this._$AH&&O!==T$1,q&&(this._$AH=O);else{const W=O;let Y,G;for(O=F[0],Y=0;Y<F.length-1;Y++)G=S$2(this,W[j+Y],Q,Y),G===T$1&&(G=this._$AH[Y]),q||(q=!d$3(G)||G!==this._$AH[Y]),G===A$1?O=A$1:O!==A$1&&(O+=(G!=null?G:"")+F[Y+1]),this._$AH[Y]=G}q&&!U&&this.j(O)}j(O){O===A$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,O!=null?O:"")}}class H$1 extends k$1{constructor(){super(...arguments),this.type=3}j(O){this.element[this.name]=O===A$1?void 0:O}}const I$1=s$6?s$6.emptyScript:"";class L$1 extends k$1{constructor(){super(...arguments),this.type=4}j(O){O&&O!==A$1?this.element.setAttribute(this.name,I$1):this.element.removeAttribute(this.name)}}class z$1 extends k$1{constructor(O,Q,j,U,F){super(O,Q,j,U,F),this.type=5}_$AI(O,Q=this){var j;if((O=(j=S$2(this,O,Q,0))!==null&&j!==void 0?j:A$1)===T$1)return;const U=this._$AH,F=O===A$1&&U!==A$1||O.capture!==U.capture||O.once!==U.once||O.passive!==U.passive,q=O!==A$1&&(U===A$1||F);F&&this.element.removeEventListener(this.name,this,U),q&&this.element.addEventListener(this.name,this,O),this._$AH=O}handleEvent(O){var Q,j;typeof this._$AH=="function"?this._$AH.call((j=(Q=this.options)===null||Q===void 0?void 0:Q.host)!==null&&j!==void 0?j:this.element,O):this._$AH.handleEvent(O)}}class Z$1{constructor(O,Q,j){this.element=O,this.type=6,this._$AN=void 0,this._$AM=Q,this.options=j}get _$AU(){return this._$AM._$AU}_$AI(O){S$2(this,O)}}const B$1=i$6.litHtmlPolyfillSupport;B$1==null||B$1(N$1,R$1),((t$6=i$6.litHtmlVersions)!==null&&t$6!==void 0?t$6:i$6.litHtmlVersions=[]).push("2.8.0");const D$1=(X,O,Q)=>{var j,U;const F=(j=Q==null?void 0:Q.renderBefore)!==null&&j!==void 0?j:O;let q=F._$litPart$;if(q===void 0){const W=(U=Q==null?void 0:Q.renderBefore)!==null&&U!==void 0?U:null;F._$litPart$=q=new R$1(O.insertBefore(u$2(),W),W,void 0,Q!=null?Q:{})}return q._$AI(X),q};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$4,o$7;class s$5 extends d$4{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var O,Q;const j=super.createRenderRoot();return(O=(Q=this.renderOptions).renderBefore)!==null&&O!==void 0||(Q.renderBefore=j.firstChild),j}update(O){const Q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(O),this._$Do=D$1(Q,this.renderRoot,this.renderOptions)}connectedCallback(){var O;super.connectedCallback(),(O=this._$Do)===null||O===void 0||O.setConnected(!0)}disconnectedCallback(){var O;super.disconnectedCallback(),(O=this._$Do)===null||O===void 0||O.setConnected(!1)}render(){return T$1}}s$5.finalized=!0,s$5._$litElement$=!0,(l$4=globalThis.litElementHydrateSupport)===null||l$4===void 0||l$4.call(globalThis,{LitElement:s$5});const n$b=globalThis.litElementPolyfillSupport;n$b==null||n$b({LitElement:s$5});((o$7=globalThis.litElementVersions)!==null&&o$7!==void 0?o$7:globalThis.litElementVersions=[]).push("3.3.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$8=X=>O=>typeof O=="function"?((Q,j)=>(customElements.define(Q,j),j))(X,O):((Q,j)=>{const{kind:U,elements:F}=j;return{kind:U,elements:F,finisher(q){customElements.define(Q,q)}}})(X,O);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$5=(X,O)=>O.kind==="method"&&O.descriptor&&!("value"in O.descriptor)?{...O,finisher(Q){Q.createProperty(O.key,X)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:O.key,initializer(){typeof O.initializer=="function"&&(this[O.key]=O.initializer.call(this))},finisher(Q){Q.createProperty(O.key,X)}};function e$7(X){return(O,Q)=>Q!==void 0?((j,U,F)=>{U.constructor.createProperty(F,j)})(X,O,Q):i$5(X,O)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function t$5(X){return e$7({...X,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$a;((n$a=window.HTMLSlotElement)===null||n$a===void 0?void 0:n$a.prototype.assignedElements)!=null;function errorInTab(X,O){return new CustomEvent("errorInTab",{detail:{areThereErrors:X,panel:O},bubbles:!0,composed:!0})}function insertAfter(X,O){O.parentNode.insertBefore(X,O.nextSibling)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$4={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$6=X=>(...O)=>({_$litDirective$:X,values:O});class i$4{constructor(O){}get _$AU(){return this._$AM._$AU}_$AT(O,Q,j){this._$Ct=O,this._$AM=Q,this._$Ci=j}_$AS(O,Q){return this.update(O,Q)}update(O,Q){return this.render(...Q)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$6=e$6(class extends i$4{constructor(X){var O;if(super(X),X.type!==t$4.ATTRIBUTE||X.name!=="class"||((O=X.strings)===null||O===void 0?void 0:O.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(X){return" "+Object.keys(X).filter(O=>X[O]).join(" ")+" "}update(X,[O]){var Q,j;if(this.it===void 0){this.it=new Set,X.strings!==void 0&&(this.nt=new Set(X.strings.join(" ").split(/\s/).filter(F=>F!=="")));for(const F in O)O[F]&&!(!((Q=this.nt)===null||Q===void 0)&&Q.has(F))&&this.it.add(F);return this.render(O)}const U=X.element.classList;this.it.forEach(F=>{F in O||(U.remove(F),this.it.delete(F))});for(const F in O){const q=!!O[F];q===this.it.has(F)||((j=this.nt)===null||j===void 0?void 0:j.has(F))||(q?(U.add(F),this.it.add(F)):(U.remove(F),this.it.delete(F)))}return T$1}});var __decorate$b=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let ManifestFieldTooltip=class extends s$5{constructor(){super(),this.field="",this.currentlyHovering=!1}static get styles(){return[i$7`

      .mic-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 16px;
        width: 16px;
      }

      .info-box {
        background-color: #292c3a;
        width: 220px;
        color: #ffffff;
        padding: 10px;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .info-box p {
        margin: 0;
        font-size: 16px;
      }

      .right {
        background-color: transparent;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .right:hover {
        cursor: pointer;
      }

      .mic-actions {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        gap: 5px;
        margin-bottom: 5px;
      }

      .mic-actions > * {
        color: #ffffff;
        font-size: 14px;
        font-weight: bold;
        font-family: var(--font-family);
      }

      .mic-actions a {
        line-height: 17px;
      }

      .mic-actions a:visited, .mic-actions a:active, .mic-actions a:link {
        color: #ffffff;
      }

    `]}firstUpdated(){}trackTooltipOpened(){}trackLearnMoreAnalytics(){}handleHover(O){this.trackTooltipOpened(),this.currentlyHovering=O;let Q=this.shadowRoot.querySelector("sl-dropdown"),j=new CustomEvent("trigger-hover",{detail:{tooltip:Q,entering:O},bubbles:!0,composed:!0});O?this.dispatchEvent(j):setTimeout(()=>{this.closeTooltip(j)},500)}closeTooltip(O){this.currentlyHovering||this.dispatchEvent(O)}render(){var O;return x$1`
      <div class="mic-wrapper" @mouseenter=${()=>this.handleHover(!0)} @mouseleave=${()=>this.handleHover(!1)}>
        <sl-dropdown distance="10" placement="right" class="tooltip">
          <button slot="trigger" type="button" class="right" class="nav_link nav_button" @click=${()=>this.trackTooltipOpened()} aria-label="Required field">
            <img src="assets/tooltip.svg" alt="info symbol, additional information available on hover" />
          </button>
          <div class="info-box">
            ${manifest_fields[this.field].description.map(Q=>x$1`<p class="info-blurb">${Q}</p>`)}
            ${manifest_fields[this.field].docs_link?x$1`
                <div class="mic-actions">
                  <a class="learn-more" href="${(O=manifest_fields[this.field].docs_link)!=null?O:"https://docs.pwabuilder.com"}" target="blank" rel="noopener noreferrer" @click=${()=>this.trackLearnMoreAnalytics()}>Learn More</a>
                </div>
              `:x$1``}
            
          </div>
        </sl-dropdown>
      </div>
    `}};__decorate$b([e$7({type:String})],ManifestFieldTooltip.prototype,"field",void 0);__decorate$b([t$5()],ManifestFieldTooltip.prototype,"currentlyHovering",void 0);ManifestFieldTooltip=__decorate$b([e$8("manifest-field-tooltip")],ManifestFieldTooltip);var __decorate$a=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};const defaultColor="#000000";let manifestInitialized$5=!1,infoFields=["name","short_name","description","background_color","theme_color"],ManifestInfoForm=class extends s$5{constructor(){super(),this.manifest={},this.focusOn="",this.bgText="",this.themeText="",this.errorMap={},this.shouldValidateAllFields=!0}static get styles(){return i$7`

      :host {
        --sl-focus-ring-width: 3px;
        --sl-input-focus-ring-color: #4f3fb670;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #4F3FB6ac;
        --sl-input-font-family: Hind, sans-serif;
      }

      sl-input::part(base),
      sl-textarea::part(base),
      sl-option::part(base),
      sl-color-picker::part(base),
      sl-button::part(base) {
        --sl-input-font-size-medium: 16px;
        --sl-font-size-medium: 16px;
        --sl-input-height-medium: 3em;
        --sl-button-font-size-medium: 16px;
      }
      sl-input::part(base),
      sl-textarea::part(base){
        background-color: #fbfbfb;
      }
      #form-holder {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }
      .form-row {
        display: flex;
        column-gap: 1em;
      }
      .form-row h3 {
        font-size: 18px;
        margin: 0;
      }
      .field-desc {
        white-space: no-wrap;
        font-size: 14px;
        margin: 0;
        color: #717171;
      }

      .long .form-field {
        width: 100%;
      }
      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
      .form-field p {
        font-size: 14px;
      }
      .field-header{
        display: flex;
        align-items: center;
        justify-content: space-between;
        column-gap: 5px;
      }

      .header-left{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }

      .color_field {
        display: flex;
        flex-direction: column;
      }
      .color-holder {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .toolTip {
        font-size: 14px;
        visibility: hidden;
        width: 150px;
        background: black;
        color: white;
        font-weight: 500;
        text-align: center;
        border-radius: 6px;
        padding: .75em;
        /* Position the tooltip */
        position: absolute;
        top: 20px;
        left: -25px;
        z-index: 1;
        box-shadow: 0px 2px 20px 0px #0000006c;
      }
      .field-header a {
        display: flex;
        align-items: center;
        position: relative;
        color: black;
      }
      a:hover .toolTip {
        visibility: visible;
      }
      a:visited, a:focus {
        color: black;
      }
      .color-section {
        display: flex;
        gap: .5em;
        align-items: center;
        justify-content: flex-start;
      }

      .color-section p {
        font-size: 18px;
        color: #717171;
        display: flex;
        align-items: center;
        height: fit-content;
        margin: 0;
      }

      sl-color-picker {
        --grid-width: 315px;
        height: 25px;
      }

      sl-color-picker::part(trigger){
        border-radius: 0;
        height: 25px;
        width: 75px;
        display: flex;
      }
      sl-menu {
        width: 100%;
      }

      sl-option:focus-within::part(base) {
        color: #ffffff;
        background-color: #4F3FB6;
      }

      sl-option::part(base):hover{
        color: #ffffff;
        background-color: #4F3FB6;
      }

      .error-color-field{
        border: 1px solid #eb5757 !important;
      }

      .error::part(base){
        border-color: #eb5757;
        --sl-input-focus-ring-color: #eb575770;
        --sl-focus-ring-width: 3px;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #eb5757ac;
      }

      .error::part(control){
        border-color: #eb5757;
      }

      sl-input::part(input), sl-textarea::part(textarea){
        color: #717171;
      }

      .focus {
        color: #4f3fb6;
      }

      @media(max-width: 765px){
        .form-row:not(.color-row) {
          flex-direction: column;
          row-gap: 1em;
        }
        .form-row:not(.color-row) .form-field {
          width: 100%;
        }
      }

      @media(max-width: 600px){

      }

      @media(max-width: 480px){
        sl-input::part(base),
        sl-option::part(base) {
          --sl-input-font-size-medium: 14px;
          --sl-font-size-medium: 14px;
          --sl-input-height-medium: 2.5em;
        }

        .form-row p {
          font-size: 12px;
        }

        .form-row h3 {
          font-size: 16px;
        }

        .color-row {
          gap: 1em;
          flex-direction: column;
        }

        .color-row .form-field {
          width: 100%;
        }
        .field-header a:after {
          content: "";
          position: absolute;
          left: -13px;
          top: -13px;
          z-index: -1;
          width: 40px;
          height: 40px;
          border-radius: 7px;
        }
      }
    `}firstUpdated(){}async updated(O){let Q=this.shadowRoot.querySelector('[data-field="'+this.focusOn+'"]');this.focusOn&&Q&&setTimeout(()=>{Q.scrollIntoView({block:"end",behavior:"smooth"})},500),manifestInitialized$5&&(manifestInitialized$5=!1,this.initMissingColors(),this.requestValidateAllFields())}async requestValidateAllFields(){if(this.shouldValidateAllFields=!0,!this.validationPromise)for(;this.shouldValidateAllFields;)this.shouldValidateAllFields=!1,this.validationPromise=this.validateAllFields(),await this.validationPromise}async validateAllFields(){for(let O=0;O<infoFields.length;O++){let Q=infoFields[O];if(Q in this.manifest){const j=await validateSingleField(Q,this.manifest[Q]);if(!j.valid){let F=this.shadowRoot.querySelector('[data-field="'+Q+'"]');if(Q==="theme_color"||Q==="background_color"){if(this.shadowRoot.querySelector(`.${Q}-error-div`)){let q=this.shadowRoot.querySelector(`.${Q}-error-div`);q.parentElement.removeChild(q)}if(j.errors){this.errorMap[Q]=0;let q=document.createElement("div");q.classList.add(`${Q}-error-div`),j.errors.forEach(W=>{let Y=document.createElement("p");Y.innerText=W,Y.style.color="#eb5757",Y.setAttribute("aria-live","polite"),q.append(Y),this.errorMap[Q]++}),insertAfter(q,F.parentNode.parentNode.lastElementChild)}F.classList.add("error-color-field")}else{if(this.shadowRoot.querySelector(`.${Q}-error-div`)){let q=this.shadowRoot.querySelector(`.${Q}-error-div`);q.parentElement.removeChild(q)}if(j.errors){this.errorMap[Q]=0;let q=document.createElement("div");q.classList.add(`${Q}-error-div`),j.errors.forEach(W=>{let Y=document.createElement("p");Y.innerText=W,Y.style.color="#eb5757",Y.setAttribute("aria-live","polite"),q.append(Y),this.errorMap[Q]++}),insertAfter(q,F.parentNode.lastElementChild)}}F.classList.add("error")}}else if(required_fields.includes(Q)){let j=this.shadowRoot.querySelector('[data-field="'+Q+'"]');if(j.classList.add("error"),this.shadowRoot.querySelector(`.${Q}-error-div`)){let q=this.shadowRoot.querySelector(`.${Q}-error-div`);q.parentElement.removeChild(q)}this.errorMap[Q]=0;let U=document.createElement("div");U.classList.add(`${Q}-error-div`);let F=document.createElement("p");F.innerText=`${Q} is required and is missing from your manifest.`,F.style.color="#eb5757",F.setAttribute("aria-live","polite"),U.append(F),this.errorMap[Q]++,insertAfter(U,j.parentNode.lastElementChild)}}this.validationPromise=void 0,Object.keys(this.errorMap).length===0?this.dispatchEvent(errorInTab(!1,"info")):this.dispatchEvent(errorInTab(!0,"info"))}initMissingColors(){if(!this.manifest.theme_color){let O=new CustomEvent("manifestUpdated",{detail:{field:"theme_color",change:"#000000"},bubbles:!0,composed:!0});this.dispatchEvent(O)}if(!this.manifest.background_color){let O=new CustomEvent("manifestUpdated",{detail:{field:"background_color",change:"#000000"},bubbles:!0,composed:!0});this.dispatchEvent(O)}}async handleInputChange(O){this.validationPromise&&await this.validationPromise;const Q=O.target;let j=Q.value;const U=Q.dataset.field;let F=new CustomEvent("fieldChangeAttempted",{detail:{field:U},bubbles:!0,composed:!0});this.dispatchEvent(F);const q=await validateSingleField(U,j);if(q.valid){let Y=new CustomEvent("manifestUpdated",{detail:{field:U,change:j},bubbles:!0,composed:!0});if(this.dispatchEvent(Y),Q.classList.contains("error")){Q.classList.toggle("error"),delete this.errorMap[U];let G=Q.parentNode.lastElementChild;Q.parentNode.removeChild(G)}}else{if(this.shadowRoot.querySelector(`.${U}-error-div`)){let Y=this.shadowRoot.querySelector(`.${U}-error-div`);Y.parentElement.removeChild(Y)}if(q.errors){let Y=document.createElement("div");Y.classList.add(`${U}-error-div`),this.errorMap[U]=0,q.errors.forEach(G=>{let K=document.createElement("p");K.innerText=G,K.style.color="#eb5757",K.setAttribute("aria-live","polite"),Y.append(K),this.errorMap[U]++}),insertAfter(Y,Q.parentNode.lastElementChild)}Q.classList.add("error")}Object.keys(this.errorMap).length==0?this.dispatchEvent(errorInTab(!1,"info")):this.dispatchEvent(errorInTab(!0,"info"))}handleColorSwitch(O){let Q=this.shadowRoot.getElementById(O+"_picker"),j=Q.value,U=new CustomEvent("manifestUpdated",{detail:{field:O,change:j},bubbles:!0,composed:!0});this.dispatchEvent(U);let F=new CustomEvent("fieldChangeAttempted",{detail:{field:O},bubbles:!0,composed:!0});if(this.dispatchEvent(F),Q.classList.contains("error-color-field")){Q.classList.toggle("error-color-field"),delete this.errorMap[O];let q=Q.parentNode.parentNode.lastElementChild;Q.parentNode.parentNode.removeChild(q)}Object.keys(this.errorMap).length==0&&this.dispatchEvent(errorInTab(!1,"info"))}decideFocus(O){return{focus:this.focusOn===O}}render(){var O,Q,j;return x$1`
      <div id="form-holder">
        <div class="form-row">
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("name"))}>Name</h3>
                <manifest-field-tooltip .field=${"name"}></manifest-field-tooltip>
              </div>

              <p class="field-desc">(required)</p>
            </div>
            <p class="field-desc">The name of your app as displayed to the user</p>
            <sl-input placeholder="PWA Name" value=${this.manifest.name||""} data-field="name" @sl-change=${this.handleInputChange}></sl-input>
          </div>
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("short_name"))}>Short Name</h3>
                <manifest-field-tooltip .field=${"short_name"}></manifest-field-tooltip>
              </div>

              <p class="field-desc">(required)</p>
            </div>
            <p class="field-desc">Used in app launchers</p>
            <sl-input placeholder="PWA Short Name" value=${this.manifest.short_name||""} data-field="short_name" @sl-change=${this.handleInputChange}></sl-input>
          </div>
        </div>

        <div class="form-row long">
          <div class="form-field">
            <div class="field-header">
            <div class="header-left">
              <h3 class=${o$6(this.decideFocus("id"))}>Id</h3>
              <manifest-field-tooltip .field=${"id"}></manifest-field-tooltip>
            </div>
            </div>
            <p class="field-desc">Unique identifier for your PWA that is seperate from fields that could change over time (like name or short name)</p>
            <sl-input 
              placeholder="id" 
              value=${(O=this.manifest.id)!=null?O:""} 
              data-field="id" 
              @sl-change=${this.handleInputChange}></sl-input>
          </div>
        </div>
        
        <div class="form-row long">
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("description"))}>Description</h3>
                <manifest-field-tooltip .field=${"description"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">Used in app storefronts and install dialogs</p>
            <sl-textarea placeholder="PWA Description" value=${this.manifest.description||""} data-field="description" @sl-change=${this.handleInputChange} resize="none"></sl-textarea>
          </div>
        </div>
        <div class="form-row color-row">
          <div class="form-field color_field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("background_color"))}>Background Color</h3>
                <manifest-field-tooltip .field=${"background_color"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">Select a Background color</p>
            <span class="color-holder">
              <div class="color-section">
                <sl-color-picker id="background_color_picker" value=${this.manifest.background_color||defaultColor} hoist=${!0} data-field="background_color" @sl-change=${()=>this.handleColorSwitch("background_color")}></sl-color-picker>
                <p id="background_color_string" class="color_string">${((Q=this.manifest.background_color)==null?void 0:Q.toLocaleUpperCase())||defaultColor}</p>
              </div>
            </span>
          </div>
          <div class="form-field color_field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("theme_color"))}>Theme Color</h3>
                <manifest-field-tooltip .field=${"theme_color"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">Select a Theme color</p>
            <span class="color-holder">
              <div class="color-section">
                <sl-color-picker id="theme_color_picker" value=${this.manifest.theme_color||defaultColor} hoist=${!0} data-field="theme_color" @sl-change=${()=>this.handleColorSwitch("theme_color")}></sl-color-picker>
                <p id="theme_color_string" class="color_string">${((j=this.manifest.theme_color)==null?void 0:j.toLocaleUpperCase())||defaultColor}</p>
              </div>
            </span>
          </div>
        </div>
      </div>
    `}};__decorate$a([e$7({type:Object,hasChanged(X,O){return X!==O&&X.name&&(manifestInitialized$5=!0),X!==O}})],ManifestInfoForm.prototype,"manifest",void 0);__decorate$a([e$7({type:String})],ManifestInfoForm.prototype,"focusOn",void 0);__decorate$a([t$5()],ManifestInfoForm.prototype,"bgText",void 0);__decorate$a([t$5()],ManifestInfoForm.prototype,"themeText",void 0);__decorate$a([t$5()],ManifestInfoForm.prototype,"errorMap",void 0);ManifestInfoForm=__decorate$a([e$8("manifest-info-form")],ManifestInfoForm);const languages=[{code:"ab",name:"Abkhaz"},{code:"aa",name:"Afar"},{code:"af",name:"Afrikaans"},{code:"ak",name:"Akan"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"an",name:"Aragonese"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"av",name:"Avaric"},{code:"ae",name:"Avestan"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"ba",name:"Bashkir"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bh",name:"Bihari"},{code:"bi",name:"Bislama"},{code:"bs",name:"Bosnian"},{code:"br",name:"Breton"},{code:"bg",name:"Bulgarian"},{code:"my",name:"Burmese"},{code:"ca",name:"Catalan; Valencian"},{code:"ch",name:"Chamorro"},{code:"ce",name:"Chechen"},{code:"ny",name:"Chichewa; Chewa; Nyanja"},{code:"zh",name:"Chinese"},{code:"cv",name:"Chuvash"},{code:"kw",name:"Cornish"},{code:"co",name:"Corsican"},{code:"cr",name:"Cree"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Divehi; Dhivehi; Maldivian;"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"fo",name:"Faroese"},{code:"fj",name:"Fijian"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"ff",name:"Fula; Fulah; Pulaar; Pular"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek, Modern"},{code:"gn",name:"Guaran\xED"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian; Haitian Creole"},{code:"ha",name:"Hausa"},{code:"he",name:"Hebrew (modern)"},{code:"hz",name:"Herero"},{code:"hi",name:"Hindi"},{code:"ho",name:"Hiri Motu"},{code:"hu",name:"Hungarian"},{code:"ia",name:"Interlingua"},{code:"id",name:"Indonesian"},{code:"ie",name:"Interlingue"},{code:"ga",name:"Irish"},{code:"ig",name:"Igbo"},{code:"ik",name:"Inupiaq"},{code:"io",name:"Ido"},{code:"is",name:"Icelandic"},{code:"it",name:"Italian"},{code:"iu",name:"Inuktitut"},{code:"ja",name:"Japanese"},{code:"jv",name:"Javanese"},{code:"kl",name:"Kalaallisut, Greenlandic"},{code:"kn",name:"Kannada"},{code:"kr",name:"Kanuri"},{code:"ks",name:"Kashmiri"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"ki",name:"Kikuyu, Gikuyu"},{code:"rw",name:"Kinyarwanda"},{code:"ky",name:"Kirghiz, Kyrgyz"},{code:"kv",name:"Komi"},{code:"kg",name:"Kongo"},{code:"ko",name:"Korean"},{code:"ku",name:"Kurdish"},{code:"kj",name:"Kwanyama, Kuanyama"},{code:"la",name:"Latin"},{code:"lb",name:"Luxembourgish, Letzeburgesch"},{code:"lg",name:"Luganda"},{code:"li",name:"Limburgish, Limburgan, Limburger"},{code:"ln",name:"Lingala"},{code:"lo",name:"Lao"},{code:"lt",name:"Lithuanian"},{code:"lu",name:"Luba-Katanga"},{code:"lv",name:"Latvian"},{code:"gv",name:"Manx"},{code:"mk",name:"Macedonian"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"M\u0101ori"},{code:"mr",name:"Marathi (Mar\u0101\u1E6Dh\u012B)"},{code:"mh",name:"Marshallese"},{code:"mn",name:"Mongolian"},{code:"na",name:"Nauru"},{code:"nv",name:"Navajo, Navaho"},{code:"nb",name:"Norwegian Bokm\xE5l"},{code:"nd",name:"North Ndebele"},{code:"ne",name:"Nepali"},{code:"ng",name:"Ndonga"},{code:"nn",name:"Norwegian Nynorsk"},{code:"no",name:"Norwegian"},{code:"ii",name:"Nuosu"},{code:"nr",name:"South Ndebele"},{code:"oc",name:"Occitan"},{code:"oj",name:"Ojibwe, Ojibwa"},{code:"cu",name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic"},{code:"om",name:"Oromo"},{code:"or",name:"Oriya"},{code:"os",name:"Ossetian, Ossetic"},{code:"pa",name:"Panjabi, Punjabi"},{code:"pi",name:"P\u0101li"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"ps",name:"Pashto, Pushto"},{code:"pt",name:"Portuguese"},{code:"qu",name:"Quechua"},{code:"rm",name:"Romansh"},{code:"rn",name:"Kirundi"},{code:"ro",name:"Romanian, Moldavian, Moldovan"},{code:"ru",name:"Russian"},{code:"sa",name:"Sanskrit (Sa\u1E41sk\u1E5Bta)"},{code:"sc",name:"Sardinian"},{code:"sd",name:"Sindhi"},{code:"se",name:"Northern Sami"},{code:"sm",name:"Samoan"},{code:"sg",name:"Sango"},{code:"sr",name:"Serbian"},{code:"gd",name:"Scottish Gaelic; Gaelic"},{code:"sn",name:"Shona"},{code:"si",name:"Sinhala, Sinhalese"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovene"},{code:"so",name:"Somali"},{code:"st",name:"Southern Sotho"},{code:"es",name:"Spanish; Castilian"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"ss",name:"Swati"},{code:"sv",name:"Swedish"},{code:"ta",name:"Tamil"},{code:"te",name:"Telugu"},{code:"tg",name:"Tajik"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"bo",name:"Tibetan Standard, Tibetan, Central"},{code:"tk",name:"Turkmen"},{code:"tl",name:"Tagalog"},{code:"tn",name:"Tswana"},{code:"to",name:"Tonga (Tonga Islands)"},{code:"tr",name:"Turkish"},{code:"ts",name:"Tsonga"},{code:"tt",name:"Tatar"},{code:"tw",name:"Twi"},{code:"ty",name:"Tahitian"},{code:"ug",name:"Uighur, Uyghur"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"uz",name:"Uzbek"},{code:"ve",name:"Venda"},{code:"vi",name:"Vietnamese"},{code:"vo",name:"Volap\xFCk"},{code:"wa",name:"Walloon"},{code:"cy",name:"Welsh"},{code:"wo",name:"Wolof"},{code:"fy",name:"Western Frisian"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"za",name:"Zhuang, Chuang"}],languageCodes=languages.map(X=>({formatted:X.name,code:X.code}));var __decorate$9=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};const settingsFields=["start_url","scope","orientation","lang","dir","display","display_override"],displayOptions=["fullscreen","standalone","minimal-ui","browser"],overrideOptions=["browser","fullscreen","minimal-ui","standalone","window-controls-overlay"];let manifestInitialized$4=!1,ManifestSettingsForm=class extends s$5{constructor(){super(),this.manifest={},this.shouldValidateAllFields=!0,this.focusOn="",this.errorMap={},this.activeOverrideItems=[]}static get styles(){return i$7`

      :host {
        --sl-focus-ring-width: 3px;
        --sl-input-focus-ring-color: #4f3fb670;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #4F3FB6ac;
        --sl-input-font-family: Hind, sans-serif;
      }

      sl-input::part(base),
      sl-select::part(form-control),
      sl-menu-item::part(base),
      sl-option::part(base),
      sl-menu-label::part(base),
      sl-checkbox::part(base) {
        --sl-input-font-size-medium: 16px;
        --sl-font-size-medium: 16px;
        --sl-font-size-small: 14px;
        --sl-input-height-medium: 3em;
        --sl-toggle-size: 16px;
        --sl-toggle-size-small: 16px;
        --sl-input-font-size-small: 16px;
      }
      sl-input::part(base),
      sl-select::part(combobox),
      sl-details::part(base){
        background-color: #fbfbfb;
      }
      #form-holder {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }
      .form-row {
        display: flex;
        column-gap: 1em;
      }
      .form-row h3 {
        font-size: 18px;
        margin: 0;
      }
      .field-desc {
        font-size: 14px;
        margin: 0;
        color: #717171;
      }
      sl-input::part(input), 
      sl-select::part(display-input), 
      sl-details::part(summary){
        color: #717171;
      }
      .long .form-field {
        width: 100%;
      }
      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
      .form-field p {
        font-size: 14px;
      }
      .field-header{
        display: flex;
        align-items: center;
        justify-content: space-between;
        column-gap: 5px;
      }

      .header-left{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      .color_field {
        display: flex;
        flex-direction: column;
      }
      .color-holder {
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      .toolTip {
        font-size: 14px;
        visibility: hidden;
        width: 150px;
        background: black;
        color: white;
        font-weight: 500;
        text-align: center;
        border-radius: 6px;
        padding: .75em;
        /* Position the tooltip */
        position: absolute;
        top: 20px;
        left: -25px;
        z-index: 1;
        box-shadow: 0px 2px 20px 0px #0000006c;
      }
      .field-header a {
        display: flex;
        align-items: center;
        position: relative;
        color: black;
      }
      a:hover .toolTip {
        visibility: visible;
      }
      a:visited, a:focus {
        color: black;
      }
      sl-menu {
        width: 100%;
      }

      .error::part(base){
        border-color: #eb5757;
        --sl-input-focus-ring-color: ##eb575770;
        --sl-focus-ring-width: 3px;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #eb5757ac;
      }

      .error::part(control){
        border-color: #eb5757;
      }

      #override-list {
        display: flex;
        flex-direction: column;
        row-gap: 5px;
      }
      #override-item {
        display: flex;
        align-items: center;
        column-gap: 10px;
      }

      #override-item::part(label){
        font-size: 16px;
      }

      sl-details {
        width: 100%;
      }
      sl-details::part(base){
        width: 100%;
        max-height: fit-content
      }
      sl-details::part(header){
        padding: 10px 15px;
        font-size: 16px;
      }

      sl-details:focus {
        outline: 5px solid var(--sl-input-focus-ring-color);
        border-radius: 5px;
      }

      sl-details.error:focus {
        outline: 5px solid #eb575770;
        border-radius: 5px;
      }

      .menu-prefix {
        padding: 0 .5em;
        font-weight: 600;
        padding-top: 3px;
        font-size: 14px;
        margin: 0;
      }

      #override-options-grid{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
        gap: .25em .5em;
      }

      #override-options-grid sl-checkbox::part(label) {
        font-size: 16px;
        line-height: 16px;
        margin-left: .25em;
      }

      .focus {
        color: #4f3fb6;
      }

      sl-menu-item:focus-within::part(base) {
        color: #ffffff;
        background-color: #4F3FB6;
      }
      
      sl-menu-item::part(base):hover {
        color: #ffffff;
        background-color: #4F3FB6;
      }

      sl-option:focus-within::part(base) {
        color: #ffffff;
        background-color: #4F3FB6;
      }
      
      sl-option::part(base):hover {
        color: #ffffff;
        background-color: #4F3FB6;
      }

      sl-checkbox[checked]::part(control) {
        background-color: #4f3fb6;
        border-color: #4f3fb6;
        color: #ffffff;
      }


      @media(max-width: 765px){
        .form-row {
          flex-direction: column;
          row-gap: 1em;
        }
        .form-field {
          width: 100%;
        }
      }

      @media(max-width: 480px){
        sl-input::part(base),
        sl-select::part(control),
        sl-menu-item::part(base),
        sl-option::part(base) {
          --sl-input-font-size-medium: 14px;
          --sl-font-size-medium: 14px;
          --sl-input-height-medium: 2.5em;
        }

        .form-row p {
          font-size: 12px;
        }

        .form-row h3 {
          font-size: 16px;
        }
        .field-header a:after {
          content: "";
          position: absolute;
          left: -13px;
          top: -13px;
          z-index: -1;
          width: 40px;
          height: 40px;
          border-radius: 7px;
        }
      }
    `}firstUpdated(){let O=this.shadowRoot.querySelector('[data-field="'+this.focusOn+'"]');this.focusOn&&O&&setTimeout(()=>{O.scrollIntoView({block:"end",behavior:"smooth"})},500)}async updated(O){let Q=this.shadowRoot.querySelector('[data-field="'+this.focusOn+'"]');this.focusOn&&Q&&setTimeout(()=>{Q.scrollIntoView({block:"end",behavior:"smooth"})},500),manifestInitialized$4&&(manifestInitialized$4=!1,this.requestValidateAllFields(),this.initOverrideList())}async requestValidateAllFields(){if(this.shouldValidateAllFields=!0,!this.validationPromise)for(;this.shouldValidateAllFields;)this.shouldValidateAllFields=!1,this.validationPromise=this.validateAllFields(),await this.validationPromise}async validateAllFields(){for(let O=0;O<settingsFields.length;O++){let Q=settingsFields[O];if(Q in this.manifest){const j=await validateSingleField(Q,this.manifest[Q]);if(!j.valid){let F=this.shadowRoot.querySelector('[data-field="'+Q+'"]');if(F.classList.add("error"),this.shadowRoot.querySelector(`.${Q}-error-div`)){let q=this.shadowRoot.querySelector(`.${Q}-error-div`);q.parentElement.removeChild(q)}if(j.errors){let q=document.createElement("div");q.classList.add(`${Q}-error-div`),this.errorMap[Q]=0,j.errors.forEach(W=>{let Y=document.createElement("p");Y.innerText=W,Y.style.color="#eb5757",Y.setAttribute("aria-live","polite"),q.append(Y),this.errorMap[Q]++}),insertAfter(q,F.parentNode.lastElementChild)}}}else if(required_fields.includes(Q)){let j=this.shadowRoot.querySelector('[data-field="'+Q+'"]');if(j.classList.add("error"),this.shadowRoot.querySelector(`.${Q}-error-div`)){let q=this.shadowRoot.querySelector(`.${Q}-error-div`);q.parentElement.removeChild(q)}this.errorMap[Q]=0;let U=document.createElement("div");U.classList.add(`${Q}-error-div`);let F=document.createElement("p");F.innerText=`${Q} is required and is missing from your manifest.`,F.style.color="#eb5757",U.append(F),this.errorMap[Q]++,insertAfter(U,j.parentNode.lastElementChild)}}this.validationPromise=void 0,Object.keys(this.errorMap).length===0?this.dispatchEvent(errorInTab(!1,"settings")):this.dispatchEvent(errorInTab(!0,"settings"))}initOverrideList(){this.activeOverrideItems=[],this.manifest.display_override&&this.manifest.display_override.forEach(O=>{this.activeOverrideItems.push(O)})}async handleInputChange(O){this.validationPromise&&await this.validationPromise;const Q=O.target;let j=Q.value;const U=Q.dataset.field;let F=new CustomEvent("fieldChangeAttempted",{detail:{field:U},bubbles:!0,composed:!0});this.dispatchEvent(F);const q=await validateSingleField(U,j);if(q.valid){let Y=new CustomEvent("manifestUpdated",{detail:{field:U,change:j},bubbles:!0,composed:!0});if(this.dispatchEvent(Y),Q.classList.contains("error")){Q.classList.toggle("error"),delete this.errorMap[U];let G=Q.parentNode.lastElementChild;Q.parentNode.removeChild(G)}}else{if(this.shadowRoot.querySelector(`.${U}-error-div`)){let Y=this.shadowRoot.querySelector(`.${U}-error-div`);Y.parentElement.removeChild(Y)}if(q.errors){let Y=document.createElement("div");Y.classList.add(`${U}-error-div`),this.errorMap[U]=0,q.errors.forEach(G=>{let K=document.createElement("p");K.innerText=G,K.style.color="#eb5757",K.setAttribute("aria-live","polite"),Y.append(K),this.errorMap[U]++}),insertAfter(Y,Q.parentNode.lastElementChild)}Q.classList.add("error")}Object.keys(this.errorMap).length==0?this.dispatchEvent(errorInTab(!1,"settings")):this.dispatchEvent(errorInTab(!0,"settings"))}parseLangCode(O){return O?O.split("-")[0]:""}async toggleOverrideList(O,Q){let j=new CustomEvent("fieldChangeAttempted",{detail:{field:"display_override"},bubbles:!0,composed:!0});if(this.dispatchEvent(j),!(Q==="checkbox"?this.shadowRoot.querySelector(`sl-checkbox[value="${O}"]`):this.shadowRoot.querySelector(`sl-menu-item[value="${O}"]`)).checked){let q=this.activeOverrideItems.indexOf(O);this.activeOverrideItems.splice(q,1)}else this.activeOverrideItems.push(O);this.validatePlatformList("display_override",this.activeOverrideItems),this.requestUpdate()}async validatePlatformList(O,Q){this.validationPromise&&await this.validationPromise;let j=this.shadowRoot.querySelector(`[data-field=${O}]`);const U=await validateSingleField(O,Q);if(U.valid){let q=new CustomEvent("manifestUpdated",{detail:{field:O,change:[...Q]},bubbles:!0,composed:!0});if(this.dispatchEvent(q),j.classList.contains("error")){j.classList.toggle("error"),delete this.errorMap[O];let W=j.parentNode.lastElementChild;W.parentNode.removeChild(W)}}else{if(this.shadowRoot.querySelector(`.${O}-error-div`)){let q=this.shadowRoot.querySelector(`.${O}-error-div`);q.parentElement.removeChild(q)}if(U.errors){let q=document.createElement("div");q.classList.add(`${O}-error-div`),this.errorMap[O]=0,U.errors.forEach(W=>{let Y=document.createElement("p");Y.innerText=W,Y.style.color="#eb5757",Y.setAttribute("aria-live","polite"),q.append(Y),this.errorMap[O]++}),insertAfter(q,j.parentNode.lastElementChild)}j.classList.add("error")}Object.keys(this.errorMap).length===0?this.dispatchEvent(errorInTab(!1,"platform")):this.dispatchEvent(errorInTab(!0,"platform"))}decideFocus(O){return{focus:this.focusOn===O}}render(){return x$1`
      <div id="form-holder">
        <div class="form-row">
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("start_url"))}>Start URL</h3>
                <manifest-field-tooltip .field=${"start_url"}></manifest-field-tooltip>
              </div>

              <p class="field-desc">(required)</p>
            </div>
            <p class="field-desc">The URL that loads when your PWA starts</p>
            <sl-input placeholder="PWA Start URL" value=${this.manifest.start_url||""} data-field="start_url" @sl-change=${this.handleInputChange}></sl-input>
          </div>
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("dir"))}>Dir</h3>
                <manifest-field-tooltip .field=${"dir"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">The text direction of your PWA</p>
            <sl-select placeholder="Select a Direction" data-field="dir" hoist=${!0} value=${this.manifest.dir||""} @sl-change=${this.handleInputChange}>
              ${dirOptions.map(O=>x$1`<sl-option value=${O}>${O}</sl-option>`)}
            </sl-select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("scope"))}>Scope</h3>
                <manifest-field-tooltip .field=${"scope"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">Which URLs can load within your app</p>
            <sl-input placeholder="PWA Scope" data-field="scope" value=${this.manifest.scope||""} @sl-change=${this.handleInputChange}></sl-input>
          </div>
          
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("lang"))}>Language</h3>
                <manifest-field-tooltip .field=${"lang"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">The primary language of your app</p>
            <sl-select placeholder="Select a Language" data-field="lang" hoist=${!0} value=${this.parseLangCode(this.manifest.lang)||""} @sl-change=${this.handleInputChange}>
              ${languageCodes.map(O=>x$1`<sl-option value=${O.code}>${O.formatted}</sl-option>`)}
            </sl-select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("orientation"))}>Orientation</h3>
                <manifest-field-tooltip .field=${"orientation"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">The default screen orientation of your app</p>
            <sl-select placeholder="Select an Orientation" data-field="orientation" hoist=${!0} value=${this.manifest.orientation||""} @sl-change=${this.handleInputChange}>
              ${orientationOptions.map(O=>x$1`<sl-option value=${O}>${O}</sl-option>`)}
            </sl-select>
          </div>
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("display"))}>Display</h3>
                <manifest-field-tooltip .field=${"display"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">The appearance of your app window</p>
            <sl-select placeholder="Select a Display" data-field="display" hoist=${!0} value=${this.manifest.display||""} @sl-change=${this.handleInputChange}>
              ${displayOptions.map(O=>x$1`<sl-option value=${O}>${O}</sl-option>`)}
            </sl-select>
          </div>
        </div>
        <div class="form-row long">
          <div class="form-field">
            <div class="field-header">
              <div class="header-left">
                <h3 class=${o$6(this.decideFocus("display_override"))}>Display Override</h3>
                <manifest-field-tooltip .field=${"display_override"}></manifest-field-tooltip>
              </div>
            </div>
            <p class="field-desc">Used to determine the preferred display mode</p>
            <div id="override-list">
            <sl-details summary="Click to edit display override" data-field="display_override">
              <sl-menu>
                <sl-menu-label>Active Override Items</sl-menu-label>
                ${this.activeOverrideItems.length!=0?this.activeOverrideItems.map((O,Q)=>x$1`
                    <sl-menu-item class="override-item" value=${O} @click=${()=>this.toggleOverrideList(O,"menu-item")}>
                      <p slot="prefix" class="menu-prefix">${Q+1}</p>
                      ${O}
                    </sl-menu-item>
                  `):x$1`<sl-menu-item disabled>-</sl-menu-item>`}
                <sl-divider></sl-divider>
                <div id="override-options-grid">
                  ${overrideOptions.map(O=>x$1`
                        <sl-checkbox class="override-item" size="small" value=${O} @sl-change=${()=>this.toggleOverrideList(O,"checkbox")} ?checked=${this.activeOverrideItems.includes(O)}>
                          ${O}
                        </sl-checkbox>
                      `)}
                  </div>
              </sl-menu>
            </sl-details>
            </div>
          </div>
        </div>
      </div>
    `}};__decorate$9([e$7({type:Object,hasChanged(X,O){return X!==O&&X.name&&(manifestInitialized$4=!0),X!==O}})],ManifestSettingsForm.prototype,"manifest",void 0);__decorate$9([e$7({type:String})],ManifestSettingsForm.prototype,"focusOn",void 0);__decorate$9([t$5()],ManifestSettingsForm.prototype,"errorMap",void 0);__decorate$9([t$5()],ManifestSettingsForm.prototype,"activeOverrideItems",void 0);ManifestSettingsForm=__decorate$9([e$8("manifest-settings-form")],ManifestSettingsForm);const orientationOptions=["any","natural","landscape","portrait","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"],dirOptions=["auto","ltr","rtl"],standardCategories=["books","business","education","entertainment","finance","fitness","food","games","government","health","kids","lifestyle","magazines","medical","music","navigation","news","personalization","photo","politics","productivity","security","shopping","social","sports","travel","utilities","weather"];var __decorate$8=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};const platformOptions=["windows","chrome_web_store","play","itunes","webapp","f-droid","amazon"],platformText=["Windows Store","Google Chrome Web Store","Google Play Store","Apple App Store","Web apps","F-droid","Amazon App Store"],platformFields=["iarc_rating_id","prefer_related_applications","related_applications","shortcuts","protocol_handlers","categories","edge_side_panel"];let manifestInitialized$3=!1,fieldsValidated=!1,ManifestPlatformForm=class extends s$5{constructor(){super(),this.manifest={},this.focusOn="",this.shortcutHTML=[],this.protocolHTML=[],this.relatedAppsHTML=[],this.errorMap={},this.shouldValidateAllFields=!0}static get styles(){return i$7`

      :host {
        --sl-focus-ring-width: 3px;
        --sl-input-focus-ring-color: #4f3fb670;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #4F3FB6ac;
        --sl-input-font-family: Hind, sans-serif;
      }

      sl-input::part(base),
      sl-select::part(form-control),
      sl-option::part(base),
      sl-button::part(base),
      sl-checkbox::part(base),
      sl-checkbox::part(control),
      sl-details::part(base) {
        --sl-input-font-size-medium: 16px;
        --sl-button-font-size-medium: 12px;
        --sl-font-size-medium: 16px;
        --sl-input-height-medium: 3em;
        --sl-toggle-size: 16px;
        --sl-toggle-size-small: 16px;
        --sl-input-font-size-small: 16px;
      }
      sl-details::part(base), sl-select::part(combobox), sl-input::part(base){
        background-color: #fbfbfb;
      }
      #form-holder {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }
      .form-row {
        display: flex;
        column-gap: 1em;
      }
      .form-row h3 {
        font-size: 18px;
        margin: 0;
      }
      .form-row p:not(.toolTip) {
        font-size: 14px;
        margin: 0;
        color: #717171;
      }
      sl-input::part(input), 
      sl-select::part(display-input), 
      sl-details::part(summary){
        color: #717171;
      }
      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
      .form-field p {
        font-size: 14px;
      }
      .field-header{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      .color_field {
        display: flex;
        flex-direction: column;
      }
      .color-holder {
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      .toolTip {
        font-size: 14px;
        visibility: hidden;
        width: 150px;
        background: black;
        color: white;
        font-weight: 500;
        text-align: center;
        border-radius: 6px;
        padding: .75em;
        /* Position the tooltip */
        position: absolute;
        top: 20px;
        left: -25px;
        z-index: 1;
        box-shadow: 0px 2px 20px 0px #0000006c;
      }
      .special-tip {
        left: -120px;
      }
      .field-header a {
        display: flex;
        align-items: center;
        position: relative;
        color: black;
      }
      a:hover .toolTip {
        visibility: visible;
      }
      a:visited, a:focus {
        color: black;
      }
      sl-menu {
         width: 100%;
      }
      sl-option:focus-within::part(base) {
        color: #ffffff;
        background-color: #4F3FB6;
      }

      sl-option::part(base):hover{
        color: #ffffff;
        background-color: #4F3FB6;
      }
      #cat-field {
        display: grid;
        grid-template-rows: repeat(7, auto);
        grid-auto-flow: column;
        column-gap: 10px;
        padding: 0 1em 1em 1em;
        background: white;
      }
      #cat-field.error {
        border: 1px solid #eb5757;
        border-radius: 5px;
        padding: 1em;
      }
      
      sl-details {
        width: 100%;
      }
      sl-details::part(base){
        width: 100%;
        max-height: fit-content
      }
      sl-details::part(header){
        padding: 10px 15px;
        font-size: 16px;
      }

      sl-details:focus {
        outline: 5px solid var(--sl-input-focus-ring-color);
        border-radius: 5px;
      }

      sl-details.error:focus {
        outline: 5px solid #eb575770;
        border-radius: 5px;
      }

      .field-holder {
        display: flex;
        flex-direction: column;
      }
      .shortcut-header{
        padding: .5em 0;
        margin: 0;
        font-size: 16px;
      }
      sl-icon-button::part(base){
        padding: 0;
      }
      .field-details::part(content){
        display: flex;
        flex-direction: column;
        row-gap: 10px;
      }
      .field-holder sl-button {
        width: 50%;
        align-self: flex-end;
      }
      .long-items {
        display: flex;
        flex-direction: column;
        row-gap: 10px;
      }
      .long-items h3 {
        font-size: 18px;
        margin: 0;
      }
      .long-items p:not(.toolTip){
        font-size: 14px;
        margin: 0;
        color: #717171;
      }
      .long-items .form-field {
        width: 100%;
      }
      .items-holder {
        display: flex;
        align-items: flex-start;
        column-gap: 10px;
        overflow-x: scroll;
        padding-bottom: 10px;
      }
      .editable {
        display: flex;
        align-items:center;
        justify-content: space-between;
      }

      .error::part(base){
        border-color: #eb5757;
        --sl-input-focus-ring-color: #eb575770;
        --sl-focus-ring-width: 3px;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #eb5757ac;
      }

      .error::part(control){
        border-color: #eb5757;
      }

      sl-menu-label::part(base) {
        font-size: 16px;
      }

      sl-button::part(base):hover {
        background-color: rgba(79, 63, 182, 0.06);
        border-color: rgba(79, 63, 182, 0.46);
        color: rgb(79, 63, 182);
      }

      sl-checkbox[checked]::part(control) {
        background-color: #4f3fb6;
        border-color: #4f3fb6;
        color: #ffffff;
      }

      .focus {
        color: #4f3fb6;
      }

      @media(max-width: 765px){
        .form-row {
          flex-direction: column;
          row-gap: 1em;
        }
        .form-field {
          width: 100%;
        }
        #cat-field {
          grid-template-columns: repeat(4, auto);
          grid-auto-flow: unset;
        }
        .special-tip {
          left: -25px;
        }
      }

      @media(max-width: 650px){
        #cat-field {
          grid-template-columns: repeat(3, auto);
        }
      }

      @media(max-width: 480px){
        sl-input::part(base),
        sl-select::part(form-control),
        sl-option::part(base),
        sl-button::part(base),
        sl-checkbox::part(base),
        sl-checkbox::part(control) {
          --sl-input-font-size-medium: 14px;
          --sl-font-size-medium: 14px;
          --sl-input-height-medium: 2.5em;
          --sl-button-font-size-medium: 10px;
          --sl-toggle-size: 14px;
        }

        sl-details::part(header) {
          padding: 5px 10px;
          font-size: 14px;
        }

        .form-row p, .long-items p {
          font-size: 12px;
        }

        .form-row h3, .long-items h3 {
          font-size: 16px;
        }

        #cat-field {
          grid-template-columns: repeat(2, auto);
        }

        .field-header a:after {
          content: "";
          position: absolute;
          left: -13px;
          top: -13px;
          z-index: -1;
          width: 40px;
          height: 40px;
        }
        
      }
    `}firstUpdated(){}async updated(O){let Q=this.shadowRoot.querySelector('[data-field="'+this.focusOn+'"]');this.focusOn&&Q&&setTimeout(()=>{Q.scrollIntoView({block:"end",behavior:"smooth"})},500),manifestInitialized$3&&(manifestInitialized$3=!1,fieldsValidated||(this.requestValidateAllFields(),fieldsValidated=!0))}async requestValidateAllFields(){if(this.shouldValidateAllFields=!0,!this.validationPromise)for(;this.shouldValidateAllFields;)this.shouldValidateAllFields=!1,this.validationPromise=this.validateAllFields(),await this.validationPromise}async validateAllFields(){for(let O=0;O<platformFields.length;O++){let Q=platformFields[O];if(this.manifest[Q]){const j=await validateSingleField(Q,this.manifest[Q]);let U=j.valid,F=this.shadowRoot.querySelector('[data-field="'+Q+'"]');if(!U){if(this.shadowRoot.querySelector(`.${Q}-error-div`)){let q=this.shadowRoot.querySelector(`.${Q}-error-div`);q.parentElement.removeChild(q)}if(j.errors){this.errorMap[Q]=0;let q=document.createElement("div");q.classList.add(`${Q}-error-div`),j.errors.forEach(W=>{let Y=document.createElement("p");Y.innerText=W,Y.style.color="#eb5757",Y.setAttribute("aria-live","polite"),q.append(Y),this.errorMap[Q]++}),insertAfter(q,F.parentNode.lastElementChild)}F.classList.add("error")}}}this.validationPromise=void 0,Object.keys(this.errorMap).length===0?this.dispatchEvent(errorInTab(!1,"platform")):this.dispatchEvent(errorInTab(!0,"platform"))}reset(){this.initCatGrid(),this.requestUpdate(),fieldsValidated=!1}initCatGrid(){this.manifest.categories&&this.shadowRoot.querySelectorAll(".cat-check").forEach(Q=>{this.manifest.categories.includes(Q.value)?Q.checked=!0:Q.checked=!1})}dispatchUpdateEvent(O,Q,j=!1){let U=new CustomEvent("manifestUpdated",{detail:{field:O,change:Q,removal:j},bubbles:!0,composed:!0});if(this.dispatchEvent(U),j){let F=this.shadowRoot.querySelector(`[data-field=${O}]`);if(F.classList.contains("error")){F.classList.toggle("error"),delete this.errorMap[O];let q=F.parentNode.lastElementChild;F.parentNode.removeChild(q)}Object.keys(this.errorMap).length==0&&this.dispatchEvent(errorInTab(!1,"platform"))}}async handleInputChange(O){this.validationPromise&&await this.validationPromise;const Q=O.target;let j=Q.value;const U=Q.dataset.field;let F=new CustomEvent("fieldChangeAttempted",{detail:{field:U},bubbles:!0,composed:!0});this.dispatchEvent(F),U==="prefer_related_applications"&&(j=JSON.parse(j));let q={},W=!1;if(U==="edge_side_panel"){if(j===""){this.dispatchUpdateEvent(U,0,!0);return}q={preferred_width:parseInt(j)},W=!0}const Y=await validateSingleField(U,W?q:j);if(Y.valid){if(this.dispatchUpdateEvent(U,W?q:j,!1),Q.classList.contains("error")){Q.classList.toggle("error"),delete this.errorMap[U];let K=Q.parentNode.lastElementChild;Q.parentNode.removeChild(K)}}else{if(this.shadowRoot.querySelector(`.${U}-error-div`)){let K=this.shadowRoot.querySelector(`.${U}-error-div`);K.parentElement.removeChild(K)}if(Y.errors){this.errorMap[U]=0;let K=document.createElement("div");K.classList.add(`${U}-error-div`),Y.errors.forEach(J=>{let ee=document.createElement("p");ee.innerText=J,ee.style.color="#eb5757",ee.setAttribute("aria-live","polite"),K.append(ee),this.errorMap[U]++}),insertAfter(K,Q.parentNode.lastElementChild)}Q.classList.add("error")}Object.keys(this.errorMap).length==0?this.dispatchEvent(errorInTab(!1,"platform")):this.dispatchEvent(errorInTab(!0,"platform"))}addFieldToHTML(O){O==="shortcuts"?this.shortcutHTML.push(x$1`
          <form @submit=${Q=>this.addShortcutToManifest(Q)} class="field-holder">
            <h4 class="shortcut-header">Shortcut #${this.manifest.shortcuts?this.manifest.shortcuts.length+1:1}</h4>
            <sl-input class="field-input" name="name" placeholder="Shortcut name" /></sl-input>
            <sl-input class="field-input" name="url" placeholder="Shortcut url" /></sl-input>
            <sl-input class="field-input" name="desc" placeholder="Shortcut description" /></sl-input>
            <sl-button type="submit">Add to Manifest</sl-button>
          </form>
        `):O==="protocol_handlers"?this.protocolHTML.push(x$1`
          <form class="field-holder" @submit=${Q=>this.addProtocolToManifest(Q)}>
            <h4 class="shortcut-header">Protocol Handler #${this.manifest.protocol_handlers?this.manifest.protocol_handlers.length+1:1}</h4>
            <sl-input class="field-input" name="protocol" placeholder="Protocol" /></sl-input>
            <sl-input class="field-input" name="url" placeholder="URL" /></sl-input>
            <sl-button type="submit">Add to Manifest</sl-button>
          </form>
        `):this.relatedAppsHTML.push(x$1`
          <form class="field-holder" @submit=${Q=>this.addRelatedAppToManifest(Q)}>
            <h4 class="shortcut-header">Related App #${this.manifest.related_applications?this.manifest.related_applications.length+1:1}</h4>
            <sl-select placeholder="Select a Platform" hoist=${!0} placement="bottom">
              ${platformOptions.map((Q,j)=>x$1`<sl-option value=${platformOptions[j]}>${platformText[j]}</sl-option>`)}
            </sl-select>
            <sl-input class="field-input" name="url" placeholder="App URL" /></sl-input>
            <sl-input class="field-input" name="id" placeholder="App ID" /></sl-input>
            <sl-button type="submit">Add to Manifest</sl-button>
          </form>
        `),this.requestUpdate()}addShortcutToManifest(O){O.preventDefault();let Q=new CustomEvent("fieldChangeAttempted",{detail:{field:"shortcuts"},bubbles:!0,composed:!0});this.dispatchEvent(Q),this.shortcutHTML=[];const j=[...O.target.querySelectorAll("sl-input")];this.updateShortcutsInManifest(j,!0)}async updateShortcutsInManifest(O,Q,j=!1){var U;if(Q){let F=O.filter(G=>G.name==="name")[0].value,q=O.filter(G=>G.name==="url")[0].value,W=O.filter(G=>G.name==="desc")[0].value,Y;Y={name:F,url:q,description:W},this.manifest.shortcuts||(this.manifest.shortcuts=[]),(U=this.manifest.shortcuts)==null||U.push(Y),this.validatePlatformList("shortcuts",this.manifest.shortcuts,j)}this.manifest.shortcuts.length==0&&!Q&&this.dispatchUpdateEvent("shortcuts",0,!0)}addProtocolToManifest(O){O.preventDefault();let Q=new CustomEvent("fieldChangeAttempted",{detail:{field:"protocol_handlers"},bubbles:!0,composed:!0});this.dispatchEvent(Q),this.protocolHTML=[];const j=[...O.target.querySelectorAll("sl-input")];this.updateProtocolsInManifest(j,!0)}async updateProtocolsInManifest(O,Q,j=!1){var U;if(Q){let F=O.filter(Y=>Y.name==="protocol")[0].value,q=O.filter(Y=>Y.name==="url")[0].value;const W={protocol:F,url:q};this.manifest.protocol_handlers||(this.manifest.protocol_handlers=[]),(U=this.manifest.protocol_handlers)==null||U.push(W),this.validatePlatformList("protocol_handlers",this.manifest.protocol_handlers,j)}this.manifest.protocol_handlers.length==0&&!Q&&this.dispatchUpdateEvent("protocol_handlers",0,!0)}addRelatedAppToManifest(O){O.preventDefault(),this.relatedAppsHTML=[];const Q=[...O.target.querySelectorAll("sl-input")],j=O.target.querySelector("sl-select");let U=new CustomEvent("fieldChangeAttempted",{detail:{field:"related_applications"},bubbles:!0,composed:!0});this.dispatchEvent(U),this.updateRelatedAppsInManifest(Q,j,!0)}async updateRelatedAppsInManifest(O,Q,j,U=!1){var F;if(j){let q=Q.value,W=O.filter(K=>K.name==="url")[0].value,Y=O.filter(K=>K.name==="id")[0].value;const G={platform:q,url:W,id:Y};this.manifest.related_applications||(this.manifest.related_applications=[]),(F=this.manifest.related_applications)==null||F.push(G),this.validatePlatformList("related_applications",this.manifest.related_applications,U)}this.manifest.related_applications.length==0&&!j&&this.dispatchUpdateEvent("related_applications",0,!0)}updateCategories(){let O=[];this.shadowRoot.querySelectorAll(".cat-check").forEach(U=>{U.checked&&O.push(U.value)});let j=new CustomEvent("fieldChangeAttempted",{detail:{field:"categories"},bubbles:!0,composed:!0});this.dispatchEvent(j),this.validatePlatformList("categories",O,O.length==0)}async validatePlatformList(O,Q,j=!1){this.validationPromise&&await this.validationPromise;let U=this.shadowRoot.querySelector(`[data-field=${O}]`);const F=await validateSingleField(O,Q);let q=F.valid;if((q||j)&&this.dispatchUpdateEvent(O,[...Q],j),q){if(U.classList.contains("error")){U.classList.toggle("error"),delete this.errorMap[O];let W=U.parentNode.lastElementChild;W.parentNode.removeChild(W)}this.requestUpdate(),this.errorMap.length===0?this.dispatchEvent(errorInTab(!1,"platform")):this.dispatchEvent(errorInTab(!0,"platform"))}else{if(this.shadowRoot.querySelector(`.${O}-error-div`)){let W=this.shadowRoot.querySelector(`.${O}-error-div`);W.parentElement.removeChild(W)}if(F.errors){this.errorMap[O]=0;let W=document.createElement("div");W.classList.add(`${O}-error-div`),F.errors.forEach(Y=>{let G=document.createElement("p");G.innerText=Y,G.style.color="#eb5757",G.setAttribute("aria-live","polite"),W.append(G),this.errorMap[O]++}),insertAfter(W,U.parentNode.lastElementChild)}U.classList.add("error")}return Object.keys(this.errorMap).length,Object.keys(this.errorMap).length==0?this.dispatchEvent(errorInTab(!1,"platform")):this.dispatchEvent(errorInTab(!0,"platform")),q}async removeData(O){const Q=O.split(" "),j=Q[0],U=parseInt(Q[1]);if(j==="shortcuts")this.manifest.shortcuts=this.manifest.shortcuts.filter((F,q)=>q!=U),this.updateShortcutsInManifest([],!1,!0);else if(j==="protocol")this.manifest.protocol_handlers=this.manifest.protocol_handlers.filter((F,q)=>q!=U),this.updateProtocolsInManifest([],!1,!0);else if(j==="related")this.manifest.related_applications=this.manifest.related_applications.filter((F,q)=>q!=U),this.updateRelatedAppsInManifest([],[],!1,!0);else return console.error(`${j} not an accepted value for this function`)}updateExistingData(O){const Q=O.split(" "),j=Q[0],U=parseInt(Q[1]),F=[...this.shadowRoot.querySelectorAll('sl-input[data-tag="'+O+'"]')],q=this.shadowRoot.querySelector('sl-select[data-tag="'+O+'"]');if(j==="shortcuts"){let W=F.filter(ee=>ee.name==="name")[0].value,Y=F.filter(ee=>ee.name==="url")[0].value,G=F.filter(ee=>ee.name==="src")[0].value,K=F.filter(ee=>ee.name==="desc")[0].value,J;G.length==0?J={name:W,url:Y,description:K}:J={name:W,url:Y,icons:[{src:G}],description:K},this.manifest.shortcuts.splice(U,1,J),this.validatePlatformList("shortcuts",this.manifest.shortcuts)}else if(j==="protocol"){let W=F.filter(K=>K.name==="protocol")[0].value,Y=F.filter(K=>K.name==="url")[0].value;const G={protocol:W,url:Y};this.manifest.protocol_handlers.splice(U,1,G),this.validatePlatformList("protocol_handlers",this.manifest.protocol_handlers)}else{let W=q.value,Y=F.filter(J=>J.name==="url")[0].value,G=F.filter(J=>J.name==="id")[0].value;const K={platform:W,url:Y,id:G};this.manifest.related_applications.splice(U,1,K),this.validatePlatformList("related_applications",this.manifest.related_applications)}}decideFocus(O){return{focus:this.focusOn===O}}render(){var O,Q;return x$1`
      <div id="form-holder">
        <div class="form-row">
          <div class="form-field">
            <div class="field-header">
              <h3 class=${o$6(this.decideFocus("iarc_rating_id"))}>IARC Rating ID</h3>
              <manifest-field-tooltip .field=${"iarc_rating_id"}></manifest-field-tooltip>
            </div>
            <p>Displays the suitable ages for your PWA</p>
            <sl-input placeholder="PWA IARC Rating ID" value=${this.manifest.iarc_rating_id||""} data-field="iarc_rating_id" @sl-change=${this.handleInputChange}></sl-input>
          </div>
          <div class="form-field">
            <div class="field-header">
              <h3 class=${o$6(this.decideFocus("prefer_related_applications"))}>Prefer Related Applications</h3>
              <manifest-field-tooltip .field=${"prefer_related_applications"}></manifest-field-tooltip>
            </div>
            <p>Should a user prefer a related app to this one</p>
            <sl-select placeholder="Select an option" data-field="prefer_related_applications" hoist=${!0} @sl-change=${this.handleInputChange} value=${JSON.stringify(this.manifest.prefer_related_applications)||""}>
              <sl-option value="true">true</sl-option>
              <sl-option value="false">false</sl-option>
            </sl-select>
          </div>
        </div>
        <div class="long-items">
          <div class="form-field">
            <div class="field-header">
              <h3 class=${o$6(this.decideFocus("related_applications"))}>Related Applications</h3>
              <manifest-field-tooltip .field=${"related_applications"}></manifest-field-tooltip>
            </div>
            <p>Applications that provide similar functionality to your PWA</p>
            <sl-details class="field-details" summary="Click to edit related apps" data-field="related_applications">
              <sl-button @click=${()=>this.addFieldToHTML("related_applications")} ?disabled=${this.relatedAppsHTML.length!=0}>Add App</sl-button>
              <div class="items-holder">
                ${this.manifest.related_applications&&Array.isArray(this.manifest.related_applications)?this.manifest.related_applications.map((j,U)=>x$1`
                    <div class="field-holder">
                      <div class="editable">
                        <h4 class="shortcut-header">Related App #${U+1}</h4>
                        <sl-icon-button name="x-lg" label="close" style="font-size: 1rem;" data-tag=${"related "+U.toString()} @click=${()=>this.removeData("related "+U.toString())}></sl-icon-button>
                      </div>
                      <sl-select placeholder="Select a Platform" placement="bottom" hoist=${!0} value=${j.platform||""} name="platform" data-tag=${"related "+U.toString()} @sl-change=${()=>this.updateExistingData("related "+U.toString())}>
                        ${platformOptions.map((F,q)=>x$1`<sl-option value=${platformOptions[q]}>${platformText[q]}</sl-option>`)}
                      </sl-select>
                      <sl-input class="field-input" placeholder="App URL" value=${j.url||""} name="url" data-tag=${"related "+U.toString()} @sl-change=${()=>this.updateExistingData("related "+U.toString())}></sl-input>
                      <sl-input class="field-input" placeholder="App ID" value=${j.id||""} name="id" data-tag=${"related "+U.toString()} @sl-change=${()=>this.updateExistingData("related "+U.toString())}></sl-input>
                    </div>
                  `):x$1``}
                ${this.relatedAppsHTML?this.relatedAppsHTML.map(j=>j):x$1``}
              </div>
            </sl-details>
          </div>
          <div class="form-field">
            <div class="field-header">
              <h3 class=${o$6(this.decideFocus("shortcuts"))}>Shortcuts</h3>
              <manifest-field-tooltip .field=${"shortcuts"}></manifest-field-tooltip>
            </div>
            <p>Links to key tasks or pages within your PWA</p>
            <sl-details class="field-details" summary="Click to edit shortcuts" data-field="shortcuts">
              <sl-button @click=${()=>this.addFieldToHTML("shortcuts")} ?disabled=${this.shortcutHTML.length!=0}>Add Shortcut</sl-button>
              <div class="items-holder">
                ${this.manifest.shortcuts&&Array.isArray(this.manifest.shortcuts)?this.manifest.shortcuts.map((j,U)=>x$1`
                    <div class="field-holder">
                      <div class="editable">
                        <h4 class="shortcut-header">Shortcut #${U+1}</h4>
                        <sl-icon-button name="x-lg" label="close" style="font-size: 1rem;" data-tag=${"shortcuts "+U.toString()} @click=${()=>this.removeData("shortcuts "+U.toString())}></sl-icon-button>                      
                      </div>
                      <sl-input class="field-input" name="name" placeholder="Shortcut name" value=${j.name||""} data-tag=${"shortcuts "+U.toString()} @sl-change=${()=>this.updateExistingData("shortcuts "+U.toString())}></sl-input>
                      <sl-input class="field-input" name="url" placeholder="Shortcut url" value=${j.url||""} data-tag=${"shortcuts "+U.toString()} @sl-change=${()=>this.updateExistingData("shortcuts "+U.toString())}></sl-input>
                      <sl-input class="field-input" name="desc" placeholder="Shortcut description" value=${j.description||""} data-tag=${"shortcuts "+U.toString()} @sl-change=${()=>this.updateExistingData("shortcuts "+U.toString())}></sl-input>
                    </div>
                  `):x$1``}
                ${this.shortcutHTML.map(j=>j)}
                </div>
            </sl-details>
          </div>
          <div class="form-field">
            <div class="field-header">
              <h3 class=${o$6(this.decideFocus("protocol_handlers"))}>Protocol Handlers</h3>
              <manifest-field-tooltip .field=${"protocol_handlers"}></manifest-field-tooltip>
            </div>
            <p>Protocols this web app can register and handle</p>
            <sl-details class="field-details" summary="Click to edit protocol handlers" data-field="protocol_handlers">
              <sl-button @click=${()=>this.addFieldToHTML("protocol_handlers")} ?disabled=${this.protocolHTML.length!=0}>Add Protocol</sl-button>
              <div class="items-holder">
                ${this.manifest.protocol_handlers&&Array.isArray(this.manifest.protocol_handlers)?this.manifest.protocol_handlers.map((j,U)=>x$1`
                    <div class="field-holder">
                      <div class="editable">
                        <h4 class="shortcut-header">Protocol Handler #${U+1}</h4>
                        <sl-icon-button name="x-lg" label="close" style="font-size: 1rem;" data-tag=${"protocol "+U.toString()} @click=${()=>this.removeData("protocol "+U.toString())}></sl-icon-button>                      
                      </div>
                      <sl-input class="field-input" name="protocol" placeholder="Protocol" value=${j.protocol||""} data-tag=${"protocol "+U.toString()} @sl-change=${()=>this.updateExistingData("protocol "+U.toString())}></sl-input>
                      <sl-input class="field-input" name="url" placeholder="URL" value=${j.url||""} data-tag=${"protocol "+U.toString()} @sl-change=${()=>this.updateExistingData("protocol "+U.toString())}></sl-input>
                    </div>
                  `):x$1``}
                ${this.protocolHTML.map(j=>j)}
                </div>
            </sl-details>
          </div>
          <div class="form-field">
            <div class="field-header">
              <h3 class=${o$6(this.decideFocus("categories"))}>Categories</h3>
              <manifest-field-tooltip .field=${"categories"}></manifest-field-tooltip>
            </div>
            <p>The categories your PWA belongs to</p>
              <div id="cat-field"  data-field="categories">
                ${standardCategories.map(j=>{var U;return x$1`<sl-checkbox class="cat-check" size="small" @sl-change=${()=>this.updateCategories()} value=${j} ?checked=${(U=this.manifest.categories)==null?void 0:U.includes(j)}>${j}</sl-checkbox>`})}
                    
              </div>
          </div>
          <div class="form-row">
            <div class="form-field">
              <div class="field-header">
                <h3 class=${o$6(this.decideFocus("edge_side_panel"))}>Edge Side Panel</h3>
                <manifest-field-tooltip .field=${"edge_side_panel"}></manifest-field-tooltip>
              </div>
              <p>Indicates whether your PWA supports the side panel in Microsoft Edge</p>
              <sl-input 
                type="number"
                placeholder="Preferred Width" 
                value=${(Q=(O=this.manifest.edge_side_panel)==null?void 0:O.preferred_width)!=null?Q:""} 
                data-field="edge_side_panel" 
                @sl-change=${this.handleInputChange}></sl-input>
            </div>
          </div>
        </div>
      </div>
    `}};__decorate$8([e$7({type:Object,hasChanged(X,O){return X!==O&&X.name&&(manifestInitialized$3=!0),X!==O}})],ManifestPlatformForm.prototype,"manifest",void 0);__decorate$8([e$7({type:String})],ManifestPlatformForm.prototype,"focusOn",void 0);__decorate$8([t$5()],ManifestPlatformForm.prototype,"shortcutHTML",void 0);__decorate$8([t$5()],ManifestPlatformForm.prototype,"protocolHTML",void 0);__decorate$8([t$5()],ManifestPlatformForm.prototype,"relatedAppsHTML",void 0);__decorate$8([t$5()],ManifestPlatformForm.prototype,"errorMap",void 0);ManifestPlatformForm=__decorate$8([e$8("manifest-platform-form")],ManifestPlatformForm);function resolveUrl(X,O){let Q;try{O&&(Q=new URL(O))}catch(j){j instanceof TypeError||console.error(j)}if(!Q)try{X&&O&&(Q=new URL(O,X))}catch(j){console.error(j)}return!Q&&X?new URL(X):Q}var __decorate$7=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};const baseUrl="https://appimagegenerator-prod-dev.azurewebsites.net";let manifestInitialized$2=!1;const platformsData=[{label:"Windows 11",value:"windows11"},{label:"Android",value:"android"},{label:"iOS",value:"ios"}];let ManifestIconsForm=class extends s$5{constructor(){super(),this.manifest={},this.manifestURL="",this.focusOn="",this.canWeGenerate=!0,this.generatingZip=!1,this.zipGenerated=!1,this.uploadImageObjectUrl="",this.errored=!1,this.selectedPlatforms=[...platformsData],this.srcList=[],this.shouldValidateAllFields=!0,this.errorCount=0}static get styles(){return i$7`

    :host {
      --sl-input-font-family: Hind, sans-serif;
    }
    

      sl-checkbox::part(base),
      sl-checkbox::part(control),
      sl-button::part(base) {
        --sl-button-font-size-medium: 14px;
        --sl-input-font-size-medium: 16px;
        --sl-toggle-size: 16px;
      }
      #form-holder {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }
      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
      .form-field {
        display: flex;
        column-gap: 1em;
        width: 100%;
      }
      .form-field h3 {
        font-size: 18px;
        margin: 0;
      }
      .form-field p:not(.toolTip) {
        font-size: 14px;
        margin: 0;
        color: #717171;
      }

      .field-header{
        display: flex;
        align-items: center;
        justify-content: space-between;
        column-gap: 10px;
      }

      .header-left{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      
      .toolTip {
        font-size: 14px;
        visibility: hidden;
        width: 150px;
        background: black;
        color: white;
        font-weight: 500;
        text-align: center;
        border-radius: 6px;
        padding: .75em;
        /* Position the tooltip */
        position: absolute;
        top: 20px;
        left: -25px;
        z-index: 1;
        box-shadow: 0px 2px 20px 0px #0000006c;
      }
      .field-header a {
        display: flex;
        align-items: center;
        position: relative;
        color: black;
      }
      a:hover .toolTip {
        visibility: visible;
      }
      a:visited, a:focus {
        color: black;
      }
      #icon-section {
        display: flex;
        flex-direction: column;
        margin: 10px 0;
      }
      #input-file {
        display: none;
      }
      .icon {
        max-width: 115px;
      }
      .icon-gallery {
        display: flex;
        gap: 7px;
        flex-wrap: wrap;
      }
      .icon-box {
        display: flex;
        flex-direction: column;
      }
      .icon-box p {
        margin: 0 10px;
      }
      #icon-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr .25fr;
        place-items: center;
        gap: .5em;
      }

      #icon-options sl-button {
        grid-column: 2;
      }

      #selected-icon {
        max-width: 115px;
      }
      #platforms-to-generate {
        display: flex;
        flex-direction: column;
        row-gap: 5px;
      }
      .error {
        color: #292c3a;
      }

      sl-button::part(base):hover {
        background-color: rgba(79, 63, 182, 0.06);
        border-color: rgba(79, 63, 182, 0.46);
        color: rgb(79, 63, 182);
      }

      sl-checkbox[checked]::part(control) {
        background-color: #4f3fb6;
        border-color: #4f3fb6;
        color: #ffffff;
      }

      .focus {
        color: #4f3fb6;
      }

      .center_text {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
        font-size: 16px;
      }

      @media(max-width: 765px){
        sl-checkbox::part(base),
        sl-checkbox::part(control) {
          --sl-input-font-size-medium: 14px;
          --sl-toggle-size: 14px;
        }
      }

      @media(max-width: 600px){
        .icon {
            max-width: 90px;
        }

        #icon-options {
          grid-template-columns: .25fr 1fr;
        }

        #selected-icon {
          max-width: 90px;
        }
        
      }

      @media(max-width: 480px){

        sl-button::part(base) {
          --sl-button-font-size-medium: 12px;
        }

        .form-field p {
          font-size: 12px;
        }

        .form-field h3 {
          font-size: 16px;
        }

        #selected-icon {
          max-width: 70px;
        }

        .field-header a:after {
          content: "";
          position: absolute;
          left: -13px;
          top: -13px;
          z-index: -1;
          width: 40px;
          height: 40px;
        }
        
      }

    `}async updated(O){manifestInitialized$2&&this.manifest.icons&&(manifestInitialized$2=!1,this.requestValidateAllFields(),await this.iconSrcListParse())}async requestValidateAllFields(){if(this.shouldValidateAllFields=!0,!this.validationPromise)for(;this.shouldValidateAllFields;)this.shouldValidateAllFields=!1,this.validationPromise=this.validateAllFields(),await this.validationPromise}async validateAllFields(){let O="icons";if(this.manifest[O]){const Q=await validateSingleField(O,this.manifest[O]);if(!Q.valid){this.shadowRoot.querySelectorAll(".error-message")&&this.shadowRoot.querySelectorAll(".error-message").forEach(q=>q.parentElement.removeChild(q));let U=this.shadowRoot.querySelector("h3");U.classList.add("error"),Q.errors&&Q.errors.forEach(F=>{let q=document.createElement("p");q.innerText=F,q.style.color="#eb5757",q.classList.add("error-message"),q.setAttribute("aria-live","polite"),insertAfter(q,U.parentNode.parentNode),this.errorCount++})}}else if(required_fields.includes(O)){let Q=this.shadowRoot.querySelector('[data-field="'+O+'"]');if(Q.classList.add("error"),this.shadowRoot.querySelector(`.${O}-error-div`)){let F=this.shadowRoot.querySelector(`.${O}-error-div`);F.parentElement.removeChild(F)}let j=document.createElement("div");j.classList.add(`${O}-error-div`);let U=document.createElement("p");U.innerText=`${O} is required and is missing from your manifest.`,U.style.color="#eb5757",j.append(U),this.errorCount++,insertAfter(j,Q.parentNode.lastElementChild)}this.validationPromise=void 0,this.errorCount==0?this.dispatchEvent(errorInTab(!1,"icons")):this.dispatchEvent(errorInTab(!0,"icons"))}enterFileSystem(){var Q;let O=new CustomEvent("uploadIcons",{bubbles:!0,composed:!0});this.dispatchEvent(O),(Q=this.shadowRoot.getElementById("input-file"))==null||Q.click()}async handleModalInputFileChange(){var j,U;this.zipGenerated=!1;const Q=(j=this.shadowRoot.getElementById("input-file").files)!=null?j:void 0;this.uploadSelectedImageFile=(U=Q==null?void 0:Q.item(0))!=null?U:void 0,this.canWeGenerate=!!this.validIconInput(),this.canWeGenerate&&this.uploadSelectedImageFile?this.uploadImageObjectUrl=URL.createObjectURL(this.uploadSelectedImageFile):this.errored=!0}validIconInput(){return[".png",".jpg",".svg"].find(Q=>this&&this.uploadSelectedImageFile&&this.uploadSelectedImageFile.name.endsWith(Q))}async iconSrcListParse(){if(!this.manifest&&!this.manifestURL)return;let O=[];for(let Q=0;Q<this.manifest.icons.length;Q++){let j=this.manifest.icons[Q],U=this.handleImageUrl(j)||"";await this.testImage(U).then(function(q){},function(){U=`https://pwabuilder-safe-url.azurewebsites.net/api/getSafeUrl?url=${U}`}),U&&O.push({src:U,size:j.sizes})}this.srcList=O}testImage(O){return new Promise(function(U,F){const q=new Image;q.addEventListener("load",function(){U(this)}),q.addEventListener("error",function(){F()}),q.src=O})}handleImageUrl(O){var j;if(O.src.indexOf("data:")===0&&O.src.indexOf("base64")!==-1)return O.src;let Q=resolveUrl(this.manifestURL,(j=this.manifest)==null?void 0:j.startUrl);if(Q=resolveUrl(Q==null?void 0:Q.href,O.src),Q)return Q.href}handlePlatformChange(O,Q){if(O.path[0].checked)this.selectedPlatforms.push(Q);else{let U=this.selectedPlatforms.indexOf(Q);this.selectedPlatforms.splice(U,1)}this.canWeGenerate=this.selectedPlatforms.length!=0}async generateZip(){let O=[];this.selectedPlatforms.forEach(U=>O.push(U.label));let Q=new CustomEvent("generateIconsAttempted",{detail:{selectedPlatforms:O},bubbles:!0,composed:!0});this.dispatchEvent(Q),this.generatingZip=!0;const j=this.uploadSelectedImageFile;try{const U=new FormData,F="transparent",q=.3;U.append("fileName",j),U.append("padding",String(q)),U.append("color",F),this.selectedPlatforms.forEach(G=>U.append("platform",G.value));const Y=await(await fetch(`${baseUrl}/api/image`,{method:"POST",body:U})).json();if(Y.Message)throw new Error("Error from service: "+Y.Message);this.zipGenerated=!0,setTimeout(()=>{this.zipGenerated=!1},3e3),this.generatingZip=!1,this.downloadZip(`${baseUrl}${Y.Uri}`)}catch(U){console.error(U)}}downloadZip(O){const Q=document.createElement("a");Q.href=O,Q.download="",Q.click()}decideFocus(O){return{focus:this.focusOn===O}}render(){return x$1`
      <div id="form-holder">
        <div class="form-field">
          <div class="field-header">
            <div class="header-left">
              <h3 class=${o$6(this.decideFocus("icons"))}>App Icons</h3>
              <manifest-field-tooltip .field=${"icons"}></manifest-field-tooltip>
            </div>

            <p>(required)</p>
          </div>
          <p>Below are the current Icons in your apps Manifest</p>
          <div class="icon-gallery">
            ${this.srcList.length>0?this.srcList.map(O=>x$1`
                  <div class="icon-box"><img class="icon" src=${O.src}  alt="your app icon size ${O.size}" decoding="async" loading="lazy" /> <p>${O.size}</p></div>
                `):x$1`<div class="center_text"><sl-icon name="card-image"></sl-icon> There are no icons in your manifest</div>`}
          </div>
          <h3>Generate Icons</h3>
          <p>We suggest at least one image 512x512 or larger.</p>
          <div id="icon-section">
            <sl-button class="image-buttons" @click=${()=>this.enterFileSystem()} >Upload</sl-button>
            <input
              id="input-file"
              class="file-input hidden"
              type="file"
              aria-hidden="true"
              accept="image/*"
              @change=${()=>this.handleModalInputFileChange()}
            />
          </div>
          ${this.uploadImageObjectUrl?x$1`
          <div id="icon-options">
            <img id="selected-icon" src=${this.uploadImageObjectUrl} />
            <div id="platforms-to-generate">
              <p>Select the platforms to generate images for:</p>
              ${platformsData.map(O=>x$1`<sl-checkbox value=${O.value} @sl-change=${Q=>this.handlePlatformChange(Q,O)} checked>${O.label}</sl-checkbox>`)}
            </div>
            ${this.canWeGenerate?x$1`<sl-button @click=${this.generateZip} ?loading=${this.generatingZip}>${this.zipGenerated?x$1`Zip Generated!`:x$1`Generate Zip`}</sl-button>`:x$1`<sl-tooltip content="Upload a new icon to generate another zip."><sl-button @click=${this.generateZip} disabled>Generate Zip</sl-button></sl-tooltip>`}
          </div>`:x$1``}
        </div>
      </div>
    `}};__decorate$7([e$7({type:Object,hasChanged(X,O){return X!==O&&X.name&&(manifestInitialized$2=!0),X!==O}})],ManifestIconsForm.prototype,"manifest",void 0);__decorate$7([e$7({type:String})],ManifestIconsForm.prototype,"manifestURL",void 0);__decorate$7([e$7({type:String})],ManifestIconsForm.prototype,"focusOn",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"uploadSelectedImageFile",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"canWeGenerate",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"generatingZip",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"zipGenerated",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"uploadImageObjectUrl",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"errored",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"selectedPlatforms",void 0);__decorate$7([t$5()],ManifestIconsForm.prototype,"srcList",void 0);ManifestIconsForm=__decorate$7([e$8("manifest-icons-form")],ManifestIconsForm);var __decorate$6=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let manifestInitialized$1=!1,ManifestScreenshotsForm=class extends s$5{constructor(){super(),this.manifest={},this.manifestURL="",this.baseURL="",this.focusOn="",this.screenshotUrlList=[void 0],this.screenshotListValid=[],this.addScreenshotUrlDisabled=!0,this.generateScreenshotButtonDisabled=!0,this.awaitRequest=!1,this.screenshotsList=[],this.initialScreenshotLength=-1,this.srcList=[],this.newSrcList=[],this.showSuccessMessage=!1,this.showErrorMessage=!1,this.shouldValidateAllFields=!0,this.errorCount=0}static get styles(){return i$7`
      :host {
        --sl-focus-ring-width: 3px;
        --sl-input-focus-ring-color: #4f3fb670;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #4F3FB6ac;
        --sl-input-font-family: Hind, sans-serif;
      }
      sl-input::part(base),
      sl-select::part(control),
      sl-button::part(base) {
        --sl-input-font-size-medium: 16px;
        --sl-input-height-medium: 3em;
        --sl-button-font-size-medium: 14px;
      }

      sl-input::part(base),
      sl-select::part(control){
        background-color: #fbfbfb;
      }
      
      #form-holder {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }
      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
      .form-field {
        display: flex;
        column-gap: 1em;
        width: 100%;
      }
      .form-field h3 {
        font-size: 18px;
        margin: 0;
      }
      .form-field p:not(.toolTip) {
        font-size: 14px;
        margin: 0;
        color: #717171;
      }
      sl-input::part(input){
        color: #717171;
      }
      .field-header{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      .toolTip {
        font-size: 14px;
        visibility: hidden;
        width: 150px;
        background: black;
        color: white;
        font-weight: 500;
        text-align: center;
        border-radius: 6px;
        padding: .75em;
        /* Position the tooltip */
        position: absolute;
        top: 20px;
        left: -25px;
        z-index: 1;
        box-shadow: 0px 2px 20px 0px #0000006c;
      }
      .field-header a {
        display: flex;
        align-items: center;
        position: relative;
        color: black;
      }
      a:hover .toolTip {
        visibility: visible;
      }
      a:visited, a:focus {
        color: black;
      }
      .sc-gallery {
        display: flex;
        gap: 7px;
        flex-wrap: wrap;
      }
      .screenshot {
        height: 150px;
        width: auto;
      }
      sl-input {
        width: 50%;
      }
      #add-sc {
        width: 50%;
      }
      .center_text {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
        font-size: 16px;
      }

      .screenshots-actions button {
        width: fit-content;
        height: fit-content;
      }

      @keyframes slide {
        0% , 100%{ bottom: -35px}
        25% , 75%{ bottom: -2px}
        20% , 80%{ bottom: 2px}
      }
      @keyframes rotate {
        0% { transform: rotate(-15deg)}
        25% , 75%{ transform: rotate(0deg)}
        100% {  transform: rotate(25deg)}
      }

      .error {
        color: #292c3a;
      }

      sl-button::part(base):hover {
        background-color: rgba(79, 63, 182, 0.06);
        border-color: rgba(79, 63, 182, 0.46);
        color: rgb(79, 63, 182);
      }

      .focus {
        color: #4f3fb6;
      }

      @media(max-width: 765px){

        sl-input {
          width: 100%;
        }
        
      }

      @media(max-width: 600px){
        sl-input::part(base),
        sl-select::part(control),
        sl-button::part(base) {
          --sl-input-font-size-medium: 14px;
          --sl-input-height-medium: 2.5em;
          --sl-button-font-size-medium: 12px;
        }
      }

      @media(max-width: 480px){
        .form-field p {
          font-size: 12px;
        }

        .form-field h3 {
          font-size: 16px;
        }

        .field-header a:after {
          content: "";
          position: absolute;
          left: -13px;
          top: -13px;
          z-index: -1;
          width: 40px;
          height: 40px;
        }
      }
  
    `}async updated(O){manifestInitialized$1&&(manifestInitialized$1=!1,this.requestValidateAllFields(),await this.screenshotSrcListParse(),this.manifest.screenshots&&this.initialScreenshotLength==-1?this.initialScreenshotLength=this.manifest.screenshots.length:this.initialScreenshotLength=0)}async requestValidateAllFields(){if(this.shouldValidateAllFields=!0,!this.validationPromise)for(;this.shouldValidateAllFields;)this.shouldValidateAllFields=!1,this.validationPromise=this.validateAllFields(),await this.validationPromise}async validateAllFields(){let O="screenshots";if(this.manifest[O]){const Q=await validateSingleField(O,this.manifest[O]);if(!Q.valid){if(this.shadowRoot.querySelector(".error-message")){let F=this.shadowRoot.querySelector(".error-message");F.parentElement.removeChild(F)}let U=this.shadowRoot.querySelector("h3");U.classList.add("error"),Q.errors&&Q.errors.forEach(F=>{let q=document.createElement("p");q.innerText=F,q.style.color="#eb5757",q.classList.add("error-message"),q.setAttribute("aria-live","polite"),insertAfter(q,U.parentNode),this.errorCount++})}}this.validationPromise=void 0,this.errorCount==0?this.dispatchEvent(errorInTab(!1,"screenshots")):this.dispatchEvent(errorInTab(!0,"screenshots"))}async screenshotSrcListParse(){if(!this.manifest||!this.manifest.screenshots)return;let O=[],Q=this.initialScreenshotLength;for(let j=0;j<this.manifest.screenshots.length;j++){let U=this.manifest.screenshots[j],F=this.handleImageUrl(U)||"";await this.testImage(F).then(function(W){},function(){F=`https://pwabuilder-safe-url.azurewebsites.net/api/getSafeUrl?url=${F}`}),F&&Q!=0&&(O.push(F),Q--)}this.srcList=O}testImage(O){return new Promise(function(U,F){const q=new Image;q.addEventListener("load",function(){U(this)}),q.addEventListener("error",function(){F()}),q.src=O})}handleImageUrl(O){var j;if(O.src.indexOf("data:")===0&&O.src.indexOf("base64")!==-1)return O.src;let Q=resolveUrl(this.manifestURL,(j=this.manifest)==null?void 0:j.startUrl);if(Q=resolveUrl(Q==null?void 0:Q.href,O.src),Q)return Q.href}decideFocus(O){return{focus:this.focusOn===O}}render(){return x$1`
      <div id="form-holder">
        <div class="form-field">
          <div class="field-header">
            <h3 class=${o$6(this.decideFocus("screenshots"))}>Screenshots</h3>
            <manifest-field-tooltip .field=${"screenshots"}></manifest-field-tooltip>
          </div>
          <p>Below are the screenshots that are currently in your manifest.</p>
          <div class="sc-gallery">
            ${this.srcList.length>0?this.srcList.map(O=>x$1`<img class="screenshot" src=${O} alt="your app screenshot" decoding="async" loading="lazy"/>`):x$1`<div class="center_text"><sl-icon name="card-image"></sl-icon> There are no screenshots in your manifest</div>`}
          </div>
          <div class="sc-gallery">
            ${this.newSrcList.map(O=>x$1`<img class="screenshot" alt="your generated screenshot" src=${O} />`)}
          </div>
        </div>
      </div>
    `}};__decorate$6([e$7({type:Object,hasChanged(X,O){return X!==O&&X.name&&(manifestInitialized$1=!0),X!==O}})],ManifestScreenshotsForm.prototype,"manifest",void 0);__decorate$6([e$7({type:String})],ManifestScreenshotsForm.prototype,"manifestURL",void 0);__decorate$6([e$7({type:String})],ManifestScreenshotsForm.prototype,"baseURL",void 0);__decorate$6([e$7({type:String})],ManifestScreenshotsForm.prototype,"focusOn",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"screenshotUrlList",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"screenshotListValid",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"addScreenshotUrlDisabled",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"generateScreenshotButtonDisabled",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"awaitRequest",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"screenshotsList",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"initialScreenshotLength",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"srcList",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"newSrcList",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"showSuccessMessage",void 0);__decorate$6([t$5()],ManifestScreenshotsForm.prototype,"showErrorMessage",void 0);ManifestScreenshotsForm=__decorate$6([e$8("manifest-screenshots-form")],ManifestScreenshotsForm);const extensions=[".7z",".cab",".gz",".lzh",".rar",".tar",".zip",".ai",".indd",".indt",".sketch",".psb",".psd",".xcf",".atom",".cgi",".coffee",".css",".csv",".erb",".htm",".html",".js",".less",".markdown",".md",".php",".php",".pl",".py",".rb",".rb",".rss",".sass",".scss",".styl",".swf",".xhtml",".xml",".yml",".doc",".docx",".key",".numbers",".odt",".pages",".pdf",".pps",".ppsx",".ppt",".pptx",".ps",".pub",".rtf",".txt",".xls",".xlr",".azw",".azw3",".cbr",".cbz",".epub",".mobi",".eot",".otf",".ttf",".woff",".woff2",".bmp",".gif",".gifv",".ico",".jpg",".jpeg",".png",".svg",".svz",".tiff",".tif",".webp",".avi",".flv",".mkv",".mov",".mp4",".mpg",".mpeg",".wmv",".aac",".aif",".aiff",".flac",".m4a",".mid",".midi",".mp3",".ogg",".vob",".git",".svn"];var __decorate$5=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let SearchExtensions=class extends s$5{constructor(){super(),this.empty=!1,this.file=0,this.tags=[],this.filteredList=[],this.emptyName=!1,this.errorCount=0}static get styles(){return i$7`

      :host {
        --sl-focus-ring-width: 3px;
        --sl-input-focus-ring-color: #4f3fb670;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #4F3FB6ac;
        --sl-input-font-family: Hind, sans-serif;
      }

      sl-input::part(base) {
        --sl-input-font-size-medium: 16px;
        --sl-font-size-medium: 16px;
        --sl-font-size-small: 14px;
        --sl-input-height-medium: 3em;
        --sl-toggle-size: 16px;
        --sl-toggle-size-small: 16px;
        --sl-input-font-size-small: 16px;
        --sl-button-font-size-medium: 14px;
      }
      sl-input::part(base){
        background-color: #fbfbfb;
      }
      .error::part(base){
        border-color: #eb5757;
        --sl-input-focus-ring-color: #eb575770;
        --sl-focus-ring-width: 3px;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #eb5757ac;
      }

      .error::part(control){
        border-color: #eb5757;
      }

      .error-message {
        color: #eb5757;
        margin: 5px 0;
        font-size: 14px;
        display: none;
      }

      .form-row {
        display: flex;
        column-gap: 1em;
      }
      .long .form-field {
        width: 100%;
      }
      
      .type-box {
        max-width: 265px;
        min-height: 40px;
        border: 1px solid #d4d4d8;
        border-radius: .25rem;
        padding: 2px;
        transition: all .1s ease-in-out;
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        align-items: center;
        position: relative;
      }

      .type-box input {
        border: none;
        font-size: 16px;
        width: 2ch;
      }

      .type-box input:focus, input:active, input:focus-visible {
        border: none;
        outline: none;
      }

      .type-box:hover {
        border: 1px solid #a1a1aa;
      }

      .focused {
        border: 1px solid #4F3FB6ac;
        outline: 3px solid #4f3fb670;
      }

      .form-field p {
        font-size: 14px;
      }
      
      .suggestions {
        display: none;
        position: absolute;
        top: 105%;
        height: fit-content;
        max-height: 200px;
        width: 100%;
        border-radius: 8px;
        z-index: 1;
        overflow-y: scroll;
        flex-direction: column;
        gap: 10px;
        border: 1px solid #C5C5C5;
        background-color: #ffffff;
      }

      .suggestion:first-child{
        margin-top: 5px;
      }

      .suggestions p {
        font-size: 16px;
        margin: 0;
        padding: 11px 22px;
      }

      .suggestions p:hover {
        cursor: pointer;
        background-color: #4f3fb6;
        color: #ffffff;
      }

      .file-holder {
        background: #FBFBFB;
        border: 1px solid #C0C0C0;
        border-radius: 8px;
        padding: 10px;
        position: relative;
      }

      .sub {
        font-size: 18px;
        margin: 0;
        color: #757575;
      }

      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
     
      .field-header{
        display: flex;
        align-items: center;
        justify-content: space-between;
        column-gap: 5px;
      }
      .header-left{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }
      
      .remove-file {
        position: absolute;
        top: 0;
        right: 0;
      }

      .remove-file::part(base):hover {
        color: #4f3fb6;
      }

      .error:not(sl-input){
        border: 1px solid #eb5757ac;
      }

      .focused.error  {
        border: 1px solid #eb5757ac;
        outline: 3px solid #eb575770;
      }

      .error-message {
        color: #eb5757;
        margin: 5px 0;
        font-size: 14px;
        display: none;
      }

      @media(max-width: 600px){
        .form-row {
          flex-direction: column;
          gap: 10px;
        }
        .form-field {
          width: 100%;
        }
        .type-box{
          max-width: unset;
          width: 100%;
        }
      }
      
    `}firstUpdated(O){this.file===0&&(this.file={name:"",accept:[]})}handleNewType(O){let Q=O.target;if(this.searchExtension(parseInt(Q.dataset.index)),this.resizeInput(Q),O.key==="Enter"&&Q.value.length>1){this.file.accept.push(Q.value),Q.value="",Q.style.width="3ch",this.filteredList=[];let j=this.shadowRoot.querySelector(`.suggestions[data-index="${this.index}"]`);j.style.display="none",this.handleTagChange()}return!1}searchExtension(O){var U;let Q=this.shadowRoot.querySelector(`.suggestions[data-index="${O}"]`),j=(U=this.shadowRoot)==null?void 0:U.querySelector(`input[data-index='${O}']`);if(this.filteredList=[],j.value.length!=0){let F=extensions.filter(q=>q.indexOf(j.value)!==-1);this.filteredList=F,Q.style.display="flex"}else this.filteredList=[];this.filteredList.length==0&&(Q.style.display="none")}resizeInput(O){O.style.width=O.value.length+2+"ch"}createTag(O){let Q=document.createElement("sl-tag");return Q.innerHTML=O,Q.setAttribute("removable","true"),Q.setAttribute("size","small"),Q}focusInput(){var Q;let O=this.shadowRoot.querySelector(`input[data-index="${this.index}"]`);(Q=O.parentElement)==null||Q.classList.add("focused"),O.focus()}async removeFocus(){var U,F;let O=this.shadowRoot.querySelector(`input[data-index="${this.index}"]`),Q=(U=O.parentElement)==null?void 0:U.childElementCount;if(await new Promise(q=>setTimeout(q,100)),Q==O.parentElement.childElementCount){(F=O.parentElement)==null||F.classList.remove("focused");let q=this.shadowRoot.querySelector(`.suggestions[data-index="${this.index}"]`);q.style.display==="flex"&&(q.style.display="none")}}handleNewTypeFromClick(O,Q){var F;let j=(F=this.shadowRoot)==null?void 0:F.querySelector(`input[data-index='${O}']`);j.value="",this.filteredList=[];let U=this.shadowRoot.querySelector(`.suggestions[data-index="${this.index}"]`);U.style.display="none",this.file.accept.push(Q),this.handleTagChange()}renderTags(O){return x$1`<sl-tag size="small" removable @sl-remove=${()=>this.removeAcceptEntry(O)}>${O}</sl-tag>`}removeAcceptEntry(O){this.file.accept=this.file.accept.filter(Q=>Q!=O),this.requestUpdate("file")}handleTagChange(){let O=this.shadowRoot.querySelector('[data-field="share_target.params.files.name"]');if(O.value.length===0){O.classList.add("error");let F=this.shadowRoot.querySelector(".name-error-message");F&&(F.style.display="block",this.errorCount++)}this.shadowRoot.querySelector(".type-box").classList.remove("error");let j=this.shadowRoot.querySelector(".accept-error-message");j&&j.style.display==="block"&&(j.style.display="none",this.errorCount--);let U=new CustomEvent("fileChanged",{detail:{file:this.file,index:this.index},bubbles:!0,composed:!0});this.dispatchEvent(U),this.updateError()}handleNameChange(){let O=this.shadowRoot.querySelector('[data-field="share_target.params.files.name"]');if(this.file.name=O.value,this.file.accept.length===0){this.shadowRoot.querySelector(".type-box").classList.add("error");let q=this.shadowRoot.querySelector(".accept-error-message");q&&(q.style.display="block",this.errorCount++)}this.shadowRoot.querySelector(".type-box").classList.remove("error");let j=this.shadowRoot.querySelector(".name-error-message");j&&j.style.display==="block"&&(j.style.display="none",this.errorCount--),O.classList.remove("error");let U=new CustomEvent("fileChanged",{detail:{file:this.file,index:this.index},bubbles:!0,composed:!0});this.dispatchEvent(U),this.updateError()}removeFile(){this.shadowRoot.querySelectorAll(".error-message").length>0&&(this.errorCount=0,this.updateError());let Q=new CustomEvent("deleteFilte",{detail:{file:this.file,index:this.index},bubbles:!0,composed:!0});this.dispatchEvent(Q)}updateError(){let O=new CustomEvent("errorTracker",{detail:{count:this.errorCount},bubbles:!0,composed:!0});this.dispatchEvent(O)}render(){return x$1`
    <div class="file-holder">
      <div class="form-row long">
        <div class="form-field">
          <div class="field-header">
            <div class="header-left">
              <h5 class="sub">Name</h5>
              <manifest-field-tooltip .field=${"share_target.params.files.name"}></manifest-field-tooltip>
            </div>
          </div>
          <sl-input name="params.files.name" placeholder="Add file name" value=${this.file.name||""} data-field="share_target.params.files.name" @sl-change=${()=>this.handleNameChange()}></sl-input>
        </div>
        <div class="form-field">
          <div class="field-header">
            <div class="header-left">
              <h5 class="sub">Accept</h5>
              <manifest-field-tooltip .field=${"share_target.params.files.accept"}></manifest-field-tooltip>
            </div>
          </div>
          <div class="type-box" @click=${()=>this.focusInput()} data-index=${this.index}>
            ${!this.empty||this.file.accept&&this.file.accept.length>0?this.file.accept.map(O=>this.renderTags(O)):x$1``}
            <input name=${`tag-input-${this.index}`} data-index=${this.index} @keyup=${O=>this.handleNewType(O)} @blur=${()=>this.removeFocus()} />
            <div class="suggestions" data-index=${this.index}>
              ${this.filteredList&&this.filteredList.length>0?this.filteredList.map(O=>x$1`
                    <p @click=${()=>this.handleNewTypeFromClick(this.index,O)}>${O}</p>
                  `):x$1``}
            </div>
          </div>
        </div>
      </div>
      <sl-icon-button name="x-lg" class="remove-file" label="close" style="font-size: .65rem;" @click=${()=>this.removeFile()}></sl-icon-button>
      <p class="accept-error-message error-message">Be sure to specify which file types your share target accepts</p>
      <p class="name-error-message error-message">Be sure to specify the name of the form field used to share files.</p>
    </div>

      
    `}};__decorate$5([e$7({type:Number})],SearchExtensions.prototype,"index",void 0);__decorate$5([e$7({type:Boolean})],SearchExtensions.prototype,"empty",void 0);__decorate$5([e$7({type:Object})],SearchExtensions.prototype,"share_target",void 0);__decorate$5([e$7({type:Object})],SearchExtensions.prototype,"file",void 0);__decorate$5([e$7({type:Object})],SearchExtensions.prototype,"tags",void 0);__decorate$5([t$5()],SearchExtensions.prototype,"filteredList",void 0);__decorate$5([t$5()],SearchExtensions.prototype,"emptyName",void 0);SearchExtensions=__decorate$5([e$8("search-extensions")],SearchExtensions);var __decorate$4=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let manifestInitialized=!1,ManifestShareForm=class extends s$5{constructor(){super(),this.manifest={},this.manifestURL="",this.focusOn="",this.addingTarget=!1,this.removeClicked=!1,this.postSelected=!1,this.files=[],this.numOfFiles=0,this.filteredList=[],this.confirmRemove=!1,this.shouldValidateAllFields=!0,this.errorCount=0,this.fileError=0}static get styles(){return i$7`

      :host {
        --sl-focus-ring-width: 3px;
        --sl-input-focus-ring-color: #4f3fb670;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #4F3FB6ac;
        --sl-input-font-family: Hind, sans-serif;
      }

      sl-input::part(base),
      sl-select::part(form-control),
      sl-option::part(base),
      sl-button::part(base) {
        --sl-input-font-size-medium: 16px;
        --sl-font-size-medium: 16px;
        --sl-font-size-small: 14px;
        --sl-input-height-medium: 3em;
        --sl-toggle-size: 16px;
        --sl-toggle-size-small: 16px;
        --sl-input-font-size-small: 16px;
        --sl-button-font-size-medium: 14px;
      }
      sl-input::part(base),
      sl-select::part(combobox){
        background-color: #fbfbfb;
      }
    
      #form-holder {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }

      #share-target-form {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
      }

      #action-holder {
        width: 100%;
      }

      .toggle-button {
        width: 100%;
      }

      .toggle-button::part(base) {
        background-color: #F2F3FB;
        border: 1px dashed #4F3FB6;
        border-radius: 5.5px;
      }

      .toggle-button::part(label) {
        color: #292C3A;
        font-size: 14px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .form-row {
        display: flex;
        column-gap: 1em;
      }
      .long .form-field {
        width: 100%;
      }
      .multi {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr 1fr;
        gap: 10px;
        margin-top: -15px;
      }
      .multi .form-field {
        width: 100%;
      }
      .form-row h3 {
        font-size: 18px;
        margin: 0;
      }
      .sub {
        font-size: 18px;
        margin: 0;
        color: #757575;
      }
      .field-desc {
        font-size: 14px;
        margin: 0;
        color: #717171;
      }
      .form-field {
        width: 50%;
        row-gap: .25em;
        display: flex;
        flex-direction: column;
      }
      .form-field p {
        font-size: 14px;
      }
      .field-header{
        display: flex;
        align-items: center;
        justify-content: space-between;
        column-gap: 5px;
      }
      .header-left{
        display: flex;
        align-items: center;
        column-gap: 10px;
      }

      .remove-file {
        position: absolute;
        top: 5px;
        right: 5px;
      }

      .error::part(base){
        border-color: #eb5757;
        --sl-input-focus-ring-color: #eb575770;
        --sl-focus-ring-width: 3px;
        --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
        --sl-input-border-color-focus: #eb5757ac;
      }

      .error::part(control){
        border-color: #eb5757;
      }

      .error-message {
        color: #eb5757;
        margin: 5px 0;
        font-size: 14px;
        display: none;
      }

      sl-button::part(base):hover {
        background-color: rgba(79, 63, 182, 0.06);
        border-color: rgba(79, 63, 182, 0.46);
        color: rgb(79, 63, 182);
      }

      sl-button::part(base):focus {
        outline: 1px solid black;
      }

      .focus {
        color: #4f3fb6;
      }

      .confirm {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        background-color: #ffffff;
        border: 1px dashed #4f3fb67f;
        border-radius: 5.5px;
        gap: 10px;
        padding: 3.5px;
      }

      #class-actions {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .confirm p {
        margin: 0;
        font-size: 14px;
        font-weight: 600;
      }

      .confirm sl-button::part(base){
        padding: 10px;
        height: 25px;
        border-color: #4f3fb6;
        background-color: #F2F3FB;
      }

      .confirm sl-button::part(base):hover{
        background-color: #dfe2f5;
      }

      .confirm sl-button::part(label){
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
      }

      #extra-step{
        display: flex;
        gap: 10px;
        align-items: center;
        width: 100%;
        justify-content: flex-start;
      }

      .arrow_link {
        margin: 0;
        border-bottom: 1px solid var(--primary-color);
        white-space: nowrap;
      }

      .arrow_anchor {
        text-decoration: none;
        font-size: var(--arrow-link-font-size);
        font-weight: bold;
        margin: 0px 0.5em 0px 0px;
        line-height: 1em;
        color: var(--primary-color);
        display: flex;
        column-gap: 10px;
        width: fit-content;
      }

      .arrow_anchor:visited {
        color: var(--primary-color);
      }

      .arrow_anchor:hover {
        cursor: pointer;
      }

      .arrow_anchor:hover img {
        animation: bounce 1s;
      }

      #add-new-file {
        width: fit-content
      }

      #add-new-file::part(base){
        padding: 15px 20px;
        height: 30px;
        border-color: #4f3fb6;
        background-color: #F2F3FB;
        min-width: 15%;
        width: fit-content;
      }

      #add-new-file::part(base):hover{
        background-color: #dfe2f5;
      }

      #add-new-file::part(label){
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        font-weight: 600;
        color: #4f3fb6;
      }

      .method sl-option::part(base){
        font-size: var(--body-font-size);
        color: #757575;
      }

      .method sl-option:focus-within::part(base) {
        color: #ffffff;
        background-color: #4F3FB6;
      }

      .method sl-option::part(base):hover{
        color: #ffffff;
        background-color: #4F3FB6;
      }

      .method::part(display-label){
        font-size: var(--body-font-size);
        color: #757575;
      }
        
      @keyframes bounce {
          0%,
          20%,
          50%,
          80%,
          100% {
            transform: translateY(0);
          }
          40% {
            transform: translateX(-5px);
          }
          60% {
            transform: translateX(5px);
          }
      }

      @media(max-width: 600px){
        .form-row {
           flex-direction: column;
        }
        .form-field {
          width: 100%;
        }

        .multi {
          display: flex;
        }

        .confirm {
          flex-direction: column;
          gap: 5px;
          padding: 10px;
        }
      }

      @media(max-width: 480px){

        sl-button::part(base) {
          --sl-button-font-size-medium: 12px;
        }
        
      }

    `}async updated(O){var K,J;manifestInitialized&&(manifestInitialized=!1,this.errorCount=0,this.requestValidateAllFields());let Q=this.shadowRoot.querySelector('[data-field="share_target.action"]');if(Q&&Q.value.length===0){Q.classList.add("error");let ee=this.shadowRoot.querySelector(".action-error-message");ee.style.display="block",this.errorCount++}const j=["GET","POST"];let U=this.shadowRoot.querySelector('sl-select[data-field="share_target.method"]'),F=this.shadowRoot.querySelector(".method-error-message"),q="";this.manifest.share_target&&this.manifest.share_target.method?q=this.manifest.share_target.method:q="",q&&!j.includes(q)?(U.classList.add("error"),F.style.display="block",this.errorCount++):(U&&U.classList.remove("error"),F&&(F.style.display="none"),this.errorCount>0&&this.errorCount--);let W=this.shadowRoot.querySelectorAll(".params"),Y=this.areParamsEmpty(W);this.addingTarget&&W&&Y&&!((J=(K=this.manifest.share_target)==null?void 0:K.params)!=null&&J.files)&&this.parameterErrors(!0);let G=this.shadowRoot.querySelector('[data-field="share_target.enctype"]');if(this.postSelected&&G&&G.value.length===0){G.classList.add("error");let ee=this.shadowRoot.querySelector(".enctype-error-message");ee&&(ee.style.display="block"),this.errorCount++}this.handleErrorCount()}handleErrorCount(){this.errorCount==0&&this.fileError==0?this.dispatchEvent(errorInTab(!1,"share")):this.dispatchEvent(errorInTab(!0,"share"))}async requestValidateAllFields(){if(this.shouldValidateAllFields=!0,!this.validationPromise)for(;this.shouldValidateAllFields;)this.shouldValidateAllFields=!1,this.validationPromise=this.validateAllFields(),await this.validationPromise}async validateAllFields(){let O="share_target";if(this.manifest[O]){const Q=await validateSingleField(O,this.manifest[O]);if(!Q.valid){this.shadowRoot.querySelectorAll(".error-message")&&this.shadowRoot.querySelectorAll(".error-message").forEach(q=>q.parentElement.removeChild(q));let U=this.shadowRoot.querySelector("h3");U.classList.add("error"),Q.errors&&Q.errors.forEach(F=>{let q=document.createElement("p");q.innerText=F,q.style.color="#eb5757",q.classList.add("error-message"),q.setAttribute("aria-live","polite"),insertAfter(q,U.parentNode.parentNode),this.errorCount++})}}this.validationPromise=void 0,this.handleErrorCount()}firstUpdated(O){var Q,j,U;((Q=this.manifest.share_target)==null?void 0:Q.method)==="POST"&&(this.postSelected=!0),(U=(j=this.manifest.share_target)==null?void 0:j.params)!=null&&U.files&&this.composeFiles(this.manifest.share_target.params.files)}decideFocus(O){return{focus:this.focusOn===O}}toggleForm(O){if(this.confirmRemove=!1,O){this.addingTarget=!0,this.removeClicked=!1;let Q=new CustomEvent("manifestUpdated",{detail:{field:"share_target",change:{method:"GET"}},bubbles:!0,composed:!0});this.dispatchEvent(Q)}else this.confirmRemove=!0}handleMethodChange(){let O=this.shadowRoot.querySelector(".method");this.postSelected=O.value==="POST",this.handleTopLevelInputChange("method")}composeFiles(O){if(O){this.files=[];for(let Q=0;Q<O.length;Q++){let j=O[Q];this.files.push({index:Q,html:x$1`
          <search-extensions 
            .index=${Q} 
            .empty=${!1} 
            .file=${j} 
            .share_target=${this.manifest.share_target} 
            @fileChanged=${U=>this.handleFileChange(U)}
            @deleteFilte=${U=>this.removeFile(U)}
            @errorTracker=${U=>this.handleFileError(U)}>
          </search-extensions>
        `}),this.numOfFiles++}}}handleFileError(O){this.fileError=O.detail.count,this.handleErrorCount()}parameterErrors(O){let Q=this.shadowRoot.querySelectorAll(".params");if(O){for(let U=0;U<Q.length;U++)Q[U].classList.add("error");let j=this.shadowRoot.querySelector(".params-error-message");j&&(j.style.display="block"),this.errorCount++}else if(Q){for(let U=0;U<Q.length;U++)Q[U].classList.remove("error");let j=this.shadowRoot.querySelector(".params-error-message");j&&(j.style.display="none"),this.errorCount--}}areParamsEmpty(O){for(let Q=0;Q<O.length;Q++)if(O[Q].value.length!==0)return!1;return!0}pushEmptyFile(){var U,F,q;this.parameterErrors(!1),(U=this.manifest.share_target)!=null&&U.params||(this.manifest.share_target.params={}),(F=this.manifest.share_target)!=null&&F.params.files||(this.manifest.share_target.params.files=[]);let O=this.manifest.share_target,Q=(q=this.manifest.share_target.params.files)==null?void 0:q.length;this.files.push({index:Q,html:x$1`
      <search-extensions 
        .index=${Q} .empty=${!0} 
        .share_target=${this.manifest.share_target}  
        @fileChanged=${W=>this.handleFileChange(W)}
        @deleteFilte=${W=>this.removeFile(W)}
        @errorTracker=${W=>this.handleFileError(W)}>
      </search-extensions>   
    `}),O.params.files.push({name:"",accept:[]});let j=new CustomEvent("manifestUpdated",{detail:{field:"share_target",change:O},bubbles:!0,composed:!0});this.dispatchEvent(j),this.handleErrorCount(),this.requestUpdate()}removeFile(O){var W,Y;let Q=(Y=(W=this.manifest.share_target)==null?void 0:W.params)==null?void 0:Y.files,j=[],U=0;for(;Q[U].name!==O.detail.file.name;)j.push(Q[U]),U++;if(j.push(...Q.slice(U+1)),j.length==0){let G=this.shadowRoot.querySelectorAll(".params");this.areParamsEmpty(G)&&this.parameterErrors(!0)}let F=this.manifest.share_target;F.params.files=j;let q=new CustomEvent("manifestUpdated",{detail:{field:"share_target",change:F},bubbles:!0,composed:!0});this.dispatchEvent(q),this.composeFiles(j)}renderFiles(){return this.files}async handleTopLevelInputChange(O){const Q=this.shadowRoot.querySelector("form"),U=new FormData(Q).get(O);if(O==="method"){const Y=["GET","POST"];let G=this.shadowRoot.querySelector('sl-select[data-field="share_target.method"]'),K=this.shadowRoot.querySelector(".method-error-message");Y.includes(U)?(G.classList.remove("error"),K.style.display="none",this.errorCount--):(G.classList.add("error"),K.style.display="block",this.errorCount++)}if(O==="enctype"&&U.trim()===""){this.shadowRoot.querySelector('[data-field="share_target.enctype"]').classList.add("error");let G=this.shadowRoot.querySelector(".enctype-error-message");G&&(G.style.display="block"),this.errorCount++,this.requestUpdate();return}else if(O==="enctype"){this.shadowRoot.querySelector('[data-field="share_target.enctype"]').classList.remove("error");let G=this.shadowRoot.querySelector(".enctype-error-message");G&&(G.style.display="none"),this.errorCount--}let F=this.manifest.share_target;if(F&&(F[O]=U),(await validateSingleField("share_target",F)).valid){this.shadowRoot.querySelector(`[data-field="share_target.${O}"]`).classList.remove("error");let G=this.shadowRoot.querySelector(`.${O}-error-message`);G&&(G.style.display="none");let K=new CustomEvent("manifestUpdated",{detail:{field:"share_target",change:F},bubbles:!0,composed:!0});this.dispatchEvent(K),this.errorCount--}else{this.shadowRoot.querySelector('[data-field="share_target.action"]').classList.add("error");let G=this.shadowRoot.querySelector(`.${O}-error-message`);G&&(G.style.display="block"),this.errorCount++}this.handleErrorCount()}async handleParameterInputChange(O){const Q=this.shadowRoot.querySelector("form"),U=new FormData(Q).get(`${O}`);if(U.trim()==""){let Y=this.shadowRoot.querySelectorAll(".params");this.areParamsEmpty(Y)&&this.parameterErrors(!0)}let F=this.manifest.share_target;if(F.params||(F.params={}),F&&(F.params[O]=U),(await validateSingleField("share_target",F)).valid){this.parameterErrors(!1);let Y=new CustomEvent("manifestUpdated",{detail:{field:"share_target",change:F},bubbles:!0,composed:!0});this.dispatchEvent(Y)}else{let Y=this.shadowRoot.querySelectorAll(".params"),G=this.areParamsEmpty(Y);Y&&G&&this.parameterErrors(!0)}this.handleErrorCount()}async handleFileChange(O){let Q=O.detail.file,j=this.manifest.share_target;j.params.files[O.detail.index]=Q;let U=new CustomEvent("manifestUpdated",{detail:{field:"share_target",change:j},bubbles:!0,composed:!0});this.dispatchEvent(U)}renderAddorRemove(){return this.manifest.share_target&&!this.removeClicked||this.addingTarget?this.confirmRemove?x$1`
          <div class="confirm">
            <p>Are you sure you want to remove the share target?</p>
            <div id="class-actions">
              <sl-button @click=${()=>this.removeShareTarget()}>Yes</sl-button>
              <sl-button @click=${()=>this.goBackToAdding()}>No</sl-button>
            </div>
          </div>`:x$1`
          <sl-button class="toggle-button" @click=${()=>this.toggleForm(!1)}><img src="../assets/minus.svg" alt="minus symbol" /> Remove Share Target</sl-button>
        `:x$1`
        <sl-button class="toggle-button" @click=${()=>this.toggleForm(!0)}><img src="assets/plus.svg" alt="plus symbol" />Add Share Target</sl-button>
      `}goBackToAdding(){this.addingTarget=!0,this.confirmRemove=!1}removeShareTarget(){this.addingTarget=!1,this.removeClicked=!0,this.postSelected=!1,this.files=[];let O=new CustomEvent("manifestUpdated",{detail:{field:"share_target",removal:!0},bubbles:!0,composed:!0});this.dispatchEvent(O)}render(){var O,Q,j,U,F,q,W,Y,G;return x$1`
      <div id="form-holder">
        <div id="action-holder">
          ${this.renderAddorRemove()}
        </div>
        

        ${this.manifest.share_target&&!this.removeClicked||this.addingTarget?x$1`
            <div id="extra-step">
              <manifest-field-tooltip .field=${"share_target.extra-step"}></manifest-field-tooltip>
              <a
                class="arrow_anchor"
                href="https://docs.pwabuilder.com/#/home/native-features?id=how-to-share-to-your-pwa"
                rel="noopener"
                target="_blank"
              >
                <p class="arrow_link">Handle receiving share data in your code</p>
                <img
                  src="/assets/new/arrow.svg"
                  alt="arrow"
                />
              </a>
            </div>
            <form id="share-target-form">
              <div class="form-row">
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h3>Action</h3>
                      <manifest-field-tooltip .field=${"share_target.action"}></manifest-field-tooltip>
                    </div>

                    <p class="field-desc">(required)</p>
                  </div>
                  <p class="field-desc">The URL for the web share target </p>
                  <sl-input name="action" placeholder="Add action (ex: /share-receiver)" value=${((O=this.manifest.share_target)==null?void 0:O.action)||""} @sl-change=${()=>this.handleTopLevelInputChange("action")} data-field="share_target.action"></sl-input>
                  <p class="action-error-message error-message">Action is a required field and must be in the scope of your PWA</p>
                </div>
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h3>Method</h3>
                      <manifest-field-tooltip .field=${"share_target.method"}></manifest-field-tooltip>
                    </div>
                  </div>
                  <p class="field-desc">The HTTP request method to use</p>
                  <sl-select name="method" placeholder="Select a method" class="method" value=${((Q=this.manifest.share_target)==null?void 0:Q.method)||"GET"} data-field="share_target.method" @sl-change=${()=>this.handleMethodChange()}>
                    <sl-option value=${"GET"}>GET</sl-option>
                    <sl-option value=${"POST"}>POST</sl-option>
                  </sl-select>
                  <p class="method-error-message error-message">Method must be set to GET or POST only.</p>

                </div>
              </div>
              ${this.postSelected?x$1`
                <div class="form-row long">
                  <div class="form-field">
                    <div class="field-header">
                      <div class="header-left">
                        <h3>Enctype</h3>
                        <manifest-field-tooltip .field=${"share_target.enctype"}></manifest-field-tooltip>
                      </div>
                    </div>
                    <p class="field-desc">The encoding of the share data when a POST request is used</p>
                    <sl-input name="enctype" placeholder="Add enctype" value=${((j=this.manifest.share_target)==null?void 0:j.enctype)||""} @sl-change=${()=>this.handleTopLevelInputChange("enctype")} data-field="share_target.enctype"></sl-input>
                    <p class="enctype-error-message error-message">If you have specified POST as your method, specify the encoding of your share data.</p>
                  </div>
                </div>
                `:x$1``}
              <div class="form-row long">
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h3>Parameters</h3>
                      <!-- <manifest-field-tooltip .field=${"share_target.params"}></manifest-field-tooltip> -->
                    </div>
                    <p class="field-desc">(required)</p>
                  </div>
                  <p class="field-desc">An object to configure the share parameters. The object keys correspond to the data object in navigator.share(). The object values can be specified and will be used as query parameters:</p>
                  <p class="params-error-message error-message">Specifying at least one parameter is required.</p>
                </div>
              </div>
              <div class="form-row multi">
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h4 class="sub">Title</h4>
                      <manifest-field-tooltip .field=${"share_target.params.title"}></manifest-field-tooltip>
                    </div>
                  </div>
                  <sl-input name="title" class="params" placeholder="Add title" value=${((F=(U=this.manifest.share_target)==null?void 0:U.params)==null?void 0:F.title)||""} @sl-change=${()=>this.handleParameterInputChange("title")} data-field="share_target.params.title"></sl-input>
                </div>
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h4 class="sub">Text</h4>
                      <manifest-field-tooltip .field=${"share_target.params.text"}></manifest-field-tooltip>
                    </div>
                  </div>
                  <sl-input name="text" class="params" placeholder="Add text" value=${((W=(q=this.manifest.share_target)==null?void 0:q.params)==null?void 0:W.text)||""} @sl-change=${()=>this.handleParameterInputChange("text")} data-field="share_target.params.text"></sl-input>
                </div>
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h4 class="sub">URL</h4>
                      <manifest-field-tooltip .field=${"share_target.params.url"}></manifest-field-tooltip>
                    </div>
                  </div>
                  <sl-input name="url" class="params" placeholder="Add url" value=${((G=(Y=this.manifest.share_target)==null?void 0:Y.params)==null?void 0:G.url)||""} @sl-change=${()=>this.handleParameterInputChange("url")} data-field="share_target.params.url"></sl-input>
                </div>
              </div>
              <div class="form-row long">
                <div class="form-field">
                  <div class="field-header">
                    <div class="header-left">
                      <h4 class="sub">Files</h4>
                      <!-- <manifest-field-tooltip .field=${"share_target.params.files"}></manifest-field-tooltip> -->
                    </div>
                  </div>
                  <p class="field-desc">An object (or an array of objects) defining which files are accepted by the share target</p>
                  ${this.files.map(K=>K.html)}
                  <sl-button id="add-new-file" class="params" @click=${()=>this.pushEmptyFile()}>Add File</sl-button>
                </div>
              </div>
              
            </form>
          `:x$1``}
      </div>
    `}};__decorate$4([e$7({type:Object,hasChanged(X,O){return X!==O&&X.name&&(manifestInitialized=!0),X!==O}})],ManifestShareForm.prototype,"manifest",void 0);__decorate$4([e$7({type:String})],ManifestShareForm.prototype,"manifestURL",void 0);__decorate$4([e$7({type:String})],ManifestShareForm.prototype,"focusOn",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"addingTarget",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"removeClicked",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"postSelected",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"files",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"numOfFiles",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"filteredList",void 0);__decorate$4([t$5()],ManifestShareForm.prototype,"confirmRemove",void 0);ManifestShareForm=__decorate$4([e$8("manifest-share-form")],ManifestShareForm);function prettyString(X){return typeof X!="string"&&(X=JSON.stringify(X,void 0,2)),X=X.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),X.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(O){return O})}var __decorate$3=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let AppToast=class extends s$5{static get styles(){return i$7`
      #toast {
        position: fixed;
        bottom: 16px;
        right: 16px;
        background: slategrey;
        color: white;
        padding: 12px;
        border-radius: 6px;
        font-weight: bold;
        animation-name: slideup;
        animation-duration: 300ms;
      }
      @keyframes slideup {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0px);
        }
      }
      @media(max-width: 450px){
        #toast {
          right: 16px;
          left: 16px;
          text-align: center;
        }
      }
    `}constructor(){super()}render(){return x$1`
      <div id="toast">
        <slot></slot>
      </div>
    `}};AppToast=__decorate$3([e$8("app-toast")],AppToast);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$3=window,e$5=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),n$9=new WeakMap;class o$5{constructor(O,Q,j){if(this._$cssResult$=!0,j!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=O,this.t=Q}get styleSheet(){let O=this.o;const Q=this.t;if(e$5&&O===void 0){const j=Q!==void 0&&Q.length===1;j&&(O=n$9.get(Q)),O===void 0&&((this.o=O=new CSSStyleSheet).replaceSync(this.cssText),j&&n$9.set(Q,O))}return O}toString(){return this.cssText}}const r$3=X=>new o$5(typeof X=="string"?X:X+"",void 0,s$4),i$3=(X,...O)=>{const Q=X.length===1?X[0]:O.reduce((j,U,F)=>j+(q=>{if(q._$cssResult$===!0)return q.cssText;if(typeof q=="number")return q;throw Error("Value passed to 'css' function must be a 'css' function result: "+q+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(U)+X[F+1],X[0]);return new o$5(Q,X,s$4)},S$1=(X,O)=>{e$5?X.adoptedStyleSheets=O.map(Q=>Q instanceof CSSStyleSheet?Q:Q.styleSheet):O.forEach(Q=>{const j=document.createElement("style"),U=t$3.litNonce;U!==void 0&&j.setAttribute("nonce",U),j.textContent=Q.cssText,X.appendChild(j)})},c$3=e$5?X=>X:X=>X instanceof CSSStyleSheet?(O=>{let Q="";for(const j of O.cssRules)Q+=j.cssText;return r$3(Q)})(X):X;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$3;const e$4=window,r$2=e$4.trustedTypes,h$3=r$2?r$2.emptyScript:"",o$4=e$4.reactiveElementPolyfillSupport,n$8={toAttribute(X,O){switch(O){case Boolean:X=X?h$3:null;break;case Object:case Array:X=X==null?X:JSON.stringify(X)}return X},fromAttribute(X,O){let Q=X;switch(O){case Boolean:Q=X!==null;break;case Number:Q=X===null?null:Number(X);break;case Object:case Array:try{Q=JSON.parse(X)}catch{Q=null}}return Q}},a$2=(X,O)=>O!==X&&(O==O||X==X),l$3={attribute:!0,type:String,converter:n$8,reflect:!1,hasChanged:a$2},d$2="finalized";class u$1 extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(O){var Q;this.finalize(),((Q=this.h)!==null&&Q!==void 0?Q:this.h=[]).push(O)}static get observedAttributes(){this.finalize();const O=[];return this.elementProperties.forEach((Q,j)=>{const U=this._$Ep(j,Q);U!==void 0&&(this._$Ev.set(U,j),O.push(U))}),O}static createProperty(O,Q=l$3){if(Q.state&&(Q.attribute=!1),this.finalize(),this.elementProperties.set(O,Q),!Q.noAccessor&&!this.prototype.hasOwnProperty(O)){const j=typeof O=="symbol"?Symbol():"__"+O,U=this.getPropertyDescriptor(O,j,Q);U!==void 0&&Object.defineProperty(this.prototype,O,U)}}static getPropertyDescriptor(O,Q,j){return{get(){return this[Q]},set(U){const F=this[O];this[Q]=U,this.requestUpdate(O,F,j)},configurable:!0,enumerable:!0}}static getPropertyOptions(O){return this.elementProperties.get(O)||l$3}static finalize(){if(this.hasOwnProperty(d$2))return!1;this[d$2]=!0;const O=Object.getPrototypeOf(this);if(O.finalize(),O.h!==void 0&&(this.h=[...O.h]),this.elementProperties=new Map(O.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const Q=this.properties,j=[...Object.getOwnPropertyNames(Q),...Object.getOwnPropertySymbols(Q)];for(const U of j)this.createProperty(U,Q[U])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(O){const Q=[];if(Array.isArray(O)){const j=new Set(O.flat(1/0).reverse());for(const U of j)Q.unshift(c$3(U))}else O!==void 0&&Q.push(c$3(O));return Q}static _$Ep(O,Q){const j=Q.attribute;return j===!1?void 0:typeof j=="string"?j:typeof O=="string"?O.toLowerCase():void 0}u(){var O;this._$E_=new Promise(Q=>this.enableUpdating=Q),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(O=this.constructor.h)===null||O===void 0||O.forEach(Q=>Q(this))}addController(O){var Q,j;((Q=this._$ES)!==null&&Q!==void 0?Q:this._$ES=[]).push(O),this.renderRoot!==void 0&&this.isConnected&&((j=O.hostConnected)===null||j===void 0||j.call(O))}removeController(O){var Q;(Q=this._$ES)===null||Q===void 0||Q.splice(this._$ES.indexOf(O)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((O,Q)=>{this.hasOwnProperty(Q)&&(this._$Ei.set(Q,this[Q]),delete this[Q])})}createRenderRoot(){var O;const Q=(O=this.shadowRoot)!==null&&O!==void 0?O:this.attachShadow(this.constructor.shadowRootOptions);return S$1(Q,this.constructor.elementStyles),Q}connectedCallback(){var O;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(O=this._$ES)===null||O===void 0||O.forEach(Q=>{var j;return(j=Q.hostConnected)===null||j===void 0?void 0:j.call(Q)})}enableUpdating(O){}disconnectedCallback(){var O;(O=this._$ES)===null||O===void 0||O.forEach(Q=>{var j;return(j=Q.hostDisconnected)===null||j===void 0?void 0:j.call(Q)})}attributeChangedCallback(O,Q,j){this._$AK(O,j)}_$EO(O,Q,j=l$3){var U;const F=this.constructor._$Ep(O,j);if(F!==void 0&&j.reflect===!0){const q=(((U=j.converter)===null||U===void 0?void 0:U.toAttribute)!==void 0?j.converter:n$8).toAttribute(Q,j.type);this._$El=O,q==null?this.removeAttribute(F):this.setAttribute(F,q),this._$El=null}}_$AK(O,Q){var j;const U=this.constructor,F=U._$Ev.get(O);if(F!==void 0&&this._$El!==F){const q=U.getPropertyOptions(F),W=typeof q.converter=="function"?{fromAttribute:q.converter}:((j=q.converter)===null||j===void 0?void 0:j.fromAttribute)!==void 0?q.converter:n$8;this._$El=F,this[F]=W.fromAttribute(Q,q.type),this._$El=null}}requestUpdate(O,Q,j){let U=!0;O!==void 0&&(((j=j||this.constructor.getPropertyOptions(O)).hasChanged||a$2)(this[O],Q)?(this._$AL.has(O)||this._$AL.set(O,Q),j.reflect===!0&&this._$El!==O&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(O,j))):U=!1),!this.isUpdatePending&&U&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(Q){Promise.reject(Q)}const O=this.scheduleUpdate();return O!=null&&await O,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var O;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((U,F)=>this[F]=U),this._$Ei=void 0);let Q=!1;const j=this._$AL;try{Q=this.shouldUpdate(j),Q?(this.willUpdate(j),(O=this._$ES)===null||O===void 0||O.forEach(U=>{var F;return(F=U.hostUpdate)===null||F===void 0?void 0:F.call(U)}),this.update(j)):this._$Ek()}catch(U){throw Q=!1,this._$Ek(),U}Q&&this._$AE(j)}willUpdate(O){}_$AE(O){var Q;(Q=this._$ES)===null||Q===void 0||Q.forEach(j=>{var U;return(U=j.hostUpdated)===null||U===void 0?void 0:U.call(j)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(O)),this.updated(O)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(O){return!0}update(O){this._$EC!==void 0&&(this._$EC.forEach((Q,j)=>this._$EO(j,this[j],Q)),this._$EC=void 0),this._$Ek()}updated(O){}firstUpdated(O){}}u$1[d$2]=!0,u$1.elementProperties=new Map,u$1.elementStyles=[],u$1.shadowRootOptions={mode:"open"},o$4==null||o$4({ReactiveElement:u$1}),((s$3=e$4.reactiveElementVersions)!==null&&s$3!==void 0?s$3:e$4.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2;const i$2=window,s$2=i$2.trustedTypes,e$3=s$2?s$2.createPolicy("lit-html",{createHTML:X=>X}):void 0,o$3="$lit$",n$7=`lit$${(Math.random()+"").slice(9)}$`,l$2="?"+n$7,h$2=`<${l$2}>`,r$1=document,u=()=>r$1.createComment(""),d$1=X=>X===null||typeof X!="object"&&typeof X!="function",c$2=Array.isArray,v=X=>c$2(X)||typeof(X==null?void 0:X[Symbol.iterator])=="function",a$1=`[ 	
\f\r]`,f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_=/-->/g,m$1=/>/g,p$1=RegExp(`>|${a$1}(?:([^\\s"'>=/]+)(${a$1}*=${a$1}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g$1=/'/g,$=/"/g,y=/^(?:script|style|textarea|title)$/i,w=X=>(O,...Q)=>({_$litType$:X,strings:O,values:Q}),x=w(1),T=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),E=new WeakMap,C$1=r$1.createTreeWalker(r$1,129,null,!1);function P(X,O){if(!Array.isArray(X)||!X.hasOwnProperty("raw"))throw Error("invalid template strings array");return e$3!==void 0?e$3.createHTML(O):O}const V=(X,O)=>{const Q=X.length-1,j=[];let U,F=O===2?"<svg>":"",q=f;for(let W=0;W<Q;W++){const Y=X[W];let G,K,J=-1,ee=0;for(;ee<Y.length&&(q.lastIndex=ee,K=q.exec(Y),K!==null);)ee=q.lastIndex,q===f?K[1]==="!--"?q=_:K[1]!==void 0?q=m$1:K[2]!==void 0?(y.test(K[2])&&(U=RegExp("</"+K[2],"g")),q=p$1):K[3]!==void 0&&(q=p$1):q===p$1?K[0]===">"?(q=U!=null?U:f,J=-1):K[1]===void 0?J=-2:(J=q.lastIndex-K[2].length,G=K[1],q=K[3]===void 0?p$1:K[3]==='"'?$:g$1):q===$||q===g$1?q=p$1:q===_||q===m$1?q=f:(q=p$1,U=void 0);const te=q===p$1&&X[W+1].startsWith("/>")?" ":"";F+=q===f?Y+h$2:J>=0?(j.push(G),Y.slice(0,J)+o$3+Y.slice(J)+n$7+te):Y+n$7+(J===-2?(j.push(void 0),W):te)}return[P(X,F+(X[Q]||"<?>")+(O===2?"</svg>":"")),j]};class N{constructor({strings:O,_$litType$:Q},j){let U;this.parts=[];let F=0,q=0;const W=O.length-1,Y=this.parts,[G,K]=V(O,Q);if(this.el=N.createElement(G,j),C$1.currentNode=this.el.content,Q===2){const J=this.el.content,ee=J.firstChild;ee.remove(),J.append(...ee.childNodes)}for(;(U=C$1.nextNode())!==null&&Y.length<W;){if(U.nodeType===1){if(U.hasAttributes()){const J=[];for(const ee of U.getAttributeNames())if(ee.endsWith(o$3)||ee.startsWith(n$7)){const te=K[q++];if(J.push(ee),te!==void 0){const re=U.getAttribute(te.toLowerCase()+o$3).split(n$7),oe=/([.?@])?(.*)/.exec(te);Y.push({type:1,index:F,name:oe[2],strings:re,ctor:oe[1]==="."?H:oe[1]==="?"?L:oe[1]==="@"?z:k})}else Y.push({type:6,index:F})}for(const ee of J)U.removeAttribute(ee)}if(y.test(U.tagName)){const J=U.textContent.split(n$7),ee=J.length-1;if(ee>0){U.textContent=s$2?s$2.emptyScript:"";for(let te=0;te<ee;te++)U.append(J[te],u()),C$1.nextNode(),Y.push({type:2,index:++F});U.append(J[ee],u())}}}else if(U.nodeType===8)if(U.data===l$2)Y.push({type:2,index:F});else{let J=-1;for(;(J=U.data.indexOf(n$7,J+1))!==-1;)Y.push({type:7,index:F}),J+=n$7.length-1}F++}}static createElement(O,Q){const j=r$1.createElement("template");return j.innerHTML=O,j}}function S(X,O,Q=X,j){var U,F,q,W;if(O===T)return O;let Y=j!==void 0?(U=Q._$Co)===null||U===void 0?void 0:U[j]:Q._$Cl;const G=d$1(O)?void 0:O._$litDirective$;return(Y==null?void 0:Y.constructor)!==G&&((F=Y==null?void 0:Y._$AO)===null||F===void 0||F.call(Y,!1),G===void 0?Y=void 0:(Y=new G(X),Y._$AT(X,Q,j)),j!==void 0?((q=(W=Q)._$Co)!==null&&q!==void 0?q:W._$Co=[])[j]=Y:Q._$Cl=Y),Y!==void 0&&(O=S(X,Y._$AS(X,O.values),Y,j)),O}class M{constructor(O,Q){this._$AV=[],this._$AN=void 0,this._$AD=O,this._$AM=Q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(O){var Q;const{el:{content:j},parts:U}=this._$AD,F=((Q=O==null?void 0:O.creationScope)!==null&&Q!==void 0?Q:r$1).importNode(j,!0);C$1.currentNode=F;let q=C$1.nextNode(),W=0,Y=0,G=U[0];for(;G!==void 0;){if(W===G.index){let K;G.type===2?K=new R(q,q.nextSibling,this,O):G.type===1?K=new G.ctor(q,G.name,G.strings,this,O):G.type===6&&(K=new Z(q,this,O)),this._$AV.push(K),G=U[++Y]}W!==(G==null?void 0:G.index)&&(q=C$1.nextNode(),W++)}return C$1.currentNode=r$1,F}v(O){let Q=0;for(const j of this._$AV)j!==void 0&&(j.strings!==void 0?(j._$AI(O,j,Q),Q+=j.strings.length-2):j._$AI(O[Q])),Q++}}class R{constructor(O,Q,j,U){var F;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=O,this._$AB=Q,this._$AM=j,this.options=U,this._$Cp=(F=U==null?void 0:U.isConnected)===null||F===void 0||F}get _$AU(){var O,Q;return(Q=(O=this._$AM)===null||O===void 0?void 0:O._$AU)!==null&&Q!==void 0?Q:this._$Cp}get parentNode(){let O=this._$AA.parentNode;const Q=this._$AM;return Q!==void 0&&(O==null?void 0:O.nodeType)===11&&(O=Q.parentNode),O}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(O,Q=this){O=S(this,O,Q),d$1(O)?O===A||O==null||O===""?(this._$AH!==A&&this._$AR(),this._$AH=A):O!==this._$AH&&O!==T&&this._(O):O._$litType$!==void 0?this.g(O):O.nodeType!==void 0?this.$(O):v(O)?this.T(O):this._(O)}k(O){return this._$AA.parentNode.insertBefore(O,this._$AB)}$(O){this._$AH!==O&&(this._$AR(),this._$AH=this.k(O))}_(O){this._$AH!==A&&d$1(this._$AH)?this._$AA.nextSibling.data=O:this.$(r$1.createTextNode(O)),this._$AH=O}g(O){var Q;const{values:j,_$litType$:U}=O,F=typeof U=="number"?this._$AC(O):(U.el===void 0&&(U.el=N.createElement(P(U.h,U.h[0]),this.options)),U);if(((Q=this._$AH)===null||Q===void 0?void 0:Q._$AD)===F)this._$AH.v(j);else{const q=new M(F,this),W=q.u(this.options);q.v(j),this.$(W),this._$AH=q}}_$AC(O){let Q=E.get(O.strings);return Q===void 0&&E.set(O.strings,Q=new N(O)),Q}T(O){c$2(this._$AH)||(this._$AH=[],this._$AR());const Q=this._$AH;let j,U=0;for(const F of O)U===Q.length?Q.push(j=new R(this.k(u()),this.k(u()),this,this.options)):j=Q[U],j._$AI(F),U++;U<Q.length&&(this._$AR(j&&j._$AB.nextSibling,U),Q.length=U)}_$AR(O=this._$AA.nextSibling,Q){var j;for((j=this._$AP)===null||j===void 0||j.call(this,!1,!0,Q);O&&O!==this._$AB;){const U=O.nextSibling;O.remove(),O=U}}setConnected(O){var Q;this._$AM===void 0&&(this._$Cp=O,(Q=this._$AP)===null||Q===void 0||Q.call(this,O))}}class k{constructor(O,Q,j,U,F){this.type=1,this._$AH=A,this._$AN=void 0,this.element=O,this.name=Q,this._$AM=U,this.options=F,j.length>2||j[0]!==""||j[1]!==""?(this._$AH=Array(j.length-1).fill(new String),this.strings=j):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(O,Q=this,j,U){const F=this.strings;let q=!1;if(F===void 0)O=S(this,O,Q,0),q=!d$1(O)||O!==this._$AH&&O!==T,q&&(this._$AH=O);else{const W=O;let Y,G;for(O=F[0],Y=0;Y<F.length-1;Y++)G=S(this,W[j+Y],Q,Y),G===T&&(G=this._$AH[Y]),q||(q=!d$1(G)||G!==this._$AH[Y]),G===A?O=A:O!==A&&(O+=(G!=null?G:"")+F[Y+1]),this._$AH[Y]=G}q&&!U&&this.j(O)}j(O){O===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,O!=null?O:"")}}class H extends k{constructor(){super(...arguments),this.type=3}j(O){this.element[this.name]=O===A?void 0:O}}const I=s$2?s$2.emptyScript:"";class L extends k{constructor(){super(...arguments),this.type=4}j(O){O&&O!==A?this.element.setAttribute(this.name,I):this.element.removeAttribute(this.name)}}class z extends k{constructor(O,Q,j,U,F){super(O,Q,j,U,F),this.type=5}_$AI(O,Q=this){var j;if((O=(j=S(this,O,Q,0))!==null&&j!==void 0?j:A)===T)return;const U=this._$AH,F=O===A&&U!==A||O.capture!==U.capture||O.once!==U.once||O.passive!==U.passive,q=O!==A&&(U===A||F);F&&this.element.removeEventListener(this.name,this,U),q&&this.element.addEventListener(this.name,this,O),this._$AH=O}handleEvent(O){var Q,j;typeof this._$AH=="function"?this._$AH.call((j=(Q=this.options)===null||Q===void 0?void 0:Q.host)!==null&&j!==void 0?j:this.element,O):this._$AH.handleEvent(O)}}class Z{constructor(O,Q,j){this.element=O,this.type=6,this._$AN=void 0,this._$AM=Q,this.options=j}get _$AU(){return this._$AM._$AU}_$AI(O){S(this,O)}}const B=i$2.litHtmlPolyfillSupport;B==null||B(N,R),((t$2=i$2.litHtmlVersions)!==null&&t$2!==void 0?t$2:i$2.litHtmlVersions=[]).push("2.7.5");const D=(X,O,Q)=>{var j,U;const F=(j=Q==null?void 0:Q.renderBefore)!==null&&j!==void 0?j:O;let q=F._$litPart$;if(q===void 0){const W=(U=Q==null?void 0:Q.renderBefore)!==null&&U!==void 0?U:null;F._$litPart$=q=new R(O.insertBefore(u(),W),W,void 0,Q!=null?Q:{})}return q._$AI(X),q};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$1,o$2;class s$1 extends u$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var O,Q;const j=super.createRenderRoot();return(O=(Q=this.renderOptions).renderBefore)!==null&&O!==void 0||(Q.renderBefore=j.firstChild),j}update(O){const Q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(O),this._$Do=D(Q,this.renderRoot,this.renderOptions)}connectedCallback(){var O;super.connectedCallback(),(O=this._$Do)===null||O===void 0||O.setConnected(!0)}disconnectedCallback(){var O;super.disconnectedCallback(),(O=this._$Do)===null||O===void 0||O.setConnected(!1)}render(){return T}}s$1.finalized=!0,s$1._$litElement$=!0,(l$1=globalThis.litElementHydrateSupport)===null||l$1===void 0||l$1.call(globalThis,{LitElement:s$1});const n$6=globalThis.litElementPolyfillSupport;n$6==null||n$6({LitElement:s$1});((o$2=globalThis.litElementVersions)!==null&&o$2!==void 0?o$2:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$2=X=>O=>typeof O=="function"?((Q,j)=>(customElements.define(Q,j),j))(X,O):((Q,j)=>{const{kind:U,elements:F}=j;return{kind:U,elements:F,finisher(q){customElements.define(Q,q)}}})(X,O);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$1=(X,O)=>O.kind==="method"&&O.descriptor&&!("value"in O.descriptor)?{...O,finisher(Q){Q.createProperty(O.key,X)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:O.key,initializer(){typeof O.initializer=="function"&&(this[O.key]=O.initializer.call(this))},finisher(Q){Q.createProperty(O.key,X)}},e$1=(X,O,Q)=>{O.constructor.createProperty(Q,X)};function n$5(X){return(O,Q)=>Q!==void 0?e$1(X,O,Q):i$1(X,O)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function t$1(X){return n$5({...X,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$4;((n$4=window.HTMLSlotElement)===null||n$4===void 0?void 0:n$4.prototype.assignedElements)!=null;class Text{lineAt(O){if(O<0||O>this.length)throw new RangeError(`Invalid position ${O} in document of length ${this.length}`);return this.lineInner(O,!1,1,0)}line(O){if(O<1||O>this.lines)throw new RangeError(`Invalid line number ${O} in ${this.lines}-line document`);return this.lineInner(O,!0,1,0)}replace(O,Q,j){let U=[];return this.decompose(0,O,U,2),j.length&&j.decompose(0,j.length,U,3),this.decompose(Q,this.length,U,1),TextNode.from(U,this.length-(Q-O)+j.length)}append(O){return this.replace(this.length,this.length,O)}slice(O,Q=this.length){let j=[];return this.decompose(O,Q,j,0),TextNode.from(j,Q-O)}eq(O){if(O==this)return!0;if(O.length!=this.length||O.lines!=this.lines)return!1;let Q=this.scanIdentical(O,1),j=this.length-this.scanIdentical(O,-1),U=new RawTextCursor(this),F=new RawTextCursor(O);for(let q=Q,W=Q;;){if(U.next(q),F.next(q),q=0,U.lineBreak!=F.lineBreak||U.done!=F.done||U.value!=F.value)return!1;if(W+=U.value.length,U.done||W>=j)return!0}}iter(O=1){return new RawTextCursor(this,O)}iterRange(O,Q=this.length){return new PartialTextCursor(this,O,Q)}iterLines(O,Q){let j;if(O==null)j=this.iter();else{Q==null&&(Q=this.lines+1);let U=this.line(O).from;j=this.iterRange(U,Math.max(U,Q==this.lines+1?this.length:Q<=1?0:this.line(Q-1).to))}return new LineCursor(j)}toString(){return this.sliceString(0)}toJSON(){let O=[];return this.flatten(O),O}constructor(){}static of(O){if(O.length==0)throw new RangeError("A document must have at least one line");return O.length==1&&!O[0]?Text.empty:O.length<=32?new TextLeaf(O):TextNode.from(TextLeaf.split(O,[]))}}class TextLeaf extends Text{constructor(O,Q=textLength(O)){super(),this.text=O,this.length=Q}get lines(){return this.text.length}get children(){return null}lineInner(O,Q,j,U){for(let F=0;;F++){let q=this.text[F],W=U+q.length;if((Q?j:W)>=O)return new Line(U,W,j,q);U=W+1,j++}}decompose(O,Q,j,U){let F=O<=0&&Q>=this.length?this:new TextLeaf(sliceText(this.text,O,Q),Math.min(Q,this.length)-Math.max(0,O));if(U&1){let q=j.pop(),W=appendText(F.text,q.text.slice(),0,F.length);if(W.length<=32)j.push(new TextLeaf(W,q.length+F.length));else{let Y=W.length>>1;j.push(new TextLeaf(W.slice(0,Y)),new TextLeaf(W.slice(Y)))}}else j.push(F)}replace(O,Q,j){if(!(j instanceof TextLeaf))return super.replace(O,Q,j);let U=appendText(this.text,appendText(j.text,sliceText(this.text,0,O)),Q),F=this.length+j.length-(Q-O);return U.length<=32?new TextLeaf(U,F):TextNode.from(TextLeaf.split(U,[]),F)}sliceString(O,Q=this.length,j=`
`){let U="";for(let F=0,q=0;F<=Q&&q<this.text.length;q++){let W=this.text[q],Y=F+W.length;F>O&&q&&(U+=j),O<Y&&Q>F&&(U+=W.slice(Math.max(0,O-F),Q-F)),F=Y+1}return U}flatten(O){for(let Q of this.text)O.push(Q)}scanIdentical(){return 0}static split(O,Q){let j=[],U=-1;for(let F of O)j.push(F),U+=F.length+1,j.length==32&&(Q.push(new TextLeaf(j,U)),j=[],U=-1);return U>-1&&Q.push(new TextLeaf(j,U)),Q}}class TextNode extends Text{constructor(O,Q){super(),this.children=O,this.length=Q,this.lines=0;for(let j of O)this.lines+=j.lines}lineInner(O,Q,j,U){for(let F=0;;F++){let q=this.children[F],W=U+q.length,Y=j+q.lines-1;if((Q?Y:W)>=O)return q.lineInner(O,Q,j,U);U=W+1,j=Y+1}}decompose(O,Q,j,U){for(let F=0,q=0;q<=Q&&F<this.children.length;F++){let W=this.children[F],Y=q+W.length;if(O<=Y&&Q>=q){let G=U&((q<=O?1:0)|(Y>=Q?2:0));q>=O&&Y<=Q&&!G?j.push(W):W.decompose(O-q,Q-q,j,G)}q=Y+1}}replace(O,Q,j){if(j.lines<this.lines)for(let U=0,F=0;U<this.children.length;U++){let q=this.children[U],W=F+q.length;if(O>=F&&Q<=W){let Y=q.replace(O-F,Q-F,j),G=this.lines-q.lines+Y.lines;if(Y.lines<G>>5-1&&Y.lines>G>>5+1){let K=this.children.slice();return K[U]=Y,new TextNode(K,this.length-(Q-O)+j.length)}return super.replace(F,W,Y)}F=W+1}return super.replace(O,Q,j)}sliceString(O,Q=this.length,j=`
`){let U="";for(let F=0,q=0;F<this.children.length&&q<=Q;F++){let W=this.children[F],Y=q+W.length;q>O&&F&&(U+=j),O<Y&&Q>q&&(U+=W.sliceString(O-q,Q-q,j)),q=Y+1}return U}flatten(O){for(let Q of this.children)Q.flatten(O)}scanIdentical(O,Q){if(!(O instanceof TextNode))return 0;let j=0,[U,F,q,W]=Q>0?[0,0,this.children.length,O.children.length]:[this.children.length-1,O.children.length-1,-1,-1];for(;;U+=Q,F+=Q){if(U==q||F==W)return j;let Y=this.children[U],G=O.children[F];if(Y!=G)return j+Y.scanIdentical(G,Q);j+=Y.length+1}}static from(O,Q=O.reduce((j,U)=>j+U.length+1,-1)){let j=0;for(let te of O)j+=te.lines;if(j<32){let te=[];for(let re of O)re.flatten(te);return new TextLeaf(te,Q)}let U=Math.max(32,j>>5),F=U<<1,q=U>>1,W=[],Y=0,G=-1,K=[];function J(te){let re;if(te.lines>F&&te instanceof TextNode)for(let oe of te.children)J(oe);else te.lines>q&&(Y>q||!Y)?(ee(),W.push(te)):te instanceof TextLeaf&&Y&&(re=K[K.length-1])instanceof TextLeaf&&te.lines+re.lines<=32?(Y+=te.lines,G+=te.length+1,K[K.length-1]=new TextLeaf(re.text.concat(te.text),re.length+1+te.length)):(Y+te.lines>U&&ee(),Y+=te.lines,G+=te.length+1,K.push(te))}function ee(){Y!=0&&(W.push(K.length==1?K[0]:TextNode.from(K,G)),G=-1,Y=K.length=0)}for(let te of O)J(te);return ee(),W.length==1?W[0]:new TextNode(W,Q)}}Text.empty=new TextLeaf([""],0);function textLength(X){let O=-1;for(let Q of X)O+=Q.length+1;return O}function appendText(X,O,Q=0,j=1e9){for(let U=0,F=0,q=!0;F<X.length&&U<=j;F++){let W=X[F],Y=U+W.length;Y>=Q&&(Y>j&&(W=W.slice(0,j-U)),U<Q&&(W=W.slice(Q-U)),q?(O[O.length-1]+=W,q=!1):O.push(W)),U=Y+1}return O}function sliceText(X,O,Q){return appendText(X,[""],O,Q)}class RawTextCursor{constructor(O,Q=1){this.dir=Q,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[O],this.offsets=[Q>0?1:(O instanceof TextLeaf?O.text.length:O.children.length)<<1]}nextInner(O,Q){for(this.done=this.lineBreak=!1;;){let j=this.nodes.length-1,U=this.nodes[j],F=this.offsets[j],q=F>>1,W=U instanceof TextLeaf?U.text.length:U.children.length;if(q==(Q>0?W:0)){if(j==0)return this.done=!0,this.value="",this;Q>0&&this.offsets[j-1]++,this.nodes.pop(),this.offsets.pop()}else if((F&1)==(Q>0?0:1)){if(this.offsets[j]+=Q,O==0)return this.lineBreak=!0,this.value=`
`,this;O--}else if(U instanceof TextLeaf){let Y=U.text[q+(Q<0?-1:0)];if(this.offsets[j]+=Q,Y.length>Math.max(0,O))return this.value=O==0?Y:Q>0?Y.slice(O):Y.slice(0,Y.length-O),this;O-=Y.length}else{let Y=U.children[q+(Q<0?-1:0)];O>Y.length?(O-=Y.length,this.offsets[j]+=Q):(Q<0&&this.offsets[j]--,this.nodes.push(Y),this.offsets.push(Q>0?1:(Y instanceof TextLeaf?Y.text.length:Y.children.length)<<1))}}}next(O=0){return O<0&&(this.nextInner(-O,-this.dir),O=this.value.length),this.nextInner(O,this.dir)}}class PartialTextCursor{constructor(O,Q,j){this.value="",this.done=!1,this.cursor=new RawTextCursor(O,Q>j?-1:1),this.pos=Q>j?O.length:0,this.from=Math.min(Q,j),this.to=Math.max(Q,j)}nextInner(O,Q){if(Q<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;O+=Math.max(0,Q<0?this.pos-this.to:this.from-this.pos);let j=Q<0?this.pos-this.from:this.to-this.pos;O>j&&(O=j),j-=O;let{value:U}=this.cursor.next(O);return this.pos+=(U.length+O)*Q,this.value=U.length<=j?U:Q<0?U.slice(U.length-j):U.slice(0,j),this.done=!this.value,this}next(O=0){return O<0?O=Math.max(O,this.from-this.pos):O>0&&(O=Math.min(O,this.to-this.pos)),this.nextInner(O,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(O){this.inner=O,this.afterBreak=!0,this.value="",this.done=!1}next(O=0){let{done:Q,lineBreak:j,value:U}=this.inner.next(O);return Q?(this.done=!0,this.value=""):j?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=U,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(O,Q,j,U){this.from=O,this.to=Q,this.number=j,this.text=U}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(X=>X?parseInt(X,36):1);for(let X=1;X<extend.length;X++)extend[X]+=extend[X-1];function isExtendingChar(X){for(let O=1;O<extend.length;O+=2)if(extend[O]>X)return extend[O-1]<=X;return!1}function isRegionalIndicator(X){return X>=127462&&X<=127487}const ZWJ=8205;function findClusterBreak(X,O,Q=!0,j=!0){return(Q?nextClusterBreak:prevClusterBreak)(X,O,j)}function nextClusterBreak(X,O,Q){if(O==X.length)return O;O&&surrogateLow(X.charCodeAt(O))&&surrogateHigh(X.charCodeAt(O-1))&&O--;let j=codePointAt(X,O);for(O+=codePointSize(j);O<X.length;){let U=codePointAt(X,O);if(j==ZWJ||U==ZWJ||Q&&isExtendingChar(U))O+=codePointSize(U),j=U;else if(isRegionalIndicator(U)){let F=0,q=O-2;for(;q>=0&&isRegionalIndicator(codePointAt(X,q));)F++,q-=2;if(F%2==0)break;O+=2}else break}return O}function prevClusterBreak(X,O,Q){for(;O>0;){let j=nextClusterBreak(X,O-2,Q);if(j<O)return j;O--}return 0}function surrogateLow(X){return X>=56320&&X<57344}function surrogateHigh(X){return X>=55296&&X<56320}function codePointAt(X,O){let Q=X.charCodeAt(O);if(!surrogateHigh(Q)||O+1==X.length)return Q;let j=X.charCodeAt(O+1);return surrogateLow(j)?(Q-55296<<10)+(j-56320)+65536:Q}function fromCodePoint(X){return X<=65535?String.fromCharCode(X):(X-=65536,String.fromCharCode((X>>10)+55296,(X&1023)+56320))}function codePointSize(X){return X<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(X){return X[X.Simple=0]="Simple",X[X.TrackDel=1]="TrackDel",X[X.TrackBefore=2]="TrackBefore",X[X.TrackAfter=3]="TrackAfter",X}(MapMode||(MapMode={}));class ChangeDesc{constructor(O){this.sections=O}get length(){let O=0;for(let Q=0;Q<this.sections.length;Q+=2)O+=this.sections[Q];return O}get newLength(){let O=0;for(let Q=0;Q<this.sections.length;Q+=2){let j=this.sections[Q+1];O+=j<0?this.sections[Q]:j}return O}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(O){for(let Q=0,j=0,U=0;Q<this.sections.length;){let F=this.sections[Q++],q=this.sections[Q++];q<0?(O(j,U,F),U+=F):U+=q,j+=F}}iterChangedRanges(O,Q=!1){iterChanges(this,O,Q)}get invertedDesc(){let O=[];for(let Q=0;Q<this.sections.length;){let j=this.sections[Q++],U=this.sections[Q++];U<0?O.push(j,U):O.push(U,j)}return new ChangeDesc(O)}composeDesc(O){return this.empty?O:O.empty?this:composeSets(this,O)}mapDesc(O,Q=!1){return O.empty?this:mapSet(this,O,Q)}mapPos(O,Q=-1,j=MapMode.Simple){let U=0,F=0;for(let q=0;q<this.sections.length;){let W=this.sections[q++],Y=this.sections[q++],G=U+W;if(Y<0){if(G>O)return F+(O-U);F+=W}else{if(j!=MapMode.Simple&&G>=O&&(j==MapMode.TrackDel&&U<O&&G>O||j==MapMode.TrackBefore&&U<O||j==MapMode.TrackAfter&&G>O))return null;if(G>O||G==O&&Q<0&&!W)return O==U||Q<0?F:F+Y;F+=Y}U=G}if(O>U)throw new RangeError(`Position ${O} is out of range for changeset of length ${U}`);return F}touchesRange(O,Q=O){for(let j=0,U=0;j<this.sections.length&&U<=Q;){let F=this.sections[j++],q=this.sections[j++],W=U+F;if(q>=0&&U<=Q&&W>=O)return U<O&&W>Q?"cover":!0;U=W}return!1}toString(){let O="";for(let Q=0;Q<this.sections.length;){let j=this.sections[Q++],U=this.sections[Q++];O+=(O?" ":"")+j+(U>=0?":"+U:"")}return O}toJSON(){return this.sections}static fromJSON(O){if(!Array.isArray(O)||O.length%2||O.some(Q=>typeof Q!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(O)}static create(O){return new ChangeDesc(O)}}class ChangeSet extends ChangeDesc{constructor(O,Q){super(O),this.inserted=Q}apply(O){if(this.length!=O.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(Q,j,U,F,q)=>O=O.replace(U,U+(j-Q),q),!1),O}mapDesc(O,Q=!1){return mapSet(this,O,Q,!0)}invert(O){let Q=this.sections.slice(),j=[];for(let U=0,F=0;U<Q.length;U+=2){let q=Q[U],W=Q[U+1];if(W>=0){Q[U]=W,Q[U+1]=q;let Y=U>>1;for(;j.length<Y;)j.push(Text.empty);j.push(q?O.slice(F,F+q):Text.empty)}F+=q}return new ChangeSet(Q,j)}compose(O){return this.empty?O:O.empty?this:composeSets(this,O,!0)}map(O,Q=!1){return O.empty?this:mapSet(this,O,Q,!0)}iterChanges(O,Q=!1){iterChanges(this,O,Q)}get desc(){return ChangeDesc.create(this.sections)}filter(O){let Q=[],j=[],U=[],F=new SectionIter(this);e:for(let q=0,W=0;;){let Y=q==O.length?1e9:O[q++];for(;W<Y||W==Y&&F.len==0;){if(F.done)break e;let K=Math.min(F.len,Y-W);addSection(U,K,-1);let J=F.ins==-1?-1:F.off==0?F.ins:0;addSection(Q,K,J),J>0&&addInsert(j,Q,F.text),F.forward(K),W+=K}let G=O[q++];for(;W<G;){if(F.done)break e;let K=Math.min(F.len,G-W);addSection(Q,K,-1),addSection(U,K,F.ins==-1?-1:F.off==0?F.ins:0),F.forward(K),W+=K}}return{changes:new ChangeSet(Q,j),filtered:ChangeDesc.create(U)}}toJSON(){let O=[];for(let Q=0;Q<this.sections.length;Q+=2){let j=this.sections[Q],U=this.sections[Q+1];U<0?O.push(j):U==0?O.push([j]):O.push([j].concat(this.inserted[Q>>1].toJSON()))}return O}static of(O,Q,j){let U=[],F=[],q=0,W=null;function Y(K=!1){if(!K&&!U.length)return;q<Q&&addSection(U,Q-q,-1);let J=new ChangeSet(U,F);W=W?W.compose(J.map(W)):J,U=[],F=[],q=0}function G(K){if(Array.isArray(K))for(let J of K)G(J);else if(K instanceof ChangeSet){if(K.length!=Q)throw new RangeError(`Mismatched change set length (got ${K.length}, expected ${Q})`);Y(),W=W?W.compose(K.map(W)):K}else{let{from:J,to:ee=J,insert:te}=K;if(J>ee||J<0||ee>Q)throw new RangeError(`Invalid change range ${J} to ${ee} (in doc of length ${Q})`);let re=te?typeof te=="string"?Text.of(te.split(j||DefaultSplit)):te:Text.empty,oe=re.length;if(J==ee&&oe==0)return;J<q&&Y(),J>q&&addSection(U,J-q,-1),addSection(U,ee-J,oe),addInsert(F,U,re),q=ee}}return G(O),Y(!W),W}static empty(O){return new ChangeSet(O?[O,-1]:[],[])}static fromJSON(O){if(!Array.isArray(O))throw new RangeError("Invalid JSON representation of ChangeSet");let Q=[],j=[];for(let U=0;U<O.length;U++){let F=O[U];if(typeof F=="number")Q.push(F,-1);else{if(!Array.isArray(F)||typeof F[0]!="number"||F.some((q,W)=>W&&typeof q!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(F.length==1)Q.push(F[0],0);else{for(;j.length<U;)j.push(Text.empty);j[U]=Text.of(F.slice(1)),Q.push(F[0],j[U].length)}}}return new ChangeSet(Q,j)}static createSet(O,Q){return new ChangeSet(O,Q)}}function addSection(X,O,Q,j=!1){if(O==0&&Q<=0)return;let U=X.length-2;U>=0&&Q<=0&&Q==X[U+1]?X[U]+=O:O==0&&X[U]==0?X[U+1]+=Q:j?(X[U]+=O,X[U+1]+=Q):X.push(O,Q)}function addInsert(X,O,Q){if(Q.length==0)return;let j=O.length-2>>1;if(j<X.length)X[X.length-1]=X[X.length-1].append(Q);else{for(;X.length<j;)X.push(Text.empty);X.push(Q)}}function iterChanges(X,O,Q){let j=X.inserted;for(let U=0,F=0,q=0;q<X.sections.length;){let W=X.sections[q++],Y=X.sections[q++];if(Y<0)U+=W,F+=W;else{let G=U,K=F,J=Text.empty;for(;G+=W,K+=Y,Y&&j&&(J=J.append(j[q-2>>1])),!(Q||q==X.sections.length||X.sections[q+1]<0);)W=X.sections[q++],Y=X.sections[q++];O(U,G,F,K,J),U=G,F=K}}}function mapSet(X,O,Q,j=!1){let U=[],F=j?[]:null,q=new SectionIter(X),W=new SectionIter(O);for(let Y=-1;;)if(q.ins==-1&&W.ins==-1){let G=Math.min(q.len,W.len);addSection(U,G,-1),q.forward(G),W.forward(G)}else if(W.ins>=0&&(q.ins<0||Y==q.i||q.off==0&&(W.len<q.len||W.len==q.len&&!Q))){let G=W.len;for(addSection(U,W.ins,-1);G;){let K=Math.min(q.len,G);q.ins>=0&&Y<q.i&&q.len<=K&&(addSection(U,0,q.ins),F&&addInsert(F,U,q.text),Y=q.i),q.forward(K),G-=K}W.next()}else if(q.ins>=0){let G=0,K=q.len;for(;K;)if(W.ins==-1){let J=Math.min(K,W.len);G+=J,K-=J,W.forward(J)}else if(W.ins==0&&W.len<K)K-=W.len,W.next();else break;addSection(U,G,Y<q.i?q.ins:0),F&&Y<q.i&&addInsert(F,U,q.text),Y=q.i,q.forward(q.len-K)}else{if(q.done&&W.done)return F?ChangeSet.createSet(U,F):ChangeDesc.create(U);throw new Error("Mismatched change set lengths")}}function composeSets(X,O,Q=!1){let j=[],U=Q?[]:null,F=new SectionIter(X),q=new SectionIter(O);for(let W=!1;;){if(F.done&&q.done)return U?ChangeSet.createSet(j,U):ChangeDesc.create(j);if(F.ins==0)addSection(j,F.len,0,W),F.next();else if(q.len==0&&!q.done)addSection(j,0,q.ins,W),U&&addInsert(U,j,q.text),q.next();else{if(F.done||q.done)throw new Error("Mismatched change set lengths");{let Y=Math.min(F.len2,q.len),G=j.length;if(F.ins==-1){let K=q.ins==-1?-1:q.off?0:q.ins;addSection(j,Y,K,W),U&&K&&addInsert(U,j,q.text)}else q.ins==-1?(addSection(j,F.off?0:F.len,Y,W),U&&addInsert(U,j,F.textBit(Y))):(addSection(j,F.off?0:F.len,q.off?0:q.ins,W),U&&!q.off&&addInsert(U,j,q.text));W=(F.ins>Y||q.ins>=0&&q.len>Y)&&(W||j.length>G),F.forward2(Y),q.forward(Y)}}}}class SectionIter{constructor(O){this.set=O,this.i=0,this.next()}next(){let{sections:O}=this.set;this.i<O.length?(this.len=O[this.i++],this.ins=O[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:O}=this.set,Q=this.i-2>>1;return Q>=O.length?Text.empty:O[Q]}textBit(O){let{inserted:Q}=this.set,j=this.i-2>>1;return j>=Q.length&&!O?Text.empty:Q[j].slice(this.off,O==null?void 0:this.off+O)}forward(O){O==this.len?this.next():(this.len-=O,this.off+=O)}forward2(O){this.ins==-1?this.forward(O):O==this.ins?this.next():(this.ins-=O,this.off+=O)}}class SelectionRange{constructor(O,Q,j){this.from=O,this.to=Q,this.flags=j}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let O=this.flags&3;return O==3?null:O}get goalColumn(){let O=this.flags>>5;return O==33554431?void 0:O}map(O,Q=-1){let j,U;return this.empty?j=U=O.mapPos(this.from,Q):(j=O.mapPos(this.from,1),U=O.mapPos(this.to,-1)),j==this.from&&U==this.to?this:new SelectionRange(j,U,this.flags)}extend(O,Q=O){if(O<=this.anchor&&Q>=this.anchor)return EditorSelection.range(O,Q);let j=Math.abs(O-this.anchor)>Math.abs(Q-this.anchor)?O:Q;return EditorSelection.range(this.anchor,j)}eq(O){return this.anchor==O.anchor&&this.head==O.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(O){if(!O||typeof O.anchor!="number"||typeof O.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(O.anchor,O.head)}static create(O,Q,j){return new SelectionRange(O,Q,j)}}class EditorSelection{constructor(O,Q){this.ranges=O,this.mainIndex=Q}map(O,Q=-1){return O.empty?this:EditorSelection.create(this.ranges.map(j=>j.map(O,Q)),this.mainIndex)}eq(O){if(this.ranges.length!=O.ranges.length||this.mainIndex!=O.mainIndex)return!1;for(let Q=0;Q<this.ranges.length;Q++)if(!this.ranges[Q].eq(O.ranges[Q]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(O,Q=!0){return EditorSelection.create([O].concat(this.ranges),Q?0:this.mainIndex+1)}replaceRange(O,Q=this.mainIndex){let j=this.ranges.slice();return j[Q]=O,EditorSelection.create(j,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(O=>O.toJSON()),main:this.mainIndex}}static fromJSON(O){if(!O||!Array.isArray(O.ranges)||typeof O.main!="number"||O.main>=O.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(O.ranges.map(Q=>SelectionRange.fromJSON(Q)),O.main)}static single(O,Q=O){return new EditorSelection([EditorSelection.range(O,Q)],0)}static create(O,Q=0){if(O.length==0)throw new RangeError("A selection needs at least one range");for(let j=0,U=0;U<O.length;U++){let F=O[U];if(F.empty?F.from<=j:F.from<j)return EditorSelection.normalized(O.slice(),Q);j=F.to}return new EditorSelection(O,Q)}static cursor(O,Q=0,j,U){return SelectionRange.create(O,O,(Q==0?0:Q<0?4:8)|(j==null?3:Math.min(2,j))|(U!=null?U:33554431)<<5)}static range(O,Q,j,U){let F=(j!=null?j:33554431)<<5|(U==null?3:Math.min(2,U));return Q<O?SelectionRange.create(Q,O,24|F):SelectionRange.create(O,Q,(Q>O?4:0)|F)}static normalized(O,Q=0){let j=O[Q];O.sort((U,F)=>U.from-F.from),Q=O.indexOf(j);for(let U=1;U<O.length;U++){let F=O[U],q=O[U-1];if(F.empty?F.from<=q.to:F.from<q.to){let W=q.from,Y=Math.max(F.to,q.to);U<=Q&&Q--,O.splice(--U,2,F.anchor>F.head?EditorSelection.range(Y,W):EditorSelection.range(W,Y))}}return new EditorSelection(O,Q)}}function checkSelection(X,O){for(let Q of X.ranges)if(Q.to>O)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(O,Q,j,U,F){this.combine=O,this.compareInput=Q,this.compare=j,this.isStatic=U,this.id=nextID++,this.default=O([]),this.extensions=typeof F=="function"?F(this):F}static define(O={}){return new Facet(O.combine||(Q=>Q),O.compareInput||((Q,j)=>Q===j),O.compare||(O.combine?(Q,j)=>Q===j:sameArray$1),!!O.static,O.enables)}of(O){return new FacetProvider([],this,0,O)}compute(O,Q){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(O,this,1,Q)}computeN(O,Q){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(O,this,2,Q)}from(O,Q){return Q||(Q=j=>j),this.compute([O],j=>Q(j.field(O)))}}function sameArray$1(X,O){return X==O||X.length==O.length&&X.every((Q,j)=>Q===O[j])}class FacetProvider{constructor(O,Q,j,U){this.dependencies=O,this.facet=Q,this.type=j,this.value=U,this.id=nextID++}dynamicSlot(O){var Q;let j=this.value,U=this.facet.compareInput,F=this.id,q=O[F]>>1,W=this.type==2,Y=!1,G=!1,K=[];for(let J of this.dependencies)J=="doc"?Y=!0:J=="selection"?G=!0:(((Q=O[J.id])!==null&&Q!==void 0?Q:1)&1)==0&&K.push(O[J.id]);return{create(J){return J.values[q]=j(J),1},update(J,ee){if(Y&&ee.docChanged||G&&(ee.docChanged||ee.selection)||ensureAll(J,K)){let te=j(J);if(W?!compareArray(te,J.values[q],U):!U(te,J.values[q]))return J.values[q]=te,1}return 0},reconfigure:(J,ee)=>{let te,re=ee.config.address[F];if(re!=null){let oe=getAddr(ee,re);if(this.dependencies.every(se=>se instanceof Facet?ee.facet(se)===J.facet(se):se instanceof StateField?ee.field(se,!1)==J.field(se,!1):!0)||(W?compareArray(te=j(J),oe,U):U(te=j(J),oe)))return J.values[q]=oe,0}else te=j(J);return J.values[q]=te,1}}}}function compareArray(X,O,Q){if(X.length!=O.length)return!1;for(let j=0;j<X.length;j++)if(!Q(X[j],O[j]))return!1;return!0}function ensureAll(X,O){let Q=!1;for(let j of O)ensureAddr(X,j)&1&&(Q=!0);return Q}function dynamicFacetSlot(X,O,Q){let j=Q.map(Y=>X[Y.id]),U=Q.map(Y=>Y.type),F=j.filter(Y=>!(Y&1)),q=X[O.id]>>1;function W(Y){let G=[];for(let K=0;K<j.length;K++){let J=getAddr(Y,j[K]);if(U[K]==2)for(let ee of J)G.push(ee);else G.push(J)}return O.combine(G)}return{create(Y){for(let G of j)ensureAddr(Y,G);return Y.values[q]=W(Y),1},update(Y,G){if(!ensureAll(Y,F))return 0;let K=W(Y);return O.compare(K,Y.values[q])?0:(Y.values[q]=K,1)},reconfigure(Y,G){let K=ensureAll(Y,j),J=G.config.facets[O.id],ee=G.facet(O);if(J&&!K&&sameArray$1(Q,J))return Y.values[q]=ee,0;let te=W(Y);return O.compare(te,ee)?(Y.values[q]=ee,0):(Y.values[q]=te,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(O,Q,j,U,F){this.id=O,this.createF=Q,this.updateF=j,this.compareF=U,this.spec=F,this.provides=void 0}static define(O){let Q=new StateField(nextID++,O.create,O.update,O.compare||((j,U)=>j===U),O);return O.provide&&(Q.provides=O.provide(Q)),Q}create(O){let Q=O.facet(initField).find(j=>j.field==this);return((Q==null?void 0:Q.create)||this.createF)(O)}slot(O){let Q=O[this.id]>>1;return{create:j=>(j.values[Q]=this.create(j),1),update:(j,U)=>{let F=j.values[Q],q=this.updateF(F,U);return this.compareF(F,q)?0:(j.values[Q]=q,1)},reconfigure:(j,U)=>U.config.address[this.id]!=null?(j.values[Q]=U.field(this),0):(j.values[Q]=this.create(j),1)}}init(O){return[this,initField.of({field:this,create:O})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(X){return O=>new PrecExtension(O,X)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(O,Q){this.inner=O,this.prec=Q}}class Compartment{of(O){return new CompartmentInstance(this,O)}reconfigure(O){return Compartment.reconfigure.of({compartment:this,extension:O})}get(O){return O.config.compartments.get(this)}}class CompartmentInstance{constructor(O,Q){this.compartment=O,this.inner=Q}}class Configuration{constructor(O,Q,j,U,F,q){for(this.base=O,this.compartments=Q,this.dynamicSlots=j,this.address=U,this.staticValues=F,this.facets=q,this.statusTemplate=[];this.statusTemplate.length<j.length;)this.statusTemplate.push(0)}staticFacet(O){let Q=this.address[O.id];return Q==null?O.default:this.staticValues[Q>>1]}static resolve(O,Q,j){let U=[],F=Object.create(null),q=new Map;for(let ee of flatten(O,Q,q))ee instanceof StateField?U.push(ee):(F[ee.facet.id]||(F[ee.facet.id]=[])).push(ee);let W=Object.create(null),Y=[],G=[];for(let ee of U)W[ee.id]=G.length<<1,G.push(te=>ee.slot(te));let K=j==null?void 0:j.config.facets;for(let ee in F){let te=F[ee],re=te[0].facet,oe=K&&K[ee]||[];if(te.every(se=>se.type==0))if(W[re.id]=Y.length<<1|1,sameArray$1(oe,te))Y.push(j.facet(re));else{let se=re.combine(te.map(ne=>ne.value));Y.push(j&&re.compare(se,j.facet(re))?j.facet(re):se)}else{for(let se of te)se.type==0?(W[se.id]=Y.length<<1|1,Y.push(se.value)):(W[se.id]=G.length<<1,G.push(ne=>se.dynamicSlot(ne)));W[re.id]=G.length<<1,G.push(se=>dynamicFacetSlot(se,re,te))}}let J=G.map(ee=>ee(W));return new Configuration(O,q,J,W,Y,F)}}function flatten(X,O,Q){let j=[[],[],[],[],[]],U=new Map;function F(q,W){let Y=U.get(q);if(Y!=null){if(Y<=W)return;let G=j[Y].indexOf(q);G>-1&&j[Y].splice(G,1),q instanceof CompartmentInstance&&Q.delete(q.compartment)}if(U.set(q,W),Array.isArray(q))for(let G of q)F(G,W);else if(q instanceof CompartmentInstance){if(Q.has(q.compartment))throw new RangeError("Duplicate use of compartment in extensions");let G=O.get(q.compartment)||q.inner;Q.set(q.compartment,G),F(G,W)}else if(q instanceof PrecExtension)F(q.inner,q.prec);else if(q instanceof StateField)j[W].push(q),q.provides&&F(q.provides,W);else if(q instanceof FacetProvider)j[W].push(q),q.facet.extensions&&F(q.facet.extensions,Prec_.default);else{let G=q.extension;if(!G)throw new Error(`Unrecognized extension value in extension set (${q}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);F(G,W)}}return F(X,Prec_.default),j.reduce((q,W)=>q.concat(W))}function ensureAddr(X,O){if(O&1)return 2;let Q=O>>1,j=X.status[Q];if(j==4)throw new Error("Cyclic dependency between fields and/or facets");if(j&2)return j;X.status[Q]=4;let U=X.computeSlot(X,X.config.dynamicSlots[Q]);return X.status[Q]=2|U}function getAddr(X,O){return O&1?X.config.staticValues[O>>1]:X.values[O>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:X=>X.some(O=>O),static:!0}),lineSeparator=Facet.define({combine:X=>X.length?X[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:X=>X.length?X[0]:!1});class Annotation{constructor(O,Q){this.type=O,this.value=Q}static define(){return new AnnotationType}}class AnnotationType{of(O){return new Annotation(this,O)}}class StateEffectType{constructor(O){this.map=O}of(O){return new StateEffect(this,O)}}class StateEffect{constructor(O,Q){this.type=O,this.value=Q}map(O){let Q=this.type.map(this.value,O);return Q===void 0?void 0:Q==this.value?this:new StateEffect(this.type,Q)}is(O){return this.type==O}static define(O={}){return new StateEffectType(O.map||(Q=>Q))}static mapEffects(O,Q){if(!O.length)return O;let j=[];for(let U of O){let F=U.map(Q);F&&j.push(F)}return j}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(O,Q,j,U,F,q){this.startState=O,this.changes=Q,this.selection=j,this.effects=U,this.annotations=F,this.scrollIntoView=q,this._doc=null,this._state=null,j&&checkSelection(j,Q.newLength),F.some(W=>W.type==Transaction.time)||(this.annotations=F.concat(Transaction.time.of(Date.now())))}static create(O,Q,j,U,F,q){return new Transaction(O,Q,j,U,F,q)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(O){for(let Q of this.annotations)if(Q.type==O)return Q.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(O){let Q=this.annotation(Transaction.userEvent);return!!(Q&&(Q==O||Q.length>O.length&&Q.slice(0,O.length)==O&&Q[O.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(X,O){let Q=[];for(let j=0,U=0;;){let F,q;if(j<X.length&&(U==O.length||O[U]>=X[j]))F=X[j++],q=X[j++];else if(U<O.length)F=O[U++],q=O[U++];else return Q;!Q.length||Q[Q.length-1]<F?Q.push(F,q):Q[Q.length-1]<q&&(Q[Q.length-1]=q)}}function mergeTransaction(X,O,Q){var j;let U,F,q;return Q?(U=O.changes,F=ChangeSet.empty(O.changes.length),q=X.changes.compose(O.changes)):(U=O.changes.map(X.changes),F=X.changes.mapDesc(O.changes,!0),q=X.changes.compose(U)),{changes:q,selection:O.selection?O.selection.map(F):(j=X.selection)===null||j===void 0?void 0:j.map(U),effects:StateEffect.mapEffects(X.effects,U).concat(StateEffect.mapEffects(O.effects,F)),annotations:X.annotations.length?X.annotations.concat(O.annotations):O.annotations,scrollIntoView:X.scrollIntoView||O.scrollIntoView}}function resolveTransactionInner(X,O,Q){let j=O.selection,U=asArray$1(O.annotations);return O.userEvent&&(U=U.concat(Transaction.userEvent.of(O.userEvent))),{changes:O.changes instanceof ChangeSet?O.changes:ChangeSet.of(O.changes||[],Q,X.facet(lineSeparator)),selection:j&&(j instanceof EditorSelection?j:EditorSelection.single(j.anchor,j.head)),effects:asArray$1(O.effects),annotations:U,scrollIntoView:!!O.scrollIntoView}}function resolveTransaction(X,O,Q){let j=resolveTransactionInner(X,O.length?O[0]:{},X.doc.length);O.length&&O[0].filter===!1&&(Q=!1);for(let F=1;F<O.length;F++){O[F].filter===!1&&(Q=!1);let q=!!O[F].sequential;j=mergeTransaction(j,resolveTransactionInner(X,O[F],q?j.changes.newLength:X.doc.length),q)}let U=Transaction.create(X,j.changes,j.selection,j.effects,j.annotations,j.scrollIntoView);return extendTransaction(Q?filterTransaction(U):U)}function filterTransaction(X){let O=X.startState,Q=!0;for(let U of O.facet(changeFilter)){let F=U(X);if(F===!1){Q=!1;break}Array.isArray(F)&&(Q=Q===!0?F:joinRanges(Q,F))}if(Q!==!0){let U,F;if(Q===!1)F=X.changes.invertedDesc,U=ChangeSet.empty(O.doc.length);else{let q=X.changes.filter(Q);U=q.changes,F=q.filtered.mapDesc(q.changes).invertedDesc}X=Transaction.create(O,U,X.selection&&X.selection.map(F),StateEffect.mapEffects(X.effects,F),X.annotations,X.scrollIntoView)}let j=O.facet(transactionFilter);for(let U=j.length-1;U>=0;U--){let F=j[U](X);F instanceof Transaction?X=F:Array.isArray(F)&&F.length==1&&F[0]instanceof Transaction?X=F[0]:X=resolveTransaction(O,asArray$1(F),!1)}return X}function extendTransaction(X){let O=X.startState,Q=O.facet(transactionExtender),j=X;for(let U=Q.length-1;U>=0;U--){let F=Q[U](X);F&&Object.keys(F).length&&(j=mergeTransaction(j,resolveTransactionInner(O,F,X.changes.newLength),!0))}return j==X?X:Transaction.create(O,X.changes,X.selection,j.effects,j.annotations,j.scrollIntoView)}const none$2=[];function asArray$1(X){return X==null?none$2:Array.isArray(X)?X:[X]}var CharCategory=function(X){return X[X.Word=0]="Word",X[X.Space=1]="Space",X[X.Other=2]="Other",X}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(X){if(wordChar)return wordChar.test(X);for(let O=0;O<X.length;O++){let Q=X[O];if(/\w/.test(Q)||Q>"\x80"&&(Q.toUpperCase()!=Q.toLowerCase()||nonASCIISingleCaseWordChar.test(Q)))return!0}return!1}function makeCategorizer(X){return O=>{if(!/\S/.test(O))return CharCategory.Space;if(hasWordChar(O))return CharCategory.Word;for(let Q=0;Q<X.length;Q++)if(O.indexOf(X[Q])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(O,Q,j,U,F,q){this.config=O,this.doc=Q,this.selection=j,this.values=U,this.status=O.statusTemplate.slice(),this.computeSlot=F,q&&(q._state=this);for(let W=0;W<this.config.dynamicSlots.length;W++)ensureAddr(this,W<<1);this.computeSlot=null}field(O,Q=!0){let j=this.config.address[O.id];if(j==null){if(Q)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,j),getAddr(this,j)}update(...O){return resolveTransaction(this,O,!0)}applyTransaction(O){let Q=this.config,{base:j,compartments:U}=Q;for(let q of O.effects)q.is(Compartment.reconfigure)?(Q&&(U=new Map,Q.compartments.forEach((W,Y)=>U.set(Y,W)),Q=null),U.set(q.value.compartment,q.value.extension)):q.is(StateEffect.reconfigure)?(Q=null,j=q.value):q.is(StateEffect.appendConfig)&&(Q=null,j=asArray$1(j).concat(q.value));let F;Q?F=O.startState.values.slice():(Q=Configuration.resolve(j,U,this),F=new EditorState(Q,this.doc,this.selection,Q.dynamicSlots.map(()=>null),(W,Y)=>Y.reconfigure(W,this),null).values),new EditorState(Q,O.newDoc,O.newSelection,F,(q,W)=>W.update(q,O),O)}replaceSelection(O){return typeof O=="string"&&(O=this.toText(O)),this.changeByRange(Q=>({changes:{from:Q.from,to:Q.to,insert:O},range:EditorSelection.cursor(Q.from+O.length)}))}changeByRange(O){let Q=this.selection,j=O(Q.ranges[0]),U=this.changes(j.changes),F=[j.range],q=asArray$1(j.effects);for(let W=1;W<Q.ranges.length;W++){let Y=O(Q.ranges[W]),G=this.changes(Y.changes),K=G.map(U);for(let ee=0;ee<W;ee++)F[ee]=F[ee].map(K);let J=U.mapDesc(G,!0);F.push(Y.range.map(J)),U=U.compose(K),q=StateEffect.mapEffects(q,K).concat(StateEffect.mapEffects(asArray$1(Y.effects),J))}return{changes:U,selection:EditorSelection.create(F,Q.mainIndex),effects:q}}changes(O=[]){return O instanceof ChangeSet?O:ChangeSet.of(O,this.doc.length,this.facet(EditorState.lineSeparator))}toText(O){return Text.of(O.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(O=0,Q=this.doc.length){return this.doc.sliceString(O,Q,this.lineBreak)}facet(O){let Q=this.config.address[O.id];return Q==null?O.default:(ensureAddr(this,Q),getAddr(this,Q))}toJSON(O){let Q={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(O)for(let j in O){let U=O[j];U instanceof StateField&&this.config.address[U.id]!=null&&(Q[j]=U.spec.toJSON(this.field(O[j]),this))}return Q}static fromJSON(O,Q={},j){if(!O||typeof O.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let U=[];if(j){for(let F in j)if(Object.prototype.hasOwnProperty.call(O,F)){let q=j[F],W=O[F];U.push(q.init(Y=>q.spec.fromJSON(W,Y)))}}return EditorState.create({doc:O.doc,selection:EditorSelection.fromJSON(O.selection),extensions:Q.extensions?U.concat([Q.extensions]):U})}static create(O={}){let Q=Configuration.resolve(O.extensions||[],new Map),j=O.doc instanceof Text?O.doc:Text.of((O.doc||"").split(Q.staticFacet(EditorState.lineSeparator)||DefaultSplit)),U=O.selection?O.selection instanceof EditorSelection?O.selection:EditorSelection.single(O.selection.anchor,O.selection.head):EditorSelection.single(0);return checkSelection(U,j.length),Q.staticFacet(allowMultipleSelections)||(U=U.asSingle()),new EditorState(Q,j,U,Q.dynamicSlots.map(()=>null),(F,q)=>q.create(F),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(O,...Q){for(let j of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(j,O)){O=j[O];break}return Q.length&&(O=O.replace(/\$(\$|\d*)/g,(j,U)=>{if(U=="$")return"$";let F=+(U||1);return!F||F>Q.length?j:Q[F-1]})),O}languageDataAt(O,Q,j=-1){let U=[];for(let F of this.facet(languageData))for(let q of F(this,Q,j))Object.prototype.hasOwnProperty.call(q,O)&&U.push(q[O]);return U}charCategorizer(O){return makeCategorizer(this.languageDataAt("wordChars",O).join(""))}wordAt(O){let{text:Q,from:j,length:U}=this.doc.lineAt(O),F=this.charCategorizer(O),q=O-j,W=O-j;for(;q>0;){let Y=findClusterBreak(Q,q,!1);if(F(Q.slice(Y,q))!=CharCategory.Word)break;q=Y}for(;W<U;){let Y=findClusterBreak(Q,W);if(F(Q.slice(W,Y))!=CharCategory.Word)break;W=Y}return q==W?null:EditorSelection.range(q+j,W+j)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:X=>X.length?X[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(X,O){let Q=Object.keys(X),j=Object.keys(O);return Q.length==j.length&&Q.every(U=>X[U]==O[U])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(X,O,Q={}){let j={};for(let U of X)for(let F of Object.keys(U)){let q=U[F],W=j[F];if(W===void 0)j[F]=q;else if(!(W===q||q===void 0))if(Object.hasOwnProperty.call(Q,F))j[F]=Q[F](W,q);else throw new Error("Config merge conflict for field "+F)}for(let U in O)j[U]===void 0&&(j[U]=O[U]);return j}class RangeValue{eq(O){return this==O}range(O,Q=O){return Range$1.create(O,Q,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range$1{constructor(O,Q,j){this.from=O,this.to=Q,this.value=j}static create(O,Q,j){return new Range$1(O,Q,j)}}function cmpRange(X,O){return X.from-O.from||X.value.startSide-O.value.startSide}class Chunk{constructor(O,Q,j,U){this.from=O,this.to=Q,this.value=j,this.maxPoint=U}get length(){return this.to[this.to.length-1]}findIndex(O,Q,j,U=0){let F=j?this.to:this.from;for(let q=U,W=F.length;;){if(q==W)return q;let Y=q+W>>1,G=F[Y]-O||(j?this.value[Y].endSide:this.value[Y].startSide)-Q;if(Y==q)return G>=0?q:W;G>=0?W=Y:q=Y+1}}between(O,Q,j,U){for(let F=this.findIndex(Q,-1e9,!0),q=this.findIndex(j,1e9,!1,F);F<q;F++)if(U(this.from[F]+O,this.to[F]+O,this.value[F])===!1)return!1}map(O,Q){let j=[],U=[],F=[],q=-1,W=-1;for(let Y=0;Y<this.value.length;Y++){let G=this.value[Y],K=this.from[Y]+O,J=this.to[Y]+O,ee,te;if(K==J){let re=Q.mapPos(K,G.startSide,G.mapMode);if(re==null||(ee=te=re,G.startSide!=G.endSide&&(te=Q.mapPos(K,G.endSide),te<ee)))continue}else if(ee=Q.mapPos(K,G.startSide),te=Q.mapPos(J,G.endSide),ee>te||ee==te&&G.startSide>0&&G.endSide<=0)continue;(te-ee||G.endSide-G.startSide)<0||(q<0&&(q=ee),G.point&&(W=Math.max(W,te-ee)),j.push(G),U.push(ee-q),F.push(te-q))}return{mapped:j.length?new Chunk(U,F,j,W):null,pos:q}}}class RangeSet{constructor(O,Q,j,U){this.chunkPos=O,this.chunk=Q,this.nextLayer=j,this.maxPoint=U}static create(O,Q,j,U){return new RangeSet(O,Q,j,U)}get length(){let O=this.chunk.length-1;return O<0?0:Math.max(this.chunkEnd(O),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let O=this.nextLayer.size;for(let Q of this.chunk)O+=Q.value.length;return O}chunkEnd(O){return this.chunkPos[O]+this.chunk[O].length}update(O){let{add:Q=[],sort:j=!1,filterFrom:U=0,filterTo:F=this.length}=O,q=O.filter;if(Q.length==0&&!q)return this;if(j&&(Q=Q.slice().sort(cmpRange)),this.isEmpty)return Q.length?RangeSet.of(Q):this;let W=new LayerCursor(this,null,-1).goto(0),Y=0,G=[],K=new RangeSetBuilder;for(;W.value||Y<Q.length;)if(Y<Q.length&&(W.from-Q[Y].from||W.startSide-Q[Y].value.startSide)>=0){let J=Q[Y++];K.addInner(J.from,J.to,J.value)||G.push(J)}else W.rangeIndex==1&&W.chunkIndex<this.chunk.length&&(Y==Q.length||this.chunkEnd(W.chunkIndex)<Q[Y].from)&&(!q||U>this.chunkEnd(W.chunkIndex)||F<this.chunkPos[W.chunkIndex])&&K.addChunk(this.chunkPos[W.chunkIndex],this.chunk[W.chunkIndex])?W.nextChunk():((!q||U>W.to||F<W.from||q(W.from,W.to,W.value))&&(K.addInner(W.from,W.to,W.value)||G.push(Range$1.create(W.from,W.to,W.value))),W.next());return K.finishInner(this.nextLayer.isEmpty&&!G.length?RangeSet.empty:this.nextLayer.update({add:G,filter:q,filterFrom:U,filterTo:F}))}map(O){if(O.empty||this.isEmpty)return this;let Q=[],j=[],U=-1;for(let q=0;q<this.chunk.length;q++){let W=this.chunkPos[q],Y=this.chunk[q],G=O.touchesRange(W,W+Y.length);if(G===!1)U=Math.max(U,Y.maxPoint),Q.push(Y),j.push(O.mapPos(W));else if(G===!0){let{mapped:K,pos:J}=Y.map(W,O);K&&(U=Math.max(U,K.maxPoint),Q.push(K),j.push(J))}}let F=this.nextLayer.map(O);return Q.length==0?F:new RangeSet(j,Q,F||RangeSet.empty,U)}between(O,Q,j){if(!this.isEmpty){for(let U=0;U<this.chunk.length;U++){let F=this.chunkPos[U],q=this.chunk[U];if(Q>=F&&O<=F+q.length&&q.between(F,O-F,Q-F,j)===!1)return}this.nextLayer.between(O,Q,j)}}iter(O=0){return HeapCursor.from([this]).goto(O)}get isEmpty(){return this.nextLayer==this}static iter(O,Q=0){return HeapCursor.from(O).goto(Q)}static compare(O,Q,j,U,F=-1){let q=O.filter(J=>J.maxPoint>0||!J.isEmpty&&J.maxPoint>=F),W=Q.filter(J=>J.maxPoint>0||!J.isEmpty&&J.maxPoint>=F),Y=findSharedChunks(q,W,j),G=new SpanCursor(q,Y,F),K=new SpanCursor(W,Y,F);j.iterGaps((J,ee,te)=>compare(G,J,K,ee,te,U)),j.empty&&j.length==0&&compare(G,0,K,0,0,U)}static eq(O,Q,j=0,U){U==null&&(U=1e9-1);let F=O.filter(K=>!K.isEmpty&&Q.indexOf(K)<0),q=Q.filter(K=>!K.isEmpty&&O.indexOf(K)<0);if(F.length!=q.length)return!1;if(!F.length)return!0;let W=findSharedChunks(F,q),Y=new SpanCursor(F,W,0).goto(j),G=new SpanCursor(q,W,0).goto(j);for(;;){if(Y.to!=G.to||!sameValues(Y.active,G.active)||Y.point&&(!G.point||!Y.point.eq(G.point)))return!1;if(Y.to>U)return!0;Y.next(),G.next()}}static spans(O,Q,j,U,F=-1){let q=new SpanCursor(O,null,F).goto(Q),W=Q,Y=q.openStart;for(;;){let G=Math.min(q.to,j);if(q.point){let K=q.activeForPoint(q.to),J=q.pointFrom<Q?K.length+1:Math.min(K.length,Y);U.point(W,G,q.point,K,J,q.pointRank),Y=Math.min(q.openEnd(G),K.length)}else G>W&&(U.span(W,G,q.active,Y),Y=q.openEnd(G));if(q.to>j)return Y+(q.point&&q.to>j?1:0);W=q.to,q.next()}}static of(O,Q=!1){let j=new RangeSetBuilder;for(let U of O instanceof Range$1?[O]:Q?lazySort(O):O)j.add(U.from,U.to,U.value);return j.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(X){if(X.length>1)for(let O=X[0],Q=1;Q<X.length;Q++){let j=X[Q];if(cmpRange(O,j)>0)return X.slice().sort(cmpRange);O=j}return X}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(O){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,O&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(O,Q,j){this.addInner(O,Q,j)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(O,Q,j)}addInner(O,Q,j){let U=O-this.lastTo||j.startSide-this.last.endSide;if(U<=0&&(O-this.lastFrom||j.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return U<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=O),this.from.push(O-this.chunkStart),this.to.push(Q-this.chunkStart),this.last=j,this.lastFrom=O,this.lastTo=Q,this.value.push(j),j.point&&(this.maxPoint=Math.max(this.maxPoint,Q-O)),!0)}addChunk(O,Q){if((O-this.lastTo||Q.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,Q.maxPoint),this.chunks.push(Q),this.chunkPos.push(O);let j=Q.value.length-1;return this.last=Q.value[j],this.lastFrom=Q.from[j]+O,this.lastTo=Q.to[j]+O,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(O){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return O;let Q=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(O):O,this.setMaxPoint);return this.from=null,Q}}function findSharedChunks(X,O,Q){let j=new Map;for(let F of X)for(let q=0;q<F.chunk.length;q++)F.chunk[q].maxPoint<=0&&j.set(F.chunk[q],F.chunkPos[q]);let U=new Set;for(let F of O)for(let q=0;q<F.chunk.length;q++){let W=j.get(F.chunk[q]);W!=null&&(Q?Q.mapPos(W):W)==F.chunkPos[q]&&!(Q!=null&&Q.touchesRange(W,W+F.chunk[q].length))&&U.add(F.chunk[q])}return U}class LayerCursor{constructor(O,Q,j,U=0){this.layer=O,this.skip=Q,this.minPoint=j,this.rank=U}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(O,Q=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(O,Q,!1),this}gotoInner(O,Q,j){for(;this.chunkIndex<this.layer.chunk.length;){let U=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(U)||this.layer.chunkEnd(this.chunkIndex)<O||U.maxPoint<this.minPoint))break;this.chunkIndex++,j=!1}if(this.chunkIndex<this.layer.chunk.length){let U=this.layer.chunk[this.chunkIndex].findIndex(O-this.layer.chunkPos[this.chunkIndex],Q,!0);(!j||this.rangeIndex<U)&&this.setRangeIndex(U)}this.next()}forward(O,Q){(this.to-O||this.endSide-Q)<0&&this.gotoInner(O,Q,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let O=this.layer.chunkPos[this.chunkIndex],Q=this.layer.chunk[this.chunkIndex],j=O+Q.from[this.rangeIndex];if(this.from=j,this.to=O+Q.to[this.rangeIndex],this.value=Q.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(O){if(O==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=O}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(O){return this.from-O.from||this.startSide-O.startSide||this.rank-O.rank||this.to-O.to||this.endSide-O.endSide}}class HeapCursor{constructor(O){this.heap=O}static from(O,Q=null,j=-1){let U=[];for(let F=0;F<O.length;F++)for(let q=O[F];!q.isEmpty;q=q.nextLayer)q.maxPoint>=j&&U.push(new LayerCursor(q,Q,j,F));return U.length==1?U[0]:new HeapCursor(U)}get startSide(){return this.value?this.value.startSide:0}goto(O,Q=-1e9){for(let j of this.heap)j.goto(O,Q);for(let j=this.heap.length>>1;j>=0;j--)heapBubble(this.heap,j);return this.next(),this}forward(O,Q){for(let j of this.heap)j.forward(O,Q);for(let j=this.heap.length>>1;j>=0;j--)heapBubble(this.heap,j);(this.to-O||this.value.endSide-Q)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let O=this.heap[0];this.from=O.from,this.to=O.to,this.value=O.value,this.rank=O.rank,O.value&&O.next(),heapBubble(this.heap,0)}}}function heapBubble(X,O){for(let Q=X[O];;){let j=(O<<1)+1;if(j>=X.length)break;let U=X[j];if(j+1<X.length&&U.compare(X[j+1])>=0&&(U=X[j+1],j++),Q.compare(U)<0)break;X[j]=Q,X[O]=U,O=j}}class SpanCursor{constructor(O,Q,j){this.minPoint=j,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(O,Q,j)}goto(O,Q=-1e9){return this.cursor.goto(O,Q),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=O,this.endSide=Q,this.openStart=-1,this.next(),this}forward(O,Q){for(;this.minActive>-1&&(this.activeTo[this.minActive]-O||this.active[this.minActive].endSide-Q)<0;)this.removeActive(this.minActive);this.cursor.forward(O,Q)}removeActive(O){remove(this.active,O),remove(this.activeTo,O),remove(this.activeRank,O),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(O){let Q=0,{value:j,to:U,rank:F}=this.cursor;for(;Q<this.activeRank.length&&this.activeRank[Q]<=F;)Q++;insert(this.active,Q,j),insert(this.activeTo,Q,U),insert(this.activeRank,Q,F),O&&insert(O,Q,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let O=this.to,Q=this.point;this.point=null;let j=this.openStart<0?[]:null;for(;;){let U=this.minActive;if(U>-1&&(this.activeTo[U]-this.cursor.from||this.active[U].endSide-this.cursor.startSide)<0){if(this.activeTo[U]>O){this.to=this.activeTo[U],this.endSide=this.active[U].endSide;break}this.removeActive(U),j&&remove(j,U)}else if(this.cursor.value)if(this.cursor.from>O){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let F=this.cursor.value;if(!F.point)this.addActive(j),this.cursor.next();else if(Q&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=F,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=F.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(j){this.openStart=0;for(let U=j.length-1;U>=0&&j[U]<O;U--)this.openStart++}}activeForPoint(O){if(!this.active.length)return this.active;let Q=[];for(let j=this.active.length-1;j>=0&&!(this.activeRank[j]<this.pointRank);j--)(this.activeTo[j]>O||this.activeTo[j]==O&&this.active[j].endSide>=this.point.endSide)&&Q.push(this.active[j]);return Q.reverse()}openEnd(O){let Q=0;for(let j=this.activeTo.length-1;j>=0&&this.activeTo[j]>O;j--)Q++;return Q}}function compare(X,O,Q,j,U,F){X.goto(O),Q.goto(j);let q=j+U,W=j,Y=j-O;for(;;){let G=X.to+Y-Q.to||X.endSide-Q.endSide,K=G<0?X.to+Y:Q.to,J=Math.min(K,q);if(X.point||Q.point?X.point&&Q.point&&(X.point==Q.point||X.point.eq(Q.point))&&sameValues(X.activeForPoint(X.to),Q.activeForPoint(Q.to))||F.comparePoint(W,J,X.point,Q.point):J>W&&!sameValues(X.active,Q.active)&&F.compareRange(W,J,X.active,Q.active),K>q)break;W=K,G<=0&&X.next(),G>=0&&Q.next()}}function sameValues(X,O){if(X.length!=O.length)return!1;for(let Q=0;Q<X.length;Q++)if(X[Q]!=O[Q]&&!X[Q].eq(O[Q]))return!1;return!0}function remove(X,O){for(let Q=O,j=X.length-1;Q<j;Q++)X[Q]=X[Q+1];X.pop()}function insert(X,O,Q){for(let j=X.length-1;j>=O;j--)X[j+1]=X[j];X[O]=Q}function findMinIndex(X,O){let Q=-1,j=1e9;for(let U=0;U<O.length;U++)(O[U]-j||X[U].endSide-X[Q].endSide)<0&&(Q=U,j=O[U]);return Q}function countColumn(X,O,Q=X.length){let j=0;for(let U=0;U<Q;)X.charCodeAt(U)==9?(j+=O-j%O,U++):(j++,U=findClusterBreak(X,U));return j}function findColumn(X,O,Q,j){for(let U=0,F=0;;){if(F>=O)return U;if(U==X.length)break;F+=X.charCodeAt(U)==9?Q-F%Q:1,U=findClusterBreak(X,U)}return j===!0?-1:X.length}const C="\u037C",COUNT=typeof Symbol=="undefined"?"__"+C:Symbol.for(C),SET=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class StyleModule{constructor(O,Q){this.rules=[];let{finish:j}=Q||{};function U(q){return/^@/.test(q)?[q]:q.split(/,\s*/)}function F(q,W,Y,G){let K=[],J=/^@(\w+)\b/.exec(q[0]),ee=J&&J[1]=="keyframes";if(J&&W==null)return Y.push(q[0]+";");for(let te in W){let re=W[te];if(/&/.test(te))F(te.split(/,\s*/).map(oe=>q.map(se=>oe.replace(/&/,se))).reduce((oe,se)=>oe.concat(se)),re,Y);else if(re&&typeof re=="object"){if(!J)throw new RangeError("The value of a property ("+te+") should be a primitive value.");F(U(te),re,K,ee)}else re!=null&&K.push(te.replace(/_.*/,"").replace(/[A-Z]/g,oe=>"-"+oe.toLowerCase())+": "+re+";")}(K.length||ee)&&Y.push((j&&!J&&!G?q.map(j):q).join(", ")+" {"+K.join(" ")+"}")}for(let q in O)F(U(q),O[q],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let O=top[COUNT]||1;return top[COUNT]=O+1,C+O.toString(36)}static mount(O,Q){(O[SET]||new StyleSet(O)).mount(Array.isArray(Q)?Q:[Q])}}let adoptedSet=new Map;class StyleSet{constructor(O){let Q=O.ownerDocument||O,j=Q.defaultView;if(!O.head&&O.adoptedStyleSheets&&j.CSSStyleSheet){let U=adoptedSet.get(Q);if(U)return O.adoptedStyleSheets=[U.sheet,...O.adoptedStyleSheets],O[SET]=U;this.sheet=new j.CSSStyleSheet,O.adoptedStyleSheets=[this.sheet,...O.adoptedStyleSheets],adoptedSet.set(Q,this)}else{this.styleTag=Q.createElement("style");let U=O.head||O;U.insertBefore(this.styleTag,U.firstChild)}this.modules=[],O[SET]=this}mount(O){let Q=this.sheet,j=0,U=0;for(let F=0;F<O.length;F++){let q=O[F],W=this.modules.indexOf(q);if(W<U&&W>-1&&(this.modules.splice(W,1),U--,W=-1),W==-1){if(this.modules.splice(U++,0,q),Q)for(let Y=0;Y<q.rules.length;Y++)Q.insertRule(q.rules[Y],j++)}else{for(;U<W;)j+=this.modules[U++].rules.length;j+=q.rules.length,U++}}if(!Q){let F="";for(let q=0;q<this.modules.length;q++)F+=this.modules[q].getRules()+`
`;this.styleTag.textContent=F}}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),ie$1=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(X){var O=mac&&X.metaKey&&X.shiftKey&&!X.ctrlKey&&!X.altKey||ie$1&&X.shiftKey&&X.key&&X.key.length==1||X.key=="Unidentified",Q=!O&&X.key||(X.shiftKey?shift:base)[X.keyCode]||X.key||"Unidentified";return Q=="Esc"&&(Q="Escape"),Q=="Del"&&(Q="Delete"),Q=="Left"&&(Q="ArrowLeft"),Q=="Up"&&(Q="ArrowUp"),Q=="Right"&&(Q="ArrowRight"),Q=="Down"&&(Q="ArrowDown"),Q}function getSelection(X){let O;return X.nodeType==11?O=X.getSelection?X:X.ownerDocument:O=X,O.getSelection()}function contains(X,O){return O?X==O||X.contains(O.nodeType!=1?O.parentNode:O):!1}function deepActiveElement(X){let O=X.activeElement;for(;O&&O.shadowRoot;)O=O.shadowRoot.activeElement;return O}function hasSelection(X,O){if(!O.anchorNode)return!1;try{return contains(X,O.anchorNode)}catch{return!1}}function clientRectsFor(X){return X.nodeType==3?textRange(X,0,X.nodeValue.length).getClientRects():X.nodeType==1?X.getClientRects():[]}function isEquivalentPosition(X,O,Q,j){return Q?scanFor(X,O,Q,j,-1)||scanFor(X,O,Q,j,1):!1}function domIndex(X){for(var O=0;;O++)if(X=X.previousSibling,!X)return O}function scanFor(X,O,Q,j,U){for(;;){if(X==Q&&O==j)return!0;if(O==(U<0?0:maxOffset(X))){if(X.nodeName=="DIV")return!1;let F=X.parentNode;if(!F||F.nodeType!=1)return!1;O=domIndex(X)+(U<0?0:1),X=F}else if(X.nodeType==1){if(X=X.childNodes[O+(U<0?-1:0)],X.nodeType==1&&X.contentEditable=="false")return!1;O=U<0?maxOffset(X):0}else return!1}}function maxOffset(X){return X.nodeType==3?X.nodeValue.length:X.childNodes.length}function flattenRect(X,O){let Q=O?X.left:X.right;return{left:Q,right:Q,top:X.top,bottom:X.bottom}}function windowRect(X){return{left:0,right:X.innerWidth,top:0,bottom:X.innerHeight}}function scrollRectIntoView(X,O,Q,j,U,F,q,W){let Y=X.ownerDocument,G=Y.defaultView||window;for(let K=X;K;)if(K.nodeType==1){let J,ee=K==Y.body;if(ee)J=windowRect(G);else{if(K.scrollHeight<=K.clientHeight&&K.scrollWidth<=K.clientWidth){K=K.assignedSlot||K.parentNode;continue}let oe=K.getBoundingClientRect();J={left:oe.left,right:oe.left+K.clientWidth,top:oe.top,bottom:oe.top+K.clientHeight}}let te=0,re=0;if(U=="nearest")O.top<J.top?(re=-(J.top-O.top+q),Q>0&&O.bottom>J.bottom+re&&(re=O.bottom-J.bottom+re+q)):O.bottom>J.bottom&&(re=O.bottom-J.bottom+q,Q<0&&O.top-re<J.top&&(re=-(J.top+re-O.top+q)));else{let oe=O.bottom-O.top,se=J.bottom-J.top;re=(U=="center"&&oe<=se?O.top+oe/2-se/2:U=="start"||U=="center"&&Q<0?O.top-q:O.bottom-se+q)-J.top}if(j=="nearest"?O.left<J.left?(te=-(J.left-O.left+F),Q>0&&O.right>J.right+te&&(te=O.right-J.right+te+F)):O.right>J.right&&(te=O.right-J.right+F,Q<0&&O.left<J.left+te&&(te=-(J.left+te-O.left+F))):te=(j=="center"?O.left+(O.right-O.left)/2-(J.right-J.left)/2:j=="start"==W?O.left-F:O.right-(J.right-J.left)+F)-J.left,te||re)if(ee)G.scrollBy(te,re);else{let oe=0,se=0;if(re){let ne=K.scrollTop;K.scrollTop+=re,se=K.scrollTop-ne}if(te){let ne=K.scrollLeft;K.scrollLeft+=te,oe=K.scrollLeft-ne}O={left:O.left-oe,top:O.top-se,right:O.right-oe,bottom:O.bottom-se},oe&&Math.abs(oe-te)<1&&(j="nearest"),se&&Math.abs(se-re)<1&&(U="nearest")}if(ee)break;K=K.assignedSlot||K.parentNode}else if(K.nodeType==11)K=K.host;else break}function scrollableParent(X){let O=X.ownerDocument;for(let Q=X.parentNode;Q&&Q!=O.body;)if(Q.nodeType==1){if(Q.scrollHeight>Q.clientHeight||Q.scrollWidth>Q.clientWidth)return Q;Q=Q.assignedSlot||Q.parentNode}else if(Q.nodeType==11)Q=Q.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(O){return this.anchorNode==O.anchorNode&&this.anchorOffset==O.anchorOffset&&this.focusNode==O.focusNode&&this.focusOffset==O.focusOffset}setRange(O){let{anchorNode:Q,focusNode:j}=O;this.set(Q,Math.min(O.anchorOffset,Q?maxOffset(Q):0),j,Math.min(O.focusOffset,j?maxOffset(j):0))}set(O,Q,j,U){this.anchorNode=O,this.anchorOffset=Q,this.focusNode=j,this.focusOffset=U}}let preventScrollSupported=null;function focusPreventScroll(X){if(X.setActive)return X.setActive();if(preventScrollSupported)return X.focus(preventScrollSupported);let O=[];for(let Q=X;Q&&(O.push(Q,Q.scrollTop,Q.scrollLeft),Q!=Q.ownerDocument);Q=Q.parentNode);if(X.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let Q=0;Q<O.length;){let j=O[Q++],U=O[Q++],F=O[Q++];j.scrollTop!=U&&(j.scrollTop=U),j.scrollLeft!=F&&(j.scrollLeft=F)}}}let scratchRange;function textRange(X,O,Q=O){let j=scratchRange||(scratchRange=document.createRange());return j.setEnd(X,Q),j.setStart(X,O),j}function dispatchKey(X,O,Q){let j={key:O,code:O,keyCode:Q,which:Q,cancelable:!0},U=new KeyboardEvent("keydown",j);U.synthetic=!0,X.dispatchEvent(U);let F=new KeyboardEvent("keyup",j);return F.synthetic=!0,X.dispatchEvent(F),U.defaultPrevented||F.defaultPrevented}function getRoot(X){for(;X;){if(X&&(X.nodeType==9||X.nodeType==11&&X.host))return X;X=X.assignedSlot||X.parentNode}return null}function clearAttributes(X){for(;X.attributes.length;)X.removeAttributeNode(X.attributes[0])}function atElementStart(X,O){let Q=O.focusNode,j=O.focusOffset;if(!Q||O.anchorNode!=Q||O.anchorOffset!=j)return!1;for(j=Math.min(j,maxOffset(Q));;)if(j){if(Q.nodeType!=1)return!1;let U=Q.childNodes[j-1];U.contentEditable=="false"?j--:(Q=U,j=maxOffset(Q))}else{if(Q==X)return!0;j=domIndex(Q),Q=Q.parentNode}}function isScrolledToBottom(X){return X.scrollTop>Math.max(1,X.scrollHeight-X.clientHeight-4)}class DOMPos{constructor(O,Q,j=!0){this.node=O,this.offset=Q,this.precise=j}static before(O,Q){return new DOMPos(O.parentNode,domIndex(O),Q)}static after(O,Q){return new DOMPos(O.parentNode,domIndex(O)+1,Q)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(O){let Q=this.posAtStart;for(let j of this.children){if(j==O)return Q;Q+=j.length+j.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(O){return this.posBefore(O)+O.length}sync(O,Q){if(this.dirty&2){let j=this.dom,U=null,F;for(let q of this.children){if(q.dirty){if(!q.dom&&(F=U?U.nextSibling:j.firstChild)&&F!=O.docView.compositionNode){let W=ContentView.get(F);(!W||!W.parent&&W.canReuseDOM(q))&&q.reuseDOM(F)}q.sync(O,Q),q.dirty=0}if(F=U?U.nextSibling:j.firstChild,Q&&!Q.written&&Q.node==j&&F!=q.dom&&(Q.written=!0),q.dom.parentNode==j)for(;F&&F!=q.dom;)F=rm$1(F);else j.insertBefore(q.dom,F);U=q.dom}for(F=U?U.nextSibling:j.firstChild,F&&Q&&Q.node==j&&(Q.written=!0);F;)F=rm$1(F)}else if(this.dirty&1)for(let j of this.children)j.dirty&&(j.sync(O,Q),j.dirty=0)}reuseDOM(O){}localPosFromDOM(O,Q){let j;if(O==this.dom)j=this.dom.childNodes[Q];else{let U=maxOffset(O)==0?0:Q==0?-1:1;for(;;){let F=O.parentNode;if(F==this.dom)break;U==0&&F.firstChild!=F.lastChild&&(O==F.firstChild?U=-1:U=1),O=F}U<0?j=O:j=O.nextSibling}if(j==this.dom.firstChild)return 0;for(;j&&!ContentView.get(j);)j=j.nextSibling;if(!j)return this.length;for(let U=0,F=0;;U++){let q=this.children[U];if(q.dom==j)return F;F+=q.length+q.breakAfter}}domBoundsAround(O,Q,j=0){let U=-1,F=-1,q=-1,W=-1;for(let Y=0,G=j,K=j;Y<this.children.length;Y++){let J=this.children[Y],ee=G+J.length;if(G<O&&ee>Q)return J.domBoundsAround(O,Q,G);if(ee>=O&&U==-1&&(U=Y,F=G),G>Q&&J.dom.parentNode==this.dom){q=Y,W=K;break}K=ee,G=ee+J.breakAfter}return{from:F,to:W<0?j+this.length:W,startDOM:(U?this.children[U-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:q<this.children.length&&q>=0?this.children[q].dom:null}}markDirty(O=!1){this.dirty|=2,this.markParentsDirty(O)}markParentsDirty(O){for(let Q=this.parent;Q;Q=Q.parent){if(O&&(Q.dirty|=2),Q.dirty&1)return;Q.dirty|=1,O=!1}}setParent(O){this.parent!=O&&(this.parent=O,this.dirty&&this.markParentsDirty(!0))}setDOM(O){this.dom&&(this.dom.cmView=null),this.dom=O,O.cmView=this}get rootView(){for(let O=this;;){let Q=O.parent;if(!Q)return O;O=Q}}replaceChildren(O,Q,j=noChildren){this.markDirty();for(let U=O;U<Q;U++){let F=this.children[U];F.parent==this&&F.destroy()}this.children.splice(O,Q-O,...j);for(let U=0;U<j.length;U++)j[U].setParent(this)}ignoreMutation(O){return!1}ignoreEvent(O){return!1}childCursor(O=this.length){return new ChildCursor(this.children,O,this.children.length)}childPos(O,Q=1){return this.childCursor().findPos(O,Q)}toString(){let O=this.constructor.name.replace("View","");return O+(this.children.length?"("+this.children.join()+")":this.length?"["+(O=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(O){return O.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(O,Q,j,U,F,q){return!1}become(O){return!1}canReuseDOM(O){return O.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(X){let O=X.nextSibling;return X.parentNode.removeChild(X),O}class ChildCursor{constructor(O,Q,j){this.children=O,this.pos=Q,this.i=j,this.off=0}findPos(O,Q=1){for(;;){if(O>this.pos||O==this.pos&&(Q>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=O-this.pos,this;let j=this.children[--this.i];this.pos-=j.length+j.breakAfter}}}function replaceRange(X,O,Q,j,U,F,q,W,Y){let{children:G}=X,K=G.length?G[O]:null,J=F.length?F[F.length-1]:null,ee=J?J.breakAfter:q;if(!(O==j&&K&&!q&&!ee&&F.length<2&&K.merge(Q,U,F.length?J:null,Q==0,W,Y))){if(j<G.length){let te=G[j];te&&U<te.length?(O==j&&(te=te.split(U),U=0),!ee&&J&&te.merge(0,U,J,!0,0,Y)?F[F.length-1]=te:(U&&te.merge(0,U,null,!1,0,Y),F.push(te))):te!=null&&te.breakAfter&&(J?J.breakAfter=1:q=1),j++}for(K&&(K.breakAfter=q,Q>0&&(!q&&F.length&&K.merge(Q,K.length,F[0],!1,W,0)?K.breakAfter=F.shift().breakAfter:(Q<K.length||K.children.length&&K.children[K.children.length-1].length==0)&&K.merge(Q,K.length,null,!1,W,0),O++));O<j&&F.length;)if(G[j-1].become(F[F.length-1]))j--,F.pop(),Y=F.length?0:W;else if(G[O].become(F[0]))O++,F.shift(),W=F.length?0:Y;else break;!F.length&&O&&j<G.length&&!G[O-1].breakAfter&&G[j].merge(0,0,G[O-1],!1,W,Y)&&O--,(O<j||F.length)&&X.replaceChildren(O,j,F)}}function mergeChildrenInto(X,O,Q,j,U,F){let q=X.childCursor(),{i:W,off:Y}=q.findPos(Q,1),{i:G,off:K}=q.findPos(O,-1),J=O-Q;for(let ee of j)J+=ee.length;X.length+=J,replaceRange(X,G,K,W,Y,j,0,U,F)}let nav=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document!="undefined"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(O){super(),this.text=O}get length(){return this.text.length}createDOM(O){this.setDOM(O||document.createTextNode(this.text))}sync(O,Q){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(Q&&Q.node==this.dom&&(Q.written=!0),this.dom.nodeValue=this.text)}reuseDOM(O){O.nodeType==3&&this.createDOM(O)}merge(O,Q,j){return j&&(!(j instanceof TextView)||this.length-(Q-O)+j.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,O)+(j?j.text:"")+this.text.slice(Q),this.markDirty(),!0)}split(O){let Q=new TextView(this.text.slice(O));return this.text=this.text.slice(0,O),this.markDirty(),Q}localPosFromDOM(O,Q){return O==this.dom?Q:Q?this.text.length:0}domAtPos(O){return new DOMPos(this.dom,O)}domBoundsAround(O,Q,j){return{from:j,to:j+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(O,Q){return textCoords(this.dom,O,Q)}}class MarkView extends ContentView{constructor(O,Q=[],j=0){super(),this.mark=O,this.children=Q,this.length=j;for(let U of Q)U.setParent(this)}setAttrs(O){if(clearAttributes(O),this.mark.class&&(O.className=this.mark.class),this.mark.attrs)for(let Q in this.mark.attrs)O.setAttribute(Q,this.mark.attrs[Q]);return O}reuseDOM(O){O.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(O),this.dirty|=6)}sync(O,Q){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(O,Q)}merge(O,Q,j,U,F,q){return j&&(!(j instanceof MarkView&&j.mark.eq(this.mark))||O&&F<=0||Q<this.length&&q<=0)?!1:(mergeChildrenInto(this,O,Q,j?j.children:[],F-1,q-1),this.markDirty(),!0)}split(O){let Q=[],j=0,U=-1,F=0;for(let W of this.children){let Y=j+W.length;Y>O&&Q.push(j<O?W.split(O-j):W),U<0&&j>=O&&(U=F),j=Y,F++}let q=this.length-O;return this.length=O,U>-1&&(this.children.length=U,this.markDirty()),new MarkView(this.mark,Q,q)}domAtPos(O){return inlineDOMAtPos(this,O)}coordsAt(O,Q){return coordsInChildren(this,O,Q)}}function textCoords(X,O,Q){let j=X.nodeValue.length;O>j&&(O=j);let U=O,F=O,q=0;O==0&&Q<0||O==j&&Q>=0?browser.chrome||browser.gecko||(O?(U--,q=1):F<j&&(F++,q=-1)):Q<0?U--:F<j&&F++;let W=textRange(X,U,F).getClientRects();if(!W.length)return null;let Y=W[(q?q<0:Q>=0)?0:W.length-1];return browser.safari&&!q&&Y.width==0&&(Y=Array.prototype.find.call(W,G=>G.width)||Y),q?flattenRect(Y,q<0):Y||null}class WidgetView extends ContentView{constructor(O,Q,j){super(),this.widget=O,this.length=Q,this.side=j,this.prevWidget=null}static create(O,Q,j){return new(O.customView||WidgetView)(O,Q,j)}split(O){let Q=WidgetView.create(this.widget,this.length-O,this.side);return this.length-=O,Q}sync(O){(!this.dom||!this.widget.updateDOM(this.dom,O))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(O)),this.dom.contentEditable="false")}getSide(){return this.side}merge(O,Q,j,U,F,q){return j&&(!(j instanceof WidgetView)||!this.widget.compare(j.widget)||O>0&&F<=0||Q<this.length&&q<=0)?!1:(this.length=O+(j?j.length:0)+(this.length-Q),!0)}become(O){return O instanceof WidgetView&&O.side==this.side&&this.widget.constructor==O.widget.constructor?(this.widget.compare(O.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=O.widget,this.length=O.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(O){return this.widget.ignoreEvent(O)}get overrideDOMText(){if(this.length==0)return Text.empty;let O=this;for(;O.parent;)O=O.parent;let{view:Q}=O,j=Q&&Q.state.doc,U=this.posAtStart;return j?j.slice(U,U+this.length):Text.empty}domAtPos(O){return(this.length?O==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,O==this.length)}domBoundsAround(){return null}coordsAt(O,Q){let j=this.widget.coordsAt(this.dom,O,Q);if(j)return j;let U=this.dom.getClientRects(),F=null;if(!U.length)return null;let q=this.side?this.side<0:O>0;for(let W=q?U.length-1:0;F=U[W],!(O>0?W==0:W==U.length-1||F.top<F.bottom);W+=q?-1:1);return flattenRect(F,!q)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(O){let{topView:Q,text:j}=this.widget;return Q?scanCompositionTree(O,0,Q,j,this.length-Q.length,(U,F)=>U.domAtPos(F),(U,F)=>new DOMPos(U,Math.min(F,U.nodeValue.length))):new DOMPos(j,Math.min(O,j.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(O,Q){let{topView:j,text:U}=this.widget;return j?posFromDOMInCompositionTree(O,Q,j,U,this.length-j.length):Math.min(Q,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(O,Q){let{topView:j,text:U}=this.widget;return j?scanCompositionTree(O,Q,j,U,this.length-j.length,(F,q,W)=>F.coordsAt(q,W),(F,q,W)=>textCoords(F,q,W)):textCoords(U,O,Q)}destroy(){var O;super.destroy(),(O=this.widget.topView)===null||O===void 0||O.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(X,O,Q,j,U,F,q){if(Q instanceof MarkView){for(let W=Q.dom.firstChild;W;W=W.nextSibling){let Y=ContentView.get(W);if(Y){let G=contains(W,j),K=Y.length+(G?U:0);if(X<K||X==K&&Y.getSide()<=0)return G?scanCompositionTree(X,O,Y,j,U,F,q):F(Y,X,O);X-=K}else{let G=scanCompositionNode(X,O,W,q);if(typeof G!="number")return G;X=G}}return F(Q,Q.length,-1)}else return Q.dom==j?q(j,X,O):F(Q,X,O)}function scanCompositionNode(X,O,Q,j){if(Q.nodeType==3){let U=Q.nodeValue.length;if(X<=U)return j(Q,X,O);X-=U}else if(Q.nodeType==1&&Q.contentEditable!="false")for(let U=Q.firstChild;U;U=U.nextSibling){let F=scanCompositionNode(X,O,U,j);if(typeof F!="number")return F;X=F}return X}function posFromDOMInCompositionTree(X,O,Q,j,U){if(Q instanceof MarkView){let F=0;for(let q=Q.dom.firstChild;q;q=q.nextSibling){let W=ContentView.get(q);if(W){let Y=contains(q,j);if(contains(q,X))return F+(Y?posFromDOMInCompositionTree(X,O,W,j,U):W.localPosFromDOM(X,O));F+=W.length+(Y?U:0)}else{let Y=posFromDOMInOpaqueNode(X,O,q);if(Y.result!=null)return F+Y.result;F+=Y.size}}}else if(Q.dom==j)return Math.min(O,j.nodeValue.length);return Q.localPosFromDOM(X,O)}function posFromDOMInOpaqueNode(X,O,Q){if(Q.nodeType==3)return X==Q?{result:O}:{size:Q.nodeValue.length};if(Q.nodeType==1&&Q.contentEditable!="false"){let j=0;for(let U=Q.firstChild,F=0;;U=U.nextSibling,F++){if(X==Q&&F==O)return{result:j};if(!U)return{size:j};let q=posFromDOMInOpaqueNode(X,O,U);if(q.result!=null)return{result:O+q.result};j+=q.size}}else return Q.contains(X)?{result:0}:{size:0}}class WidgetBufferView extends ContentView{constructor(O){super(),this.side=O}get length(){return 0}merge(){return!1}become(O){return O instanceof WidgetBufferView&&O.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let O=document.createElement("img");O.className="cm-widgetBuffer",O.setAttribute("aria-hidden","true"),this.setDOM(O)}}getSide(){return this.side}domAtPos(O){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(O){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(X,O){let Q=X.dom,{children:j}=X,U=0;for(let F=0;U<j.length;U++){let q=j[U],W=F+q.length;if(!(W==F&&q.getSide()<=0)){if(O>F&&O<W&&q.dom.parentNode==Q)return q.domAtPos(O-F);if(O<=F)break;F=W}}for(let F=U;F>0;F--){let q=j[F-1];if(q.dom.parentNode==Q)return q.domAtPos(q.length)}for(let F=U;F<j.length;F++){let q=j[F];if(q.dom.parentNode==Q)return q.domAtPos(0)}return new DOMPos(Q,0)}function joinInlineInto(X,O,Q){let j,{children:U}=X;Q>0&&O instanceof MarkView&&U.length&&(j=U[U.length-1])instanceof MarkView&&j.mark.eq(O.mark)?joinInlineInto(j,O.children[0],Q-1):(U.push(O),O.setParent(X)),X.length+=O.length}function coordsInChildren(X,O,Q){let j=null,U=-1,F=null,q=-1;function W(G,K){for(let J=0,ee=0;J<G.children.length&&ee<=K;J++){let te=G.children[J],re=ee+te.length;re>=K&&(te.children.length?W(te,K-ee):(!F||F.isHidden&&Q>0)&&(re>K||ee==re&&te.getSide()>0)?(F=te,q=K-ee):(ee<K||ee==re&&te.getSide()<0&&!te.isHidden)&&(j=te,U=K-ee)),ee=re}}W(X,O);let Y=(Q<0?j:F)||j||F;return Y?Y.coordsAt(Math.max(0,Y==j?U:q),Q):fallbackRect(X)}function fallbackRect(X){let O=X.dom.lastChild;if(!O)return X.dom.getBoundingClientRect();let Q=clientRectsFor(O);return Q[Q.length-1]||null}function combineAttrs(X,O){for(let Q in X)Q=="class"&&O.class?O.class+=" "+X.class:Q=="style"&&O.style?O.style+=";"+X.style:O[Q]=X[Q];return O}function attrsEq(X,O){if(X==O)return!0;if(!X||!O)return!1;let Q=Object.keys(X),j=Object.keys(O);if(Q.length!=j.length)return!1;for(let U of Q)if(j.indexOf(U)==-1||X[U]!==O[U])return!1;return!0}function updateAttrs(X,O,Q){let j=null;if(O)for(let U in O)Q&&U in Q||X.removeAttribute(j=U);if(Q)for(let U in Q)O&&O[U]==Q[U]||X.setAttribute(j=U,Q[U]);return!!j}class WidgetType{eq(O){return!1}updateDOM(O,Q){return!1}compare(O){return this==O||this.constructor==O.constructor&&this.eq(O)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(O){return!0}coordsAt(O,Q,j){return null}get customView(){return null}get isHidden(){return!1}destroy(O){}}var BlockType=function(X){return X[X.Text=0]="Text",X[X.WidgetBefore=1]="WidgetBefore",X[X.WidgetAfter=2]="WidgetAfter",X[X.WidgetRange=3]="WidgetRange",X}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(O,Q,j,U){super(),this.startSide=O,this.endSide=Q,this.widget=j,this.spec=U}get heightRelevant(){return!1}static mark(O){return new MarkDecoration(O)}static widget(O){let Q=Math.max(-1e4,Math.min(1e4,O.side||0)),j=!!O.block;return Q+=j&&!O.inlineOrder?Q>0?3e8:-4e8:Q>0?1e8:-1e8,new PointDecoration(O,Q,Q,j,O.widget||null,!1)}static replace(O){let Q=!!O.block,j,U;if(O.isBlockGap)j=-5e8,U=4e8;else{let{start:F,end:q}=getInclusive(O,Q);j=(F?Q?-3e8:-1:5e8)-1,U=(q?Q?2e8:1:-6e8)+1}return new PointDecoration(O,j,U,Q,O.widget||null,!0)}static line(O){return new LineDecoration(O)}static set(O,Q=!1){return RangeSet.of(O,Q)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(O){let{start:Q,end:j}=getInclusive(O);super(Q?-1:5e8,j?1:-6e8,null,O),this.tagName=O.tagName||"span",this.class=O.class||"",this.attrs=O.attributes||null}eq(O){return this==O||O instanceof MarkDecoration&&this.tagName==O.tagName&&this.class==O.class&&attrsEq(this.attrs,O.attrs)}range(O,Q=O){if(O>=Q)throw new RangeError("Mark decorations may not be empty");return super.range(O,Q)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(O){super(-2e8,-2e8,null,O)}eq(O){return O instanceof LineDecoration&&this.spec.class==O.spec.class&&attrsEq(this.spec.attributes,O.spec.attributes)}range(O,Q=O){if(Q!=O)throw new RangeError("Line decoration ranges must be zero-length");return super.range(O,Q)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(O,Q,j,U,F,q){super(Q,j,F,O),this.block=U,this.isReplace=q,this.mapMode=U?Q<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(O){return O instanceof PointDecoration&&widgetsEq(this.widget,O.widget)&&this.block==O.block&&this.startSide==O.startSide&&this.endSide==O.endSide}range(O,Q=O){if(this.isReplace&&(O>Q||O==Q&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&Q!=O)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(O,Q)}}PointDecoration.prototype.point=!0;function getInclusive(X,O=!1){let{inclusiveStart:Q,inclusiveEnd:j}=X;return Q==null&&(Q=X.inclusive),j==null&&(j=X.inclusive),{start:Q!=null?Q:O,end:j!=null?j:O}}function widgetsEq(X,O){return X==O||!!(X&&O&&X.compare(O))}function addRange(X,O,Q,j=0){let U=Q.length-1;U>=0&&Q[U]+j>=X?Q[U]=Math.max(Q[U],O):Q.push(X,O)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(O,Q,j,U,F,q){if(j){if(!(j instanceof LineView))return!1;this.dom||j.transferDOM(this)}return U&&this.setDeco(j?j.attrs:null),mergeChildrenInto(this,O,Q,j?j.children:[],F,q),!0}split(O){let Q=new LineView;if(Q.breakAfter=this.breakAfter,this.length==0)return Q;let{i:j,off:U}=this.childPos(O);U&&(Q.append(this.children[j].split(U),0),this.children[j].merge(U,this.children[j].length,null,!1,0,0),j++);for(let F=j;F<this.children.length;F++)Q.append(this.children[F],0);for(;j>0&&this.children[j-1].length==0;)this.children[--j].destroy();return this.children.length=j,this.markDirty(),this.length=O,Q}transferDOM(O){!this.dom||(this.markDirty(),O.setDOM(this.dom),O.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(O){attrsEq(this.attrs,O)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=O)}append(O,Q){joinInlineInto(this,O,Q)}addLineDeco(O){let Q=O.spec.attributes,j=O.spec.class;Q&&(this.attrs=combineAttrs(Q,this.attrs||{})),j&&(this.attrs=combineAttrs({class:j},this.attrs||{}))}domAtPos(O){return inlineDOMAtPos(this,O)}reuseDOM(O){O.nodeName=="DIV"&&(this.setDOM(O),this.dirty|=6)}sync(O,Q){var j;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(O,Q);let U=this.dom.lastChild;for(;U&&ContentView.get(U)instanceof MarkView;)U=U.lastChild;if(!U||!this.length||U.nodeName!="BR"&&((j=ContentView.get(U))===null||j===void 0?void 0:j.isEditable)==!1&&(!browser.ios||!this.children.some(F=>F instanceof TextView))){let F=document.createElement("BR");F.cmIgnore=!0,this.dom.appendChild(F)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let O=0,Q;for(let j of this.children){if(!(j instanceof TextView)||/[^ -~]/.test(j.text))return null;let U=clientRectsFor(j.dom);if(U.length!=1)return null;O+=U[0].width,Q=U[0].height}return O?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:O/this.length,textHeight:Q}:null}coordsAt(O,Q){let j=coordsInChildren(this,O,Q);if(!this.children.length&&j&&this.parent){let{heightOracle:U}=this.parent.view.viewState,F=j.bottom-j.top;if(Math.abs(F-U.lineHeight)<2&&U.textHeight<F){let q=(F-U.textHeight)/2;return{top:j.top+q,bottom:j.bottom-q,left:j.left,right:j.left}}}return j}become(O){return!1}get type(){return BlockType.Text}static find(O,Q){for(let j=0,U=0;j<O.children.length;j++){let F=O.children[j],q=U+F.length;if(q>=Q){if(F instanceof LineView)return F;if(q>Q)break}U=q+F.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(O,Q,j){super(),this.widget=O,this.length=Q,this.type=j,this.breakAfter=0,this.prevWidget=null}merge(O,Q,j,U,F,q){return j&&(!(j instanceof BlockWidgetView)||!this.widget.compare(j.widget)||O>0&&F<=0||Q<this.length&&q<=0)?!1:(this.length=O+(j?j.length:0)+(this.length-Q),!0)}domAtPos(O){return O==0?DOMPos.before(this.dom):DOMPos.after(this.dom,O==this.length)}split(O){let Q=this.length-O;this.length=O;let j=new BlockWidgetView(this.widget,Q,this.type);return j.breakAfter=this.breakAfter,j}get children(){return noChildren}sync(O){(!this.dom||!this.widget.updateDOM(this.dom,O))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(O)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(O){return O instanceof BlockWidgetView&&O.widget.constructor==this.widget.constructor?(O.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=O.widget,this.length=O.length,this.type=O.type,this.breakAfter=O.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(O){return this.widget.ignoreEvent(O)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(O,Q){return this.widget.coordsAt(this.dom,O,Q)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(O,Q,j,U){this.doc=O,this.pos=Q,this.end=j,this.disallowBlockEffectsFor=U,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=O.iter(),this.skip=Q}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let O=this.content[this.content.length-1];return!O.breakAfter&&!(O instanceof BlockWidgetView&&O.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(O=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),O),O.length),this.pendingBuffer=0)}addBlockWidget(O){this.flushBuffer(),this.curLine=null,this.content.push(O)}finish(O){this.pendingBuffer&&O<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(O,Q,j){for(;O>0;){if(this.textOff==this.text.length){let{value:F,lineBreak:q,done:W}=this.cursor.next(this.skip);if(this.skip=0,W)throw new Error("Ran out of text content when drawing inline views");if(q){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,O--;continue}else this.text=F,this.textOff=0}let U=Math.min(this.text.length-this.textOff,O,512);this.flushBuffer(Q.slice(Q.length-j)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+U)),Q),j),this.atCursorPos=!0,this.textOff+=U,O-=U,j=0}}span(O,Q,j,U){this.buildText(Q-O,j,U),this.pos=Q,this.openStart<0&&(this.openStart=U)}point(O,Q,j,U,F,q){if(this.disallowBlockEffectsFor[q]&&j instanceof PointDecoration){if(j.block)throw new RangeError("Block decorations may not be specified via plugins");if(Q>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let W=Q-O;if(j instanceof PointDecoration)if(j.block){let{type:Y}=j;Y==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(j.widget||new NullWidget("div"),W,Y))}else{let Y=WidgetView.create(j.widget||new NullWidget("span"),W,W?0:j.startSide),G=this.atCursorPos&&!Y.isEditable&&F<=U.length&&(O<Q||j.startSide>0),K=!Y.isEditable&&(O<Q||F>U.length||j.startSide<=0),J=this.getLine();this.pendingBuffer==2&&!G&&!Y.isEditable&&(this.pendingBuffer=0),this.flushBuffer(U),G&&(J.append(wrapMarks(new WidgetBufferView(1),U),F),F=U.length+Math.max(0,F-U.length)),J.append(wrapMarks(Y,U),F),this.atCursorPos=K,this.pendingBuffer=K?O<Q||F>U.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=U.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(j);W&&(this.textOff+W<=this.text.length?this.textOff+=W:(this.skip+=W-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=Q),this.openStart<0&&(this.openStart=F)}static build(O,Q,j,U,F){let q=new ContentBuilder(O,Q,j,F);return q.openEnd=RangeSet.spans(U,Q,j,q),q.openStart<0&&(q.openStart=q.openEnd),q.finish(q.openEnd),q}}function wrapMarks(X,O){for(let Q of O)X=new MarkView(Q,[X],X.length);return X}class NullWidget extends WidgetType{constructor(O){super(),this.tag=O}eq(O){return O.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(O){return O.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:X=>X.some(O=>O)}),nativeSelectionHidden=Facet.define({combine:X=>X.some(O=>O)});class ScrollTarget{constructor(O,Q="nearest",j="nearest",U=5,F=5){this.range=O,this.y=Q,this.x=j,this.yMargin=U,this.xMargin=F}map(O){return O.empty?this:new ScrollTarget(this.range.map(O),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(X,O)=>X.map(O)});function logException(X,O,Q){let j=X.facet(exceptionSink);j.length?j[0](O):window.onerror?window.onerror(String(O),Q,void 0,void 0,O):Q?console.error(Q+":",O):console.error(O)}const editable=Facet.define({combine:X=>X.length?X[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(O,Q,j,U){this.id=O,this.create=Q,this.domEventHandlers=j,this.extension=U(this)}static define(O,Q){const{eventHandlers:j,provide:U,decorations:F}=Q||{};return new ViewPlugin(nextPluginID++,O,j,q=>{let W=[viewPlugin.of(q)];return F&&W.push(decorations.of(Y=>{let G=Y.plugin(q);return G?F(G):Decoration.none})),U&&W.push(U(q)),W})}static fromClass(O,Q){return ViewPlugin.define(j=>new O(j),Q)}}class PluginInstance{constructor(O){this.spec=O,this.mustUpdate=null,this.value=null}update(O){if(this.value){if(this.mustUpdate){let Q=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(Q)}catch(j){if(logException(Q.state,j,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(O)}catch(Q){logException(O.state,Q,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(O){var Q;if(!((Q=this.value)===null||Q===void 0)&&Q.destroy)try{this.value.destroy()}catch(j){logException(O.state,j,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define();function getScrollMargins(X){let O=0,Q=0,j=0,U=0;for(let F of X.state.facet(scrollMargins)){let q=F(X);q&&(q.left!=null&&(O=Math.max(O,q.left)),q.right!=null&&(Q=Math.max(Q,q.right)),q.top!=null&&(j=Math.max(j,q.top)),q.bottom!=null&&(U=Math.max(U,q.bottom)))}return{left:O,right:Q,top:j,bottom:U}}const styleModule=Facet.define();class ChangedRange{constructor(O,Q,j,U){this.fromA=O,this.toA=Q,this.fromB=j,this.toB=U}join(O){return new ChangedRange(Math.min(this.fromA,O.fromA),Math.max(this.toA,O.toA),Math.min(this.fromB,O.fromB),Math.max(this.toB,O.toB))}addToSet(O){let Q=O.length,j=this;for(;Q>0;Q--){let U=O[Q-1];if(!(U.fromA>j.toA)){if(U.toA<j.fromA)break;j=j.join(U),O.splice(Q-1,1)}}return O.splice(Q,0,j),O}static extendWithRanges(O,Q){if(Q.length==0)return O;let j=[];for(let U=0,F=0,q=0,W=0;;U++){let Y=U==O.length?null:O[U],G=q-W,K=Y?Y.fromB:1e9;for(;F<Q.length&&Q[F]<K;){let J=Q[F],ee=Q[F+1],te=Math.max(W,J),re=Math.min(K,ee);if(te<=re&&new ChangedRange(te+G,re+G,te,re).addToSet(j),ee>K)break;F+=2}if(!Y)return j;new ChangedRange(Y.fromA,Y.toA,Y.fromB,Y.toB).addToSet(j),q=Y.toA,W=Y.toB}}}class ViewUpdate{constructor(O,Q,j){this.view=O,this.state=Q,this.transactions=j,this.flags=0,this.startState=O.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let F of j)this.changes=this.changes.compose(F.changes);let U=[];this.changes.iterChangedRanges((F,q,W,Y)=>U.push(new ChangedRange(F,q,W,Y))),this.changedRanges=U}static create(O,Q,j){return new ViewUpdate(O,Q,j)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(O=>O.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(X){return X[X.LTR=0]="LTR",X[X.RTL=1]="RTL",X}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(X){let O=[];for(let Q=0;Q<X.length;Q++)O.push(1<<+X[Q]);return O}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let X of["()","[]","{}"]){let O=X.charCodeAt(0),Q=X.charCodeAt(1);Brackets[O]=Q,Brackets[Q]=-O}function charType(X){return X<=247?LowTypes[X]:1424<=X&&X<=1524?2:1536<=X&&X<=1785?ArabicTypes[X-1536]:1774<=X&&X<=2220?4:8192<=X&&X<=8203?256:64336<=X&&X<=65023?4:X==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor(O,Q,j){this.from=O,this.to=Q,this.level=j}get dir(){return this.level%2?RTL:LTR}side(O,Q){return this.dir==Q==O?this.to:this.from}static find(O,Q,j,U){let F=-1;for(let q=0;q<O.length;q++){let W=O[q];if(W.from<=Q&&W.to>=Q){if(W.level==j)return q;(F<0||(U!=0?U<0?W.from<Q:W.to>Q:O[F].level>W.level))&&(F=q)}}if(F<0)throw new RangeError("Index out of range");return F}}const types=[];function computeOrder(X,O){let Q=X.length,j=O==LTR?1:2,U=O==LTR?2:1;if(!X||j==1&&!BidiRE.test(X))return trivialOrder(Q);for(let q=0,W=j,Y=j;q<Q;q++){let G=charType(X.charCodeAt(q));G==512?G=W:G==8&&Y==4&&(G=16),types[q]=G==4?2:G,G&7&&(Y=G),W=G}for(let q=0,W=j,Y=j;q<Q;q++){let G=types[q];if(G==128)q<Q-1&&W==types[q+1]&&W&24?G=types[q]=W:types[q]=256;else if(G==64){let K=q+1;for(;K<Q&&types[K]==64;)K++;let J=q&&W==8||K<Q&&types[K]==8?Y==1?1:8:256;for(let ee=q;ee<K;ee++)types[ee]=J;q=K-1}else G==8&&Y==1&&(types[q]=1);W=G,G&7&&(Y=G)}for(let q=0,W=0,Y=0,G,K,J;q<Q;q++)if(K=Brackets[G=X.charCodeAt(q)])if(K<0){for(let ee=W-3;ee>=0;ee-=3)if(BracketStack[ee+1]==-K){let te=BracketStack[ee+2],re=te&2?j:te&4?te&1?U:j:0;re&&(types[q]=types[BracketStack[ee]]=re),W=ee;break}}else{if(BracketStack.length==189)break;BracketStack[W++]=q,BracketStack[W++]=G,BracketStack[W++]=Y}else if((J=types[q])==2||J==1){let ee=J==j;Y=ee?0:1;for(let te=W-3;te>=0;te-=3){let re=BracketStack[te+2];if(re&2)break;if(ee)BracketStack[te+2]|=2;else{if(re&4)break;BracketStack[te+2]|=4}}}for(let q=0;q<Q;q++)if(types[q]==256){let W=q+1;for(;W<Q&&types[W]==256;)W++;let Y=(q?types[q-1]:j)==1,G=(W<Q?types[W]:j)==1,K=Y==G?Y?1:2:j;for(let J=q;J<W;J++)types[J]=K;q=W-1}let F=[];if(j==1)for(let q=0;q<Q;){let W=q,Y=types[q++]!=1;for(;q<Q&&Y==(types[q]!=1);)q++;if(Y)for(let G=q;G>W;){let K=G,J=types[--G]!=2;for(;G>W&&J==(types[G-1]!=2);)G--;F.push(new BidiSpan(G,K,J?2:1))}else F.push(new BidiSpan(W,q,0))}else for(let q=0;q<Q;){let W=q,Y=types[q++]==2;for(;q<Q&&Y==(types[q]==2);)q++;F.push(new BidiSpan(W,q,Y?1:2))}return F}function trivialOrder(X){return[new BidiSpan(0,X,0)]}let movedOver="";function moveVisually(X,O,Q,j,U){var F;let q=j.head-X.from,W=-1;if(q==0){if(!U||!X.length)return null;O[0].level!=Q&&(q=O[0].side(!1,Q),W=0)}else if(q==X.length){if(U)return null;let ee=O[O.length-1];ee.level!=Q&&(q=ee.side(!0,Q),W=O.length-1)}W<0&&(W=BidiSpan.find(O,q,(F=j.bidiLevel)!==null&&F!==void 0?F:-1,j.assoc));let Y=O[W];q==Y.side(U,Q)&&(Y=O[W+=U?1:-1],q=Y.side(!U,Q));let G=U==(Y.dir==Q),K=findClusterBreak(X.text,q,G);if(movedOver=X.text.slice(Math.min(q,K),Math.max(q,K)),K!=Y.side(U,Q))return EditorSelection.cursor(K+X.from,G?-1:1,Y.level);let J=W==(U?O.length-1:0)?null:O[W+(U?1:-1)];return!J&&Y.level!=Q?EditorSelection.cursor(U?X.to:X.from,U?-1:1,Q):J&&J.level<Y.level?EditorSelection.cursor(J.side(!U,Q)+X.from,U?1:-1,J.level):EditorSelection.cursor(K+X.from,U?-1:1,Y.level)}const LineBreakPlaceholder="\uFFFF";class DOMReader{constructor(O,Q){this.points=O,this.text="",this.lineSeparator=Q.facet(EditorState.lineSeparator)}append(O){this.text+=O}lineBreak(){this.text+=LineBreakPlaceholder}readRange(O,Q){if(!O)return this;let j=O.parentNode;for(let U=O;;){this.findPointBefore(j,U);let F=this.text.length;this.readNode(U);let q=U.nextSibling;if(q==Q)break;let W=ContentView.get(U),Y=ContentView.get(q);(W&&Y?W.breakAfter:(W?W.breakAfter:isBlockElement(U))||isBlockElement(q)&&(U.nodeName!="BR"||U.cmIgnore)&&this.text.length>F)&&this.lineBreak(),U=q}return this.findPointBefore(j,Q),this}readTextNode(O){let Q=O.nodeValue;for(let j of this.points)j.node==O&&(j.pos=this.text.length+Math.min(j.offset,Q.length));for(let j=0,U=this.lineSeparator?null:/\r\n?|\n/g;;){let F=-1,q=1,W;if(this.lineSeparator?(F=Q.indexOf(this.lineSeparator,j),q=this.lineSeparator.length):(W=U.exec(Q))&&(F=W.index,q=W[0].length),this.append(Q.slice(j,F<0?Q.length:F)),F<0)break;if(this.lineBreak(),q>1)for(let Y of this.points)Y.node==O&&Y.pos>this.text.length&&(Y.pos-=q-1);j=F+q}}readNode(O){if(O.cmIgnore)return;let Q=ContentView.get(O),j=Q&&Q.overrideDOMText;if(j!=null){this.findPointInside(O,j.length);for(let U=j.iter();!U.next().done;)U.lineBreak?this.lineBreak():this.append(U.value)}else O.nodeType==3?this.readTextNode(O):O.nodeName=="BR"?O.nextSibling&&this.lineBreak():O.nodeType==1&&this.readRange(O.firstChild,null)}findPointBefore(O,Q){for(let j of this.points)j.node==O&&O.childNodes[j.offset]==Q&&(j.pos=this.text.length)}findPointInside(O,Q){for(let j of this.points)(O.nodeType==3?j.node==O:O.contains(j.node))&&(j.pos=this.text.length+Math.min(Q,j.offset))}}function isBlockElement(X){return X.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(X.nodeName)}class DOMPoint{constructor(O,Q){this.node=O,this.offset=Q,this.pos=-1}}class DocView extends ContentView{constructor(O){super(),this.view=O,this.compositionDeco=Decoration.none,this.compositionNode=null,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(O.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,O.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(O){let Q=O.changedRanges;this.minWidth>0&&Q.length&&(Q.every(({fromA:q,toA:W})=>W<this.minWidthFrom||q>this.minWidthTo)?(this.minWidthFrom=O.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=O.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),{deco:this.compositionDeco,node:this.compositionNode}=this.view.inputState.composing<0?noComp:computeCompositionDeco(this.view,O.changes),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&O&&O.state.doc.lines!=O.startState.doc.lines&&(this.forceSelection=!0);let j=this.decorations,U=this.updateDeco(),F=findChangedDeco(j,U,O.changes);return Q=ChangedRange.extendWithRanges(Q,F),this.dirty==0&&Q.length==0?!1:(this.updateInner(Q,O.startState.doc.length),O.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(O,Q){this.view.viewState.mustMeasureContent=!0,this.updateChildren(O,Q);let{observer:j}=this.view;j.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let F=browser.chrome||browser.ios?{node:j.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,F),this.dirty=0,F&&(F.written||j.selectionRange.focusNode!=F.node)&&(this.forceSelection=!0),this.dom.style.height=""});let U=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let F of this.children)F instanceof BlockWidgetView&&F.widget instanceof BlockGapWidget&&U.push(F.dom);j.updateGaps(U)}updateChildren(O,Q){let j=this.childCursor(Q);for(let U=O.length-1;;U--){let F=U>=0?O[U]:null;if(!F)break;let{fromA:q,toA:W,fromB:Y,toB:G}=F,{content:K,breakAtStart:J,openStart:ee,openEnd:te}=ContentBuilder.build(this.view.state.doc,Y,G,this.decorations,this.dynamicDecorationMap),{i:re,off:oe}=j.findPos(W,1),{i:se,off:ne}=j.findPos(q,-1);replaceRange(this,se,ne,re,oe,K,J,ee,te)}}updateSelection(O=!1,Q=!1){(O||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let j=this.view.root.activeElement,U=j==this.dom,F=!U&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(j&&this.dom.contains(j));if(!(U||Q||F))return;let q=this.forceSelection;this.forceSelection=!1;let W=this.view.state.selection.main,Y=this.domAtPos(W.anchor),G=W.empty?Y:this.domAtPos(W.head);if(browser.gecko&&W.empty&&!this.compositionDeco.size&&betweenUneditable(Y)){let J=document.createTextNode("");this.view.observer.ignore(()=>Y.node.insertBefore(J,Y.node.childNodes[Y.offset]||null)),Y=G=new DOMPos(J,0),q=!0}let K=this.view.observer.selectionRange;(q||!K.focusNode||!isEquivalentPosition(Y.node,Y.offset,K.anchorNode,K.anchorOffset)||!isEquivalentPosition(G.node,G.offset,K.focusNode,K.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(K.focusNode)&&inUneditable(K.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let J=getSelection(this.view.root);if(J)if(W.empty){if(browser.gecko){let ee=nextToUneditable(Y.node,Y.offset);if(ee&&ee!=3){let te=nearbyTextNode(Y.node,Y.offset,ee==1?1:-1);te&&(Y=new DOMPos(te,ee==1?0:te.nodeValue.length))}}J.collapse(Y.node,Y.offset),W.bidiLevel!=null&&K.cursorBidiLevel!=null&&(K.cursorBidiLevel=W.bidiLevel)}else if(J.extend){J.collapse(Y.node,Y.offset);try{J.extend(G.node,G.offset)}catch{}}else{let ee=document.createRange();W.anchor>W.head&&([Y,G]=[G,Y]),ee.setEnd(G.node,G.offset),ee.setStart(Y.node,Y.offset),J.removeAllRanges(),J.addRange(ee)}F&&this.view.root.activeElement==this.dom&&(this.dom.blur(),j&&j.focus())}),this.view.observer.setSelectionRange(Y,G)),this.impreciseAnchor=Y.precise?null:new DOMPos(K.anchorNode,K.anchorOffset),this.impreciseHead=G.precise?null:new DOMPos(K.focusNode,K.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:O}=this,Q=O.state.selection.main,j=getSelection(O.root),{anchorNode:U,anchorOffset:F}=O.observer.selectionRange;if(!j||!Q.empty||!Q.assoc||!j.modify)return;let q=LineView.find(this,Q.head);if(!q)return;let W=q.posAtStart;if(Q.head==W||Q.head==W+q.length)return;let Y=this.coordsAt(Q.head,-1),G=this.coordsAt(Q.head,1);if(!Y||!G||Y.bottom>G.top)return;let K=this.domAtPos(Q.head+Q.assoc);j.collapse(K.node,K.offset),j.modify("move",Q.assoc<0?"forward":"backward","lineboundary"),O.observer.readSelectionRange();let J=O.observer.selectionRange;O.docView.posFromDOM(J.anchorNode,J.anchorOffset)!=Q.from&&j.collapse(U,F)}nearest(O){for(let Q=O;Q;){let j=ContentView.get(Q);if(j&&j.rootView==this)return j;Q=Q.parentNode}return null}posFromDOM(O,Q){let j=this.nearest(O);if(!j)throw new RangeError("Trying to find position for a DOM position outside of the document");return j.localPosFromDOM(O,Q)+j.posAtStart}domAtPos(O){let{i:Q,off:j}=this.childCursor().findPos(O,-1);for(;Q<this.children.length-1;){let U=this.children[Q];if(j<U.length||U instanceof LineView)break;Q++,j=0}return this.children[Q].domAtPos(j)}coordsAt(O,Q){for(let j=this.length,U=this.children.length-1;;U--){let F=this.children[U],q=j-F.breakAfter-F.length;if(O>q||O==q&&F.type!=BlockType.WidgetBefore&&F.type!=BlockType.WidgetAfter&&(!U||Q==2||this.children[U-1].breakAfter||this.children[U-1].type==BlockType.WidgetBefore&&Q>-2))return F.coordsAt(O-q,Q);j=q}}measureVisibleLineHeights(O){let Q=[],{from:j,to:U}=O,F=this.view.contentDOM.clientWidth,q=F>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,W=-1,Y=this.view.textDirection==Direction.LTR;for(let G=0,K=0;K<this.children.length;K++){let J=this.children[K],ee=G+J.length;if(ee>U)break;if(G>=j){let te=J.dom.getBoundingClientRect();if(Q.push(te.height),q){let re=J.dom.lastChild,oe=re?clientRectsFor(re):[];if(oe.length){let se=oe[oe.length-1],ne=Y?se.right-te.left:te.right-se.left;ne>W&&(W=ne,this.minWidth=F,this.minWidthFrom=G,this.minWidthTo=ee)}}}G=ee+J.breakAfter}return Q}textDirectionAt(O){let{i:Q}=this.childPos(O,1);return getComputedStyle(this.children[Q].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let F of this.children)if(F instanceof LineView){let q=F.measureTextSize();if(q)return q}let O=document.createElement("div"),Q,j,U;return O.className="cm-line",O.style.width="99999px",O.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(O);let F=clientRectsFor(O.firstChild)[0];Q=O.getBoundingClientRect().height,j=F?F.width/27:7,U=F?F.height:Q,O.remove()}),{lineHeight:Q,charWidth:j,textHeight:U}}childCursor(O=this.length){let Q=this.children.length;return Q&&(O-=this.children[--Q].length),new ChildCursor(this.children,O,Q)}computeBlockGapDeco(){let O=[],Q=this.view.viewState;for(let j=0,U=0;;U++){let F=U==Q.viewports.length?null:Q.viewports[U],q=F?F.from-1:this.length;if(q>j){let W=Q.lineBlockAt(q).bottom-Q.lineBlockAt(j).top;O.push(Decoration.replace({widget:new BlockGapWidget(W),block:!0,inclusive:!0,isBlockGap:!0}).range(j,q))}if(!F)break;j=F.to+1}return Decoration.set(O)}updateDeco(){let O=this.view.state.facet(decorations).map((Q,j)=>(this.dynamicDecorationMap[j]=typeof Q=="function")?Q(this.view):Q);for(let Q=O.length;Q<O.length+3;Q++)this.dynamicDecorationMap[Q]=!1;return this.decorations=[...O,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(O){let{range:Q}=O,j=this.coordsAt(Q.head,Q.empty?Q.assoc:Q.head>Q.anchor?-1:1),U;if(!j)return;!Q.empty&&(U=this.coordsAt(Q.anchor,Q.anchor>Q.head?-1:1))&&(j={left:Math.min(j.left,U.left),top:Math.min(j.top,U.top),right:Math.max(j.right,U.right),bottom:Math.max(j.bottom,U.bottom)});let F=getScrollMargins(this.view),q={left:j.left-F.left,top:j.top-F.top,right:j.right+F.right,bottom:j.bottom+F.bottom};scrollRectIntoView(this.view.scrollDOM,q,Q.head<Q.anchor?-1:1,O.x,O.y,O.xMargin,O.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(X){return X.node.nodeType==1&&X.node.firstChild&&(X.offset==0||X.node.childNodes[X.offset-1].contentEditable=="false")&&(X.offset==X.node.childNodes.length||X.node.childNodes[X.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(O){super(),this.height=O}toDOM(){let O=document.createElement("div");return this.updateDOM(O),O}eq(O){return O.height==this.height}updateDOM(O){return O.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(X){let O=X.observer.selectionRange,Q=O.focusNode&&nearbyTextNode(O.focusNode,O.focusOffset,0);if(!Q)return null;let j=X.docView.nearest(Q);if(!j)return null;if(j instanceof LineView){let U=Q;for(;U.parentNode!=j.dom;)U=U.parentNode;let F=U.previousSibling;for(;F&&!ContentView.get(F);)F=F.previousSibling;let q=F?ContentView.get(F).posAtEnd:j.posAtStart;return{from:q,to:q,node:U,text:Q}}else{for(;;){let{parent:F}=j;if(!F)return null;if(F instanceof LineView)break;j=F}let U=j.posAtStart;return{from:U,to:U+j.length,node:j.dom,text:Q}}}const noComp={deco:Decoration.none,node:null};function computeCompositionDeco(X,O){let Q=compositionSurroundingNode(X);if(!Q)return noComp;let{from:j,to:U,node:F,text:q}=Q,W=O.mapPos(j,1),Y=Math.max(W,O.mapPos(U,-1)),{state:G}=X,K=new DOMReader([],G);F.nodeType==3?K.readTextNode(F):K.readRange(F.firstChild,null);let{text:J}=K;if(J.indexOf(LineBreakPlaceholder)>-1)return noComp;if(Y-W<J.length)if(G.doc.sliceString(W,Math.min(G.doc.length,W+J.length))==J)Y=W+J.length;else if(G.doc.sliceString(Math.max(0,Y-J.length),Y)==J)W=Y-J.length;else return noComp;else if(G.doc.sliceString(W,Y)!=J)return noComp;let ee=ContentView.get(F);return ee instanceof CompositionView?ee=ee.widget.topView:ee&&(ee.parent=null),{deco:Decoration.set(Decoration.replace({widget:new CompositionWidget(F,q,ee),inclusive:!0}).range(W,Y)),node:F}}class CompositionWidget extends WidgetType{constructor(O,Q,j){super(),this.top=O,this.text=Q,this.topView=j}eq(O){return this.top==O.top&&this.text==O.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(X,O,Q){if(Q<=0)for(let j=X,U=O;;){if(j.nodeType==3)return j;if(j.nodeType==1&&U>0)j=j.childNodes[U-1],U=maxOffset(j);else break}if(Q>=0)for(let j=X,U=O;;){if(j.nodeType==3)return j;if(j.nodeType==1&&U<j.childNodes.length&&Q>=0)j=j.childNodes[U],U=0;else break}return null}function nextToUneditable(X,O){return X.nodeType!=1?0:(O&&X.childNodes[O-1].contentEditable=="false"?1:0)|(O<X.childNodes.length&&X.childNodes[O].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(O,Q){addRange(O,Q,this.changes)}comparePoint(O,Q){addRange(O,Q,this.changes)}}function findChangedDeco(X,O,Q){let j=new DecorationComparator$1;return RangeSet.compare(X,O,Q,j),j.changes}function inUneditable(X,O){for(let Q=X;Q&&Q!=O;Q=Q.assignedSlot||Q.parentNode)if(Q.nodeType==1&&Q.contentEditable=="false")return!0;return!1}function groupAt(X,O,Q=1){let j=X.charCategorizer(O),U=X.doc.lineAt(O),F=O-U.from;if(U.length==0)return EditorSelection.cursor(O);F==0?Q=1:F==U.length&&(Q=-1);let q=F,W=F;Q<0?q=findClusterBreak(U.text,F,!1):W=findClusterBreak(U.text,F);let Y=j(U.text.slice(q,W));for(;q>0;){let G=findClusterBreak(U.text,q,!1);if(j(U.text.slice(G,q))!=Y)break;q=G}for(;W<U.length;){let G=findClusterBreak(U.text,W);if(j(U.text.slice(W,G))!=Y)break;W=G}return EditorSelection.range(q+U.from,W+U.from)}function getdx(X,O){return O.left>X?O.left-X:Math.max(0,X-O.right)}function getdy(X,O){return O.top>X?O.top-X:Math.max(0,X-O.bottom)}function yOverlap(X,O){return X.top<O.bottom-1&&X.bottom>O.top+1}function upTop(X,O){return O<X.top?{top:O,left:X.left,right:X.right,bottom:X.bottom}:X}function upBot(X,O){return O>X.bottom?{top:X.top,left:X.left,right:X.right,bottom:O}:X}function domPosAtCoords(X,O,Q){let j,U,F,q,W=!1,Y,G,K,J;for(let re=X.firstChild;re;re=re.nextSibling){let oe=clientRectsFor(re);for(let se=0;se<oe.length;se++){let ne=oe[se];U&&yOverlap(U,ne)&&(ne=upTop(upBot(ne,U.bottom),U.top));let de=getdx(O,ne),he=getdy(Q,ne);if(de==0&&he==0)return re.nodeType==3?domPosInText(re,O,Q):domPosAtCoords(re,O,Q);if(!j||q>he||q==he&&F>de){j=re,U=ne,F=de,q=he;let fe=he?Q<ne.top?-1:1:de?O<ne.left?-1:1:0;W=!fe||(fe>0?se<oe.length-1:se>0)}de==0?Q>ne.bottom&&(!K||K.bottom<ne.bottom)?(Y=re,K=ne):Q<ne.top&&(!J||J.top>ne.top)&&(G=re,J=ne):K&&yOverlap(K,ne)?K=upBot(K,ne.bottom):J&&yOverlap(J,ne)&&(J=upTop(J,ne.top))}}if(K&&K.bottom>=Q?(j=Y,U=K):J&&J.top<=Q&&(j=G,U=J),!j)return{node:X,offset:0};let ee=Math.max(U.left,Math.min(U.right,O));if(j.nodeType==3)return domPosInText(j,ee,Q);if(W&&j.contentEditable!="false")return domPosAtCoords(j,ee,Q);let te=Array.prototype.indexOf.call(X.childNodes,j)+(O>=(U.left+U.right)/2?1:0);return{node:X,offset:te}}function domPosInText(X,O,Q){let j=X.nodeValue.length,U=-1,F=1e9,q=0;for(let W=0;W<j;W++){let Y=textRange(X,W,W+1).getClientRects();for(let G=0;G<Y.length;G++){let K=Y[G];if(K.top==K.bottom)continue;q||(q=O-K.left);let J=(K.top>Q?K.top-Q:Q-K.bottom)-1;if(K.left-1<=O&&K.right+1>=O&&J<F){let ee=O>=(K.left+K.right)/2,te=ee;if((browser.chrome||browser.gecko)&&textRange(X,W).getBoundingClientRect().left==K.right&&(te=!ee),J<=0)return{node:X,offset:W+(te?1:0)};U=W+(te?1:0),F=J}}}return{node:X,offset:U>-1?U:q>0?X.nodeValue.length:0}}function posAtCoords(X,O,Q,j=-1){var U,F;let q=X.contentDOM.getBoundingClientRect(),W=q.top+X.viewState.paddingTop,Y,{docHeight:G}=X.viewState,{x:K,y:J}=O,ee=J-W;if(ee<0)return 0;if(ee>G)return X.state.doc.length;for(let fe=X.viewState.heightOracle.textHeight/2,Oe=!1;Y=X.elementAtHeight(ee),Y.type!=BlockType.Text;)for(;ee=j>0?Y.bottom+fe:Y.top-fe,!(ee>=0&&ee<=G);){if(Oe)return Q?null:0;Oe=!0,j=-j}J=W+ee;let te=Y.from;if(te<X.viewport.from)return X.viewport.from==0?0:Q?null:posAtCoordsImprecise(X,q,Y,K,J);if(te>X.viewport.to)return X.viewport.to==X.state.doc.length?X.state.doc.length:Q?null:posAtCoordsImprecise(X,q,Y,K,J);let re=X.dom.ownerDocument,oe=X.root.elementFromPoint?X.root:re,se=oe.elementFromPoint(K,J);se&&!X.contentDOM.contains(se)&&(se=null),se||(K=Math.max(q.left+1,Math.min(q.right-1,K)),se=oe.elementFromPoint(K,J),se&&!X.contentDOM.contains(se)&&(se=null));let ne,de=-1;if(se&&((U=X.docView.nearest(se))===null||U===void 0?void 0:U.isEditable)!=!1){if(re.caretPositionFromPoint){let fe=re.caretPositionFromPoint(K,J);fe&&({offsetNode:ne,offset:de}=fe)}else if(re.caretRangeFromPoint){let fe=re.caretRangeFromPoint(K,J);fe&&({startContainer:ne,startOffset:de}=fe,(!X.contentDOM.contains(ne)||browser.safari&&isSuspiciousSafariCaretResult(ne,de,K)||browser.chrome&&isSuspiciousChromeCaretResult(ne,de,K))&&(ne=void 0))}}if(!ne||!X.docView.dom.contains(ne)){let fe=LineView.find(X.docView,te);if(!fe)return ee>Y.top+Y.height/2?Y.to:Y.from;({node:ne,offset:de}=domPosAtCoords(fe.dom,K,J))}let he=X.docView.nearest(ne);if(!he)return null;if(he.isWidget&&((F=he.dom)===null||F===void 0?void 0:F.nodeType)==1){let fe=he.dom.getBoundingClientRect();return O.y<fe.top||O.y<=fe.bottom&&O.x<=(fe.left+fe.right)/2?he.posAtStart:he.posAtEnd}else return he.localPosFromDOM(ne,de)+he.posAtStart}function posAtCoordsImprecise(X,O,Q,j,U){let F=Math.round((j-O.left)*X.defaultCharacterWidth);if(X.lineWrapping&&Q.height>X.defaultLineHeight*1.5){let W=X.viewState.heightOracle.textHeight;F+=Math.floor((U-Q.top-(X.defaultLineHeight-W)*.5)/W)*X.viewState.heightOracle.lineLength}let q=X.state.sliceDoc(Q.from,Q.to);return Q.from+findColumn(q,F,X.state.tabSize)}function isSuspiciousSafariCaretResult(X,O,Q){let j;if(X.nodeType!=3||O!=(j=X.nodeValue.length))return!1;for(let U=X.nextSibling;U;U=U.nextSibling)if(U.nodeType!=1||U.nodeName!="BR")return!1;return textRange(X,j-1,j).getBoundingClientRect().left>Q}function isSuspiciousChromeCaretResult(X,O,Q){if(O!=0)return!1;for(let U=X;;){let F=U.parentNode;if(!F||F.nodeType!=1||F.firstChild!=U)return!1;if(F.classList.contains("cm-line"))break;U=F}let j=X.nodeType==1?X.getBoundingClientRect():textRange(X,0,Math.max(X.nodeValue.length,1)).getBoundingClientRect();return Q-j.left>5}function blockAt(X,O){let Q=X.lineBlockAt(O);if(Array.isArray(Q.type)){for(let j of Q.type)if(j.to>O||j.to==O&&(j.to==Q.to||j.type==BlockType.Text))return j}return Q}function moveToLineBoundary(X,O,Q,j){let U=blockAt(X,O.head),F=!j||U.type!=BlockType.Text||!(X.lineWrapping||U.widgetLineBreaks)?null:X.coordsAtPos(O.assoc<0&&O.head>U.from?O.head-1:O.head);if(F){let q=X.dom.getBoundingClientRect(),W=X.textDirectionAt(U.from),Y=X.posAtCoords({x:Q==(W==Direction.LTR)?q.right-1:q.left+1,y:(F.top+F.bottom)/2});if(Y!=null)return EditorSelection.cursor(Y,Q?-1:1)}return EditorSelection.cursor(Q?U.to:U.from,Q?-1:1)}function moveByChar(X,O,Q,j){let U=X.state.doc.lineAt(O.head),F=X.bidiSpans(U),q=X.textDirectionAt(U.from);for(let W=O,Y=null;;){let G=moveVisually(U,F,q,W,Q),K=movedOver;if(!G){if(U.number==(Q?X.state.doc.lines:1))return W;K=`
`,U=X.state.doc.line(U.number+(Q?1:-1)),F=X.bidiSpans(U),G=EditorSelection.cursor(Q?U.from:U.to)}if(Y){if(!Y(K))return W}else{if(!j)return G;Y=j(K)}W=G}}function byGroup(X,O,Q){let j=X.state.charCategorizer(O),U=j(Q);return F=>{let q=j(F);return U==CharCategory.Space&&(U=q),U==q}}function moveVertically(X,O,Q,j){let U=O.head,F=Q?1:-1;if(U==(Q?X.state.doc.length:0))return EditorSelection.cursor(U,O.assoc);let q=O.goalColumn,W,Y=X.contentDOM.getBoundingClientRect(),G=X.coordsAtPos(U),K=X.documentTop;if(G)q==null&&(q=G.left-Y.left),W=F<0?G.top:G.bottom;else{let te=X.viewState.lineBlockAt(U);q==null&&(q=Math.min(Y.right-Y.left,X.defaultCharacterWidth*(U-te.from))),W=(F<0?te.top:te.bottom)+K}let J=Y.left+q,ee=j!=null?j:X.viewState.heightOracle.textHeight>>1;for(let te=0;;te+=10){let re=W+(ee+te)*F,oe=posAtCoords(X,{x:J,y:re},!1,F);if(re<Y.top||re>Y.bottom||(F<0?oe<U:oe>U))return EditorSelection.cursor(oe,O.assoc,void 0,q)}}function skipAtomicRanges(X,O,Q){for(;;){let j=0;for(let U of X)U.between(O-1,O+1,(F,q,W)=>{if(O>F&&O<q){let Y=j||Q||(O-F<q-O?-1:1);O=Y<0?F:q,j=Y}});if(!j)return O}}function skipAtoms(X,O,Q){let j=skipAtomicRanges(X.state.facet(atomicRanges).map(U=>U(X)),Q.from,O.head>Q.from?-1:1);return j==Q.from?Q:EditorSelection.cursor(j,j<Q.from?1:-1)}class InputState{constructor(O){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let Q=(j,U)=>{this.ignoreDuringComposition(U)||U.type=="keydown"&&this.keydown(O,U)||(this.mustFlushObserver(U)&&O.observer.forceFlush(),this.runCustomHandlers(U.type,O,U)?U.preventDefault():j(O,U))};for(let j in handlers){let U=handlers[j];O.contentDOM.addEventListener(j,F=>{eventBelongsToEditor(O,F)&&Q(U,F)},handlerOptions[j]),this.registeredEvents.push(j)}O.scrollDOM.addEventListener("mousedown",j=>{if(j.target==O.scrollDOM&&j.clientY>O.contentDOM.getBoundingClientRect().bottom&&(Q(handlers.mousedown,j),!j.defaultPrevented&&j.button==2)){let U=O.contentDOM.style.minHeight;O.contentDOM.style.minHeight="100%",setTimeout(()=>O.contentDOM.style.minHeight=U,200)}}),O.scrollDOM.addEventListener("drop",j=>{j.target==O.scrollDOM&&j.clientY>O.contentDOM.getBoundingClientRect().bottom&&Q(handlers.drop,j)}),browser.chrome&&browser.chrome_version==102&&O.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?O.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,O.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=O.hasFocus,browser.safari&&O.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(O){this.lastSelectionOrigin=O,this.lastSelectionTime=Date.now()}ensureHandlers(O,Q){var j;let U;this.customHandlers=[];for(let F of Q)if(U=(j=F.update(O).spec)===null||j===void 0?void 0:j.domEventHandlers){this.customHandlers.push({plugin:F.value,handlers:U});for(let q in U)this.registeredEvents.indexOf(q)<0&&q!="scroll"&&(this.registeredEvents.push(q),O.contentDOM.addEventListener(q,W=>{!eventBelongsToEditor(O,W)||this.runCustomHandlers(q,O,W)&&W.preventDefault()}))}}runCustomHandlers(O,Q,j){for(let U of this.customHandlers){let F=U.handlers[O];if(F)try{if(F.call(U.plugin,j,Q)||j.defaultPrevented)return!0}catch(q){logException(Q.state,q)}}return!1}runScrollHandlers(O,Q){this.lastScrollTop=O.scrollDOM.scrollTop,this.lastScrollLeft=O.scrollDOM.scrollLeft;for(let j of this.customHandlers){let U=j.handlers.scroll;if(U)try{U.call(j.plugin,Q,O)}catch(F){logException(O.state,F)}}}keydown(O,Q){if(this.lastKeyCode=Q.keyCode,this.lastKeyTime=Date.now(),Q.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Q.keyCode!=27&&modifierCodes.indexOf(Q.keyCode)<0&&(O.inputState.lastEscPress=0),browser.android&&browser.chrome&&!Q.synthetic&&(Q.keyCode==13||Q.keyCode==8))return O.observer.delayAndroidKey(Q.key,Q.keyCode),!0;let j;return browser.ios&&!Q.synthetic&&!Q.altKey&&!Q.metaKey&&((j=PendingKeys.find(U=>U.keyCode==Q.keyCode))&&!Q.ctrlKey||EmacsyPendingKeys.indexOf(Q.key)>-1&&Q.ctrlKey&&!Q.shiftKey)?(this.pendingIOSKey=j||Q,setTimeout(()=>this.flushIOSKey(O),250),!0):!1}flushIOSKey(O){let Q=this.pendingIOSKey;return Q?(this.pendingIOSKey=void 0,dispatchKey(O.contentDOM,Q.key,Q.keyCode)):!1}ignoreDuringComposition(O){return/^key/.test(O.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(O){return O.type=="keydown"&&O.keyCode!=229}startMouseSelection(O){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=O}update(O){this.mouseSelection&&this.mouseSelection.update(O),O.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(X){return Math.max(0,X)*.7+8}class MouseSelection{constructor(O,Q,j,U){this.view=O,this.style=j,this.mustSelect=U,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=Q,this.scrollParent=scrollableParent(O.contentDOM),this.atoms=O.state.facet(atomicRanges).map(q=>q(O));let F=O.contentDOM.ownerDocument;F.addEventListener("mousemove",this.move=this.move.bind(this)),F.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=Q.shiftKey,this.multiple=O.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(O,Q),this.dragging=isInPrimarySelection(O,Q)&&getClickType(Q)==1?null:!1}start(O){this.dragging===!1&&(O.preventDefault(),this.select(O))}move(O){var Q;if(O.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=O);let j=0,U=0,F=((Q=this.scrollParent)===null||Q===void 0?void 0:Q.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},q=getScrollMargins(this.view);O.clientX-q.left<=F.left+dragScrollMargin?j=-dragScrollSpeed(F.left-O.clientX):O.clientX+q.right>=F.right-dragScrollMargin&&(j=dragScrollSpeed(O.clientX-F.right)),O.clientY-q.top<=F.top+dragScrollMargin?U=-dragScrollSpeed(F.top-O.clientY):O.clientY+q.bottom>=F.bottom-dragScrollMargin&&(U=dragScrollSpeed(O.clientY-F.bottom)),this.setScrollSpeed(j,U)}up(O){this.dragging==null&&this.select(this.lastEvent),this.dragging||O.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let O=this.view.contentDOM.ownerDocument;O.removeEventListener("mousemove",this.move),O.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(O,Q){this.scrollSpeed={x:O,y:Q},O||Q?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(O){let Q=null;for(let j=0;j<O.ranges.length;j++){let U=O.ranges[j],F=null;if(U.empty){let q=skipAtomicRanges(this.atoms,U.from,0);q!=U.from&&(F=EditorSelection.cursor(q,-1))}else{let q=skipAtomicRanges(this.atoms,U.from,-1),W=skipAtomicRanges(this.atoms,U.to,1);(q!=U.from||W!=U.to)&&(F=EditorSelection.range(U.from==U.anchor?q:W,U.from==U.head?q:W))}F&&(Q||(Q=O.ranges.slice()),Q[j]=F)}return Q?EditorSelection.create(Q,O.mainIndex):O}select(O){let{view:Q}=this,j=this.skipAtoms(this.style.get(O,this.extend,this.multiple));(this.mustSelect||!j.eq(Q.state.selection)||j.main.assoc!=Q.state.selection.main.assoc)&&this.view.dispatch({selection:j,userEvent:"select.pointer"}),this.mustSelect=!1}update(O){O.docChanged&&this.dragging&&(this.dragging=this.dragging.map(O.changes)),this.style.update(O)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(X,O){let Q=X.state.facet(clickAddsSelectionRange);return Q.length?Q[0](O):browser.mac?O.metaKey:O.ctrlKey}function dragMovesSelection(X,O){let Q=X.state.facet(dragMovesSelection$1);return Q.length?Q[0](O):browser.mac?!O.altKey:!O.ctrlKey}function isInPrimarySelection(X,O){let{main:Q}=X.state.selection;if(Q.empty)return!1;let j=getSelection(X.root);if(!j||j.rangeCount==0)return!0;let U=j.getRangeAt(0).getClientRects();for(let F=0;F<U.length;F++){let q=U[F];if(q.left<=O.clientX&&q.right>=O.clientX&&q.top<=O.clientY&&q.bottom>=O.clientY)return!0}return!1}function eventBelongsToEditor(X,O){if(!O.bubbles)return!0;if(O.defaultPrevented)return!1;for(let Q=O.target,j;Q!=X.contentDOM;Q=Q.parentNode)if(!Q||Q.nodeType==11||(j=ContentView.get(Q))&&j.ignoreEvent(O))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(X){let O=X.dom.parentNode;if(!O)return;let Q=O.appendChild(document.createElement("textarea"));Q.style.cssText="position: fixed; left: -10000px; top: 10px",Q.focus(),setTimeout(()=>{X.focus(),Q.remove(),doPaste(X,Q.value)},50)}function doPaste(X,O){let{state:Q}=X,j,U=1,F=Q.toText(O),q=F.lines==Q.selection.ranges.length;if(lastLinewiseCopy!=null&&Q.selection.ranges.every(Y=>Y.empty)&&lastLinewiseCopy==F.toString()){let Y=-1;j=Q.changeByRange(G=>{let K=Q.doc.lineAt(G.from);if(K.from==Y)return{range:G};Y=K.from;let J=Q.toText((q?F.line(U++).text:O)+Q.lineBreak);return{changes:{from:K.from,insert:J},range:EditorSelection.cursor(G.from+J.length)}})}else q?j=Q.changeByRange(Y=>{let G=F.line(U++);return{changes:{from:Y.from,to:Y.to,insert:G.text},range:EditorSelection.cursor(Y.from+G.length)}}):j=Q.replaceSelection(F);X.dispatch(j,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(X,O)=>{X.inputState.setSelectionOrigin("select"),O.keyCode==27&&(X.inputState.lastEscPress=Date.now())};handlers.touchstart=(X,O)=>{X.inputState.lastTouchTime=Date.now(),X.inputState.setSelectionOrigin("select.pointer")};handlers.touchmove=X=>{X.inputState.setSelectionOrigin("select.pointer")};handlerOptions.touchstart=handlerOptions.touchmove={passive:!0};handlers.mousedown=(X,O)=>{if(X.observer.flush(),X.inputState.lastTouchTime>Date.now()-2e3)return;let Q=null;for(let j of X.state.facet(mouseSelectionStyle))if(Q=j(X,O),Q)break;if(!Q&&O.button==0&&(Q=basicMouseSelection(X,O)),Q){let j=!X.hasFocus;X.inputState.startMouseSelection(new MouseSelection(X,O,Q,j)),j&&X.observer.ignore(()=>focusPreventScroll(X.contentDOM)),X.inputState.mouseSelection&&X.inputState.mouseSelection.start(O)}};function rangeForClick(X,O,Q,j){if(j==1)return EditorSelection.cursor(O,Q);if(j==2)return groupAt(X.state,O,Q);{let U=LineView.find(X.docView,O),F=X.state.doc.lineAt(U?U.posAtEnd:O),q=U?U.posAtStart:F.from,W=U?U.posAtEnd:F.to;return W<X.state.doc.length&&W==F.to&&W++,EditorSelection.range(q,W)}}let insideY=(X,O)=>X>=O.top&&X<=O.bottom,inside=(X,O,Q)=>insideY(O,Q)&&X>=Q.left&&X<=Q.right;function findPositionSide(X,O,Q,j){let U=LineView.find(X.docView,O);if(!U)return 1;let F=O-U.posAtStart;if(F==0)return 1;if(F==U.length)return-1;let q=U.coordsAt(F,-1);if(q&&inside(Q,j,q))return-1;let W=U.coordsAt(F,1);return W&&inside(Q,j,W)?1:q&&insideY(j,q)?-1:1}function queryPos(X,O){let Q=X.posAtCoords({x:O.clientX,y:O.clientY},!1);return{pos:Q,bias:findPositionSide(X,Q,O.clientX,O.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(X){if(!BadMouseDetail)return X.detail;let O=lastMouseDown,Q=lastMouseDownTime;return lastMouseDown=X,lastMouseDownTime=Date.now(),lastMouseDownCount=!O||Q>Date.now()-400&&Math.abs(O.clientX-X.clientX)<2&&Math.abs(O.clientY-X.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(X,O){let Q=queryPos(X,O),j=getClickType(O),U=X.state.selection;return{update(F){F.docChanged&&(Q.pos=F.changes.mapPos(Q.pos),U=U.map(F.changes))},get(F,q,W){let Y=queryPos(X,F),G,K=rangeForClick(X,Y.pos,Y.bias,j);if(Q.pos!=Y.pos&&!q){let J=rangeForClick(X,Q.pos,Q.bias,j),ee=Math.min(J.from,K.from),te=Math.max(J.to,K.to);K=ee<K.from?EditorSelection.range(ee,te):EditorSelection.range(te,ee)}return q?U.replaceRange(U.main.extend(K.from,K.to)):W&&j==1&&U.ranges.length>1&&(G=removeRangeAround(U,Y.pos))?G:W?U.addRange(K):EditorSelection.create([K])}}}function removeRangeAround(X,O){for(let Q=0;Q<X.ranges.length;Q++){let{from:j,to:U}=X.ranges[Q];if(j<=O&&U>=O)return EditorSelection.create(X.ranges.slice(0,Q).concat(X.ranges.slice(Q+1)),X.mainIndex==Q?0:X.mainIndex-(X.mainIndex>Q?1:0))}return null}handlers.dragstart=(X,O)=>{let{selection:{main:Q}}=X.state,{mouseSelection:j}=X.inputState;j&&(j.dragging=Q),O.dataTransfer&&(O.dataTransfer.setData("Text",X.state.sliceDoc(Q.from,Q.to)),O.dataTransfer.effectAllowed="copyMove")};function dropText(X,O,Q,j){if(!Q)return;let U=X.posAtCoords({x:O.clientX,y:O.clientY},!1);O.preventDefault();let{mouseSelection:F}=X.inputState,q=j&&F&&F.dragging&&dragMovesSelection(X,O)?{from:F.dragging.from,to:F.dragging.to}:null,W={from:U,insert:Q},Y=X.state.changes(q?[q,W]:W);X.focus(),X.dispatch({changes:Y,selection:{anchor:Y.mapPos(U,-1),head:Y.mapPos(U,1)},userEvent:q?"move.drop":"input.drop"})}handlers.drop=(X,O)=>{if(!O.dataTransfer)return;if(X.state.readOnly)return O.preventDefault();let Q=O.dataTransfer.files;if(Q&&Q.length){O.preventDefault();let j=Array(Q.length),U=0,F=()=>{++U==Q.length&&dropText(X,O,j.filter(q=>q!=null).join(X.state.lineBreak),!1)};for(let q=0;q<Q.length;q++){let W=new FileReader;W.onerror=F,W.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(W.result)||(j[q]=W.result),F()},W.readAsText(Q[q])}}else dropText(X,O,O.dataTransfer.getData("Text"),!0)};handlers.paste=(X,O)=>{if(X.state.readOnly)return O.preventDefault();X.observer.flush();let Q=brokenClipboardAPI?null:O.clipboardData;Q?(doPaste(X,Q.getData("text/plain")||Q.getData("text/uri-text")),O.preventDefault()):capturePaste(X)};function captureCopy(X,O){let Q=X.dom.parentNode;if(!Q)return;let j=Q.appendChild(document.createElement("textarea"));j.style.cssText="position: fixed; left: -10000px; top: 10px",j.value=O,j.focus(),j.selectionEnd=O.length,j.selectionStart=0,setTimeout(()=>{j.remove(),X.focus()},50)}function copiedRange(X){let O=[],Q=[],j=!1;for(let U of X.selection.ranges)U.empty||(O.push(X.sliceDoc(U.from,U.to)),Q.push(U));if(!O.length){let U=-1;for(let{from:F}of X.selection.ranges){let q=X.doc.lineAt(F);q.number>U&&(O.push(q.text),Q.push({from:q.from,to:Math.min(X.doc.length,q.to+1)})),U=q.number}j=!0}return{text:O.join(X.lineBreak),ranges:Q,linewise:j}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(X,O)=>{let{text:Q,ranges:j,linewise:U}=copiedRange(X.state);if(!Q&&!U)return;lastLinewiseCopy=U?Q:null;let F=brokenClipboardAPI?null:O.clipboardData;F?(O.preventDefault(),F.clearData(),F.setData("text/plain",Q)):captureCopy(X,Q),O.type=="cut"&&!X.state.readOnly&&X.dispatch({changes:j,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(X,O){let Q=[];for(let j of X.facet(focusChangeEffect)){let U=j(X,O);U&&Q.push(U)}return Q?X.update({effects:Q,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(X){setTimeout(()=>{let O=X.hasFocus;if(O!=X.inputState.notifiedFocused){let Q=focusChangeTransaction(X.state,O);Q?X.dispatch(Q):X.update([])}},10)}handlers.focus=X=>{X.inputState.lastFocusTime=Date.now(),!X.scrollDOM.scrollTop&&(X.inputState.lastScrollTop||X.inputState.lastScrollLeft)&&(X.scrollDOM.scrollTop=X.inputState.lastScrollTop,X.scrollDOM.scrollLeft=X.inputState.lastScrollLeft),updateForFocusChange(X)};handlers.blur=X=>{X.observer.clearSelectionRange(),updateForFocusChange(X)};handlers.compositionstart=handlers.compositionupdate=X=>{X.inputState.compositionFirstChange==null&&(X.inputState.compositionFirstChange=!0),X.inputState.composing<0&&(X.inputState.composing=0)};handlers.compositionend=X=>{X.inputState.composing=-1,X.inputState.compositionEndedAt=Date.now(),X.inputState.compositionPendingKey=!0,X.inputState.compositionPendingChange=X.observer.pendingRecords().length>0,X.inputState.compositionFirstChange=null,browser.chrome&&browser.android?X.observer.flushSoon():X.inputState.compositionPendingChange?Promise.resolve().then(()=>X.observer.flush()):setTimeout(()=>{X.inputState.composing<0&&X.docView.compositionDeco.size&&X.update([])},50)};handlers.contextmenu=X=>{X.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(X,O)=>{var Q;let j;if(browser.chrome&&browser.android&&(j=PendingKeys.find(U=>U.inputType==O.inputType))&&(X.observer.delayAndroidKey(j.key,j.keyCode),j.key=="Backspace"||j.key=="Delete")){let U=((Q=window.visualViewport)===null||Q===void 0?void 0:Q.height)||0;setTimeout(()=>{var F;(((F=window.visualViewport)===null||F===void 0?void 0:F.height)||0)>U+10&&X.hasFocus&&(X.contentDOM.blur(),X.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(O){this.lineWrapping=O,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(O,Q){let j=this.doc.lineAt(Q).number-this.doc.lineAt(O).number+1;return this.lineWrapping&&(j+=Math.max(0,Math.ceil((Q-O-j*this.lineLength*.5)/this.lineLength))),this.lineHeight*j}heightForLine(O){return this.lineWrapping?(1+Math.max(0,Math.ceil((O-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(O){return this.doc=O,this}mustRefreshForWrapping(O){return wrappingWhiteSpace.indexOf(O)>-1!=this.lineWrapping}mustRefreshForHeights(O){let Q=!1;for(let j=0;j<O.length;j++){let U=O[j];U<0?j++:this.heightSamples[Math.floor(U*10)]||(Q=!0,this.heightSamples[Math.floor(U*10)]=!0)}return Q}refresh(O,Q,j,U,F,q){let W=wrappingWhiteSpace.indexOf(O)>-1,Y=Math.round(Q)!=Math.round(this.lineHeight)||this.lineWrapping!=W;if(this.lineWrapping=W,this.lineHeight=Q,this.charWidth=j,this.textHeight=U,this.lineLength=F,Y){this.heightSamples={};for(let G=0;G<q.length;G++){let K=q[G];K<0?G++:this.heightSamples[Math.floor(K*10)]=!0}}return Y}}class MeasuredHeights{constructor(O,Q){this.from=O,this.heights=Q,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(O,Q,j,U,F){this.from=O,this.length=Q,this.top=j,this.height=U,this._content=F}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(O){let Q=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(O._content)?O._content:[O]);return new BlockInfo(this.from,this.length+O.length,this.top,this.height+O.height,Q)}}var QueryType$1=function(X){return X[X.ByPos=0]="ByPos",X[X.ByHeight=1]="ByHeight",X[X.ByPosNoHeight=2]="ByPosNoHeight",X}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(O,Q,j=2){this.length=O,this.height=Q,this.flags=j}get outdated(){return(this.flags&2)>0}set outdated(O){this.flags=(O?2:0)|this.flags&-3}setHeight(O,Q){this.height!=Q&&(Math.abs(this.height-Q)>Epsilon&&(O.heightChanged=!0),this.height=Q)}replace(O,Q,j){return HeightMap.of(j)}decomposeLeft(O,Q){Q.push(this)}decomposeRight(O,Q){Q.push(this)}applyChanges(O,Q,j,U){let F=this,q=j.doc;for(let W=U.length-1;W>=0;W--){let{fromA:Y,toA:G,fromB:K,toB:J}=U[W],ee=F.lineAt(Y,QueryType$1.ByPosNoHeight,j.setDoc(Q),0,0),te=ee.to>=G?ee:F.lineAt(G,QueryType$1.ByPosNoHeight,j,0,0);for(J+=te.to-G,G=te.to;W>0&&ee.from<=U[W-1].toA;)Y=U[W-1].fromA,K=U[W-1].fromB,W--,Y<ee.from&&(ee=F.lineAt(Y,QueryType$1.ByPosNoHeight,j,0,0));K+=ee.from-Y,Y=ee.from;let re=NodeBuilder.build(j.setDoc(q),O,K,J);F=F.replace(Y,G,re)}return F.updateHeight(j,0)}static empty(){return new HeightMapText(0,0)}static of(O){if(O.length==1)return O[0];let Q=0,j=O.length,U=0,F=0;for(;;)if(Q==j)if(U>F*2){let W=O[Q-1];W.break?O.splice(--Q,1,W.left,null,W.right):O.splice(--Q,1,W.left,W.right),j+=1+W.break,U-=W.size}else if(F>U*2){let W=O[j];W.break?O.splice(j,1,W.left,null,W.right):O.splice(j,1,W.left,W.right),j+=2+W.break,F-=W.size}else break;else if(U<F){let W=O[Q++];W&&(U+=W.size)}else{let W=O[--j];W&&(F+=W.size)}let q=0;return O[Q-1]==null?(q=1,Q--):O[Q]==null&&(q=1,j++),new HeightMapBranch(HeightMap.of(O.slice(0,Q)),q,HeightMap.of(O.slice(j)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(O,Q,j){super(O,Q),this.deco=j}blockAt(O,Q,j,U){return new BlockInfo(U,this.length,j,this.height,this.deco||0)}lineAt(O,Q,j,U,F){return this.blockAt(0,j,U,F)}forEachLine(O,Q,j,U,F,q){O<=F+this.length&&Q>=F&&q(this.blockAt(0,j,U,F))}updateHeight(O,Q=0,j=!1,U){return U&&U.from<=Q&&U.more&&this.setHeight(O,U.heights[U.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(O,Q){super(O,Q,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(O,Q,j,U){return new BlockInfo(U,this.length,j,this.height,this.breaks)}replace(O,Q,j){let U=j[0];return j.length==1&&(U instanceof HeightMapText||U instanceof HeightMapGap&&U.flags&4)&&Math.abs(this.length-U.length)<10?(U instanceof HeightMapGap?U=new HeightMapText(U.length,this.height):U.height=this.height,this.outdated||(U.outdated=!1),U):HeightMap.of(j)}updateHeight(O,Q=0,j=!1,U){return U&&U.from<=Q&&U.more?this.setHeight(O,U.heights[U.index++]):(j||this.outdated)&&this.setHeight(O,Math.max(this.widgetHeight,O.heightForLine(this.length-this.collapsed))+this.breaks*O.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(O){super(O,0)}heightMetrics(O,Q){let j=O.doc.lineAt(Q).number,U=O.doc.lineAt(Q+this.length).number,F=U-j+1,q,W=0;if(O.lineWrapping){let Y=Math.min(this.height,O.lineHeight*F);q=Y/F,this.length>F+1&&(W=(this.height-Y)/(this.length-F-1))}else q=this.height/F;return{firstLine:j,lastLine:U,perLine:q,perChar:W}}blockAt(O,Q,j,U){let{firstLine:F,lastLine:q,perLine:W,perChar:Y}=this.heightMetrics(Q,U);if(Q.lineWrapping){let G=U+Math.round(Math.max(0,Math.min(1,(O-j)/this.height))*this.length),K=Q.doc.lineAt(G),J=W+K.length*Y,ee=Math.max(j,O-J/2);return new BlockInfo(K.from,K.length,ee,J,0)}else{let G=Math.max(0,Math.min(q-F,Math.floor((O-j)/W))),{from:K,length:J}=Q.doc.line(F+G);return new BlockInfo(K,J,j+W*G,W,0)}}lineAt(O,Q,j,U,F){if(Q==QueryType$1.ByHeight)return this.blockAt(O,j,U,F);if(Q==QueryType$1.ByPosNoHeight){let{from:te,to:re}=j.doc.lineAt(O);return new BlockInfo(te,re-te,0,0,0)}let{firstLine:q,perLine:W,perChar:Y}=this.heightMetrics(j,F),G=j.doc.lineAt(O),K=W+G.length*Y,J=G.number-q,ee=U+W*J+Y*(G.from-F-J);return new BlockInfo(G.from,G.length,Math.max(U,Math.min(ee,U+this.height-K)),K,0)}forEachLine(O,Q,j,U,F,q){O=Math.max(O,F),Q=Math.min(Q,F+this.length);let{firstLine:W,perLine:Y,perChar:G}=this.heightMetrics(j,F);for(let K=O,J=U;K<=Q;){let ee=j.doc.lineAt(K);if(K==O){let re=ee.number-W;J+=Y*re+G*(O-F-re)}let te=Y+G*ee.length;q(new BlockInfo(ee.from,ee.length,J,te,0)),J+=te,K=ee.to+1}}replace(O,Q,j){let U=this.length-Q;if(U>0){let F=j[j.length-1];F instanceof HeightMapGap?j[j.length-1]=new HeightMapGap(F.length+U):j.push(null,new HeightMapGap(U-1))}if(O>0){let F=j[0];F instanceof HeightMapGap?j[0]=new HeightMapGap(O+F.length):j.unshift(new HeightMapGap(O-1),null)}return HeightMap.of(j)}decomposeLeft(O,Q){Q.push(new HeightMapGap(O-1),null)}decomposeRight(O,Q){Q.push(null,new HeightMapGap(this.length-O-1))}updateHeight(O,Q=0,j=!1,U){let F=Q+this.length;if(U&&U.from<=Q+this.length&&U.more){let q=[],W=Math.max(Q,U.from),Y=-1;for(U.from>Q&&q.push(new HeightMapGap(U.from-Q-1).updateHeight(O,Q));W<=F&&U.more;){let K=O.doc.lineAt(W).length;q.length&&q.push(null);let J=U.heights[U.index++];Y==-1?Y=J:Math.abs(J-Y)>=Epsilon&&(Y=-2);let ee=new HeightMapText(K,J);ee.outdated=!1,q.push(ee),W+=K+1}W<=F&&q.push(null,new HeightMapGap(F-W).updateHeight(O,W));let G=HeightMap.of(q);return(Y<0||Math.abs(G.height-this.height)>=Epsilon||Math.abs(Y-this.heightMetrics(O,Q).perLine)>=Epsilon)&&(O.heightChanged=!0),G}else(j||this.outdated)&&(this.setHeight(O,O.heightForGap(Q,Q+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(O,Q,j){super(O.length+Q+j.length,O.height+j.height,Q|(O.outdated||j.outdated?2:0)),this.left=O,this.right=j,this.size=O.size+j.size}get break(){return this.flags&1}blockAt(O,Q,j,U){let F=j+this.left.height;return O<F?this.left.blockAt(O,Q,j,U):this.right.blockAt(O,Q,F,U+this.left.length+this.break)}lineAt(O,Q,j,U,F){let q=U+this.left.height,W=F+this.left.length+this.break,Y=Q==QueryType$1.ByHeight?O<q:O<W,G=Y?this.left.lineAt(O,Q,j,U,F):this.right.lineAt(O,Q,j,q,W);if(this.break||(Y?G.to<W:G.from>W))return G;let K=Q==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return Y?G.join(this.right.lineAt(W,K,j,q,W)):this.left.lineAt(W,K,j,U,F).join(G)}forEachLine(O,Q,j,U,F,q){let W=U+this.left.height,Y=F+this.left.length+this.break;if(this.break)O<Y&&this.left.forEachLine(O,Q,j,U,F,q),Q>=Y&&this.right.forEachLine(O,Q,j,W,Y,q);else{let G=this.lineAt(Y,QueryType$1.ByPos,j,U,F);O<G.from&&this.left.forEachLine(O,G.from-1,j,U,F,q),G.to>=O&&G.from<=Q&&q(G),Q>G.to&&this.right.forEachLine(G.to+1,Q,j,W,Y,q)}}replace(O,Q,j){let U=this.left.length+this.break;if(Q<U)return this.balanced(this.left.replace(O,Q,j),this.right);if(O>this.left.length)return this.balanced(this.left,this.right.replace(O-U,Q-U,j));let F=[];O>0&&this.decomposeLeft(O,F);let q=F.length;for(let W of j)F.push(W);if(O>0&&mergeGaps(F,q-1),Q<this.length){let W=F.length;this.decomposeRight(Q,F),mergeGaps(F,W)}return HeightMap.of(F)}decomposeLeft(O,Q){let j=this.left.length;if(O<=j)return this.left.decomposeLeft(O,Q);Q.push(this.left),this.break&&(j++,O>=j&&Q.push(null)),O>j&&this.right.decomposeLeft(O-j,Q)}decomposeRight(O,Q){let j=this.left.length,U=j+this.break;if(O>=U)return this.right.decomposeRight(O-U,Q);O<j&&this.left.decomposeRight(O,Q),this.break&&O<U&&Q.push(null),Q.push(this.right)}balanced(O,Q){return O.size>2*Q.size||Q.size>2*O.size?HeightMap.of(this.break?[O,null,Q]:[O,Q]):(this.left=O,this.right=Q,this.height=O.height+Q.height,this.outdated=O.outdated||Q.outdated,this.size=O.size+Q.size,this.length=O.length+this.break+Q.length,this)}updateHeight(O,Q=0,j=!1,U){let{left:F,right:q}=this,W=Q+F.length+this.break,Y=null;return U&&U.from<=Q+F.length&&U.more?Y=F=F.updateHeight(O,Q,j,U):F.updateHeight(O,Q,j),U&&U.from<=W+q.length&&U.more?Y=q=q.updateHeight(O,W,j,U):q.updateHeight(O,W,j),Y?this.balanced(F,q):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(X,O){let Q,j;X[O]==null&&(Q=X[O-1])instanceof HeightMapGap&&(j=X[O+1])instanceof HeightMapGap&&X.splice(O-1,3,new HeightMapGap(Q.length+1+j.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(O,Q){this.pos=O,this.oracle=Q,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=O}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(O,Q){if(this.lineStart>-1){let j=Math.min(Q,this.lineEnd),U=this.nodes[this.nodes.length-1];U instanceof HeightMapText?U.length+=j-this.pos:(j>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(j-this.pos,-1)),this.writtenTo=j,Q>j&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=Q}point(O,Q,j){if(O<Q||j.heightRelevant){let U=j.widget?j.widget.estimatedHeight:0,F=j.widget?j.widget.lineBreaks:0;U<0&&(U=this.oracle.lineHeight);let q=Q-O;j.block?this.addBlock(new HeightMapBlock(q,U,j)):(q||F||U>=relevantWidgetHeight)&&this.addLineDeco(U,F,q)}else Q>O&&this.span(O,Q);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:O,to:Q}=this.oracle.doc.lineAt(this.pos);this.lineStart=O,this.lineEnd=Q,this.writtenTo<O&&((this.writtenTo<O-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,O-1)),this.nodes.push(null)),this.pos>O&&this.nodes.push(new HeightMapText(this.pos-O,-1)),this.writtenTo=this.pos}blankContent(O,Q){let j=new HeightMapGap(Q-O);return this.oracle.doc.lineAt(O).to==Q&&(j.flags|=4),j}ensureLine(){this.enterLine();let O=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(O instanceof HeightMapText)return O;let Q=new HeightMapText(0,-1);return this.nodes.push(Q),Q}addBlock(O){var Q;this.enterLine();let j=(Q=O.deco)===null||Q===void 0?void 0:Q.type;j==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(O),this.writtenTo=this.pos=this.pos+O.length,j!=BlockType.WidgetBefore&&(this.covering=O)}addLineDeco(O,Q,j){let U=this.ensureLine();U.length+=j,U.collapsed+=j,U.widgetHeight=Math.max(U.widgetHeight,O),U.breaks+=Q,this.writtenTo=this.pos=this.pos+j}finish(O){let Q=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(Q instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||Q==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let j=O;for(let U of this.nodes)U instanceof HeightMapText&&U.updateHeight(this.oracle,j),j+=U?U.length:1;return this.nodes}static build(O,Q,j,U){let F=new NodeBuilder(j,O);return RangeSet.spans(Q,j,U,F,0),F.finish(j)}}function heightRelevantDecoChanges(X,O,Q){let j=new DecorationComparator;return RangeSet.compare(X,O,Q,j,0),j.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(O,Q,j,U){(O<Q||j&&j.heightRelevant||U&&U.heightRelevant)&&addRange(O,Q,this.changes,5)}}function visiblePixelRange(X,O){let Q=X.getBoundingClientRect(),j=X.ownerDocument,U=j.defaultView||window,F=Math.max(0,Q.left),q=Math.min(U.innerWidth,Q.right),W=Math.max(0,Q.top),Y=Math.min(U.innerHeight,Q.bottom);for(let G=X.parentNode;G&&G!=j.body;)if(G.nodeType==1){let K=G,J=window.getComputedStyle(K);if((K.scrollHeight>K.clientHeight||K.scrollWidth>K.clientWidth)&&J.overflow!="visible"){let ee=K.getBoundingClientRect();F=Math.max(F,ee.left),q=Math.min(q,ee.right),W=Math.max(W,ee.top),Y=G==X.parentNode?ee.bottom:Math.min(Y,ee.bottom)}G=J.position=="absolute"||J.position=="fixed"?K.offsetParent:K.parentNode}else if(G.nodeType==11)G=G.host;else break;return{left:F-Q.left,right:Math.max(F,q)-Q.left,top:W-(Q.top+O),bottom:Math.max(W,Y)-(Q.top+O)}}function fullPixelRange(X,O){let Q=X.getBoundingClientRect();return{left:0,right:Q.right-Q.left,top:O,bottom:Q.bottom-(Q.top+O)}}class LineGap{constructor(O,Q,j){this.from=O,this.to=Q,this.size=j}static same(O,Q){if(O.length!=Q.length)return!1;for(let j=0;j<O.length;j++){let U=O[j],F=Q[j];if(U.from!=F.from||U.to!=F.to||U.size!=F.size)return!1}return!0}draw(O){return Decoration.replace({widget:new LineGapWidget(this.size,O)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(O,Q){super(),this.size=O,this.vertical=Q}eq(O){return O.size==this.size&&O.vertical==this.vertical}toDOM(){let O=document.createElement("div");return this.vertical?O.style.height=this.size+"px":(O.style.width=this.size+"px",O.style.height="2px",O.style.display="inline-block"),O}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(O){this.state=O,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let Q=O.facet(contentAttributes).some(j=>typeof j!="function"&&j.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(Q),this.stateDeco=O.facet(decorations).filter(j=>typeof j!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(O.doc),[new ChangedRange(0,0,0,O.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(j=>j.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let O=[this.viewport],{main:Q}=this.state.selection;for(let j=0;j<=1;j++){let U=j?Q.head:Q.anchor;if(!O.some(({from:F,to:q})=>U>=F&&U<=q)){let{from:F,to:q}=this.lineBlockAt(U);O.push(new Viewport(F,q))}}this.viewports=O.sort((j,U)=>j.from-U.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,O=>{this.viewportLines.push(this.scaler.scale==1?O:scaleBlock(O,this.scaler))})}update(O,Q=null){this.state=O.state;let j=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(K=>typeof K!="function");let U=O.changedRanges,F=ChangedRange.extendWithRanges(U,heightRelevantDecoChanges(j,this.stateDeco,O?O.changes:ChangeSet.empty(this.state.doc.length))),q=this.heightMap.height,W=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,O.startState.doc,this.heightOracle.setDoc(this.state.doc),F),this.heightMap.height!=q&&(O.flags|=2),W?(this.scrollAnchorPos=O.changes.mapPos(W.from,-1),this.scrollAnchorHeight=W.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let Y=F.length?this.mapViewport(this.viewport,O.changes):this.viewport;(Q&&(Q.range.head<Y.from||Q.range.head>Y.to)||!this.viewportIsAppropriate(Y))&&(Y=this.getViewport(0,Q));let G=!O.changes.empty||O.flags&2||Y.from!=this.viewport.from||Y.to!=this.viewport.to;this.viewport=Y,this.updateForViewport(),G&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,O.changes))),O.flags|=this.computeVisibleRanges(),Q&&(this.scrollTarget=Q),!this.mustEnforceCursorAssoc&&O.selectionSet&&O.view.lineWrapping&&O.state.selection.main.empty&&O.state.selection.main.assoc&&!O.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(O){let Q=O.contentDOM,j=window.getComputedStyle(Q),U=this.heightOracle,F=j.whiteSpace;this.defaultTextDirection=j.direction=="rtl"?Direction.RTL:Direction.LTR;let q=this.heightOracle.mustRefreshForWrapping(F),W=Q.getBoundingClientRect(),Y=q||this.mustMeasureContent||this.contentDOMHeight!=W.height;this.contentDOMHeight=W.height,this.mustMeasureContent=!1;let G=0,K=0,J=parseInt(j.paddingTop)||0,ee=parseInt(j.paddingBottom)||0;(this.paddingTop!=J||this.paddingBottom!=ee)&&(this.paddingTop=J,this.paddingBottom=ee,G|=10),this.editorWidth!=O.scrollDOM.clientWidth&&(U.lineWrapping&&(Y=!0),this.editorWidth=O.scrollDOM.clientWidth,G|=8),this.scrollTop!=O.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=O.scrollDOM.scrollTop),this.scrolledToBottom=isScrolledToBottom(O.scrollDOM);let te=(this.printing?fullPixelRange:visiblePixelRange)(Q,this.paddingTop),re=te.top-this.pixelViewport.top,oe=te.bottom-this.pixelViewport.bottom;this.pixelViewport=te;let se=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(se!=this.inView&&(this.inView=se,se&&(Y=!0)),!this.inView&&!this.scrollTarget)return 0;let ne=W.width;if((this.contentDOMWidth!=ne||this.editorHeight!=O.scrollDOM.clientHeight)&&(this.contentDOMWidth=W.width,this.editorHeight=O.scrollDOM.clientHeight,G|=8),Y){let he=O.docView.measureVisibleLineHeights(this.viewport);if(U.mustRefreshForHeights(he)&&(q=!0),q||U.lineWrapping&&Math.abs(ne-this.contentDOMWidth)>U.charWidth){let{lineHeight:fe,charWidth:Oe,textHeight:ce}=O.docView.measureTextSize();q=fe>0&&U.refresh(F,fe,Oe,ce,ne/Oe,he),q&&(O.docView.minWidth=0,G|=8)}re>0&&oe>0?K=Math.max(re,oe):re<0&&oe<0&&(K=Math.min(re,oe)),U.heightChanged=!1;for(let fe of this.viewports){let Oe=fe.from==this.viewport.from?he:O.docView.measureVisibleLineHeights(fe);this.heightMap=(q?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,O.state.doc.length)]):this.heightMap).updateHeight(U,0,q,new MeasuredHeights(fe.from,Oe))}U.heightChanged&&(G|=2)}let de=!this.viewportIsAppropriate(this.viewport,K)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return de&&(this.viewport=this.getViewport(K,this.scrollTarget)),this.updateForViewport(),(G&2||de)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(q?[]:this.lineGaps,O)),G|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,O.docView.enforceCursorAssoc()),G}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(O,Q){let j=.5-Math.max(-.5,Math.min(.5,O/1e3/2)),U=this.heightMap,F=this.heightOracle,{visibleTop:q,visibleBottom:W}=this,Y=new Viewport(U.lineAt(q-j*1e3,QueryType$1.ByHeight,F,0,0).from,U.lineAt(W+(1-j)*1e3,QueryType$1.ByHeight,F,0,0).to);if(Q){let{head:G}=Q.range;if(G<Y.from||G>Y.to){let K=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),J=U.lineAt(G,QueryType$1.ByPos,F,0,0),ee;Q.y=="center"?ee=(J.top+J.bottom)/2-K/2:Q.y=="start"||Q.y=="nearest"&&G<Y.from?ee=J.top:ee=J.bottom-K,Y=new Viewport(U.lineAt(ee-1e3/2,QueryType$1.ByHeight,F,0,0).from,U.lineAt(ee+K+1e3/2,QueryType$1.ByHeight,F,0,0).to)}}return Y}mapViewport(O,Q){let j=Q.mapPos(O.from,-1),U=Q.mapPos(O.to,1);return new Viewport(this.heightMap.lineAt(j,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(U,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:O,to:Q},j=0){if(!this.inView)return!0;let{top:U}=this.heightMap.lineAt(O,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:F}=this.heightMap.lineAt(Q,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:q,visibleBottom:W}=this;return(O==0||U<=q-Math.max(10,Math.min(-j,250)))&&(Q==this.state.doc.length||F>=W+Math.max(10,Math.min(j,250)))&&U>q-2*1e3&&F<W+2*1e3}mapLineGaps(O,Q){if(!O.length||Q.empty)return O;let j=[];for(let U of O)Q.touchesRange(U.from,U.to)||j.push(new LineGap(Q.mapPos(U.from),Q.mapPos(U.to),U.size));return j}ensureLineGaps(O,Q){let j=this.heightOracle.lineWrapping,U=j?1e4:2e3,F=U>>1,q=U<<1;if(this.defaultTextDirection!=Direction.LTR&&!j)return[];let W=[],Y=(G,K,J,ee)=>{if(K-G<F)return;let te=this.state.selection.main,re=[te.from];te.empty||re.push(te.to);for(let se of re)if(se>G&&se<K){Y(G,se-10,J,ee),Y(se+10,K,J,ee);return}let oe=find(O,se=>se.from>=J.from&&se.to<=J.to&&Math.abs(se.from-G)<F&&Math.abs(se.to-K)<F&&!re.some(ne=>se.from<ne&&se.to>ne));if(!oe){if(K<J.to&&Q&&j&&Q.visibleRanges.some(se=>se.from<=K&&se.to>=K)){let se=Q.moveToLineBoundary(EditorSelection.cursor(K),!1,!0).head;se>G&&(K=se)}oe=new LineGap(G,K,this.gapSize(J,G,K,ee))}W.push(oe)};for(let G of this.viewportLines){if(G.length<q)continue;let K=lineStructure(G.from,G.to,this.stateDeco);if(K.total<q)continue;let J=this.scrollTarget?this.scrollTarget.range.head:null,ee,te;if(j){let re=U/this.heightOracle.lineLength*this.heightOracle.lineHeight,oe,se;if(J!=null){let ne=findFraction(K,J),de=((this.visibleBottom-this.visibleTop)/2+re)/G.height;oe=ne-de,se=ne+de}else oe=(this.visibleTop-G.top-re)/G.height,se=(this.visibleBottom-G.top+re)/G.height;ee=findPosition(K,oe),te=findPosition(K,se)}else{let re=K.total*this.heightOracle.charWidth,oe=U*this.heightOracle.charWidth,se,ne;if(J!=null){let de=findFraction(K,J),he=((this.pixelViewport.right-this.pixelViewport.left)/2+oe)/re;se=de-he,ne=de+he}else se=(this.pixelViewport.left-oe)/re,ne=(this.pixelViewport.right+oe)/re;ee=findPosition(K,se),te=findPosition(K,ne)}ee>G.from&&Y(G.from,ee,G,K),te<G.to&&Y(te,G.to,G,K)}return W}gapSize(O,Q,j,U){let F=findFraction(U,j)-findFraction(U,Q);return this.heightOracle.lineWrapping?O.height*F:U.total*this.heightOracle.charWidth*F}updateLineGaps(O){LineGap.same(O,this.lineGaps)||(this.lineGaps=O,this.lineGapDeco=Decoration.set(O.map(Q=>Q.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let O=this.stateDeco;this.lineGaps.length&&(O=O.concat(this.lineGapDeco));let Q=[];RangeSet.spans(O,this.viewport.from,this.viewport.to,{span(U,F){Q.push({from:U,to:F})},point(){}},20);let j=Q.length!=this.visibleRanges.length||this.visibleRanges.some((U,F)=>U.from!=Q[F].from||U.to!=Q[F].to);return this.visibleRanges=Q,j?4:0}lineBlockAt(O){return O>=this.viewport.from&&O<=this.viewport.to&&this.viewportLines.find(Q=>Q.from<=O&&Q.to>=O)||scaleBlock(this.heightMap.lineAt(O,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(O){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(O),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(O){let Q=this.lineBlockAtHeight(O+8);return Q.from>=this.viewport.from||this.viewportLines[0].top-O>200?Q:this.viewportLines[0]}elementAtHeight(O){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(O),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(O,Q){this.from=O,this.to=Q}}function lineStructure(X,O,Q){let j=[],U=X,F=0;return RangeSet.spans(Q,X,O,{span(){},point(q,W){q>U&&(j.push({from:U,to:q}),F+=q-U),U=W}},20),U<O&&(j.push({from:U,to:O}),F+=O-U),{total:F,ranges:j}}function findPosition({total:X,ranges:O},Q){if(Q<=0)return O[0].from;if(Q>=1)return O[O.length-1].to;let j=Math.floor(X*Q);for(let U=0;;U++){let{from:F,to:q}=O[U],W=q-F;if(j<=W)return F+j;j-=W}}function findFraction(X,O){let Q=0;for(let{from:j,to:U}of X.ranges){if(O<=U){Q+=O-j;break}Q+=U-j}return Q/X.total}function find(X,O){for(let Q of X)if(O(Q))return Q}const IdScaler={toDOM(X){return X},fromDOM(X){return X},scale:1};class BigScaler{constructor(O,Q,j){let U=0,F=0,q=0;this.viewports=j.map(({from:W,to:Y})=>{let G=Q.lineAt(W,QueryType$1.ByPos,O,0,0).top,K=Q.lineAt(Y,QueryType$1.ByPos,O,0,0).bottom;return U+=K-G,{from:W,to:Y,top:G,bottom:K,domTop:0,domBottom:0}}),this.scale=(7e6-U)/(Q.height-U);for(let W of this.viewports)W.domTop=q+(W.top-F)*this.scale,q=W.domBottom=W.domTop+(W.bottom-W.top),F=W.bottom}toDOM(O){for(let Q=0,j=0,U=0;;Q++){let F=Q<this.viewports.length?this.viewports[Q]:null;if(!F||O<F.top)return U+(O-j)*this.scale;if(O<=F.bottom)return F.domTop+(O-F.top);j=F.bottom,U=F.domBottom}}fromDOM(O){for(let Q=0,j=0,U=0;;Q++){let F=Q<this.viewports.length?this.viewports[Q]:null;if(!F||O<F.domTop)return j+(O-U)/this.scale;if(O<=F.domBottom)return F.top+(O-F.domTop);j=F.bottom,U=F.domBottom}}}function scaleBlock(X,O){if(O.scale==1)return X;let Q=O.toDOM(X.top),j=O.toDOM(X.bottom);return new BlockInfo(X.from,X.length,Q,j-Q,Array.isArray(X._content)?X._content.map(U=>scaleBlock(U,O)):X._content)}const theme=Facet.define({combine:X=>X.join(" ")}),darkTheme=Facet.define({combine:X=>X.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(X,O,Q){return new StyleModule(O,{finish(j){return/&/.test(j)?j.replace(/&\w*/,U=>{if(U=="&")return X;if(!Q||!Q[U])throw new RangeError(`Unsupported selector: ${U}`);return Q[U]}):X+" "+j}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor(O,Q,j,U){this.typeOver=U,this.bounds=null,this.text="";let{impreciseHead:F,impreciseAnchor:q}=O.docView;if(O.state.readOnly&&Q>-1)this.newSel=null;else if(Q>-1&&(this.bounds=O.docView.domBoundsAround(Q,j,0))){let W=F||q?[]:selectionPoints(O),Y=new DOMReader(W,O.state);Y.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=Y.text,this.newSel=selectionFromPoints(W,this.bounds.from)}else{let W=O.observer.selectionRange,Y=F&&F.node==W.focusNode&&F.offset==W.focusOffset||!contains(O.contentDOM,W.focusNode)?O.state.selection.main.head:O.docView.posFromDOM(W.focusNode,W.focusOffset),G=q&&q.node==W.anchorNode&&q.offset==W.anchorOffset||!contains(O.contentDOM,W.anchorNode)?O.state.selection.main.anchor:O.docView.posFromDOM(W.anchorNode,W.anchorOffset);this.newSel=EditorSelection.single(G,Y)}}}function applyDOMChange(X,O){let Q,{newSel:j}=O,U=X.state.selection.main,F=X.inputState.lastKeyTime>Date.now()-100?X.inputState.lastKeyCode:-1;if(O.bounds){let{from:q,to:W}=O.bounds,Y=U.from,G=null;(F===8||browser.android&&O.text.length<W-q)&&(Y=U.to,G="end");let K=findDiff(X.state.doc.sliceString(q,W,LineBreakPlaceholder),O.text,Y-q,G);K&&(browser.chrome&&F==13&&K.toB==K.from+2&&O.text.slice(K.from,K.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&K.toB--,Q={from:q+K.from,to:q+K.toA,insert:Text.of(O.text.slice(K.from,K.toB).split(LineBreakPlaceholder))})}else j&&(!X.hasFocus&&X.state.facet(editable)||j.main.eq(U))&&(j=null);if(!Q&&!j)return!1;if(!Q&&O.typeOver&&!U.empty&&j&&j.main.empty?Q={from:U.from,to:U.to,insert:X.state.doc.slice(U.from,U.to)}:Q&&Q.from>=U.from&&Q.to<=U.to&&(Q.from!=U.from||Q.to!=U.to)&&U.to-U.from-(Q.to-Q.from)<=4?Q={from:U.from,to:U.to,insert:X.state.doc.slice(U.from,Q.from).append(Q.insert).append(X.state.doc.slice(Q.to,U.to))}:(browser.mac||browser.android)&&Q&&Q.from==Q.to&&Q.from==U.head-1&&/^\. ?$/.test(Q.insert.toString())&&X.contentDOM.getAttribute("autocorrect")=="off"?(j&&Q.insert.length==2&&(j=EditorSelection.single(j.main.anchor-1,j.main.head-1)),Q={from:U.from,to:U.to,insert:Text.of([" "])}):browser.chrome&&Q&&Q.from==Q.to&&Q.from==U.head&&Q.insert.toString()==`
 `&&X.lineWrapping&&(j&&(j=EditorSelection.single(j.main.anchor-1,j.main.head-1)),Q={from:U.from,to:U.to,insert:Text.of([" "])}),Q){let q=X.state;if(browser.ios&&X.inputState.flushIOSKey(X)||browser.android&&(Q.from==U.from&&Q.to==U.to&&Q.insert.length==1&&Q.insert.lines==2&&dispatchKey(X.contentDOM,"Enter",13)||(Q.from==U.from-1&&Q.to==U.to&&Q.insert.length==0||F==8&&Q.insert.length<Q.to-Q.from)&&dispatchKey(X.contentDOM,"Backspace",8)||Q.from==U.from&&Q.to==U.to+1&&Q.insert.length==0&&dispatchKey(X.contentDOM,"Delete",46)))return!0;let W=Q.insert.toString();if(X.state.facet(inputHandler$1).some(K=>K(X,Q.from,Q.to,W)))return!0;X.inputState.composing>=0&&X.inputState.composing++;let Y;if(Q.from>=U.from&&Q.to<=U.to&&Q.to-Q.from>=(U.to-U.from)/3&&(!j||j.main.empty&&j.main.from==Q.from+Q.insert.length)&&X.inputState.composing<0){let K=U.from<Q.from?q.sliceDoc(U.from,Q.from):"",J=U.to>Q.to?q.sliceDoc(Q.to,U.to):"";Y=q.replaceSelection(X.state.toText(K+Q.insert.sliceString(0,void 0,X.state.lineBreak)+J))}else{let K=q.changes(Q),J=j&&j.main.to<=K.newLength?j.main:void 0;if(q.selection.ranges.length>1&&X.inputState.composing>=0&&Q.to<=U.to&&Q.to>=U.to-10){let ee=X.state.sliceDoc(Q.from,Q.to),te=compositionSurroundingNode(X)||X.state.doc.lineAt(U.head),re=U.to-Q.to,oe=U.to-U.from;Y=q.changeByRange(se=>{if(se.from==U.from&&se.to==U.to)return{changes:K,range:J||se.map(K)};let ne=se.to-re,de=ne-ee.length;if(se.to-se.from!=oe||X.state.sliceDoc(de,ne)!=ee||te&&se.to>=te.from&&se.from<=te.to)return{range:se};let he=q.changes({from:de,to:ne,insert:Q.insert}),fe=se.to-U.to;return{changes:he,range:J?EditorSelection.range(Math.max(0,J.anchor+fe),Math.max(0,J.head+fe)):se.map(he)}})}else Y={changes:K,selection:J&&q.selection.replaceRange(J)}}let G="input.type";return(X.composing||X.inputState.compositionPendingChange&&X.inputState.compositionEndedAt>Date.now()-50)&&(X.inputState.compositionPendingChange=!1,G+=".compose",X.inputState.compositionFirstChange&&(G+=".start",X.inputState.compositionFirstChange=!1)),X.dispatch(Y,{scrollIntoView:!0,userEvent:G}),!0}else if(j&&!j.main.eq(U)){let q=!1,W="select";return X.inputState.lastSelectionTime>Date.now()-50&&(X.inputState.lastSelectionOrigin=="select"&&(q=!0),W=X.inputState.lastSelectionOrigin),X.dispatch({selection:j,scrollIntoView:q,userEvent:W}),!0}else return!1}function findDiff(X,O,Q,j){let U=Math.min(X.length,O.length),F=0;for(;F<U&&X.charCodeAt(F)==O.charCodeAt(F);)F++;if(F==U&&X.length==O.length)return null;let q=X.length,W=O.length;for(;q>0&&W>0&&X.charCodeAt(q-1)==O.charCodeAt(W-1);)q--,W--;if(j=="end"){let Y=Math.max(0,F-Math.min(q,W));Q-=q+Y-F}return q<F&&X.length<O.length?(F-=Q<=F&&Q>=q?F-Q:0,W=F+(W-q),q=F):W<F&&(F-=Q<=F&&Q>=W?F-Q:0,q=F+(q-W),W=F),{from:F,toA:q,toB:W}}function selectionPoints(X){let O=[];if(X.root.activeElement!=X.contentDOM)return O;let{anchorNode:Q,anchorOffset:j,focusNode:U,focusOffset:F}=X.observer.selectionRange;return Q&&(O.push(new DOMPoint(Q,j)),(U!=Q||F!=j)&&O.push(new DOMPoint(U,F))),O}function selectionFromPoints(X,O){if(X.length==0)return null;let Q=X[0].pos,j=X.length==2?X[1].pos:Q;return Q>-1&&j>-1?EditorSelection.single(Q+O,j+O):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(O){this.view=O,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=O.contentDOM,this.observer=new MutationObserver(Q=>{for(let j of Q)this.queue.push(j);(browser.ie&&browser.ie_version<=11||browser.ios&&O.composing)&&Q.some(j=>j.type=="childList"&&j.removedNodes.length||j.type=="characterData"&&j.oldValue.length>j.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=Q=>{this.queue.push({target:Q.target,type:"characterData",oldValue:Q.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var Q;((Q=this.view.docView)===null||Q===void 0?void 0:Q.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(O.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(O.contentDOM)),this.addWindowListeners(this.win=O.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(Q=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),Q.length>0&&Q[Q.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(Q=>{Q.length>0&&Q[Q.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(O){this.view.inputState.runScrollHandlers(this.view,O),this.intersecting&&this.view.measure()}onScroll(O){this.intersecting&&this.flush(!1),this.onScrollChanged(O)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(O){if(this.gapIntersection&&(O.length!=this.gaps.length||this.gaps.some((Q,j)=>Q!=O[j]))){this.gapIntersection.disconnect();for(let Q of O)this.gapIntersection.observe(Q);this.gaps=O}}onSelectionChange(O){let Q=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:j}=this,U=this.selectionRange;if(j.state.facet(editable)?j.root.activeElement!=this.dom:!hasSelection(j.dom,U))return;let F=U.anchorNode&&j.docView.nearest(U.anchorNode);if(F&&F.ignoreEvent(O)){Q||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!j.state.selection.main.empty&&U.focusNode&&isEquivalentPosition(U.focusNode,U.focusOffset,U.anchorNode,U.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:O}=this,Q=browser.safari&&O.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(O.root);if(!Q||this.selectionRange.eq(Q))return!1;let j=hasSelection(this.dom,Q);return j&&!this.selectionChanged&&O.inputState.lastFocusTime>Date.now()-200&&O.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,Q)?(this.view.inputState.lastFocusTime=0,O.docView.updateSelection(),!1):(this.selectionRange.setRange(Q),j&&(this.selectionChanged=!0),!0)}setSelectionRange(O,Q){this.selectionRange.set(O.node,O.offset,Q.node,Q.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let O=0,Q=null;for(let j=this.dom;j;)if(j.nodeType==1)!Q&&O<this.scrollTargets.length&&this.scrollTargets[O]==j?O++:Q||(Q=this.scrollTargets.slice(0,O)),Q&&Q.push(j),j=j.assignedSlot||j.parentNode;else if(j.nodeType==11)j=j.host;else break;if(O<this.scrollTargets.length&&!Q&&(Q=this.scrollTargets.slice(0,O)),Q){for(let j of this.scrollTargets)j.removeEventListener("scroll",this.onScroll);for(let j of this.scrollTargets=Q)j.addEventListener("scroll",this.onScroll)}}ignore(O){if(!this.active)return O();try{return this.stop(),O()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(O,Q){var j;if(!this.delayedAndroidKey){let U=()=>{let F=this.delayedAndroidKey;F&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=F.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&F.force&&dispatchKey(this.dom,F.key,F.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(U)}(!this.delayedAndroidKey||O=="Enter")&&(this.delayedAndroidKey={key:O,keyCode:Q,force:this.lastChange<Date.now()-50||!!(!((j=this.delayedAndroidKey)===null||j===void 0)&&j.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let O of this.observer.takeRecords())this.queue.push(O);return this.queue}processRecords(){let O=this.pendingRecords();O.length&&(this.queue=[]);let Q=-1,j=-1,U=!1;for(let F of O){let q=this.readMutation(F);!q||(q.typeOver&&(U=!0),Q==-1?{from:Q,to:j}=q:(Q=Math.min(q.from,Q),j=Math.max(q.to,j)))}return{from:Q,to:j,typeOver:U}}readChange(){let{from:O,to:Q,typeOver:j}=this.processRecords(),U=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return O<0&&!U?null:(O>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,O,Q,j))}flush(O=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;O&&this.readSelectionRange();let Q=this.readChange();if(!Q)return!1;let j=this.view.state,U=applyDOMChange(this.view,Q);return this.view.state==j&&this.view.update([]),U}readMutation(O){let Q=this.view.docView.nearest(O.target);if(!Q||Q.ignoreMutation(O))return null;if(Q.markDirty(O.type=="attributes"),O.type=="attributes"&&(Q.dirty|=4),O.type=="childList"){let j=findChild(Q,O.previousSibling||O.target.previousSibling,-1),U=findChild(Q,O.nextSibling||O.target.nextSibling,1);return{from:j?Q.posAfter(j):Q.posAtStart,to:U?Q.posBefore(U):Q.posAtEnd,typeOver:!1}}else return O.type=="characterData"?{from:Q.posAtStart,to:Q.posAtEnd,typeOver:O.target.nodeValue==O.oldValue}:null}setWindow(O){O!=this.win&&(this.removeWindowListeners(this.win),this.win=O,this.addWindowListeners(this.win))}addWindowListeners(O){O.addEventListener("resize",this.onResize),O.addEventListener("beforeprint",this.onPrint),O.addEventListener("scroll",this.onScroll),O.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(O){O.removeEventListener("scroll",this.onScroll),O.removeEventListener("resize",this.onResize),O.removeEventListener("beforeprint",this.onPrint),O.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var O,Q,j,U;this.stop(),(O=this.intersection)===null||O===void 0||O.disconnect(),(Q=this.gapIntersection)===null||Q===void 0||Q.disconnect(),(j=this.resizeScroll)===null||j===void 0||j.disconnect(),(U=this.resizeContent)===null||U===void 0||U.disconnect();for(let F of this.scrollTargets)F.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(X,O,Q){for(;O;){let j=ContentView.get(O);if(j&&j.parent==X)return j;let U=O.parentNode;O=U!=X.dom?U:Q>0?O.nextSibling:O.previousSibling}return null}function safariSelectionRangeHack(X){let O=null;function Q(Y){Y.preventDefault(),Y.stopImmediatePropagation(),O=Y.getTargetRanges()[0]}if(X.contentDOM.addEventListener("beforeinput",Q,!0),X.dom.ownerDocument.execCommand("indent"),X.contentDOM.removeEventListener("beforeinput",Q,!0),!O)return null;let j=O.startContainer,U=O.startOffset,F=O.endContainer,q=O.endOffset,W=X.docView.domAtPos(X.state.selection.main.anchor);return isEquivalentPosition(W.node,W.offset,F,q)&&([j,U,F,q]=[F,q,j,U]),{anchorNode:j,anchorOffset:U,focusNode:F,focusOffset:q}}class EditorView{constructor(O={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=O.dispatch||(Q=>this.update([Q])),this.dispatch=this.dispatch.bind(this),this._root=O.root||getRoot(O.parent)||document,this.viewState=new ViewState(O.state||EditorState.create(O)),this.plugins=this.state.facet(viewPlugin).map(Q=>new PluginInstance(Q));for(let Q of this.plugins)Q.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),O.parent&&O.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...O){let Q=O.length==1&&O[0]instanceof Transaction?O[0]:this.state.update(...O);this._dispatch(Q,this)}update(O){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let Q=!1,j=!1,U,F=this.state;for(let ee of O){if(ee.startState!=F)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");F=ee.state}if(this.destroyed){this.viewState.state=F;return}let q=this.hasFocus,W=0,Y=null;O.some(ee=>ee.annotation(isFocusChange))?(this.inputState.notifiedFocused=q,W=1):q!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=q,Y=focusChangeTransaction(F,q),Y||(W=1));let G=this.observer.delayedAndroidKey,K=null;if(G?(this.observer.clearDelayedAndroidKey(),K=this.observer.readChange(),(K&&!this.state.doc.eq(F.doc)||!this.state.selection.eq(F.selection))&&(K=null)):this.observer.clear(),F.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(F);U=ViewUpdate.create(this,F,O),U.flags|=W;let J=this.viewState.scrollTarget;try{this.updateState=2;for(let ee of O){if(J&&(J=J.map(ee.changes)),ee.scrollIntoView){let{main:te}=ee.state.selection;J=new ScrollTarget(te.empty?te:EditorSelection.cursor(te.head,te.head>te.anchor?-1:1))}for(let te of ee.effects)te.is(scrollIntoView$1)&&(J=te.value)}this.viewState.update(U,J),this.bidiCache=CachedOrder.update(this.bidiCache,U.changes),U.empty||(this.updatePlugins(U),this.inputState.update(U)),Q=this.docView.update(U),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),j=this.updateAttrs(),this.showAnnouncements(O),this.docView.updateSelection(Q,O.some(ee=>ee.isUserEvent("select.pointer")))}finally{this.updateState=0}if(U.startState.facet(theme)!=U.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(Q||j||J||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!U.empty)for(let ee of this.state.facet(updateListener))ee(U);(Y||K)&&Promise.resolve().then(()=>{Y&&this.state==Y.startState&&this.dispatch(Y),K&&!applyDOMChange(this,K)&&G.force&&dispatchKey(this.contentDOM,G.key,G.keyCode)})}setState(O){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=O;return}this.updateState=2;let Q=this.hasFocus;try{for(let j of this.plugins)j.destroy(this);this.viewState=new ViewState(O),this.plugins=O.facet(viewPlugin).map(j=>new PluginInstance(j)),this.pluginMap.clear();for(let j of this.plugins)j.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}Q&&this.focus(),this.requestMeasure()}updatePlugins(O){let Q=O.startState.facet(viewPlugin),j=O.state.facet(viewPlugin);if(Q!=j){let U=[];for(let F of j){let q=Q.indexOf(F);if(q<0)U.push(new PluginInstance(F));else{let W=this.plugins[q];W.mustUpdate=O,U.push(W)}}for(let F of this.plugins)F.mustUpdate!=O&&F.destroy(this);this.plugins=U,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let U of this.plugins)U.mustUpdate=O;for(let U=0;U<this.plugins.length;U++)this.plugins[U].update(this)}measure(O=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,O&&this.observer.forceFlush();let Q=null,j=this.scrollDOM,{scrollTop:U}=j,{scrollAnchorPos:F,scrollAnchorHeight:q}=this.viewState;U!=this.viewState.scrollTop&&(q=-1),this.viewState.scrollAnchorHeight=-1;try{for(let W=0;;W++){if(q<0)if(isScrolledToBottom(j))F=-1,q=this.viewState.heightMap.height;else{let te=this.viewState.scrollAnchorAt(U);F=te.from,q=te.top}this.updateState=1;let Y=this.viewState.measure(this);if(!Y&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(W>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let G=[];Y&4||([this.measureRequests,G]=[G,this.measureRequests]);let K=G.map(te=>{try{return te.read(this)}catch(re){return logException(this.state,re),BadMeasure}}),J=ViewUpdate.create(this,this.state,[]),ee=!1;J.flags|=Y,Q?Q.flags|=Y:Q=J,this.updateState=2,J.empty||(this.updatePlugins(J),this.inputState.update(J),this.updateAttrs(),ee=this.docView.update(J));for(let te=0;te<G.length;te++)if(K[te]!=BadMeasure)try{let re=G[te];re.write&&re.write(K[te],this)}catch(re){logException(this.state,re)}if(ee&&this.docView.updateSelection(!0),!J.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let re=(F<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(F).top)-q;if(re>1||re<-1){U=j.scrollTop=U+re,q=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(Q&&!Q.empty)for(let W of this.state.facet(updateListener))W(Q)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let O=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),Q={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(Q["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,Q);let j=this.observer.ignore(()=>{let U=updateAttrs(this.contentDOM,this.contentAttrs,Q),F=updateAttrs(this.dom,this.editorAttrs,O);return U||F});return this.editorAttrs=O,this.contentAttrs=Q,j}showAnnouncements(O){let Q=!0;for(let j of O)for(let U of j.effects)if(U.is(EditorView.announce)){Q&&(this.announceDOM.textContent=""),Q=!1;let F=this.announceDOM.appendChild(document.createElement("div"));F.textContent=U.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(O){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),O){if(this.measureRequests.indexOf(O)>-1)return;if(O.key!=null){for(let Q=0;Q<this.measureRequests.length;Q++)if(this.measureRequests[Q].key===O.key){this.measureRequests[Q]=O;return}}this.measureRequests.push(O)}}plugin(O){let Q=this.pluginMap.get(O);return(Q===void 0||Q&&Q.spec!=O)&&this.pluginMap.set(O,Q=this.plugins.find(j=>j.spec==O)||null),Q&&Q.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(O){return this.readMeasured(),this.viewState.elementAtHeight(O)}lineBlockAtHeight(O){return this.readMeasured(),this.viewState.lineBlockAtHeight(O)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(O){return this.viewState.lineBlockAt(O)}get contentHeight(){return this.viewState.contentHeight}moveByChar(O,Q,j){return skipAtoms(this,O,moveByChar(this,O,Q,j))}moveByGroup(O,Q){return skipAtoms(this,O,moveByChar(this,O,Q,j=>byGroup(this,O.head,j)))}moveToLineBoundary(O,Q,j=!0){return moveToLineBoundary(this,O,Q,j)}moveVertically(O,Q,j){return skipAtoms(this,O,moveVertically(this,O,Q,j))}domAtPos(O){return this.docView.domAtPos(O)}posAtDOM(O,Q=0){return this.docView.posFromDOM(O,Q)}posAtCoords(O,Q=!0){return this.readMeasured(),posAtCoords(this,O,Q)}coordsAtPos(O,Q=1){this.readMeasured();let j=this.docView.coordsAt(O,Q);if(!j||j.left==j.right)return j;let U=this.state.doc.lineAt(O),F=this.bidiSpans(U),q=F[BidiSpan.find(F,O-U.from,-1,Q)];return flattenRect(j,q.dir==Direction.LTR==Q>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(O){return!this.state.facet(perLineTextDirection)||O<this.viewport.from||O>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(O))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(O){if(O.length>MaxBidiLine)return trivialOrder(O.length);let Q=this.textDirectionAt(O.from);for(let U of this.bidiCache)if(U.from==O.from&&U.dir==Q)return U.order;let j=computeOrder(O.text,Q);return this.bidiCache.push(new CachedOrder(O.from,O.to,Q,j)),j}get hasFocus(){var O;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((O=this.inputState)===null||O===void 0?void 0:O.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(O){this._root!=O&&(this._root=O,this.observer.setWindow((O.nodeType==9?O:O.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let O of this.plugins)O.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(O,Q={}){return scrollIntoView$1.of(new ScrollTarget(typeof O=="number"?EditorSelection.cursor(O):O,Q.y,Q.x,Q.yMargin,Q.xMargin))}static domEventHandlers(O){return ViewPlugin.define(()=>({}),{eventHandlers:O})}static theme(O,Q){let j=StyleModule.newName(),U=[theme.of(j),styleModule.of(buildTheme(`.${j}`,O))];return Q&&Q.dark&&U.push(darkTheme.of(!0)),U}static baseTheme(O){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,O,lightDarkIDs)))}static findFromDOM(O){var Q;let j=O.querySelector(".cm-content"),U=j&&ContentView.get(j)||ContentView.get(O);return((Q=U==null?void 0:U.rootView)===null||Q===void 0?void 0:Q.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(O,Q,j,U){this.from=O,this.to=Q,this.dir=j,this.order=U}static update(O,Q){if(Q.empty)return O;let j=[],U=O.length?O[O.length-1].dir:Direction.LTR;for(let F=Math.max(0,O.length-10);F<O.length;F++){let q=O[F];q.dir==U&&!Q.touchesRange(q.from,q.to)&&j.push(new CachedOrder(Q.mapPos(q.from,1),Q.mapPos(q.to,-1),q.dir,q.order))}return j}}function attrsFromFacet(X,O,Q){for(let j=X.state.facet(O),U=j.length-1;U>=0;U--){let F=j[U],q=typeof F=="function"?F(X):F;q&&combineAttrs(q,Q)}return Q}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(X,O){const Q=X.split(/-(?!$)/);let j=Q[Q.length-1];j=="Space"&&(j=" ");let U,F,q,W;for(let Y=0;Y<Q.length-1;++Y){const G=Q[Y];if(/^(cmd|meta|m)$/i.test(G))W=!0;else if(/^a(lt)?$/i.test(G))U=!0;else if(/^(c|ctrl|control)$/i.test(G))F=!0;else if(/^s(hift)?$/i.test(G))q=!0;else if(/^mod$/i.test(G))O=="mac"?W=!0:F=!0;else throw new Error("Unrecognized modifier name: "+G)}return U&&(j="Alt-"+j),F&&(j="Ctrl-"+j),W&&(j="Meta-"+j),q&&(j="Shift-"+j),j}function modifiers(X,O,Q){return O.altKey&&(X="Alt-"+X),O.ctrlKey&&(X="Ctrl-"+X),O.metaKey&&(X="Meta-"+X),Q!==!1&&O.shiftKey&&(X="Shift-"+X),X}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(X,O){return runHandlers(getKeymap(O.state),X,O,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(X){let O=X.facet(keymap),Q=Keymaps.get(O);return Q||Keymaps.set(O,Q=buildKeymap(O.reduce((j,U)=>j.concat(U),[]))),Q}function runScopeHandlers(X,O,Q){return runHandlers(getKeymap(X.state),O,X,Q)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(X,O=currentPlatform){let Q=Object.create(null),j=Object.create(null),U=(q,W)=>{let Y=j[q];if(Y==null)j[q]=W;else if(Y!=W)throw new Error("Key binding "+q+" is used both as a regular binding and as a multi-stroke prefix")},F=(q,W,Y,G)=>{var K,J;let ee=Q[q]||(Q[q]=Object.create(null)),te=W.split(/ (?!$)/).map(se=>normalizeKeyName(se,O));for(let se=1;se<te.length;se++){let ne=te.slice(0,se).join(" ");U(ne,!0),ee[ne]||(ee[ne]={preventDefault:!0,run:[de=>{let he=storedPrefix={view:de,prefix:ne,scope:q};return setTimeout(()=>{storedPrefix==he&&(storedPrefix=null)},PrefixTimeout),!0}]})}let re=te.join(" ");U(re,!1);let oe=ee[re]||(ee[re]={preventDefault:!1,run:((J=(K=ee._any)===null||K===void 0?void 0:K.run)===null||J===void 0?void 0:J.slice())||[]});Y&&oe.run.push(Y),G&&(oe.preventDefault=!0)};for(let q of X){let W=q.scope?q.scope.split(" "):["editor"];if(q.any)for(let G of W){let K=Q[G]||(Q[G]=Object.create(null));K._any||(K._any={preventDefault:!1,run:[]});for(let J in K)K[J].run.push(q.any)}let Y=q[O]||q.key;if(!!Y)for(let G of W)F(G,Y,q.run,q.preventDefault),q.shift&&F(G,"Shift-"+Y,q.shift,q.preventDefault)}return Q}function runHandlers(X,O,Q,j){let U=keyName(O),F=codePointAt(U,0),q=codePointSize(F)==U.length&&U!=" ",W="",Y=!1;storedPrefix&&storedPrefix.view==Q&&storedPrefix.scope==j&&(W=storedPrefix.prefix+" ",(Y=modifierCodes.indexOf(O.keyCode)<0)&&(storedPrefix=null));let G=new Set,K=re=>{if(re){for(let oe of re.run)if(!G.has(oe)&&(G.add(oe),oe(Q,O)))return!0;re.preventDefault&&(Y=!0)}return!1},J=X[j],ee,te;if(J){if(K(J[W+modifiers(U,O,!q)]))return!0;if(q&&(O.altKey||O.metaKey||O.ctrlKey)&&!(browser.windows&&O.ctrlKey&&O.altKey)&&(ee=base[O.keyCode])&&ee!=U){if(K(J[W+modifiers(ee,O,!0)]))return!0;if(O.shiftKey&&(te=shift[O.keyCode])!=U&&te!=ee&&K(J[W+modifiers(te,O,!1)]))return!0}else if(q&&O.shiftKey&&K(J[W+modifiers(U,O,!0)]))return!0;if(K(J._any))return!0}return Y}class RectangleMarker{constructor(O,Q,j,U,F){this.className=O,this.left=Q,this.top=j,this.width=U,this.height=F}draw(){let O=document.createElement("div");return O.className=this.className,this.adjust(O),O}update(O,Q){return Q.className!=this.className?!1:(this.adjust(O),!0)}adjust(O){O.style.left=this.left+"px",O.style.top=this.top+"px",this.width!=null&&(O.style.width=this.width+"px"),O.style.height=this.height+"px"}eq(O){return this.left==O.left&&this.top==O.top&&this.width==O.width&&this.height==O.height&&this.className==O.className}static forRange(O,Q,j){if(j.empty){let U=O.coordsAtPos(j.head,j.assoc||1);if(!U)return[];let F=getBase(O);return[new RectangleMarker(Q,U.left-F.left,U.top-F.top,null,U.bottom-U.top)]}else return rectanglesForRange(O,Q,j)}}function getBase(X){let O=X.scrollDOM.getBoundingClientRect();return{left:(X.textDirection==Direction.LTR?O.left:O.right-X.scrollDOM.clientWidth)-X.scrollDOM.scrollLeft,top:O.top-X.scrollDOM.scrollTop}}function wrappedLine(X,O,Q){let j=EditorSelection.cursor(O);return{from:Math.max(Q.from,X.moveToLineBoundary(j,!1,!0).from),to:Math.min(Q.to,X.moveToLineBoundary(j,!0,!0).from),type:BlockType.Text}}function rectanglesForRange(X,O,Q){if(Q.to<=X.viewport.from||Q.from>=X.viewport.to)return[];let j=Math.max(Q.from,X.viewport.from),U=Math.min(Q.to,X.viewport.to),F=X.textDirection==Direction.LTR,q=X.contentDOM,W=q.getBoundingClientRect(),Y=getBase(X),G=q.querySelector(".cm-line"),K=G&&window.getComputedStyle(G),J=W.left+(K?parseInt(K.paddingLeft)+Math.min(0,parseInt(K.textIndent)):0),ee=W.right-(K?parseInt(K.paddingRight):0),te=blockAt(X,j),re=blockAt(X,U),oe=te.type==BlockType.Text?te:null,se=re.type==BlockType.Text?re:null;if(oe&&(X.lineWrapping||te.widgetLineBreaks)&&(oe=wrappedLine(X,j,oe)),se&&(X.lineWrapping||re.widgetLineBreaks)&&(se=wrappedLine(X,U,se)),oe&&se&&oe.from==se.from)return de(he(Q.from,Q.to,oe));{let Oe=oe?he(Q.from,null,oe):fe(te,!1),ce=se?he(null,Q.to,se):fe(re,!0),me=[];return(oe||te).to<(se||re).from-(oe&&se?1:0)||te.widgetLineBreaks>1&&Oe.bottom+X.defaultLineHeight/2<ce.top?me.push(ne(J,Oe.bottom,ee,ce.top)):Oe.bottom<ce.top&&X.elementAtHeight((Oe.bottom+ce.top)/2).type==BlockType.Text&&(Oe.bottom=ce.top=(Oe.bottom+ce.top)/2),de(Oe).concat(me).concat(de(ce))}function ne(Oe,ce,me,we){return new RectangleMarker(O,Oe-Y.left,ce-Y.top-.01,me-Oe,we-ce+.01)}function de({top:Oe,bottom:ce,horizontal:me}){let we=[];for(let ke=0;ke<me.length;ke+=2)we.push(ne(me[ke],Oe,me[ke+1],ce));return we}function he(Oe,ce,me){let we=1e9,ke=-1e9,Ce=[];function Qe(Ie,Ue,Xe,Ke,We){let Ze=X.coordsAtPos(Ie,Ie==me.to?-2:2),_e=X.coordsAtPos(Xe,Xe==me.from?2:-2);!Ze||!_e||(we=Math.min(Ze.top,_e.top,we),ke=Math.max(Ze.bottom,_e.bottom,ke),We==Direction.LTR?Ce.push(F&&Ue?J:Ze.left,F&&Ke?ee:_e.right):Ce.push(!F&&Ke?J:_e.left,!F&&Ue?ee:Ze.right))}let Ae=Oe!=null?Oe:me.from,Be=ce!=null?ce:me.to;for(let Ie of X.visibleRanges)if(Ie.to>Ae&&Ie.from<Be)for(let Ue=Math.max(Ie.from,Ae),Xe=Math.min(Ie.to,Be);;){let Ke=X.state.doc.lineAt(Ue);for(let We of X.bidiSpans(Ke)){let Ze=We.from+Ke.from,_e=We.to+Ke.from;if(Ze>=Xe)break;_e>Ue&&Qe(Math.max(Ze,Ue),Oe==null&&Ze<=Ae,Math.min(_e,Xe),ce==null&&_e>=Be,We.dir)}if(Ue=Ke.to+1,Ue>=Xe)break}return Ce.length==0&&Qe(Ae,Oe==null,Be,ce==null,X.textDirection),{top:we,bottom:ke,horizontal:Ce}}function fe(Oe,ce){let me=W.top+(ce?Oe.top:Oe.bottom);return{top:me,bottom:me,horizontal:[]}}}function sameMarker(X,O){return X.constructor==O.constructor&&X.eq(O)}class LayerView{constructor(O,Q){this.view=O,this.layer=Q,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=O.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),Q.above&&this.dom.classList.add("cm-layer-above"),Q.class&&this.dom.classList.add(Q.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(O.state),O.requestMeasure(this.measureReq),Q.mount&&Q.mount(this.dom,O)}update(O){O.startState.facet(layerOrder)!=O.state.facet(layerOrder)&&this.setOrder(O.state),(this.layer.update(O,this.dom)||O.geometryChanged)&&O.view.requestMeasure(this.measureReq)}setOrder(O){let Q=0,j=O.facet(layerOrder);for(;Q<j.length&&j[Q]!=this.layer;)Q++;this.dom.style.zIndex=String((this.layer.above?150:-1)-Q)}measure(){return this.layer.markers(this.view)}draw(O){if(O.length!=this.drawn.length||O.some((Q,j)=>!sameMarker(Q,this.drawn[j]))){let Q=this.dom.firstChild,j=0;for(let U of O)U.update&&Q&&U.constructor&&this.drawn[j].constructor&&U.update(Q,this.drawn[j])?(Q=Q.nextSibling,j++):this.dom.insertBefore(U.draw(),Q);for(;Q;){let U=Q.nextSibling;Q.remove(),Q=U}this.drawn=O}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(X){return[ViewPlugin.define(O=>new LayerView(O,X)),layerOrder.of(X)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(X){return combineConfig(X,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(O,Q)=>Math.min(O,Q),drawRangeCursor:(O,Q)=>O||Q})}});function drawSelection(X={}){return[selectionConfig.of(X),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(X){return X.startState.facet(selectionConfig)!=X.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(X){let{state:O}=X,Q=O.facet(selectionConfig),j=[];for(let U of O.selection.ranges){let F=U==O.selection.main;if(U.empty?!F||CanHidePrimary:Q.drawRangeCursor){let q=F?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",W=U.empty?U:EditorSelection.cursor(U.head,U.head>U.anchor?-1:1);for(let Y of RectangleMarker.forRange(X,q,W))j.push(Y)}}return j},update(X,O){X.transactions.some(j=>j.selection)&&(O.style.animationName=O.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let Q=configChanged(X);return Q&&setBlinkRate(X.state,O),X.docChanged||X.selectionSet||Q},mount(X,O){setBlinkRate(O.state,X)},class:"cm-cursorLayer"});function setBlinkRate(X,O){O.style.animationDuration=X.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(X){return X.state.selection.ranges.map(O=>O.empty?[]:RectangleMarker.forRange(X,"cm-selectionBackground",O)).reduce((O,Q)=>O.concat(Q))},update(X,O){return X.docChanged||X.selectionSet||X.viewportChanged||configChanged(X)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function iterMatches(X,O,Q,j,U){O.lastIndex=0;for(let F=X.iterRange(Q,j),q=Q,W;!F.next().done;q+=F.value.length)if(!F.lineBreak)for(;W=O.exec(F.value);)U(q+W.index,W)}function matchRanges(X,O){let Q=X.visibleRanges;if(Q.length==1&&Q[0].from==X.viewport.from&&Q[0].to==X.viewport.to)return Q;let j=[];for(let{from:U,to:F}of Q)U=Math.max(X.state.doc.lineAt(U).from,U-O),F=Math.min(X.state.doc.lineAt(F).to,F+O),j.length&&j[j.length-1].to>=U?j[j.length-1].to=F:j.push({from:U,to:F});return j}class MatchDecorator{constructor(O){const{regexp:Q,decoration:j,decorate:U,boundary:F,maxLength:q=1e3}=O;if(!Q.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=Q,U)this.addMatch=(W,Y,G,K)=>U(K,G,G+W[0].length,W,Y);else if(typeof j=="function")this.addMatch=(W,Y,G,K)=>{let J=j(W,Y,G);J&&K(G,G+W[0].length,J)};else if(j)this.addMatch=(W,Y,G,K)=>K(G,G+W[0].length,j);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=F,this.maxLength=q}createDeco(O){let Q=new RangeSetBuilder,j=Q.add.bind(Q);for(let{from:U,to:F}of matchRanges(O,this.maxLength))iterMatches(O.state.doc,this.regexp,U,F,(q,W)=>this.addMatch(W,O,q,j));return Q.finish()}updateDeco(O,Q){let j=1e9,U=-1;return O.docChanged&&O.changes.iterChanges((F,q,W,Y)=>{Y>O.view.viewport.from&&W<O.view.viewport.to&&(j=Math.min(W,j),U=Math.max(Y,U))}),O.viewportChanged||U-j>1e3?this.createDeco(O.view):U>-1?this.updateRange(O.view,Q.map(O.changes),j,U):Q}updateRange(O,Q,j,U){for(let F of O.visibleRanges){let q=Math.max(F.from,j),W=Math.min(F.to,U);if(W>q){let Y=O.state.doc.lineAt(q),G=Y.to<W?O.state.doc.lineAt(W):Y,K=Math.max(F.from,Y.from),J=Math.min(F.to,G.to);if(this.boundary){for(;q>Y.from;q--)if(this.boundary.test(Y.text[q-1-Y.from])){K=q;break}for(;W<G.to;W++)if(this.boundary.test(G.text[W-G.from])){J=W;break}}let ee=[],te,re=(oe,se,ne)=>ee.push(ne.range(oe,se));if(Y==G)for(this.regexp.lastIndex=K-Y.from;(te=this.regexp.exec(Y.text))&&te.index<J-Y.from;)this.addMatch(te,O,te.index+Y.from,re);else iterMatches(O.state.doc,this.regexp,K,J,(oe,se)=>this.addMatch(se,O,oe,re));Q=Q.update({filterFrom:K,filterTo:J,filter:(oe,se)=>oe<K||se>J,add:ee})}}return Q}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var X;if(_supportsTabSize==null&&typeof document!="undefined"&&document.body){let O=document.body.style;_supportsTabSize=((X=O.tabSize)!==null&&X!==void 0?X:O.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(X){let O=combineConfig(X,{render:null,specialChars:Specials,addSpecialChars:null});return(O.replaceTabs=!supportsTabSize())&&(O.specialChars=new RegExp("	|"+O.specialChars.source,UnicodeRegexpSupport)),O.addSpecialChars&&(O.specialChars=new RegExp(O.specialChars.source+"|"+O.addSpecialChars.source,UnicodeRegexpSupport)),O}});function highlightSpecialChars(X={}){return[specialCharConfig.of(X),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(X){this.view=X,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(X.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(X)}makeDecorator(X){return new MatchDecorator({regexp:X.specialChars,decoration:(O,Q,j)=>{let{doc:U}=Q.state,F=codePointAt(O[0],0);if(F==9){let q=U.lineAt(j),W=Q.state.tabSize,Y=countColumn(q.text,W,j-q.from);return Decoration.replace({widget:new TabWidget((W-Y%W)*this.view.defaultCharacterWidth)})}return this.decorationCache[F]||(this.decorationCache[F]=Decoration.replace({widget:new SpecialCharWidget(X,F)}))},boundary:X.replaceTabs?void 0:/[^]/})}update(X){let O=X.state.facet(specialCharConfig);X.startState.facet(specialCharConfig)!=O?(this.decorator=this.makeDecorator(O),this.decorations=this.decorator.createDeco(X.view)):this.decorations=this.decorator.updateDeco(X,this.decorations)}},{decorations:X=>X.decorations}))}const DefaultPlaceholder="\u2022";function placeholder$1(X){return X>=32?DefaultPlaceholder:X==10?"\u2424":String.fromCharCode(9216+X)}class SpecialCharWidget extends WidgetType{constructor(O,Q){super(),this.options=O,this.code=Q}eq(O){return O.code==this.code}toDOM(O){let Q=placeholder$1(this.code),j=O.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),U=this.options.render&&this.options.render(this.code,j,Q);if(U)return U;let F=document.createElement("span");return F.textContent=Q,F.title=j,F.setAttribute("aria-label",j),F.className="cm-specialChar",F}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(O){super(),this.width=O}eq(O){return O.width==this.width}toDOM(){let O=document.createElement("span");return O.textContent="	",O.className="cm-tab",O.style.width=this.width+"px",O}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(X){this.decorations=this.getDeco(X)}update(X){(X.docChanged||X.selectionSet)&&(this.decorations=this.getDeco(X.view))}getDeco(X){let O=-1,Q=[];for(let j of X.state.selection.ranges){let U=X.lineBlockAt(j.head);U.from>O&&(Q.push(lineDeco.range(U.from)),O=U.from)}return Decoration.set(Q)}},{decorations:X=>X.decorations}),MaxOff=2e3;function rectangleFor(X,O,Q){let j=Math.min(O.line,Q.line),U=Math.max(O.line,Q.line),F=[];if(O.off>MaxOff||Q.off>MaxOff||O.col<0||Q.col<0){let q=Math.min(O.off,Q.off),W=Math.max(O.off,Q.off);for(let Y=j;Y<=U;Y++){let G=X.doc.line(Y);G.length<=W&&F.push(EditorSelection.range(G.from+q,G.to+W))}}else{let q=Math.min(O.col,Q.col),W=Math.max(O.col,Q.col);for(let Y=j;Y<=U;Y++){let G=X.doc.line(Y),K=findColumn(G.text,q,X.tabSize,!0);if(K<0)F.push(EditorSelection.cursor(G.to));else{let J=findColumn(G.text,W,X.tabSize);F.push(EditorSelection.range(G.from+K,G.from+J))}}}return F}function absoluteColumn(X,O){let Q=X.coordsAtPos(X.viewport.from);return Q?Math.round(Math.abs((Q.left-O)/X.defaultCharacterWidth)):-1}function getPos(X,O){let Q=X.posAtCoords({x:O.clientX,y:O.clientY},!1),j=X.state.doc.lineAt(Q),U=Q-j.from,F=U>MaxOff?-1:U==j.length?absoluteColumn(X,O.clientX):countColumn(j.text,X.state.tabSize,Q-j.from);return{line:j.number,col:F,off:U}}function rectangleSelectionStyle(X,O){let Q=getPos(X,O),j=X.state.selection;return Q?{update(U){if(U.docChanged){let F=U.changes.mapPos(U.startState.doc.line(Q.line).from),q=U.state.doc.lineAt(F);Q={line:q.number,col:Q.col,off:Math.min(Q.off,q.length)},j=j.map(U.changes)}},get(U,F,q){let W=getPos(X,U);if(!W)return j;let Y=rectangleFor(X.state,Q,W);return Y.length?q?EditorSelection.create(Y.concat(j.ranges)):EditorSelection.create(Y):j}}:null}function rectangularSelection(X){let O=(X==null?void 0:X.eventFilter)||(Q=>Q.altKey&&Q.button==0);return EditorView.mouseSelectionStyle.of((Q,j)=>O(j)?rectangleSelectionStyle(Q,j):null)}const Outside="-10000px";class TooltipViewManager{constructor(O,Q,j){this.facet=Q,this.createTooltipView=j,this.input=O.state.facet(Q),this.tooltips=this.input.filter(U=>U),this.tooltipViews=this.tooltips.map(j)}update(O){var Q;let j=O.state.facet(this.facet),U=j.filter(q=>q);if(j===this.input){for(let q of this.tooltipViews)q.update&&q.update(O);return!1}let F=[];for(let q=0;q<U.length;q++){let W=U[q],Y=-1;if(!!W){for(let G=0;G<this.tooltips.length;G++){let K=this.tooltips[G];K&&K.create==W.create&&(Y=G)}if(Y<0)F[q]=this.createTooltipView(W);else{let G=F[q]=this.tooltipViews[Y];G.update&&G.update(O)}}}for(let q of this.tooltipViews)F.indexOf(q)<0&&(q.dom.remove(),(Q=q.destroy)===null||Q===void 0||Q.call(q));return this.input=j,this.tooltips=U,this.tooltipViews=F,!0}}function windowSpace(X){let{win:O}=X;return{top:0,left:0,bottom:O.innerHeight,right:O.innerWidth}}const tooltipConfig=Facet.define({combine:X=>{var O,Q,j;return{position:browser.ios?"absolute":((O=X.find(U=>U.position))===null||O===void 0?void 0:O.position)||"fixed",parent:((Q=X.find(U=>U.parent))===null||Q===void 0?void 0:Q.parent)||null,tooltipSpace:((j=X.find(U=>U.tooltipSpace))===null||j===void 0?void 0:j.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(X){this.view=X,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let O=X.state.facet(tooltipConfig);this.position=O.position,this.parent=O.parent,this.classes=X.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(X,showTooltip,Q=>this.createTooltip(Q)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(Q=>{Date.now()>this.lastTransaction-50&&Q.length>0&&Q[Q.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),X.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let X of this.manager.tooltipViews)this.intersectionObserver.observe(X.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(X){X.transactions.length&&(this.lastTransaction=Date.now());let O=this.manager.update(X);O&&this.observeIntersection();let Q=O||X.geometryChanged,j=X.state.facet(tooltipConfig);if(j.position!=this.position){this.position=j.position;for(let U of this.manager.tooltipViews)U.dom.style.position=this.position;Q=!0}if(j.parent!=this.parent){this.parent&&this.container.remove(),this.parent=j.parent,this.createContainer();for(let U of this.manager.tooltipViews)this.container.appendChild(U.dom);Q=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);Q&&this.maybeMeasure()}createTooltip(X){let O=X.create(this.view);if(O.dom.classList.add("cm-tooltip"),X.arrow&&!O.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let Q=document.createElement("div");Q.className="cm-tooltip-arrow",O.dom.appendChild(Q)}return O.dom.style.position=this.position,O.dom.style.top=Outside,this.container.appendChild(O.dom),O.mount&&O.mount(this.view),O}destroy(){var X,O;this.view.win.removeEventListener("resize",this.measureSoon);for(let Q of this.manager.tooltipViews)Q.dom.remove(),(X=Q.destroy)===null||X===void 0||X.call(Q);(O=this.intersectionObserver)===null||O===void 0||O.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let X=this.view.dom.getBoundingClientRect();return{editor:X,parent:this.parent?this.container.getBoundingClientRect():X,pos:this.manager.tooltips.map((O,Q)=>{let j=this.manager.tooltipViews[Q];return j.getCoords?j.getCoords(O.pos):this.view.coordsAtPos(O.pos)}),size:this.manager.tooltipViews.map(({dom:O})=>O.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(X){var O;let{editor:Q,space:j}=X,U=[];for(let F=0;F<this.manager.tooltips.length;F++){let q=this.manager.tooltips[F],W=this.manager.tooltipViews[F],{dom:Y}=W,G=X.pos[F],K=X.size[F];if(!G||G.bottom<=Math.max(Q.top,j.top)||G.top>=Math.min(Q.bottom,j.bottom)||G.right<Math.max(Q.left,j.left)-.1||G.left>Math.min(Q.right,j.right)+.1){Y.style.top=Outside;continue}let J=q.arrow?W.dom.querySelector(".cm-tooltip-arrow"):null,ee=J?7:0,te=K.right-K.left,re=(O=knownHeight.get(W))!==null&&O!==void 0?O:K.bottom-K.top,oe=W.offset||noOffset,se=this.view.textDirection==Direction.LTR,ne=K.width>j.right-j.left?se?j.left:j.right-K.width:se?Math.min(G.left-(J?14:0)+oe.x,j.right-te):Math.max(j.left,G.left-te+(J?14:0)-oe.x),de=!!q.above;!q.strictSide&&(de?G.top-(K.bottom-K.top)-oe.y<j.top:G.bottom+(K.bottom-K.top)+oe.y>j.bottom)&&de==j.bottom-G.bottom>G.top-j.top&&(de=!de);let he=(de?G.top-j.top:j.bottom-G.bottom)-ee;if(he<re&&W.resize!==!1){if(he<this.view.defaultLineHeight){Y.style.top=Outside;continue}knownHeight.set(W,re),Y.style.height=(re=he)+"px"}else Y.style.height&&(Y.style.height="");let fe=de?G.top-re-ee-oe.y:G.bottom+ee+oe.y,Oe=ne+te;if(W.overlap!==!0)for(let ce of U)ce.left<Oe&&ce.right>ne&&ce.top<fe+re&&ce.bottom>fe&&(fe=de?ce.top-re-2-ee:ce.bottom+ee+2);this.position=="absolute"?(Y.style.top=fe-X.parent.top+"px",Y.style.left=ne-X.parent.left+"px"):(Y.style.top=fe+"px",Y.style.left=ne+"px"),J&&(J.style.left=`${G.left+(se?oe.x:-oe.x)-(ne+14-7)}px`),W.overlap!==!0&&U.push({left:ne,top:fe,right:Oe,bottom:fe+re}),Y.classList.toggle("cm-tooltip-above",de),Y.classList.toggle("cm-tooltip-below",!de),W.positioned&&W.positioned(X.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let X of this.manager.tooltipViews)X.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(O){this.view=O,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(O,showHoverTooltip,Q=>this.createHostedView(Q))}static create(O){return new HoverTooltipHost(O)}createHostedView(O){let Q=O.create(this.view);return Q.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(Q.dom),this.mounted&&Q.mount&&Q.mount(this.view),Q}mount(O){for(let Q of this.manager.tooltipViews)Q.mount&&Q.mount(O);this.mounted=!0}positioned(O){for(let Q of this.manager.tooltipViews)Q.positioned&&Q.positioned(O)}update(O){this.manager.update(O)}destroy(){var O;for(let Q of this.manager.tooltipViews)(O=Q.destroy)===null||O===void 0||O.call(Q)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],X=>{let O=X.facet(showHoverTooltip).filter(Q=>Q);return O.length===0?null:{pos:Math.min(...O.map(Q=>Q.pos)),end:Math.max(...O.filter(Q=>Q.end!=null).map(Q=>Q.end)),create:HoverTooltipHost.create,above:O[0].above,arrow:O.some(Q=>Q.arrow)}});class HoverPlugin{constructor(O,Q,j,U,F){this.view=O,this.source=Q,this.field=j,this.setHover=U,this.hoverTime=F,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:O.dom,time:0},this.checkHover=this.checkHover.bind(this),O.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),O.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let O=Date.now()-this.lastMove.time;O<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-O):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:O}=this,Q=this.view.contentDOM.contains(O.target)?this.view.posAtCoords(O):null;if(Q==null)return;let j=this.view.coordsAtPos(Q);if(j==null||O.y<j.top||O.y>j.bottom||O.x<j.left-this.view.defaultCharacterWidth||O.x>j.right+this.view.defaultCharacterWidth)return;let U=this.view.bidiSpans(this.view.state.doc.lineAt(Q)).find(W=>W.from<=Q&&W.to>=Q),F=U&&U.dir==Direction.RTL?-1:1,q=this.source(this.view,Q,O.x<j.left?-F:F);if(q!=null&&q.then){let W=this.pending={pos:Q};q.then(Y=>{this.pending==W&&(this.pending=null,Y&&this.view.dispatch({effects:this.setHover.of(Y)}))},Y=>logException(this.view.state,Y,"hover tooltip"))}else q&&this.view.dispatch({effects:this.setHover.of(q)})}mousemove(O){var Q;this.lastMove={x:O.clientX,y:O.clientY,target:O.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let j=this.active;if(j&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:U}=j||this.pending,F=(Q=j==null?void 0:j.end)!==null&&Q!==void 0?Q:U;(U==F?this.view.posAtCoords(this.lastMove)!=U:!isOverRange(this.view,U,F,O.clientX,O.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(O){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip(O.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(X){for(let O=X;O;O=O.parentNode)if(O.nodeType==1&&O.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(X,O,Q,j,U,F){let q=document.createRange(),W=X.domAtPos(O),Y=X.domAtPos(Q);q.setEnd(Y.node,Y.offset),q.setStart(W.node,W.offset);let G=q.getClientRects();q.detach();for(let K=0;K<G.length;K++){let J=G[K];if(Math.max(J.top-U,U-J.bottom,J.left-j,j-J.right)<=F)return!0}return!1}function hoverTooltip(X,O={}){let Q=StateEffect.define(),j=StateField.define({create(){return null},update(U,F){if(U&&(O.hideOnChange&&(F.docChanged||F.selection)||O.hideOn&&O.hideOn(F,U)))return null;if(U&&F.docChanged){let q=F.changes.mapPos(U.pos,-1,MapMode.TrackDel);if(q==null)return null;let W=Object.assign(Object.create(null),U);W.pos=q,U.end!=null&&(W.end=F.changes.mapPos(U.end)),U=W}for(let q of F.effects)q.is(Q)&&(U=q.value),q.is(closeHoverTooltipEffect)&&(U=null);return U},provide:U=>showHoverTooltip.from(U)});return[j,ViewPlugin.define(U=>new HoverPlugin(U,X,j,Q,O.hoverTime||300)),showHoverTooltipHost]}function getTooltip(X,O){let Q=X.plugin(tooltipPlugin);if(!Q)return null;let j=Q.manager.tooltips.indexOf(O);return j<0?null:Q.manager.tooltipViews[j]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(X){let O,Q;for(let j of X)O=O||j.topContainer,Q=Q||j.bottomContainer;return{topContainer:O,bottomContainer:Q}}});function getPanel(X,O){let Q=X.plugin(panelPlugin),j=Q?Q.specs.indexOf(O):-1;return j>-1?Q.panels[j]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(X){this.input=X.state.facet(showPanel),this.specs=this.input.filter(Q=>Q),this.panels=this.specs.map(Q=>Q(X));let O=X.state.facet(panelConfig);this.top=new PanelGroup(X,!0,O.topContainer),this.bottom=new PanelGroup(X,!1,O.bottomContainer),this.top.sync(this.panels.filter(Q=>Q.top)),this.bottom.sync(this.panels.filter(Q=>!Q.top));for(let Q of this.panels)Q.dom.classList.add("cm-panel"),Q.mount&&Q.mount()}update(X){let O=X.state.facet(panelConfig);this.top.container!=O.topContainer&&(this.top.sync([]),this.top=new PanelGroup(X.view,!0,O.topContainer)),this.bottom.container!=O.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(X.view,!1,O.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let Q=X.state.facet(showPanel);if(Q!=this.input){let j=Q.filter(Y=>Y),U=[],F=[],q=[],W=[];for(let Y of j){let G=this.specs.indexOf(Y),K;G<0?(K=Y(X.view),W.push(K)):(K=this.panels[G],K.update&&K.update(X)),U.push(K),(K.top?F:q).push(K)}this.specs=j,this.panels=U,this.top.sync(F),this.bottom.sync(q);for(let Y of W)Y.dom.classList.add("cm-panel"),Y.mount&&Y.mount()}else for(let j of this.panels)j.update&&j.update(X)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:X=>EditorView.scrollMargins.of(O=>{let Q=O.plugin(X);return Q&&{top:Q.top.scrollMargin(),bottom:Q.bottom.scrollMargin()}})});class PanelGroup{constructor(O,Q,j){this.view=O,this.top=Q,this.container=j,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(O){for(let Q of this.panels)Q.destroy&&O.indexOf(Q)<0&&Q.destroy();this.panels=O,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let Q=this.container||this.view.dom;Q.insertBefore(this.dom,this.top?Q.firstChild:null)}let O=this.dom.firstChild;for(let Q of this.panels)if(Q.dom.parentNode==this.dom){for(;O!=Q.dom;)O=rm(O);O=O.nextSibling}else this.dom.insertBefore(Q.dom,O);for(;O;)O=rm(O)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let O of this.classes.split(" "))O&&this.container.classList.remove(O);for(let O of(this.classes=this.view.themeClasses).split(" "))O&&this.container.classList.add(O)}}}function rm(X){let O=X.nextSibling;return X.remove(),O}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(O){return this==O||this.constructor==O.constructor&&this.eq(O)}eq(O){return!1}destroy(O){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$2={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(X){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$2),X))]}const unfixGutters=Facet.define({combine:X=>X.some(O=>O)});function gutters(X){let O=[gutterView];return X&&X.fixed===!1&&O.push(unfixGutters.of(!0)),O}const gutterView=ViewPlugin.fromClass(class{constructor(X){this.view=X,this.prevViewport=X.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=X.state.facet(activeGutters).map(O=>new SingleGutterView(X,O));for(let O of this.gutters)this.dom.appendChild(O.dom);this.fixed=!X.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),X.scrollDOM.insertBefore(this.dom,X.contentDOM)}update(X){if(this.updateGutters(X)){let O=this.prevViewport,Q=X.view.viewport,j=Math.min(O.to,Q.to)-Math.max(O.from,Q.from);this.syncGutters(j<(Q.to-Q.from)*.8)}X.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=X.view.viewport}syncGutters(X){let O=this.dom.nextSibling;X&&this.dom.remove();let Q=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),j=[],U=this.gutters.map(F=>new UpdateContext(F,this.view.viewport,-this.view.documentPadding.top));for(let F of this.view.viewportLineBlocks)if(j.length&&(j=[]),Array.isArray(F.type)){let q=!0;for(let W of F.type)if(W.type==BlockType.Text&&q){advanceCursor(Q,j,W.from);for(let Y of U)Y.line(this.view,W,j);q=!1}else if(W.widget)for(let Y of U)Y.widget(this.view,W)}else if(F.type==BlockType.Text){advanceCursor(Q,j,F.from);for(let q of U)q.line(this.view,F,j)}for(let F of U)F.finish();X&&this.view.scrollDOM.insertBefore(this.dom,O)}updateGutters(X){let O=X.startState.facet(activeGutters),Q=X.state.facet(activeGutters),j=X.docChanged||X.heightChanged||X.viewportChanged||!RangeSet.eq(X.startState.facet(gutterLineClass),X.state.facet(gutterLineClass),X.view.viewport.from,X.view.viewport.to);if(O==Q)for(let U of this.gutters)U.update(X)&&(j=!0);else{j=!0;let U=[];for(let F of Q){let q=O.indexOf(F);q<0?U.push(new SingleGutterView(this.view,F)):(this.gutters[q].update(X),U.push(this.gutters[q]))}for(let F of this.gutters)F.dom.remove(),U.indexOf(F)<0&&F.destroy();for(let F of U)this.dom.appendChild(F.dom);this.gutters=U}return j}destroy(){for(let X of this.gutters)X.destroy();this.dom.remove()}},{provide:X=>EditorView.scrollMargins.of(O=>{let Q=O.plugin(X);return!Q||Q.gutters.length==0||!Q.fixed?null:O.textDirection==Direction.LTR?{left:Q.dom.offsetWidth}:{right:Q.dom.offsetWidth}})});function asArray(X){return Array.isArray(X)?X:[X]}function advanceCursor(X,O,Q){for(;X.value&&X.from<=Q;)X.from==Q&&O.push(X.value),X.next()}class UpdateContext{constructor(O,Q,j){this.gutter=O,this.height=j,this.i=0,this.cursor=RangeSet.iter(O.markers,Q.from)}addElement(O,Q,j){let{gutter:U}=this,F=Q.top-this.height;if(this.i==U.elements.length){let q=new GutterElement(O,Q.height,F,j);U.elements.push(q),U.dom.appendChild(q.dom)}else U.elements[this.i].update(O,Q.height,F,j);this.height=Q.bottom,this.i++}line(O,Q,j){let U=[];advanceCursor(this.cursor,U,Q.from),j.length&&(U=U.concat(j));let F=this.gutter.config.lineMarker(O,Q,U);F&&U.unshift(F);let q=this.gutter;U.length==0&&!q.config.renderEmptyElements||this.addElement(O,Q,U)}widget(O,Q){let j=this.gutter.config.widgetMarker(O,Q.widget,Q);j&&this.addElement(O,Q,[j])}finish(){let O=this.gutter;for(;O.elements.length>this.i;){let Q=O.elements.pop();O.dom.removeChild(Q.dom),Q.destroy()}}}class SingleGutterView{constructor(O,Q){this.view=O,this.config=Q,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let j in Q.domEventHandlers)this.dom.addEventListener(j,U=>{let F=U.target,q;if(F!=this.dom&&this.dom.contains(F)){for(;F.parentNode!=this.dom;)F=F.parentNode;let Y=F.getBoundingClientRect();q=(Y.top+Y.bottom)/2}else q=U.clientY;let W=O.lineBlockAtHeight(q-O.documentTop);Q.domEventHandlers[j](O,W,U)&&U.preventDefault()});this.markers=asArray(Q.markers(O)),Q.initialSpacer&&(this.spacer=new GutterElement(O,0,0,[Q.initialSpacer(O)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(O){let Q=this.markers;if(this.markers=asArray(this.config.markers(O.view)),this.spacer&&this.config.updateSpacer){let U=this.config.updateSpacer(this.spacer.markers[0],O);U!=this.spacer.markers[0]&&this.spacer.update(O.view,0,0,[U])}let j=O.view.viewport;return!RangeSet.eq(this.markers,Q,j.from,j.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(O):!1)}destroy(){for(let O of this.elements)O.destroy()}}class GutterElement{constructor(O,Q,j,U){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(O,Q,j,U)}update(O,Q,j,U){this.height!=Q&&(this.dom.style.height=(this.height=Q)+"px"),this.above!=j&&(this.dom.style.marginTop=(this.above=j)?j+"px":""),sameMarkers(this.markers,U)||this.setMarkers(O,U)}setMarkers(O,Q){let j="cm-gutterElement",U=this.dom.firstChild;for(let F=0,q=0;;){let W=q,Y=F<Q.length?Q[F++]:null,G=!1;if(Y){let K=Y.elementClass;K&&(j+=" "+K);for(let J=q;J<this.markers.length;J++)if(this.markers[J].compare(Y)){W=J,G=!0;break}}else W=this.markers.length;for(;q<W;){let K=this.markers[q++];if(K.toDOM){K.destroy(U);let J=U.nextSibling;U.remove(),U=J}}if(!Y)break;Y.toDOM&&(G?U=U.nextSibling:this.dom.insertBefore(Y.toDOM(O),U)),G&&q++}this.dom.className=j,this.markers=Q}destroy(){this.setMarkers(null,[])}}function sameMarkers(X,O){if(X.length!=O.length)return!1;for(let Q=0;Q<X.length;Q++)if(!X[Q].compare(O[Q]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(X){return combineConfig(X,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(O,Q){let j=Object.assign({},O);for(let U in Q){let F=j[U],q=Q[U];j[U]=F?(W,Y,G)=>F(W,Y,G)||q(W,Y,G):q}return j}})}});class NumberMarker extends GutterMarker{constructor(O){super(),this.number=O}eq(O){return this.number==O.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(X,O){return X.state.facet(lineNumberConfig).formatNumber(O,X.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],X=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(O){return O.state.facet(lineNumberMarkers)},lineMarker(O,Q,j){return j.some(U=>U.toDOM)?null:new NumberMarker(formatNumber(O,O.state.doc.lineAt(Q.from).number))},widgetMarker:()=>null,lineMarkerChange:O=>O.startState.facet(lineNumberConfig)!=O.state.facet(lineNumberConfig),initialSpacer(O){return new NumberMarker(formatNumber(O,maxLineNumber(O.state.doc.lines)))},updateSpacer(O,Q){let j=formatNumber(Q.view,maxLineNumber(Q.view.state.doc.lines));return j==O.number?O:new NumberMarker(j)},domEventHandlers:X.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(X={}){return[lineNumberConfig.of(X),gutters(),lineNumberGutter]}function maxLineNumber(X){let O=9;for(;O<X;)O=O*10+9;return O}function isObject(X){var O=typeof X;return X!=null&&(O=="object"||O=="function")}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")(),root$1=root,now=function(){return root$1.Date.now()},now$1=now,reWhitespace=/\s/;function trimmedEndIndex(X){for(var O=X.length;O--&&reWhitespace.test(X.charAt(O)););return O}var reTrimStart=/^\s+/;function baseTrim(X){return X&&X.slice(0,trimmedEndIndex(X)+1).replace(reTrimStart,"")}var Symbol$1=root$1.Symbol,Symbol$2=Symbol$1,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(X){var O=hasOwnProperty.call(X,symToStringTag$1),Q=X[symToStringTag$1];try{X[symToStringTag$1]=void 0;var j=!0}catch{}var U=nativeObjectToString$1.call(X);return j&&(O?X[symToStringTag$1]=Q:delete X[symToStringTag$1]),U}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(X){return nativeObjectToString.call(X)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(X){return X==null?X===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(X)?getRawTag(X):objectToString(X)}function isObjectLike(X){return X!=null&&typeof X=="object"}var symbolTag="[object Symbol]";function isSymbol(X){return typeof X=="symbol"||isObjectLike(X)&&baseGetTag(X)==symbolTag}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(X){if(typeof X=="number")return X;if(isSymbol(X))return NAN;if(isObject(X)){var O=typeof X.valueOf=="function"?X.valueOf():X;X=isObject(O)?O+"":O}if(typeof X!="string")return X===0?X:+X;X=baseTrim(X);var Q=reIsBinary.test(X);return Q||reIsOctal.test(X)?freeParseInt(X.slice(2),Q?2:8):reIsBadHex.test(X)?NAN:+X}var FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(X,O,Q){var j,U,F,q,W,Y,G=0,K=!1,J=!1,ee=!0;if(typeof X!="function")throw new TypeError(FUNC_ERROR_TEXT$1);O=toNumber(O)||0,isObject(Q)&&(K=!!Q.leading,J="maxWait"in Q,F=J?nativeMax(toNumber(Q.maxWait)||0,O):F,ee="trailing"in Q?!!Q.trailing:ee);function te(ce){var me=j,we=U;return j=U=void 0,G=ce,q=X.apply(we,me),q}function re(ce){return G=ce,W=setTimeout(ne,O),K?te(ce):q}function oe(ce){var me=ce-Y,we=ce-G,ke=O-me;return J?nativeMin(ke,F-we):ke}function se(ce){var me=ce-Y,we=ce-G;return Y===void 0||me>=O||me<0||J&&we>=F}function ne(){var ce=now$1();if(se(ce))return de(ce);W=setTimeout(ne,oe(ce))}function de(ce){return W=void 0,ee&&j?te(ce):(j=U=void 0,q)}function he(){W!==void 0&&clearTimeout(W),G=0,j=Y=U=W=void 0}function fe(){return W===void 0?q:de(now$1())}function Oe(){var ce=now$1(),me=se(ce);if(j=arguments,U=this,Y=ce,me){if(W===void 0)return re(Y);if(J)return clearTimeout(W),W=setTimeout(ne,O),te(Y)}return W===void 0&&(W=setTimeout(ne,O)),q}return Oe.cancel=he,Oe.flush=fe,Oe}var INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(X){if(!X)return X===0?X:0;if(X=toNumber(X),X===INFINITY||X===-INFINITY){var O=X<0?-1:1;return O*MAX_INTEGER}return X===X?X:0}function toInteger(X){var O=toFinite(X),Q=O%1;return O===O?Q?O-Q:O:0}var FUNC_ERROR_TEXT="Expected a function";function before(X,O){var Q;if(typeof O!="function")throw new TypeError(FUNC_ERROR_TEXT);return X=toInteger(X),function(){return--X>0&&(Q=O.apply(this,arguments)),X<=1&&(O=void 0),Q}}function once(X){return before(2,X)}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(O,Q){this.from=O,this.to=Q}}class NodeProp{constructor(O={}){this.id=nextPropID++,this.perNode=!!O.perNode,this.deserialize=O.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(O){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof O!="function"&&(O=NodeType.match(O)),Q=>{let j=O(Q);return j===void 0?null:[this,j]}}}NodeProp.closedBy=new NodeProp({deserialize:X=>X.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:X=>X.split(" ")});NodeProp.group=new NodeProp({deserialize:X=>X.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(O,Q,j,U=0){this.name=O,this.props=Q,this.id=j,this.flags=U}static define(O){let Q=O.props&&O.props.length?Object.create(null):noProps,j=(O.top?1:0)|(O.skipped?2:0)|(O.error?4:0)|(O.name==null?8:0),U=new NodeType(O.name||"",Q,O.id,j);if(O.props){for(let F of O.props)if(Array.isArray(F)||(F=F(U)),F){if(F[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");Q[F[0].id]=F[1]}}return U}prop(O){return this.props[O.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(O){if(typeof O=="string"){if(this.name==O)return!0;let Q=this.prop(NodeProp.group);return Q?Q.indexOf(O)>-1:!1}return this.id==O}static match(O){let Q=Object.create(null);for(let j in O)for(let U of j.split(" "))Q[U]=O[j];return j=>{for(let U=j.prop(NodeProp.group),F=-1;F<(U?U.length:0);F++){let q=Q[F<0?j.name:U[F]];if(q)return q}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(O){this.types=O;for(let Q=0;Q<O.length;Q++)if(O[Q].id!=Q)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...O){let Q=[];for(let j of this.types){let U=null;for(let F of O){let q=F(j);q&&(U||(U=Object.assign({},j.props)),U[q[0].id]=q[1])}Q.push(U?new NodeType(j.name,U,j.id,j.flags):j)}return new NodeSet(Q)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(X){X[X.ExcludeBuffers=1]="ExcludeBuffers",X[X.IncludeAnonymous=2]="IncludeAnonymous",X[X.IgnoreMounts=4]="IgnoreMounts",X[X.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(O,Q,j,U,F){if(this.type=O,this.children=Q,this.positions=j,this.length=U,this.props=null,F&&F.length){this.props=Object.create(null);for(let[q,W]of F)this.props[typeof q=="number"?q:q.id]=W}}toString(){let O=this.prop(NodeProp.mounted);if(O&&!O.overlay)return O.tree.toString();let Q="";for(let j of this.children){let U=j.toString();U&&(Q&&(Q+=","),Q+=U)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(Q.length?"("+Q+")":""):Q}cursor(O=0){return new TreeCursor(this.topNode,O)}cursorAt(O,Q=0,j=0){let U=CachedNode.get(this)||this.topNode,F=new TreeCursor(U);return F.moveTo(O,Q),CachedNode.set(this,F._tree),F}get topNode(){return new TreeNode(this,0,0,null)}resolve(O,Q=0){let j=resolveNode(CachedNode.get(this)||this.topNode,O,Q,!1);return CachedNode.set(this,j),j}resolveInner(O,Q=0){let j=resolveNode(CachedInnerNode.get(this)||this.topNode,O,Q,!0);return CachedInnerNode.set(this,j),j}iterate(O){let{enter:Q,leave:j,from:U=0,to:F=this.length}=O,q=O.mode||0,W=(q&IterMode.IncludeAnonymous)>0;for(let Y=this.cursor(q|IterMode.IncludeAnonymous);;){let G=!1;if(Y.from<=F&&Y.to>=U&&(!W&&Y.type.isAnonymous||Q(Y)!==!1)){if(Y.firstChild())continue;G=!0}for(;G&&j&&(W||!Y.type.isAnonymous)&&j(Y),!Y.nextSibling();){if(!Y.parent())return;G=!0}}}prop(O){return O.perNode?this.props?this.props[O.id]:void 0:this.type.prop(O)}get propValues(){let O=[];if(this.props)for(let Q in this.props)O.push([+Q,this.props[Q]]);return O}balance(O={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(Q,j,U)=>new Tree(this.type,Q,j,U,this.propValues),O.makeTree||((Q,j,U)=>new Tree(NodeType.none,Q,j,U)))}static build(O){return buildTree(O)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(O,Q){this.buffer=O,this.index=Q}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(O,Q,j){this.buffer=O,this.length=Q,this.set=j}get type(){return NodeType.none}toString(){let O=[];for(let Q=0;Q<this.buffer.length;)O.push(this.childString(Q)),Q=this.buffer[Q+3];return O.join(",")}childString(O){let Q=this.buffer[O],j=this.buffer[O+3],U=this.set.types[Q],F=U.name;if(/\W/.test(F)&&!U.isError&&(F=JSON.stringify(F)),O+=4,j==O)return F;let q=[];for(;O<j;)q.push(this.childString(O)),O=this.buffer[O+3];return F+"("+q.join(",")+")"}findChild(O,Q,j,U,F){let{buffer:q}=this,W=-1;for(let Y=O;Y!=Q&&!(checkSide(F,U,q[Y+1],q[Y+2])&&(W=Y,j>0));Y=q[Y+3]);return W}slice(O,Q,j){let U=this.buffer,F=new Uint16Array(Q-O),q=0;for(let W=O,Y=0;W<Q;){F[Y++]=U[W++],F[Y++]=U[W++]-j;let G=F[Y++]=U[W++]-j;F[Y++]=U[W++]-O,q=Math.max(q,G)}return new TreeBuffer(F,q,this.set)}}function checkSide(X,O,Q,j){switch(X){case-2:return Q<O;case-1:return j>=O&&Q<O;case 0:return Q<O&&j>O;case 1:return Q<=O&&j>O;case 2:return j>O;case 4:return!0}}function enterUnfinishedNodesBefore(X,O){let Q=X.childBefore(O);for(;Q;){let j=Q.lastChild;if(!j||j.to!=Q.to)break;j.type.isError&&j.from==j.to?(X=Q,Q=j.prevSibling):Q=j}return X}function resolveNode(X,O,Q,j){for(var U;X.from==X.to||(Q<1?X.from>=O:X.from>O)||(Q>-1?X.to<=O:X.to<O);){let q=!j&&X instanceof TreeNode&&X.index<0?null:X.parent;if(!q)return X;X=q}let F=j?0:IterMode.IgnoreOverlays;if(j)for(let q=X,W=q.parent;W;q=W,W=q.parent)q instanceof TreeNode&&q.index<0&&((U=W.enter(O,Q,F))===null||U===void 0?void 0:U.from)!=q.from&&(X=W);for(;;){let q=X.enter(O,Q,F);if(!q)return X;X=q}}class TreeNode{constructor(O,Q,j,U){this._tree=O,this.from=Q,this.index=j,this._parent=U}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(O,Q,j,U,F=0){for(let q=this;;){for(let{children:W,positions:Y}=q._tree,G=Q>0?W.length:-1;O!=G;O+=Q){let K=W[O],J=Y[O]+q.from;if(!!checkSide(U,j,J,J+K.length)){if(K instanceof TreeBuffer){if(F&IterMode.ExcludeBuffers)continue;let ee=K.findChild(0,K.buffer.length,Q,j-J,U);if(ee>-1)return new BufferNode(new BufferContext(q,K,O,J),null,ee)}else if(F&IterMode.IncludeAnonymous||!K.type.isAnonymous||hasChild(K)){let ee;if(!(F&IterMode.IgnoreMounts)&&K.props&&(ee=K.prop(NodeProp.mounted))&&!ee.overlay)return new TreeNode(ee.tree,J,O,q);let te=new TreeNode(K,J,O,q);return F&IterMode.IncludeAnonymous||!te.type.isAnonymous?te:te.nextChild(Q<0?K.children.length-1:0,Q,j,U)}}}if(F&IterMode.IncludeAnonymous||!q.type.isAnonymous||(q.index>=0?O=q.index+Q:O=Q<0?-1:q._parent._tree.children.length,q=q._parent,!q))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(O){return this.nextChild(0,1,O,2)}childBefore(O){return this.nextChild(this._tree.children.length-1,-1,O,-2)}enter(O,Q,j=0){let U;if(!(j&IterMode.IgnoreOverlays)&&(U=this._tree.prop(NodeProp.mounted))&&U.overlay){let F=O-this.from;for(let{from:q,to:W}of U.overlay)if((Q>0?q<=F:q<F)&&(Q<0?W>=F:W>F))return new TreeNode(U.tree,U.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,O,Q,j)}nextSignificantParent(){let O=this;for(;O.type.isAnonymous&&O._parent;)O=O._parent;return O}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(O=0){return new TreeCursor(this,O)}get tree(){return this._tree}toTree(){return this._tree}resolve(O,Q=0){return resolveNode(this,O,Q,!1)}resolveInner(O,Q=0){return resolveNode(this,O,Q,!0)}enterUnfinishedNodesBefore(O){return enterUnfinishedNodesBefore(this,O)}getChild(O,Q=null,j=null){let U=getChildren(this,O,Q,j);return U.length?U[0]:null}getChildren(O,Q=null,j=null){return getChildren(this,O,Q,j)}toString(){return this._tree.toString()}get node(){return this}matchContext(O){return matchNodeContext(this,O)}}function getChildren(X,O,Q,j){let U=X.cursor(),F=[];if(!U.firstChild())return F;if(Q!=null){for(;!U.type.is(Q);)if(!U.nextSibling())return F}for(;;){if(j!=null&&U.type.is(j))return F;if(U.type.is(O)&&F.push(U.node),!U.nextSibling())return j==null?F:[]}}function matchNodeContext(X,O,Q=O.length-1){for(let j=X.parent;Q>=0;j=j.parent){if(!j)return!1;if(!j.type.isAnonymous){if(O[Q]&&O[Q]!=j.name)return!1;Q--}}return!0}class BufferContext{constructor(O,Q,j,U){this.parent=O,this.buffer=Q,this.index=j,this.start=U}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(O,Q,j){this.context=O,this._parent=Q,this.index=j,this.type=O.buffer.set.types[O.buffer.buffer[j]]}child(O,Q,j){let{buffer:U}=this.context,F=U.findChild(this.index+4,U.buffer[this.index+3],O,Q-this.context.start,j);return F<0?null:new BufferNode(this.context,this,F)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(O){return this.child(1,O,2)}childBefore(O){return this.child(-1,O,-2)}enter(O,Q,j=0){if(j&IterMode.ExcludeBuffers)return null;let{buffer:U}=this.context,F=U.findChild(this.index+4,U.buffer[this.index+3],Q>0?1:-1,O-this.context.start,Q);return F<0?null:new BufferNode(this.context,this,F)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(O){return this._parent?null:this.context.parent.nextChild(this.context.index+O,O,0,4)}get nextSibling(){let{buffer:O}=this.context,Q=O.buffer[this.index+3];return Q<(this._parent?O.buffer[this._parent.index+3]:O.buffer.length)?new BufferNode(this.context,this._parent,Q):this.externalSibling(1)}get prevSibling(){let{buffer:O}=this.context,Q=this._parent?this._parent.index+4:0;return this.index==Q?this.externalSibling(-1):new BufferNode(this.context,this._parent,O.findChild(Q,this.index,-1,0,4))}cursor(O=0){return new TreeCursor(this,O)}get tree(){return null}toTree(){let O=[],Q=[],{buffer:j}=this.context,U=this.index+4,F=j.buffer[this.index+3];if(F>U){let q=j.buffer[this.index+1];O.push(j.slice(U,F,q)),Q.push(0)}return new Tree(this.type,O,Q,this.to-this.from)}resolve(O,Q=0){return resolveNode(this,O,Q,!1)}resolveInner(O,Q=0){return resolveNode(this,O,Q,!0)}enterUnfinishedNodesBefore(O){return enterUnfinishedNodesBefore(this,O)}toString(){return this.context.buffer.childString(this.index)}getChild(O,Q=null,j=null){let U=getChildren(this,O,Q,j);return U.length?U[0]:null}getChildren(O,Q=null,j=null){return getChildren(this,O,Q,j)}get node(){return this}matchContext(O){return matchNodeContext(this,O)}}class TreeCursor{get name(){return this.type.name}constructor(O,Q=0){if(this.mode=Q,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,O instanceof TreeNode)this.yieldNode(O);else{this._tree=O.context.parent,this.buffer=O.context;for(let j=O._parent;j;j=j._parent)this.stack.unshift(j.index);this.bufferNode=O,this.yieldBuf(O.index)}}yieldNode(O){return O?(this._tree=O,this.type=O.type,this.from=O.from,this.to=O.to,!0):!1}yieldBuf(O,Q){this.index=O;let{start:j,buffer:U}=this.buffer;return this.type=Q||U.set.types[U.buffer[O]],this.from=j+U.buffer[O+1],this.to=j+U.buffer[O+2],!0}yield(O){return O?O instanceof TreeNode?(this.buffer=null,this.yieldNode(O)):(this.buffer=O.context,this.yieldBuf(O.index,O.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(O,Q,j){if(!this.buffer)return this.yield(this._tree.nextChild(O<0?this._tree._tree.children.length-1:0,O,Q,j,this.mode));let{buffer:U}=this.buffer,F=U.findChild(this.index+4,U.buffer[this.index+3],O,Q-this.buffer.start,j);return F<0?!1:(this.stack.push(this.index),this.yieldBuf(F))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(O){return this.enterChild(1,O,2)}childBefore(O){return this.enterChild(-1,O,-2)}enter(O,Q,j=this.mode){return this.buffer?j&IterMode.ExcludeBuffers?!1:this.enterChild(1,O,Q):this.yield(this._tree.enter(O,Q,j))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let O=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(O)}sibling(O){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+O,O,0,4,this.mode)):!1;let{buffer:Q}=this.buffer,j=this.stack.length-1;if(O<0){let U=j<0?0:this.stack[j]+4;if(this.index!=U)return this.yieldBuf(Q.findChild(U,this.index,-1,0,4))}else{let U=Q.buffer[this.index+3];if(U<(j<0?Q.buffer.length:Q.buffer[this.stack[j]+3]))return this.yieldBuf(U)}return j<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+O,O,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(O){let Q,j,{buffer:U}=this;if(U){if(O>0){if(this.index<U.buffer.buffer.length)return!1}else for(let F=0;F<this.index;F++)if(U.buffer.buffer[F+3]<this.index)return!1;({index:Q,parent:j}=U)}else({index:Q,_parent:j}=this._tree);for(;j;{index:Q,_parent:j}=j)if(Q>-1)for(let F=Q+O,q=O<0?-1:j._tree.children.length;F!=q;F+=O){let W=j._tree.children[F];if(this.mode&IterMode.IncludeAnonymous||W instanceof TreeBuffer||!W.type.isAnonymous||hasChild(W))return!1}return!0}move(O,Q){if(Q&&this.enterChild(O,0,4))return!0;for(;;){if(this.sibling(O))return!0;if(this.atLastNode(O)||!this.parent())return!1}}next(O=!0){return this.move(1,O)}prev(O=!0){return this.move(-1,O)}moveTo(O,Q=0){for(;(this.from==this.to||(Q<1?this.from>=O:this.from>O)||(Q>-1?this.to<=O:this.to<O))&&this.parent(););for(;this.enterChild(1,O,Q););return this}get node(){if(!this.buffer)return this._tree;let O=this.bufferNode,Q=null,j=0;if(O&&O.context==this.buffer){e:for(let U=this.index,F=this.stack.length;F>=0;){for(let q=O;q;q=q._parent)if(q.index==U){if(U==this.index)return q;Q=q,j=F+1;break e}U=this.stack[--F]}}for(let U=j;U<this.stack.length;U++)Q=new BufferNode(this.buffer,Q,this.stack[U]);return this.bufferNode=new BufferNode(this.buffer,Q,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(O,Q){for(let j=0;;){let U=!1;if(this.type.isAnonymous||O(this)!==!1){if(this.firstChild()){j++;continue}this.type.isAnonymous||(U=!0)}for(;U&&Q&&Q(this),U=this.type.isAnonymous,!this.nextSibling();){if(!j)return;this.parent(),j--,U=!0}}}matchContext(O){if(!this.buffer)return matchNodeContext(this.node,O);let{buffer:Q}=this.buffer,{types:j}=Q.set;for(let U=O.length-1,F=this.stack.length-1;U>=0;F--){if(F<0)return matchNodeContext(this.node,O,U);let q=j[Q.buffer[this.stack[F]]];if(!q.isAnonymous){if(O[U]&&O[U]!=q.name)return!1;U--}}return!0}}function hasChild(X){return X.children.some(O=>O instanceof TreeBuffer||!O.type.isAnonymous||hasChild(O))}function buildTree(X){var O;let{buffer:Q,nodeSet:j,maxBufferLength:U=DefaultBufferLength,reused:F=[],minRepeatType:q=j.types.length}=X,W=Array.isArray(Q)?new FlatBufferCursor(Q,Q.length):Q,Y=j.types,G=0,K=0;function J(fe,Oe,ce,me,we){let{id:ke,start:Ce,end:Qe,size:Ae}=W,Be=K;for(;Ae<0;)if(W.next(),Ae==-1){let We=F[ke];ce.push(We),me.push(Ce-fe);return}else if(Ae==-3){G=ke;return}else if(Ae==-4){K=ke;return}else throw new RangeError(`Unrecognized record size: ${Ae}`);let Ie=Y[ke],Ue,Xe,Ke=Ce-fe;if(Qe-Ce<=U&&(Xe=oe(W.pos-Oe,we))){let We=new Uint16Array(Xe.size-Xe.skip),Ze=W.pos-Xe.size,_e=We.length;for(;W.pos>Ze;)_e=se(Xe.start,We,_e);Ue=new TreeBuffer(We,Qe-Xe.start,j),Ke=Xe.start-fe}else{let We=W.pos-Ae;W.next();let Ze=[],_e=[],ye=ke>=q?ke:-1,xe=0,$e=Qe;for(;W.pos>We;)ye>=0&&W.id==ye&&W.size>=0?(W.end<=$e-U&&(te(Ze,_e,Ce,xe,W.end,$e,ye,Be),xe=Ze.length,$e=W.end),W.next()):J(Ce,We,Ze,_e,ye);if(ye>=0&&xe>0&&xe<Ze.length&&te(Ze,_e,Ce,xe,Ce,$e,ye,Be),Ze.reverse(),_e.reverse(),ye>-1&&xe>0){let ae=ee(Ie);Ue=balanceRange(Ie,Ze,_e,0,Ze.length,0,Qe-Ce,ae,ae)}else Ue=re(Ie,Ze,_e,Qe-Ce,Be-Qe)}ce.push(Ue),me.push(Ke)}function ee(fe){return(Oe,ce,me)=>{let we=0,ke=Oe.length-1,Ce,Qe;if(ke>=0&&(Ce=Oe[ke])instanceof Tree){if(!ke&&Ce.type==fe&&Ce.length==me)return Ce;(Qe=Ce.prop(NodeProp.lookAhead))&&(we=ce[ke]+Ce.length+Qe)}return re(fe,Oe,ce,me,we)}}function te(fe,Oe,ce,me,we,ke,Ce,Qe){let Ae=[],Be=[];for(;fe.length>me;)Ae.push(fe.pop()),Be.push(Oe.pop()+ce-we);fe.push(re(j.types[Ce],Ae,Be,ke-we,Qe-ke)),Oe.push(we-ce)}function re(fe,Oe,ce,me,we=0,ke){if(G){let Ce=[NodeProp.contextHash,G];ke=ke?[Ce].concat(ke):[Ce]}if(we>25){let Ce=[NodeProp.lookAhead,we];ke=ke?[Ce].concat(ke):[Ce]}return new Tree(fe,Oe,ce,me,ke)}function oe(fe,Oe){let ce=W.fork(),me=0,we=0,ke=0,Ce=ce.end-U,Qe={size:0,start:0,skip:0};e:for(let Ae=ce.pos-fe;ce.pos>Ae;){let Be=ce.size;if(ce.id==Oe&&Be>=0){Qe.size=me,Qe.start=we,Qe.skip=ke,ke+=4,me+=4,ce.next();continue}let Ie=ce.pos-Be;if(Be<0||Ie<Ae||ce.start<Ce)break;let Ue=ce.id>=q?4:0,Xe=ce.start;for(ce.next();ce.pos>Ie;){if(ce.size<0)if(ce.size==-3)Ue+=4;else break e;else ce.id>=q&&(Ue+=4);ce.next()}we=Xe,me+=Be,ke+=Ue}return(Oe<0||me==fe)&&(Qe.size=me,Qe.start=we,Qe.skip=ke),Qe.size>4?Qe:void 0}function se(fe,Oe,ce){let{id:me,start:we,end:ke,size:Ce}=W;if(W.next(),Ce>=0&&me<q){let Qe=ce;if(Ce>4){let Ae=W.pos-(Ce-4);for(;W.pos>Ae;)ce=se(fe,Oe,ce)}Oe[--ce]=Qe,Oe[--ce]=ke-fe,Oe[--ce]=we-fe,Oe[--ce]=me}else Ce==-3?G=me:Ce==-4&&(K=me);return ce}let ne=[],de=[];for(;W.pos>0;)J(X.start||0,X.bufferStart||0,ne,de,-1);let he=(O=X.length)!==null&&O!==void 0?O:ne.length?de[0]+ne[0].length:0;return new Tree(Y[X.topID],ne.reverse(),de.reverse(),he)}const nodeSizeCache=new WeakMap;function nodeSize(X,O){if(!X.isAnonymous||O instanceof TreeBuffer||O.type!=X)return 1;let Q=nodeSizeCache.get(O);if(Q==null){Q=1;for(let j of O.children){if(j.type!=X||!(j instanceof Tree)){Q=1;break}Q+=nodeSize(X,j)}nodeSizeCache.set(O,Q)}return Q}function balanceRange(X,O,Q,j,U,F,q,W,Y){let G=0;for(let re=j;re<U;re++)G+=nodeSize(X,O[re]);let K=Math.ceil(G*1.5/8),J=[],ee=[];function te(re,oe,se,ne,de){for(let he=se;he<ne;){let fe=he,Oe=oe[he],ce=nodeSize(X,re[he]);for(he++;he<ne;he++){let me=nodeSize(X,re[he]);if(ce+me>=K)break;ce+=me}if(he==fe+1){if(ce>K){let me=re[fe];te(me.children,me.positions,0,me.children.length,oe[fe]+de);continue}J.push(re[fe])}else{let me=oe[he-1]+re[he-1].length-Oe;J.push(balanceRange(X,re,oe,fe,he,Oe,me,null,Y))}ee.push(Oe+de-F)}}return te(O,Q,j,U,0),(W||Y)(J,ee,q)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(O,Q,j){let U=this.map.get(O);U||this.map.set(O,U=new Map),U.set(Q,j)}getBuffer(O,Q){let j=this.map.get(O);return j&&j.get(Q)}set(O,Q){O instanceof BufferNode?this.setBuffer(O.context.buffer,O.index,Q):O instanceof TreeNode&&this.map.set(O.tree,Q)}get(O){return O instanceof BufferNode?this.getBuffer(O.context.buffer,O.index):O instanceof TreeNode?this.map.get(O.tree):void 0}cursorSet(O,Q){O.buffer?this.setBuffer(O.buffer.buffer,O.index,Q):this.map.set(O.tree,Q)}cursorGet(O){return O.buffer?this.getBuffer(O.buffer.buffer,O.index):this.map.get(O.tree)}}class TreeFragment{constructor(O,Q,j,U,F=!1,q=!1){this.from=O,this.to=Q,this.tree=j,this.offset=U,this.open=(F?1:0)|(q?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(O,Q=[],j=!1){let U=[new TreeFragment(0,O.length,O,0,!1,j)];for(let F of Q)F.to>O.length&&U.push(F);return U}static applyChanges(O,Q,j=128){if(!Q.length)return O;let U=[],F=1,q=O.length?O[0]:null;for(let W=0,Y=0,G=0;;W++){let K=W<Q.length?Q[W]:null,J=K?K.fromA:1e9;if(J-Y>=j)for(;q&&q.from<J;){let ee=q;if(Y>=ee.from||J<=ee.to||G){let te=Math.max(ee.from,Y)-G,re=Math.min(ee.to,J)-G;ee=te>=re?null:new TreeFragment(te,re,ee.tree,ee.offset+G,W>0,!!K)}if(ee&&U.push(ee),q.to>J)break;q=F<O.length?O[F++]:null}if(!K)break;Y=K.toA,G=K.toA-K.toB}return U}}class Parser{startParse(O,Q,j){return typeof O=="string"&&(O=new StringInput(O)),j=j?j.length?j.map(U=>new Range(U.from,U.to)):[new Range(0,0)]:[new Range(0,O.length)],this.createParse(O,Q||[],j)}parse(O,Q,j){let U=this.startParse(O,Q,j);for(;;){let F=U.advance();if(F)return F}}}class StringInput{constructor(O){this.string=O}get length(){return this.string.length}chunk(O){return this.string.slice(O)}get lineChunks(){return!1}read(O,Q){return this.string.slice(O,Q)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(O,Q,j){this.set=O,this.base=Q,this.modified=j,this.id=nextTagID++}static define(O){if(O!=null&&O.base)throw new Error("Can not derive from a modified tag");let Q=new Tag([],null,[]);if(Q.set.push(Q),O)for(let j of O.set)Q.set.push(j);return Q}static defineModifier(){let O=new Modifier;return Q=>Q.modified.indexOf(O)>-1?Q:Modifier.get(Q.base||Q,Q.modified.concat(O).sort((j,U)=>j.id-U.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(O,Q){if(!Q.length)return O;let j=Q[0].instances.find(W=>W.base==O&&sameArray(Q,W.modified));if(j)return j;let U=[],F=new Tag(U,O,Q);for(let W of Q)W.instances.push(F);let q=powerSet(Q);for(let W of O.set)if(!W.modified.length)for(let Y of q)U.push(Modifier.get(W,Y));return F}}function sameArray(X,O){return X.length==O.length&&X.every((Q,j)=>Q==O[j])}function powerSet(X){let O=[[]];for(let Q=0;Q<X.length;Q++)for(let j=0,U=O.length;j<U;j++)O.push(O[j].concat(X[Q]));return O.sort((Q,j)=>j.length-Q.length)}function styleTags(X){let O=Object.create(null);for(let Q in X){let j=X[Q];Array.isArray(j)||(j=[j]);for(let U of Q.split(" "))if(U){let F=[],q=2,W=U;for(let J=0;;){if(W=="..."&&J>0&&J+3==U.length){q=1;break}let ee=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(W);if(!ee)throw new RangeError("Invalid path: "+U);if(F.push(ee[0]=="*"?"":ee[0][0]=='"'?JSON.parse(ee[0]):ee[0]),J+=ee[0].length,J==U.length)break;let te=U[J++];if(J==U.length&&te=="!"){q=0;break}if(te!="/")throw new RangeError("Invalid path: "+U);W=U.slice(J)}let Y=F.length-1,G=F[Y];if(!G)throw new RangeError("Invalid path: "+U);let K=new Rule(j,q,Y>0?F.slice(0,Y):null);O[G]=K.sort(O[G])}}return ruleNodeProp.add(O)}const ruleNodeProp=new NodeProp;class Rule{constructor(O,Q,j,U){this.tags=O,this.mode=Q,this.context=j,this.next=U}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(O){return!O||O.depth<this.depth?(this.next=O,this):(O.next=this.sort(O.next),O)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(X,O){let Q=Object.create(null);for(let F of X)if(!Array.isArray(F.tag))Q[F.tag.id]=F.class;else for(let q of F.tag)Q[q.id]=F.class;let{scope:j,all:U=null}=O||{};return{style:F=>{let q=U;for(let W of F)for(let Y of W.set){let G=Q[Y.id];if(G){q=q?q+" "+G:G;break}}return q},scope:j}}function highlightTags(X,O){let Q=null;for(let j of X){let U=j.style(O);U&&(Q=Q?Q+" "+U:U)}return Q}function highlightTree(X,O,Q,j=0,U=X.length){let F=new HighlightBuilder(j,Array.isArray(O)?O:[O],Q);F.highlightRange(X.cursor(),j,U,"",F.highlighters),F.flush(U)}class HighlightBuilder{constructor(O,Q,j){this.at=O,this.highlighters=Q,this.span=j,this.class=""}startSpan(O,Q){Q!=this.class&&(this.flush(O),O>this.at&&(this.at=O),this.class=Q)}flush(O){O>this.at&&this.class&&this.span(this.at,O,this.class)}highlightRange(O,Q,j,U,F){let{type:q,from:W,to:Y}=O;if(W>=j||Y<=Q)return;q.isTop&&(F=this.highlighters.filter(te=>!te.scope||te.scope(q)));let G=U,K=getStyleTags(O)||Rule.empty,J=highlightTags(F,K.tags);if(J&&(G&&(G+=" "),G+=J,K.mode==1&&(U+=(U?" ":"")+J)),this.startSpan(Math.max(Q,W),G),K.opaque)return;let ee=O.tree&&O.tree.prop(NodeProp.mounted);if(ee&&ee.overlay){let te=O.node.enter(ee.overlay[0].from+W,1),re=this.highlighters.filter(se=>!se.scope||se.scope(ee.tree.type)),oe=O.firstChild();for(let se=0,ne=W;;se++){let de=se<ee.overlay.length?ee.overlay[se]:null,he=de?de.from+W:Y,fe=Math.max(Q,ne),Oe=Math.min(j,he);if(fe<Oe&&oe)for(;O.from<Oe&&(this.highlightRange(O,fe,Oe,U,F),this.startSpan(Math.min(Oe,O.to),G),!(O.to>=he||!O.nextSibling())););if(!de||he>j)break;ne=de.to+W,ne>Q&&(this.highlightRange(te.cursor(),Math.max(Q,de.from+W),Math.min(j,ne),"",re),this.startSpan(Math.min(j,ne),G))}oe&&O.parent()}else if(O.firstChild()){ee&&(U="");do if(!(O.to<=Q)){if(O.from>=j)break;this.highlightRange(O,Q,j,U,F),this.startSpan(Math.min(j,O.to),G)}while(O.nextSibling());O.parent()}}}function getStyleTags(X){let O=X.type.prop(ruleNodeProp);for(;O&&O.context&&!X.matchContext(O.context);)O=O.next;return O||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(X){return Facet.define({combine:X?O=>O.concat(X):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(O,Q,j=[],U=""){this.data=O,this.name=U,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=Q,this.extension=[language.of(this),EditorState.languageData.of((F,q,W)=>{let Y=topNodeAt(F,q,W),G=Y.type.prop(languageDataProp);if(!G)return[];let K=F.facet(G),J=Y.type.prop(sublanguageProp);if(J){let ee=Y.resolve(q-Y.from,W);for(let te of J)if(te.test(ee,F)){let re=F.facet(te.facet);return te.type=="replace"?re:re.concat(K)}}return K})].concat(j)}isActiveAt(O,Q,j=-1){return topNodeAt(O,Q,j).type.prop(languageDataProp)==this.data}findRegions(O){let Q=O.facet(language);if((Q==null?void 0:Q.data)==this.data)return[{from:0,to:O.doc.length}];if(!Q||!Q.allowsNesting)return[];let j=[],U=(F,q)=>{if(F.prop(languageDataProp)==this.data){j.push({from:q,to:q+F.length});return}let W=F.prop(NodeProp.mounted);if(W){if(W.tree.prop(languageDataProp)==this.data){if(W.overlay)for(let Y of W.overlay)j.push({from:Y.from+q,to:Y.to+q});else j.push({from:q,to:q+F.length});return}else if(W.overlay){let Y=j.length;if(U(W.tree,W.overlay[0].from+q),j.length>Y)return}}for(let Y=0;Y<F.children.length;Y++){let G=F.children[Y];G instanceof Tree&&U(G,F.positions[Y]+q)}};return U(syntaxTree(O),0),j}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(X,O,Q){let j=X.facet(language),U=syntaxTree(X).topNode;if(!j||j.allowsNesting)for(let F=U;F;F=F.enter(O,Q,IterMode.ExcludeBuffers))F.type.isTop&&(U=F);return U}class LRLanguage extends Language{constructor(O,Q,j){super(O,Q,[],j),this.parser=Q}static define(O){let Q=defineLanguageFacet(O.languageData);return new LRLanguage(Q,O.parser.configure({props:[languageDataProp.add(j=>j.isTop?Q:void 0)]}),O.name)}configure(O,Q){return new LRLanguage(this.data,this.parser.configure(O),Q||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(X){let O=X.field(Language.state,!1);return O?O.tree:Tree.empty}class DocInput{constructor(O){this.doc=O,this.cursorPos=0,this.string="",this.cursor=O.iter()}get length(){return this.doc.length}syncTo(O){return this.string=this.cursor.next(O-this.cursorPos).value,this.cursorPos=O+this.string.length,this.cursorPos-this.string.length}chunk(O){return this.syncTo(O),this.string}get lineChunks(){return!0}read(O,Q){let j=this.cursorPos-this.string.length;return O<j||Q>=this.cursorPos?this.doc.sliceString(O,Q):this.string.slice(O-j,Q-j)}}let currentContext=null;class ParseContext{constructor(O,Q,j=[],U,F,q,W,Y){this.parser=O,this.state=Q,this.fragments=j,this.tree=U,this.treeLen=F,this.viewport=q,this.skipped=W,this.scheduleOn=Y,this.parse=null,this.tempSkipped=[]}static create(O,Q,j){return new ParseContext(O,Q,[],Tree.empty,0,j,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(O,Q){return Q!=null&&Q>=this.state.doc.length&&(Q=void 0),this.tree!=Tree.empty&&this.isDone(Q!=null?Q:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var j;if(typeof O=="number"){let U=Date.now()+O;O=()=>Date.now()>U}for(this.parse||(this.parse=this.startParse()),Q!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>Q)&&Q<this.state.doc.length&&this.parse.stopAt(Q);;){let U=this.parse.advance();if(U)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(U,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(j=this.parse.stoppedAt)!==null&&j!==void 0?j:this.state.doc.length,this.tree=U,this.parse=null,this.treeLen<(Q!=null?Q:this.state.doc.length))this.parse=this.startParse();else return!0;if(O())return!1}})}takeTree(){let O,Q;this.parse&&(O=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>O)&&this.parse.stopAt(O),this.withContext(()=>{for(;!(Q=this.parse.advance()););}),this.treeLen=O,this.tree=Q,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(O){let Q=currentContext;currentContext=this;try{return O()}finally{currentContext=Q}}withoutTempSkipped(O){for(let Q;Q=this.tempSkipped.pop();)O=cutFragments(O,Q.from,Q.to);return O}changes(O,Q){let{fragments:j,tree:U,treeLen:F,viewport:q,skipped:W}=this;if(this.takeTree(),!O.empty){let Y=[];if(O.iterChangedRanges((G,K,J,ee)=>Y.push({fromA:G,toA:K,fromB:J,toB:ee})),j=TreeFragment.applyChanges(j,Y),U=Tree.empty,F=0,q={from:O.mapPos(q.from,-1),to:O.mapPos(q.to,1)},this.skipped.length){W=[];for(let G of this.skipped){let K=O.mapPos(G.from,1),J=O.mapPos(G.to,-1);K<J&&W.push({from:K,to:J})}}}return new ParseContext(this.parser,Q,j,U,F,q,W,this.scheduleOn)}updateViewport(O){if(this.viewport.from==O.from&&this.viewport.to==O.to)return!1;this.viewport=O;let Q=this.skipped.length;for(let j=0;j<this.skipped.length;j++){let{from:U,to:F}=this.skipped[j];U<O.to&&F>O.from&&(this.fragments=cutFragments(this.fragments,U,F),this.skipped.splice(j--,1))}return this.skipped.length>=Q?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(O,Q){this.skipped.push({from:O,to:Q})}static getSkippingParser(O){return new class extends Parser{createParse(Q,j,U){let F=U[0].from,q=U[U.length-1].to;return{parsedPos:F,advance(){let Y=currentContext;if(Y){for(let G of U)Y.tempSkipped.push(G);O&&(Y.scheduleOn=Y.scheduleOn?Promise.all([Y.scheduleOn,O]):O)}return this.parsedPos=q,new Tree(NodeType.none,[],[],q-F)},stoppedAt:null,stopAt(){}}}}}isDone(O){O=Math.min(O,this.state.doc.length);let Q=this.fragments;return this.treeLen>=O&&Q.length&&Q[0].from==0&&Q[0].to>=O}static get(){return currentContext}}function cutFragments(X,O,Q){return TreeFragment.applyChanges(X,[{fromA:O,toA:Q,fromB:O,toB:Q}])}class LanguageState{constructor(O){this.context=O,this.tree=O.tree}apply(O){if(!O.docChanged&&this.tree==this.context.tree)return this;let Q=this.context.changes(O.changes,O.state),j=this.context.treeLen==O.startState.doc.length?void 0:Math.max(O.changes.mapPos(this.context.treeLen),Q.viewport.to);return Q.work(20,j)||Q.takeTree(),new LanguageState(Q)}static init(O){let Q=Math.min(3e3,O.doc.length),j=ParseContext.create(O.facet(language).parser,O,{from:0,to:Q});return j.work(20,Q)||j.takeTree(),new LanguageState(j)}}Language.state=StateField.define({create:LanguageState.init,update(X,O){for(let Q of O.effects)if(Q.is(Language.setState))return Q.value;return O.startState.facet(language)!=O.state.facet(language)?LanguageState.init(O.state):X.apply(O)}});let requestIdle=X=>{let O=setTimeout(()=>X(),500);return()=>clearTimeout(O)};typeof requestIdleCallback!="undefined"&&(requestIdle=X=>{let O=-1,Q=setTimeout(()=>{O=requestIdleCallback(X,{timeout:500-100})},100);return()=>O<0?clearTimeout(Q):cancelIdleCallback(O)});const isInputPending=typeof navigator!="undefined"&&((_a=navigator.scheduling)===null||_a===void 0?void 0:_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(O){this.view=O,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(O){let Q=this.view.state.field(Language.state).context;(Q.updateViewport(O.view.viewport)||this.view.viewport.to>Q.treeLen)&&this.scheduleWork(),O.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(Q)}scheduleWork(){if(this.working)return;let{state:O}=this.view,Q=O.field(Language.state);(Q.tree!=Q.context.tree||!Q.context.isDone(O.doc.length))&&(this.working=requestIdle(this.work))}work(O){this.working=null;let Q=Date.now();if(this.chunkEnd<Q&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=Q+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:j,viewport:{to:U}}=this.view,F=j.field(Language.state);if(F.tree==F.context.tree&&F.context.isDone(U+1e5))return;let q=Date.now()+Math.min(this.chunkBudget,100,O&&!isInputPending?Math.max(25,O.timeRemaining()-5):1e9),W=F.context.treeLen<U&&j.doc.length>U+1e3,Y=F.context.work(()=>isInputPending&&isInputPending()||Date.now()>q,U+(W?0:1e5));this.chunkBudget-=Date.now()-Q,(Y||this.chunkBudget<=0)&&(F.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(F.context))})),this.chunkBudget>0&&!(Y&&!W)&&this.scheduleWork(),this.checkAsyncSchedule(F.context)}checkAsyncSchedule(O){O.scheduleOn&&(this.workScheduled++,O.scheduleOn.then(()=>this.scheduleWork()).catch(Q=>logException(this.view.state,Q)).then(()=>this.workScheduled--),O.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(X){return X.length?X[0]:null},enables:X=>[Language.state,parseWorker,EditorView.contentAttributes.compute([X],O=>{let Q=O.facet(X);return Q&&Q.name?{"data-language":Q.name}:{}})]});class LanguageSupport{constructor(O,Q=[]){this.language=O,this.support=Q,this.extension=[O,Q]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:X=>{if(!X.length)return"  ";let O=X[0];if(!O||/\S/.test(O)||Array.from(O).some(Q=>Q!=O[0]))throw new Error("Invalid indent unit: "+JSON.stringify(X[0]));return O}});function getIndentUnit(X){let O=X.facet(indentUnit);return O.charCodeAt(0)==9?X.tabSize*O.length:O.length}function indentString(X,O){let Q="",j=X.tabSize,U=X.facet(indentUnit)[0];if(U=="	"){for(;O>=j;)Q+="	",O-=j;U=" "}for(let F=0;F<O;F++)Q+=U;return Q}function getIndentation(X,O){X instanceof EditorState&&(X=new IndentContext(X));for(let j of X.state.facet(indentService)){let U=j(X,O);if(U!==void 0)return U}let Q=syntaxTree(X.state);return Q?syntaxIndentation(X,Q,O):null}class IndentContext{constructor(O,Q={}){this.state=O,this.options=Q,this.unit=getIndentUnit(O)}lineAt(O,Q=1){let j=this.state.doc.lineAt(O),{simulateBreak:U,simulateDoubleBreak:F}=this.options;return U!=null&&U>=j.from&&U<=j.to?F&&U==O?{text:"",from:O}:(Q<0?U<O:U<=O)?{text:j.text.slice(U-j.from),from:U}:{text:j.text.slice(0,U-j.from),from:j.from}:j}textAfterPos(O,Q=1){if(this.options.simulateDoubleBreak&&O==this.options.simulateBreak)return"";let{text:j,from:U}=this.lineAt(O,Q);return j.slice(O-U,Math.min(j.length,O+100-U))}column(O,Q=1){let{text:j,from:U}=this.lineAt(O,Q),F=this.countColumn(j,O-U),q=this.options.overrideIndentation?this.options.overrideIndentation(U):-1;return q>-1&&(F+=q-this.countColumn(j,j.search(/\S|$/))),F}countColumn(O,Q=O.length){return countColumn(O,this.state.tabSize,Q)}lineIndent(O,Q=1){let{text:j,from:U}=this.lineAt(O,Q),F=this.options.overrideIndentation;if(F){let q=F(U);if(q>-1)return q}return this.countColumn(j,j.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(X,O,Q){return indentFrom(O.resolveInner(Q).enterUnfinishedNodesBefore(Q),Q,X)}function ignoreClosed(X){return X.pos==X.options.simulateBreak&&X.options.simulateDoubleBreak}function indentStrategy(X){let O=X.type.prop(indentNodeProp);if(O)return O;let Q=X.firstChild,j;if(Q&&(j=Q.type.prop(NodeProp.closedBy))){let U=X.lastChild,F=U&&j.indexOf(U.name)>-1;return q=>delimitedStrategy(q,!0,1,void 0,F&&!ignoreClosed(q)?U.from:void 0)}return X.parent==null?topIndent:null}function indentFrom(X,O,Q){for(;X;X=X.parent){let j=indentStrategy(X);if(j)return j(TreeIndentContext.create(Q,O,X))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(O,Q,j){super(O.state,O.options),this.base=O,this.pos=Q,this.node=j}static create(O,Q,j){return new TreeIndentContext(O,Q,j)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(O){let Q=this.state.doc.lineAt(O.from);for(;;){let j=O.resolve(Q.from);for(;j.parent&&j.parent.from==j.from;)j=j.parent;if(isParent(j,O))break;Q=this.state.doc.lineAt(j.from)}return this.lineIndent(Q.from)}continue(){let O=this.node.parent;return O?indentFrom(O,this.pos,this.base):0}}function isParent(X,O){for(let Q=O;Q;Q=Q.parent)if(X==Q)return!0;return!1}function bracketedAligned(X){let O=X.node,Q=O.childAfter(O.from),j=O.lastChild;if(!Q)return null;let U=X.options.simulateBreak,F=X.state.doc.lineAt(Q.from),q=U==null||U<=F.from?F.to:Math.min(F.to,U);for(let W=Q.to;;){let Y=O.childAfter(W);if(!Y||Y==j)return null;if(!Y.type.isSkipped)return Y.from<q?Q:null;W=Y.to}}function delimitedIndent({closing:X,align:O=!0,units:Q=1}){return j=>delimitedStrategy(j,O,Q,X)}function delimitedStrategy(X,O,Q,j,U){let F=X.textAfter,q=F.match(/^\s*/)[0].length,W=j&&F.slice(q,q+j.length)==j||U==X.pos+q,Y=O?bracketedAligned(X):null;return Y?W?X.column(Y.from):X.column(Y.to):X.baseIndent+(W?0:X.unit*Q)}const flatIndent=X=>X.baseIndent;function continuedIndent({except:X,units:O=1}={}){return Q=>{let j=X&&X.test(Q.textAfter);return Q.baseIndent+(j?0:O*Q.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(X=>{if(!X.docChanged||!X.isUserEvent("input.type")&&!X.isUserEvent("input.complete"))return X;let O=X.startState.languageDataAt("indentOnInput",X.startState.selection.main.head);if(!O.length)return X;let Q=X.newDoc,{head:j}=X.newSelection.main,U=Q.lineAt(j);if(j>U.from+DontIndentBeyond)return X;let F=Q.sliceString(U.from,j);if(!O.some(G=>G.test(F)))return X;let{state:q}=X,W=-1,Y=[];for(let{head:G}of q.selection.ranges){let K=q.doc.lineAt(G);if(K.from==W)continue;W=K.from;let J=getIndentation(q,K.from);if(J==null)continue;let ee=/^\s*/.exec(K.text)[0],te=indentString(q,J);ee!=te&&Y.push({from:K.from,to:K.from+ee.length,insert:te})}return Y.length?[X,{changes:Y,sequential:!0}]:X})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(X){let O=X.firstChild,Q=X.lastChild;return O&&O.to<Q.from?{from:O.to,to:Q.type.isError?X.to:Q.from}:null}function syntaxFolding(X,O,Q){let j=syntaxTree(X);if(j.length<Q)return null;let U=j.resolveInner(Q,1),F=null;for(let q=U;q;q=q.parent){if(q.to<=Q||q.from>Q)continue;if(F&&q.from<O)break;let W=q.type.prop(foldNodeProp);if(W&&(q.to<j.length-50||j.length==X.doc.length||!isUnfinished(q))){let Y=W(q,X);Y&&Y.from<=Q&&Y.from>=O&&Y.to>Q&&(F=Y)}}return F}function isUnfinished(X){let O=X.lastChild;return O&&O.to==X.to&&O.type.isError}function foldable(X,O,Q){for(let j of X.facet(foldService)){let U=j(X,O,Q);if(U)return U}return syntaxFolding(X,O,Q)}function mapRange$1(X,O){let Q=O.mapPos(X.from,1),j=O.mapPos(X.to,-1);return Q>=j?void 0:{from:Q,to:j}}const foldEffect=StateEffect.define({map:mapRange$1}),unfoldEffect=StateEffect.define({map:mapRange$1});function selectedLines(X){let O=[];for(let{head:Q}of X.state.selection.ranges)O.some(j=>j.from<=Q&&j.to>=Q)||O.push(X.lineBlockAt(Q));return O}const foldState=StateField.define({create(){return Decoration.none},update(X,O){X=X.map(O.changes);for(let Q of O.effects)Q.is(foldEffect)&&!foldExists(X,Q.value.from,Q.value.to)?X=X.update({add:[foldWidget.range(Q.value.from,Q.value.to)]}):Q.is(unfoldEffect)&&(X=X.update({filter:(j,U)=>Q.value.from!=j||Q.value.to!=U,filterFrom:Q.value.from,filterTo:Q.value.to}));if(O.selection){let Q=!1,{head:j}=O.selection.main;X.between(j,j,(U,F)=>{U<j&&F>j&&(Q=!0)}),Q&&(X=X.update({filterFrom:j,filterTo:j,filter:(U,F)=>F<=j||U>=j}))}return X},provide:X=>EditorView.decorations.from(X),toJSON(X,O){let Q=[];return X.between(0,O.doc.length,(j,U)=>{Q.push(j,U)}),Q},fromJSON(X){if(!Array.isArray(X)||X.length%2)throw new RangeError("Invalid JSON for fold state");let O=[];for(let Q=0;Q<X.length;){let j=X[Q++],U=X[Q++];if(typeof j!="number"||typeof U!="number")throw new RangeError("Invalid JSON for fold state");O.push(foldWidget.range(j,U))}return Decoration.set(O,!0)}});function findFold(X,O,Q){var j;let U=null;return(j=X.field(foldState,!1))===null||j===void 0||j.between(O,Q,(F,q)=>{(!U||U.from>F)&&(U={from:F,to:q})}),U}function foldExists(X,O,Q){let j=!1;return X.between(O,O,(U,F)=>{U==O&&F==Q&&(j=!0)}),j}function maybeEnable(X,O){return X.field(foldState,!1)?O:O.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=X=>{for(let O of selectedLines(X)){let Q=foldable(X.state,O.from,O.to);if(Q)return X.dispatch({effects:maybeEnable(X.state,[foldEffect.of(Q),announceFold(X,Q)])}),!0}return!1},unfoldCode=X=>{if(!X.state.field(foldState,!1))return!1;let O=[];for(let Q of selectedLines(X)){let j=findFold(X.state,Q.from,Q.to);j&&O.push(unfoldEffect.of(j),announceFold(X,j,!1))}return O.length&&X.dispatch({effects:O}),O.length>0};function announceFold(X,O,Q=!0){let j=X.state.doc.lineAt(O.from).number,U=X.state.doc.lineAt(O.to).number;return EditorView.announce.of(`${X.state.phrase(Q?"Folded lines":"Unfolded lines")} ${j} ${X.state.phrase("to")} ${U}.`)}const foldAll=X=>{let{state:O}=X,Q=[];for(let j=0;j<O.doc.length;){let U=X.lineBlockAt(j),F=foldable(O,U.from,U.to);F&&Q.push(foldEffect.of(F)),j=(F?X.lineBlockAt(F.to):U).to+1}return Q.length&&X.dispatch({effects:maybeEnable(X.state,Q)}),!!Q.length},unfoldAll=X=>{let O=X.state.field(foldState,!1);if(!O||!O.size)return!1;let Q=[];return O.between(0,X.state.doc.length,(j,U)=>{Q.push(unfoldEffect.of({from:j,to:U}))}),X.dispatch({effects:Q}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:"\u2026"},foldConfig=Facet.define({combine(X){return combineConfig(X,defaultConfig)}});function codeFolding(X){let O=[foldState,baseTheme$1$2];return X&&O.push(foldConfig.of(X)),O}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(X){let{state:O}=X,Q=O.facet(foldConfig),j=F=>{let q=X.lineBlockAt(X.posAtDOM(F.target)),W=findFold(X.state,q.from,q.to);W&&X.dispatch({effects:unfoldEffect.of(W)}),F.preventDefault()};if(Q.placeholderDOM)return Q.placeholderDOM(X,j);let U=document.createElement("span");return U.textContent=Q.placeholderText,U.setAttribute("aria-label",O.phrase("folded code")),U.title=O.phrase("unfold"),U.className="cm-foldPlaceholder",U.onclick=j,U}}}),foldGutterDefaults={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(O,Q){super(),this.config=O,this.open=Q}eq(O){return this.config==O.config&&this.open==O.open}toDOM(O){if(this.config.markerDOM)return this.config.markerDOM(this.open);let Q=document.createElement("span");return Q.textContent=this.open?this.config.openText:this.config.closedText,Q.title=O.state.phrase(this.open?"Fold line":"Unfold line"),Q}}function foldGutter(X={}){let O=Object.assign(Object.assign({},foldGutterDefaults),X),Q=new FoldMarker(O,!0),j=new FoldMarker(O,!1),U=ViewPlugin.fromClass(class{constructor(q){this.from=q.viewport.from,this.markers=this.buildMarkers(q)}update(q){(q.docChanged||q.viewportChanged||q.startState.facet(language)!=q.state.facet(language)||q.startState.field(foldState,!1)!=q.state.field(foldState,!1)||syntaxTree(q.startState)!=syntaxTree(q.state)||O.foldingChanged(q))&&(this.markers=this.buildMarkers(q.view))}buildMarkers(q){let W=new RangeSetBuilder;for(let Y of q.viewportLineBlocks){let G=findFold(q.state,Y.from,Y.to)?j:foldable(q.state,Y.from,Y.to)?Q:null;G&&W.add(Y.from,Y.from,G)}return W.finish()}}),{domEventHandlers:F}=O;return[U,gutter({class:"cm-foldGutter",markers(q){var W;return((W=q.plugin(U))===null||W===void 0?void 0:W.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(O,!1)},domEventHandlers:Object.assign(Object.assign({},F),{click:(q,W,Y)=>{if(F.click&&F.click(q,W,Y))return!0;let G=findFold(q.state,W.from,W.to);if(G)return q.dispatch({effects:unfoldEffect.of(G)}),!0;let K=foldable(q.state,W.from,W.to);return K?(q.dispatch({effects:foldEffect.of(K)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(O,Q){this.specs=O;let j;function U(W){let Y=StyleModule.newName();return(j||(j=Object.create(null)))["."+Y]=W,Y}const F=typeof Q.all=="string"?Q.all:Q.all?U(Q.all):void 0,q=Q.scope;this.scope=q instanceof Language?W=>W.prop(languageDataProp)==q.data:q?W=>W==q:void 0,this.style=tagHighlighter(O.map(W=>({tag:W.tag,class:W.class||U(Object.assign({},W,{tag:null}))})),{all:F}).style,this.module=j?new StyleModule(j):null,this.themeType=Q.themeType}static define(O,Q){return new HighlightStyle(O,Q||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(X){return X.length?[X[0]]:null}});function getHighlighters(X){let O=X.facet(highlighterFacet);return O.length?O:X.facet(fallbackHighlighter)}function syntaxHighlighting(X,O){let Q=[treeHighlighter],j;return X instanceof HighlightStyle&&(X.module&&Q.push(EditorView.styleModule.of(X.module)),j=X.themeType),O!=null&&O.fallback?Q.push(fallbackHighlighter.of(X)):j?Q.push(highlighterFacet.computeN([EditorView.darkTheme],U=>U.facet(EditorView.darkTheme)==(j=="dark")?[X]:[])):Q.push(highlighterFacet.of(X)),Q}class TreeHighlighter{constructor(O){this.markCache=Object.create(null),this.tree=syntaxTree(O.state),this.decorations=this.buildDeco(O,getHighlighters(O.state))}update(O){let Q=syntaxTree(O.state),j=getHighlighters(O.state),U=j!=getHighlighters(O.startState);Q.length<O.view.viewport.to&&!U&&Q.type==this.tree.type?this.decorations=this.decorations.map(O.changes):(Q!=this.tree||O.viewportChanged||U)&&(this.tree=Q,this.decorations=this.buildDeco(O.view,j))}buildDeco(O,Q){if(!Q||!this.tree.length)return Decoration.none;let j=new RangeSetBuilder;for(let{from:U,to:F}of O.visibleRanges)highlightTree(this.tree,Q,(q,W,Y)=>{j.add(q,W,this.markCache[Y]||(this.markCache[Y]=Decoration.mark({class:Y})))},U,F);return j.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:X=>X.decorations})),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(X){return combineConfig(X,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(X){let O=[],Q=X.matched?matchingMark:nonmatchingMark;return O.push(Q.range(X.start.from,X.start.to)),X.end&&O.push(Q.range(X.end.from,X.end.to)),O}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(X,O){if(!O.docChanged&&!O.selection)return X;let Q=[],j=O.state.facet(bracketMatchingConfig);for(let U of O.state.selection.ranges){if(!U.empty)continue;let F=matchBrackets(O.state,U.head,-1,j)||U.head>0&&matchBrackets(O.state,U.head-1,1,j)||j.afterCursor&&(matchBrackets(O.state,U.head,1,j)||U.head<O.state.doc.length&&matchBrackets(O.state,U.head+1,-1,j));F&&(Q=Q.concat(j.renderMatch(F,O.state)))}return Decoration.set(Q,!0)},provide:X=>EditorView.decorations.from(X)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(X={}){return[bracketMatchingConfig.of(X),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(X,O,Q){let j=X.prop(O<0?NodeProp.openedBy:NodeProp.closedBy);if(j)return j;if(X.name.length==1){let U=Q.indexOf(X.name);if(U>-1&&U%2==(O<0?1:0))return[Q[U+O]]}return null}function findHandle(X){let O=X.type.prop(bracketMatchingHandle);return O?O(X.node):X}function matchBrackets(X,O,Q,j={}){let U=j.maxScanDistance||DefaultScanDist,F=j.brackets||DefaultBrackets,q=syntaxTree(X),W=q.resolveInner(O,Q);for(let Y=W;Y;Y=Y.parent){let G=matchingNodes(Y.type,Q,F);if(G&&Y.from<Y.to){let K=findHandle(Y);if(K&&(Q>0?O>=K.from&&O<K.to:O>K.from&&O<=K.to))return matchMarkedBrackets(X,O,Q,Y,K,G,F)}}return matchPlainBrackets(X,O,Q,q,W.type,U,F)}function matchMarkedBrackets(X,O,Q,j,U,F,q){let W=j.parent,Y={from:U.from,to:U.to},G=0,K=W==null?void 0:W.cursor();if(K&&(Q<0?K.childBefore(j.from):K.childAfter(j.to)))do if(Q<0?K.to<=j.from:K.from>=j.to){if(G==0&&F.indexOf(K.type.name)>-1&&K.from<K.to){let J=findHandle(K);return{start:Y,end:J?{from:J.from,to:J.to}:void 0,matched:!0}}else if(matchingNodes(K.type,Q,q))G++;else if(matchingNodes(K.type,-Q,q)){if(G==0){let J=findHandle(K);return{start:Y,end:J&&J.from<J.to?{from:J.from,to:J.to}:void 0,matched:!1}}G--}}while(Q<0?K.prevSibling():K.nextSibling());return{start:Y,matched:!1}}function matchPlainBrackets(X,O,Q,j,U,F,q){let W=Q<0?X.sliceDoc(O-1,O):X.sliceDoc(O,O+1),Y=q.indexOf(W);if(Y<0||Y%2==0!=Q>0)return null;let G={from:Q<0?O-1:O,to:Q>0?O+1:O},K=X.doc.iterRange(O,Q>0?X.doc.length:0),J=0;for(let ee=0;!K.next().done&&ee<=F;){let te=K.value;Q<0&&(ee+=te.length);let re=O+ee*Q;for(let oe=Q>0?0:te.length-1,se=Q>0?te.length:-1;oe!=se;oe+=Q){let ne=q.indexOf(te[oe]);if(!(ne<0||j.resolveInner(re+oe,1).type!=U))if(ne%2==0==Q>0)J++;else{if(J==1)return{start:G,end:{from:re+oe,to:re+oe+1},matched:ne>>1==Y>>1};J--}}Q>0&&(ee+=te.length)}return K.done?{start:G,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[X,O]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[X]=createTokenType(noTokens,O);function warnForPart(X,O){warned.indexOf(X)>-1||(warned.push(X),console.warn(O))}function createTokenType(X,O){let Q=null;for(let F of O.split(".")){let q=X[F]||tags[F];q?typeof q=="function"?Q?Q=q(Q):warnForPart(F,`Modifier ${F} used at start of tag`):Q?warnForPart(F,`Tag ${F} used as modifier`):Q=q:warnForPart(F,`Unknown highlighting tag ${F}`)}if(!Q)return 0;let j=O.replace(/ /g,"_"),U=NodeType.define({id:typeArray.length,name:j,props:[styleTags({[j]:Q})]});return typeArray.push(U),U.id}const toggleComment=X=>{let{state:O}=X,Q=O.doc.lineAt(O.selection.main.from),j=getConfig(X.state,Q.from);return j.line?toggleLineComment(X):j.block?toggleBlockCommentByLine(X):!1};function command(X,O){return({state:Q,dispatch:j})=>{if(Q.readOnly)return!1;let U=X(O,Q);return U?(j(Q.update(U)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((X,O)=>changeBlockComment(X,O,selectedLineRanges(O)),0);function getConfig(X,O){let Q=X.languageDataAt("commentTokens",O);return Q.length?Q[0]:{}}const SearchMargin=50;function findBlockComment(X,{open:O,close:Q},j,U){let F=X.sliceDoc(j-SearchMargin,j),q=X.sliceDoc(U,U+SearchMargin),W=/\s*$/.exec(F)[0].length,Y=/^\s*/.exec(q)[0].length,G=F.length-W;if(F.slice(G-O.length,G)==O&&q.slice(Y,Y+Q.length)==Q)return{open:{pos:j-W,margin:W&&1},close:{pos:U+Y,margin:Y&&1}};let K,J;U-j<=2*SearchMargin?K=J=X.sliceDoc(j,U):(K=X.sliceDoc(j,j+SearchMargin),J=X.sliceDoc(U-SearchMargin,U));let ee=/^\s*/.exec(K)[0].length,te=/\s*$/.exec(J)[0].length,re=J.length-te-Q.length;return K.slice(ee,ee+O.length)==O&&J.slice(re,re+Q.length)==Q?{open:{pos:j+ee+O.length,margin:/\s/.test(K.charAt(ee+O.length))?1:0},close:{pos:U-te-Q.length,margin:/\s/.test(J.charAt(re-1))?1:0}}:null}function selectedLineRanges(X){let O=[];for(let Q of X.selection.ranges){let j=X.doc.lineAt(Q.from),U=Q.to<=j.to?j:X.doc.lineAt(Q.to),F=O.length-1;F>=0&&O[F].to>j.from?O[F].to=U.to:O.push({from:j.from+/^\s*/.exec(j.text)[0].length,to:U.to})}return O}function changeBlockComment(X,O,Q=O.selection.ranges){let j=Q.map(F=>getConfig(O,F.from).block);if(!j.every(F=>F))return null;let U=Q.map((F,q)=>findBlockComment(O,j[q],F.from,F.to));if(X!=2&&!U.every(F=>F))return{changes:O.changes(Q.map((F,q)=>U[q]?[]:[{from:F.from,insert:j[q].open+" "},{from:F.to,insert:" "+j[q].close}]))};if(X!=1&&U.some(F=>F)){let F=[];for(let q=0,W;q<U.length;q++)if(W=U[q]){let Y=j[q],{open:G,close:K}=W;F.push({from:G.pos-Y.open.length,to:G.pos+G.margin},{from:K.pos-K.margin,to:K.pos+Y.close.length})}return{changes:F}}return null}function changeLineComment(X,O,Q=O.selection.ranges){let j=[],U=-1;for(let{from:F,to:q}of Q){let W=j.length,Y=1e9,G=getConfig(O,F).line;if(!!G){for(let K=F;K<=q;){let J=O.doc.lineAt(K);if(J.from>U&&(F==q||q>J.from)){U=J.from;let ee=/^\s*/.exec(J.text)[0].length,te=ee==J.length,re=J.text.slice(ee,ee+G.length)==G?ee:-1;ee<J.text.length&&ee<Y&&(Y=ee),j.push({line:J,comment:re,token:G,indent:ee,empty:te,single:!1})}K=J.to+1}if(Y<1e9)for(let K=W;K<j.length;K++)j[K].indent<j[K].line.text.length&&(j[K].indent=Y);j.length==W+1&&(j[W].single=!0)}}if(X!=2&&j.some(F=>F.comment<0&&(!F.empty||F.single))){let F=[];for(let{line:W,token:Y,indent:G,empty:K,single:J}of j)(J||!K)&&F.push({from:W.from+G,insert:Y+" "});let q=O.changes(F);return{changes:q,selection:O.selection.map(q,1)}}else if(X!=1&&j.some(F=>F.comment>=0)){let F=[];for(let{line:q,comment:W,token:Y}of j)if(W>=0){let G=q.from+W,K=G+Y.length;q.text[K-q.from]==" "&&K++,F.push({from:G,to:K})}return{changes:F}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(X){return combineConfig(X,{minDepth:100,newGroupDelay:500,joinToEvent:(O,Q)=>Q},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(O,Q)=>(j,U)=>O(j,U)||Q(j,U)})}});function changeEnd(X){let O=0;return X.iterChangedRanges((Q,j)=>O=j),O}const historyField_=StateField.define({create(){return HistoryState.empty},update(X,O){let Q=O.state.facet(historyConfig),j=O.annotation(fromHistory);if(j){let Y=O.docChanged?EditorSelection.single(changeEnd(O.changes)):void 0,G=HistEvent.fromTransaction(O,Y),K=j.side,J=K==0?X.undone:X.done;return G?J=updateBranch(J,J.length,Q.minDepth,G):J=addSelection(J,O.startState.selection),new HistoryState(K==0?j.rest:J,K==0?J:j.rest)}let U=O.annotation(isolateHistory);if((U=="full"||U=="before")&&(X=X.isolate()),O.annotation(Transaction.addToHistory)===!1)return O.changes.empty?X:X.addMapping(O.changes.desc);let F=HistEvent.fromTransaction(O),q=O.annotation(Transaction.time),W=O.annotation(Transaction.userEvent);return F?X=X.addChanges(F,q,W,Q,O):O.selection&&(X=X.addSelection(O.startState.selection,q,W,Q.newGroupDelay)),(U=="full"||U=="after")&&(X=X.isolate()),X},toJSON(X){return{done:X.done.map(O=>O.toJSON()),undone:X.undone.map(O=>O.toJSON())}},fromJSON(X){return new HistoryState(X.done.map(HistEvent.fromJSON),X.undone.map(HistEvent.fromJSON))}});function history(X={}){return[historyField_,historyConfig.of(X),EditorView.domEventHandlers({beforeinput(O,Q){let j=O.inputType=="historyUndo"?undo:O.inputType=="historyRedo"?redo:null;return j?(O.preventDefault(),j(Q)):!1}})]}function cmd(X,O){return function({state:Q,dispatch:j}){if(!O&&Q.readOnly)return!1;let U=Q.field(historyField_,!1);if(!U)return!1;let F=U.pop(X,Q,O);return F?(j(F),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(O,Q,j,U,F){this.changes=O,this.effects=Q,this.mapped=j,this.startSelection=U,this.selectionsAfter=F}setSelAfter(O){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,O)}toJSON(){var O,Q,j;return{changes:(O=this.changes)===null||O===void 0?void 0:O.toJSON(),mapped:(Q=this.mapped)===null||Q===void 0?void 0:Q.toJSON(),startSelection:(j=this.startSelection)===null||j===void 0?void 0:j.toJSON(),selectionsAfter:this.selectionsAfter.map(U=>U.toJSON())}}static fromJSON(O){return new HistEvent(O.changes&&ChangeSet.fromJSON(O.changes),[],O.mapped&&ChangeDesc.fromJSON(O.mapped),O.startSelection&&EditorSelection.fromJSON(O.startSelection),O.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(O,Q){let j=none$1;for(let U of O.startState.facet(invertedEffects)){let F=U(O);F.length&&(j=j.concat(F))}return!j.length&&O.changes.empty?null:new HistEvent(O.changes.invert(O.startState.doc),j,void 0,Q||O.startState.selection,none$1)}static selection(O){return new HistEvent(void 0,none$1,void 0,void 0,O)}}function updateBranch(X,O,Q,j){let U=O+1>Q+20?O-Q-1:0,F=X.slice(U,O);return F.push(j),F}function isAdjacent(X,O){let Q=[],j=!1;return X.iterChangedRanges((U,F)=>Q.push(U,F)),O.iterChangedRanges((U,F,q,W)=>{for(let Y=0;Y<Q.length;){let G=Q[Y++],K=Q[Y++];W>=G&&q<=K&&(j=!0)}}),j}function eqSelectionShape(X,O){return X.ranges.length==O.ranges.length&&X.ranges.filter((Q,j)=>Q.empty!=O.ranges[j].empty).length===0}function conc(X,O){return X.length?O.length?X.concat(O):X:O}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(X,O){if(X.length){let Q=X[X.length-1],j=Q.selectionsAfter.slice(Math.max(0,Q.selectionsAfter.length-MaxSelectionsPerEvent));return j.length&&j[j.length-1].eq(O)?X:(j.push(O),updateBranch(X,X.length-1,1e9,Q.setSelAfter(j)))}else return[HistEvent.selection([O])]}function popSelection(X){let O=X[X.length-1],Q=X.slice();return Q[X.length-1]=O.setSelAfter(O.selectionsAfter.slice(0,O.selectionsAfter.length-1)),Q}function addMappingToBranch(X,O){if(!X.length)return X;let Q=X.length,j=none$1;for(;Q;){let U=mapEvent(X[Q-1],O,j);if(U.changes&&!U.changes.empty||U.effects.length){let F=X.slice(0,Q);return F[Q-1]=U,F}else O=U.mapped,Q--,j=U.selectionsAfter}return j.length?[HistEvent.selection(j)]:none$1}function mapEvent(X,O,Q){let j=conc(X.selectionsAfter.length?X.selectionsAfter.map(W=>W.map(O)):none$1,Q);if(!X.changes)return HistEvent.selection(j);let U=X.changes.map(O),F=O.mapDesc(X.changes,!0),q=X.mapped?X.mapped.composeDesc(F):F;return new HistEvent(U,StateEffect.mapEffects(X.effects,O),q,X.startSelection.map(F),j)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(O,Q,j=0,U=void 0){this.done=O,this.undone=Q,this.prevTime=j,this.prevUserEvent=U}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(O,Q,j,U,F){let q=this.done,W=q[q.length-1];return W&&W.changes&&!W.changes.empty&&O.changes&&(!j||joinableUserEvent.test(j))&&(!W.selectionsAfter.length&&Q-this.prevTime<U.newGroupDelay&&U.joinToEvent(F,isAdjacent(W.changes,O.changes))||j=="input.type.compose")?q=updateBranch(q,q.length-1,U.minDepth,new HistEvent(O.changes.compose(W.changes),conc(O.effects,W.effects),W.mapped,W.startSelection,none$1)):q=updateBranch(q,q.length,U.minDepth,O),new HistoryState(q,none$1,Q,j)}addSelection(O,Q,j,U){let F=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return F.length>0&&Q-this.prevTime<U&&j==this.prevUserEvent&&j&&/^select($|\.)/.test(j)&&eqSelectionShape(F[F.length-1],O)?this:new HistoryState(addSelection(this.done,O),this.undone,Q,j)}addMapping(O){return new HistoryState(addMappingToBranch(this.done,O),addMappingToBranch(this.undone,O),this.prevTime,this.prevUserEvent)}pop(O,Q,j){let U=O==0?this.done:this.undone;if(U.length==0)return null;let F=U[U.length-1];if(j&&F.selectionsAfter.length)return Q.update({selection:F.selectionsAfter[F.selectionsAfter.length-1],annotations:fromHistory.of({side:O,rest:popSelection(U)}),userEvent:O==0?"select.undo":"select.redo",scrollIntoView:!0});if(F.changes){let q=U.length==1?none$1:U.slice(0,U.length-1);return F.mapped&&(q=addMappingToBranch(q,F.mapped)),Q.update({changes:F.changes,selection:F.startSelection,effects:F.effects,annotations:fromHistory.of({side:O,rest:q}),filter:!1,userEvent:O==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(X,O){return EditorSelection.create(X.ranges.map(O),X.mainIndex)}function setSel(X,O){return X.update({selection:O,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:X,dispatch:O},Q){let j=updateSel(X.selection,Q);return j.eq(X.selection)?!1:(O(setSel(X,j)),!0)}function rangeEnd(X,O){return EditorSelection.cursor(O?X.to:X.from)}function cursorByChar(X,O){return moveSel(X,Q=>Q.empty?X.moveByChar(Q,O):rangeEnd(Q,O))}function ltrAtCursor(X){return X.textDirectionAt(X.state.selection.main.head)==Direction.LTR}const cursorCharLeft=X=>cursorByChar(X,!ltrAtCursor(X)),cursorCharRight=X=>cursorByChar(X,ltrAtCursor(X));function cursorByGroup(X,O){return moveSel(X,Q=>Q.empty?X.moveByGroup(Q,O):rangeEnd(Q,O))}const cursorGroupLeft=X=>cursorByGroup(X,!ltrAtCursor(X)),cursorGroupRight=X=>cursorByGroup(X,ltrAtCursor(X));function interestingNode(X,O,Q){if(O.type.prop(Q))return!0;let j=O.to-O.from;return j&&(j>2||/[^\s,.;:]/.test(X.sliceDoc(O.from,O.to)))||O.firstChild}function moveBySyntax(X,O,Q){let j=syntaxTree(X).resolveInner(O.head),U=Q?NodeProp.closedBy:NodeProp.openedBy;for(let Y=O.head;;){let G=Q?j.childAfter(Y):j.childBefore(Y);if(!G)break;interestingNode(X,G,U)?j=G:Y=Q?G.to:G.from}let F=j.type.prop(U),q,W;return F&&(q=Q?matchBrackets(X,j.from,1):matchBrackets(X,j.to,-1))&&q.matched?W=Q?q.end.to:q.end.from:W=Q?j.to:j.from,EditorSelection.cursor(W,Q?-1:1)}const cursorSyntaxLeft=X=>moveSel(X,O=>moveBySyntax(X.state,O,!ltrAtCursor(X))),cursorSyntaxRight=X=>moveSel(X,O=>moveBySyntax(X.state,O,ltrAtCursor(X)));function cursorByLine(X,O){return moveSel(X,Q=>{if(!Q.empty)return rangeEnd(Q,O);let j=X.moveVertically(Q,O);return j.head!=Q.head?j:X.moveToLineBoundary(Q,O)})}const cursorLineUp=X=>cursorByLine(X,!1),cursorLineDown=X=>cursorByLine(X,!0);function pageInfo(X){let O=X.scrollDOM.clientHeight<X.scrollDOM.scrollHeight-2,Q=0,j=0,U;if(O){for(let F of X.state.facet(EditorView.scrollMargins)){let q=F(X);q!=null&&q.top&&(Q=Math.max(q==null?void 0:q.top,Q)),q!=null&&q.bottom&&(j=Math.max(q==null?void 0:q.bottom,j))}U=X.scrollDOM.clientHeight-Q-j}else U=(X.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:Q,marginBottom:j,selfScroll:O,height:Math.max(X.defaultLineHeight,U-5)}}function cursorByPage(X,O){let Q=pageInfo(X),{state:j}=X,U=updateSel(j.selection,q=>q.empty?X.moveVertically(q,O,Q.height):rangeEnd(q,O));if(U.eq(j.selection))return!1;let F;if(Q.selfScroll){let q=X.coordsAtPos(j.selection.main.head),W=X.scrollDOM.getBoundingClientRect(),Y=W.top+Q.marginTop,G=W.bottom-Q.marginBottom;q&&q.top>Y&&q.bottom<G&&(F=EditorView.scrollIntoView(U.main.head,{y:"start",yMargin:q.top-Y}))}return X.dispatch(setSel(j,U),{effects:F}),!0}const cursorPageUp=X=>cursorByPage(X,!1),cursorPageDown=X=>cursorByPage(X,!0);function moveByLineBoundary(X,O,Q){let j=X.lineBlockAt(O.head),U=X.moveToLineBoundary(O,Q);if(U.head==O.head&&U.head!=(Q?j.to:j.from)&&(U=X.moveToLineBoundary(O,Q,!1)),!Q&&U.head==j.from&&j.length){let F=/^\s*/.exec(X.state.sliceDoc(j.from,Math.min(j.from+100,j.to)))[0].length;F&&O.head!=j.from+F&&(U=EditorSelection.cursor(j.from+F))}return U}const cursorLineBoundaryForward=X=>moveSel(X,O=>moveByLineBoundary(X,O,!0)),cursorLineBoundaryBackward=X=>moveSel(X,O=>moveByLineBoundary(X,O,!1)),cursorLineBoundaryLeft=X=>moveSel(X,O=>moveByLineBoundary(X,O,!ltrAtCursor(X))),cursorLineBoundaryRight=X=>moveSel(X,O=>moveByLineBoundary(X,O,ltrAtCursor(X))),cursorLineStart=X=>moveSel(X,O=>EditorSelection.cursor(X.lineBlockAt(O.head).from,1)),cursorLineEnd=X=>moveSel(X,O=>EditorSelection.cursor(X.lineBlockAt(O.head).to,-1));function toMatchingBracket(X,O,Q){let j=!1,U=updateSel(X.selection,F=>{let q=matchBrackets(X,F.head,-1)||matchBrackets(X,F.head,1)||F.head>0&&matchBrackets(X,F.head-1,1)||F.head<X.doc.length&&matchBrackets(X,F.head+1,-1);if(!q||!q.end)return F;j=!0;let W=q.start.from==F.head?q.end.to:q.end.from;return Q?EditorSelection.range(F.anchor,W):EditorSelection.cursor(W)});return j?(O(setSel(X,U)),!0):!1}const cursorMatchingBracket=({state:X,dispatch:O})=>toMatchingBracket(X,O,!1);function extendSel(X,O){let Q=updateSel(X.state.selection,j=>{let U=O(j);return EditorSelection.range(j.anchor,U.head,U.goalColumn,U.bidiLevel||void 0)});return Q.eq(X.state.selection)?!1:(X.dispatch(setSel(X.state,Q)),!0)}function selectByChar(X,O){return extendSel(X,Q=>X.moveByChar(Q,O))}const selectCharLeft=X=>selectByChar(X,!ltrAtCursor(X)),selectCharRight=X=>selectByChar(X,ltrAtCursor(X));function selectByGroup(X,O){return extendSel(X,Q=>X.moveByGroup(Q,O))}const selectGroupLeft=X=>selectByGroup(X,!ltrAtCursor(X)),selectGroupRight=X=>selectByGroup(X,ltrAtCursor(X)),selectSyntaxLeft=X=>extendSel(X,O=>moveBySyntax(X.state,O,!ltrAtCursor(X))),selectSyntaxRight=X=>extendSel(X,O=>moveBySyntax(X.state,O,ltrAtCursor(X)));function selectByLine(X,O){return extendSel(X,Q=>X.moveVertically(Q,O))}const selectLineUp=X=>selectByLine(X,!1),selectLineDown=X=>selectByLine(X,!0);function selectByPage(X,O){return extendSel(X,Q=>X.moveVertically(Q,O,pageInfo(X).height))}const selectPageUp=X=>selectByPage(X,!1),selectPageDown=X=>selectByPage(X,!0),selectLineBoundaryForward=X=>extendSel(X,O=>moveByLineBoundary(X,O,!0)),selectLineBoundaryBackward=X=>extendSel(X,O=>moveByLineBoundary(X,O,!1)),selectLineBoundaryLeft=X=>extendSel(X,O=>moveByLineBoundary(X,O,!ltrAtCursor(X))),selectLineBoundaryRight=X=>extendSel(X,O=>moveByLineBoundary(X,O,ltrAtCursor(X))),selectLineStart=X=>extendSel(X,O=>EditorSelection.cursor(X.lineBlockAt(O.head).from)),selectLineEnd=X=>extendSel(X,O=>EditorSelection.cursor(X.lineBlockAt(O.head).to)),cursorDocStart=({state:X,dispatch:O})=>(O(setSel(X,{anchor:0})),!0),cursorDocEnd=({state:X,dispatch:O})=>(O(setSel(X,{anchor:X.doc.length})),!0),selectDocStart=({state:X,dispatch:O})=>(O(setSel(X,{anchor:X.selection.main.anchor,head:0})),!0),selectDocEnd=({state:X,dispatch:O})=>(O(setSel(X,{anchor:X.selection.main.anchor,head:X.doc.length})),!0),selectAll=({state:X,dispatch:O})=>(O(X.update({selection:{anchor:0,head:X.doc.length},userEvent:"select"})),!0),selectLine=({state:X,dispatch:O})=>{let Q=selectedLineBlocks(X).map(({from:j,to:U})=>EditorSelection.range(j,Math.min(U+1,X.doc.length)));return O(X.update({selection:EditorSelection.create(Q),userEvent:"select"})),!0},selectParentSyntax=({state:X,dispatch:O})=>{let Q=updateSel(X.selection,j=>{var U;let F=syntaxTree(X).resolveInner(j.head,1);for(;!(F.from<j.from&&F.to>=j.to||F.to>j.to&&F.from<=j.from||!(!((U=F.parent)===null||U===void 0)&&U.parent));)F=F.parent;return EditorSelection.range(F.to,F.from)});return O(setSel(X,Q)),!0},simplifySelection=({state:X,dispatch:O})=>{let Q=X.selection,j=null;return Q.ranges.length>1?j=EditorSelection.create([Q.main]):Q.main.empty||(j=EditorSelection.create([EditorSelection.cursor(Q.main.head)])),j?(O(setSel(X,j)),!0):!1};function deleteBy(X,O){if(X.state.readOnly)return!1;let Q="delete.selection",{state:j}=X,U=j.changeByRange(F=>{let{from:q,to:W}=F;if(q==W){let Y=O(q);Y<q?(Q="delete.backward",Y=skipAtomic(X,Y,!1)):Y>q&&(Q="delete.forward",Y=skipAtomic(X,Y,!0)),q=Math.min(q,Y),W=Math.max(W,Y)}else q=skipAtomic(X,q,!1),W=skipAtomic(X,W,!0);return q==W?{range:F}:{changes:{from:q,to:W},range:EditorSelection.cursor(q)}});return U.changes.empty?!1:(X.dispatch(j.update(U,{scrollIntoView:!0,userEvent:Q,effects:Q=="delete.selection"?EditorView.announce.of(j.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(X,O,Q){if(X instanceof EditorView)for(let j of X.state.facet(EditorView.atomicRanges).map(U=>U(X)))j.between(O,O,(U,F)=>{U<O&&F>O&&(O=Q?F:U)});return O}const deleteByChar=(X,O)=>deleteBy(X,Q=>{let{state:j}=X,U=j.doc.lineAt(Q),F,q;if(!O&&Q>U.from&&Q<U.from+200&&!/[^ \t]/.test(F=U.text.slice(0,Q-U.from))){if(F[F.length-1]=="	")return Q-1;let W=countColumn(F,j.tabSize),Y=W%getIndentUnit(j)||getIndentUnit(j);for(let G=0;G<Y&&F[F.length-1-G]==" ";G++)Q--;q=Q}else q=findClusterBreak(U.text,Q-U.from,O,O)+U.from,q==Q&&U.number!=(O?j.doc.lines:1)&&(q+=O?1:-1);return q}),deleteCharBackward=X=>deleteByChar(X,!1),deleteCharForward=X=>deleteByChar(X,!0),deleteByGroup=(X,O)=>deleteBy(X,Q=>{let j=Q,{state:U}=X,F=U.doc.lineAt(j),q=U.charCategorizer(j);for(let W=null;;){if(j==(O?F.to:F.from)){j==Q&&F.number!=(O?U.doc.lines:1)&&(j+=O?1:-1);break}let Y=findClusterBreak(F.text,j-F.from,O)+F.from,G=F.text.slice(Math.min(j,Y)-F.from,Math.max(j,Y)-F.from),K=q(G);if(W!=null&&K!=W)break;(G!=" "||j!=Q)&&(W=K),j=Y}return j}),deleteGroupBackward=X=>deleteByGroup(X,!1),deleteGroupForward=X=>deleteByGroup(X,!0),deleteToLineEnd=X=>deleteBy(X,O=>{let Q=X.lineBlockAt(O).to;return O<Q?Q:Math.min(X.state.doc.length,O+1)}),deleteToLineStart=X=>deleteBy(X,O=>{let Q=X.lineBlockAt(O).from;return O>Q?Q:Math.max(0,O-1)}),splitLine=({state:X,dispatch:O})=>{if(X.readOnly)return!1;let Q=X.changeByRange(j=>({changes:{from:j.from,to:j.to,insert:Text.of(["",""])},range:EditorSelection.cursor(j.from)}));return O(X.update(Q,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:X,dispatch:O})=>{if(X.readOnly)return!1;let Q=X.changeByRange(j=>{if(!j.empty||j.from==0||j.from==X.doc.length)return{range:j};let U=j.from,F=X.doc.lineAt(U),q=U==F.from?U-1:findClusterBreak(F.text,U-F.from,!1)+F.from,W=U==F.to?U+1:findClusterBreak(F.text,U-F.from,!0)+F.from;return{changes:{from:q,to:W,insert:X.doc.slice(U,W).append(X.doc.slice(q,U))},range:EditorSelection.cursor(W)}});return Q.changes.empty?!1:(O(X.update(Q,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(X){let O=[],Q=-1;for(let j of X.selection.ranges){let U=X.doc.lineAt(j.from),F=X.doc.lineAt(j.to);if(!j.empty&&j.to==F.from&&(F=X.doc.lineAt(j.to-1)),Q>=U.number){let q=O[O.length-1];q.to=F.to,q.ranges.push(j)}else O.push({from:U.from,to:F.to,ranges:[j]});Q=F.number+1}return O}function moveLine(X,O,Q){if(X.readOnly)return!1;let j=[],U=[];for(let F of selectedLineBlocks(X)){if(Q?F.to==X.doc.length:F.from==0)continue;let q=X.doc.lineAt(Q?F.to+1:F.from-1),W=q.length+1;if(Q){j.push({from:F.to,to:q.to},{from:F.from,insert:q.text+X.lineBreak});for(let Y of F.ranges)U.push(EditorSelection.range(Math.min(X.doc.length,Y.anchor+W),Math.min(X.doc.length,Y.head+W)))}else{j.push({from:q.from,to:F.from},{from:F.to,insert:X.lineBreak+q.text});for(let Y of F.ranges)U.push(EditorSelection.range(Y.anchor-W,Y.head-W))}}return j.length?(O(X.update({changes:j,scrollIntoView:!0,selection:EditorSelection.create(U,X.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:X,dispatch:O})=>moveLine(X,O,!1),moveLineDown=({state:X,dispatch:O})=>moveLine(X,O,!0);function copyLine(X,O,Q){if(X.readOnly)return!1;let j=[];for(let U of selectedLineBlocks(X))Q?j.push({from:U.from,insert:X.doc.slice(U.from,U.to)+X.lineBreak}):j.push({from:U.to,insert:X.lineBreak+X.doc.slice(U.from,U.to)});return O(X.update({changes:j,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:X,dispatch:O})=>copyLine(X,O,!1),copyLineDown=({state:X,dispatch:O})=>copyLine(X,O,!0),deleteLine=X=>{if(X.state.readOnly)return!1;let{state:O}=X,Q=O.changes(selectedLineBlocks(O).map(({from:U,to:F})=>(U>0?U--:F<O.doc.length&&F++,{from:U,to:F}))),j=updateSel(O.selection,U=>X.moveVertically(U,!0)).map(Q);return X.dispatch({changes:Q,selection:j,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(X,O){if(/\(\)|\[\]|\{\}/.test(X.sliceDoc(O-1,O+1)))return{from:O,to:O};let Q=syntaxTree(X).resolveInner(O),j=Q.childBefore(O),U=Q.childAfter(O),F;return j&&U&&j.to<=O&&U.from>=O&&(F=j.type.prop(NodeProp.closedBy))&&F.indexOf(U.name)>-1&&X.doc.lineAt(j.to).from==X.doc.lineAt(U.from).from?{from:j.to,to:U.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(X){return({state:O,dispatch:Q})=>{if(O.readOnly)return!1;let j=O.changeByRange(U=>{let{from:F,to:q}=U,W=O.doc.lineAt(F),Y=!X&&F==q&&isBetweenBrackets(O,F);X&&(F=q=(q<=W.to?W:O.doc.lineAt(q)).to);let G=new IndentContext(O,{simulateBreak:F,simulateDoubleBreak:!!Y}),K=getIndentation(G,F);for(K==null&&(K=/^\s*/.exec(O.doc.lineAt(F).text)[0].length);q<W.to&&/\s/.test(W.text[q-W.from]);)q++;Y?{from:F,to:q}=Y:F>W.from&&F<W.from+100&&!/\S/.test(W.text.slice(0,F))&&(F=W.from);let J=["",indentString(O,K)];return Y&&J.push(indentString(O,G.lineIndent(W.from,-1))),{changes:{from:F,to:q,insert:Text.of(J)},range:EditorSelection.cursor(F+1+J[1].length)}});return Q(O.update(j,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(X,O){let Q=-1;return X.changeByRange(j=>{let U=[];for(let q=j.from;q<=j.to;){let W=X.doc.lineAt(q);W.number>Q&&(j.empty||j.to>W.from)&&(O(W,U,j),Q=W.number),q=W.to+1}let F=X.changes(U);return{changes:U,range:EditorSelection.range(F.mapPos(j.anchor,1),F.mapPos(j.head,1))}})}const indentSelection=({state:X,dispatch:O})=>{if(X.readOnly)return!1;let Q=Object.create(null),j=new IndentContext(X,{overrideIndentation:F=>{let q=Q[F];return q==null?-1:q}}),U=changeBySelectedLine(X,(F,q,W)=>{let Y=getIndentation(j,F.from);if(Y==null)return;/\S/.test(F.text)||(Y=0);let G=/^\s*/.exec(F.text)[0],K=indentString(X,Y);(G!=K||W.from<F.from+G.length)&&(Q[F.from]=Y,q.push({from:F.from,to:F.from+G.length,insert:K}))});return U.changes.empty||O(X.update(U,{userEvent:"indent"})),!0},indentMore=({state:X,dispatch:O})=>X.readOnly?!1:(O(X.update(changeBySelectedLine(X,(Q,j)=>{j.push({from:Q.from,insert:X.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:X,dispatch:O})=>X.readOnly?!1:(O(X.update(changeBySelectedLine(X,(Q,j)=>{let U=/^\s*/.exec(Q.text)[0];if(!U)return;let F=countColumn(U,X.tabSize),q=0,W=indentString(X,Math.max(0,F-getIndentUnit(X)));for(;q<U.length&&q<W.length&&U.charCodeAt(q)==W.charCodeAt(q);)q++;j.push({from:Q.from+q,to:Q.from+U.length,insert:W.slice(q)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(X=>({mac:X.key,run:X.run,shift:X.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap);function crelt(){var X=arguments[0];typeof X=="string"&&(X=document.createElement(X));var O=1,Q=arguments[1];if(Q&&typeof Q=="object"&&Q.nodeType==null&&!Array.isArray(Q)){for(var j in Q)if(Object.prototype.hasOwnProperty.call(Q,j)){var U=Q[j];typeof U=="string"?X.setAttribute(j,U):U!=null&&(X[j]=U)}O++}for(;O<arguments.length;O++)add(X,arguments[O]);return X}function add(X,O){if(typeof O=="string")X.appendChild(document.createTextNode(O));else if(O!=null)if(O.nodeType!=null)X.appendChild(O);else if(Array.isArray(O))for(var Q=0;Q<O.length;Q++)add(X,O[Q]);else throw new RangeError("Unsupported child node: "+O)}const basicNormalize=typeof String.prototype.normalize=="function"?X=>X.normalize("NFKD"):X=>X;class SearchCursor{constructor(O,Q,j=0,U=O.length,F,q){this.test=q,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=O.iterRange(j,U),this.bufferStart=j,this.normalize=F?W=>F(basicNormalize(W)):basicNormalize,this.query=this.normalize(Q)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let O=this.peek();if(O<0)return this.done=!0,this;let Q=fromCodePoint(O),j=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(O);let U=this.normalize(Q);for(let F=0,q=j;;F++){let W=U.charCodeAt(F),Y=this.match(W,q);if(Y)return this.value=Y,this;if(F==U.length-1)break;q==j&&F<Q.length&&Q.charCodeAt(F)==W&&q++}}}match(O,Q){let j=null;for(let U=0;U<this.matches.length;U+=2){let F=this.matches[U],q=!1;this.query.charCodeAt(F)==O&&(F==this.query.length-1?j={from:this.matches[U+1],to:Q+1}:(this.matches[U]++,q=!0)),q||(this.matches.splice(U,2),U-=2)}return this.query.charCodeAt(0)==O&&(this.query.length==1?j={from:Q,to:Q+1}:this.matches.push(1,Q)),j&&this.test&&!this.test(j.from,j.to,this.buffer,this.bufferPos)&&(j=null),j}}typeof Symbol!="undefined"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(O,Q,j,U=0,F=O.length){if(this.text=O,this.to=F,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(Q))return new MultilineRegExpCursor(O,Q,j,U,F);this.re=new RegExp(Q,baseFlags+(j!=null&&j.ignoreCase?"i":"")),this.test=j==null?void 0:j.test,this.iter=O.iter();let q=O.lineAt(U);this.curLineStart=q.from,this.matchPos=toCharEnd(O,U),this.getLine(this.curLineStart)}getLine(O){this.iter.next(O),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let O=this.matchPos-this.curLineStart;;){this.re.lastIndex=O;let Q=this.matchPos<=this.to&&this.re.exec(this.curLine);if(Q){let j=this.curLineStart+Q.index,U=j+Q[0].length;if(this.matchPos=toCharEnd(this.text,U+(j==U?1:0)),j==this.curLineStart+this.curLine.length&&this.nextLine(),(j<U||j>this.value.to)&&(!this.test||this.test(j,U,Q)))return this.value={from:j,to:U,match:Q},this;O=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),O=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(O,Q){this.from=O,this.text=Q}get to(){return this.from+this.text.length}static get(O,Q,j){let U=flattened.get(O);if(!U||U.from>=j||U.to<=Q){let W=new FlattenedDoc(Q,O.sliceString(Q,j));return flattened.set(O,W),W}if(U.from==Q&&U.to==j)return U;let{text:F,from:q}=U;return q>Q&&(F=O.sliceString(Q,q)+F,q=Q),U.to<j&&(F+=O.sliceString(U.to,j)),flattened.set(O,new FlattenedDoc(q,F)),new FlattenedDoc(Q,F.slice(Q-q,j-q))}}class MultilineRegExpCursor{constructor(O,Q,j,U,F){this.text=O,this.to=F,this.done=!1,this.value=empty,this.matchPos=toCharEnd(O,U),this.re=new RegExp(Q,baseFlags+(j!=null&&j.ignoreCase?"i":"")),this.test=j==null?void 0:j.test,this.flat=FlattenedDoc.get(O,U,this.chunkEnd(U+5e3))}chunkEnd(O){return O>=this.to?this.to:this.text.lineAt(O).to}next(){for(;;){let O=this.re.lastIndex=this.matchPos-this.flat.from,Q=this.re.exec(this.flat.text);if(Q&&!Q[0]&&Q.index==O&&(this.re.lastIndex=O+1,Q=this.re.exec(this.flat.text)),Q){let j=this.flat.from+Q.index,U=j+Q[0].length;if((this.flat.to>=this.to||Q.index+Q[0].length<=this.flat.text.length-10)&&(!this.test||this.test(j,U,Q)))return this.value={from:j,to:U,match:Q},this.matchPos=toCharEnd(this.text,U+(j==U?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(X){try{return new RegExp(X,baseFlags),!0}catch{return!1}}function toCharEnd(X,O){if(O>=X.length)return O;let Q=X.lineAt(O),j;for(;O<Q.to&&(j=Q.text.charCodeAt(O-Q.from))>=56320&&j<57344;)O++;return O}function createLineDialog(X){let O=crelt("input",{class:"cm-textfield",name:"line"}),Q=crelt("form",{class:"cm-gotoLine",onkeydown:U=>{U.keyCode==27?(U.preventDefault(),X.dispatch({effects:dialogEffect.of(!1)}),X.focus()):U.keyCode==13&&(U.preventDefault(),j())},onsubmit:U=>{U.preventDefault(),j()}},crelt("label",X.state.phrase("Go to line"),": ",O)," ",crelt("button",{class:"cm-button",type:"submit"},X.state.phrase("go")));function j(){let U=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(O.value);if(!U)return;let{state:F}=X,q=F.doc.lineAt(F.selection.main.head),[,W,Y,G,K]=U,J=G?+G.slice(1):0,ee=Y?+Y:q.number;if(Y&&K){let re=ee/100;W&&(re=re*(W=="-"?-1:1)+q.number/F.doc.lines),ee=Math.round(F.doc.lines*re)}else Y&&W&&(ee=ee*(W=="-"?-1:1)+q.number);let te=F.doc.line(Math.max(1,Math.min(F.doc.lines,ee)));X.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(te.from+Math.max(0,Math.min(J,te.length))),scrollIntoView:!0}),X.focus()}return{dom:Q}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(X,O){for(let Q of O.effects)Q.is(dialogEffect)&&(X=Q.value);return X},provide:X=>showPanel.from(X,O=>O?createLineDialog:null)}),gotoLine=X=>{let O=getPanel(X,createLineDialog);if(!O){let Q=[dialogEffect.of(!0)];X.state.field(dialogField,!1)==null&&Q.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),X.dispatch({effects:Q}),O=getPanel(X,createLineDialog)}return O&&O.dom.querySelector("input").focus(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(X){return combineConfig(X,defaultHighlightOptions,{highlightWordAroundCursor:(O,Q)=>O||Q,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(X){let O=[defaultTheme,matchHighlighter];return X&&O.push(highlightConfig.of(X)),O}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(X,O,Q,j){return(Q==0||X(O.sliceDoc(Q-1,Q))!=CharCategory.Word)&&(j==O.doc.length||X(O.sliceDoc(j,j+1))!=CharCategory.Word)}function insideWord(X,O,Q,j){return X(O.sliceDoc(Q,Q+1))==CharCategory.Word&&X(O.sliceDoc(j-1,j))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(X){this.decorations=this.getDeco(X)}update(X){(X.selectionSet||X.docChanged||X.viewportChanged)&&(this.decorations=this.getDeco(X.view))}getDeco(X){let O=X.state.facet(highlightConfig),{state:Q}=X,j=Q.selection;if(j.ranges.length>1)return Decoration.none;let U=j.main,F,q=null;if(U.empty){if(!O.highlightWordAroundCursor)return Decoration.none;let Y=Q.wordAt(U.head);if(!Y)return Decoration.none;q=Q.charCategorizer(U.head),F=Q.sliceDoc(Y.from,Y.to)}else{let Y=U.to-U.from;if(Y<O.minSelectionLength||Y>200)return Decoration.none;if(O.wholeWords){if(F=Q.sliceDoc(U.from,U.to),q=Q.charCategorizer(U.head),!(insideWordBoundaries(q,Q,U.from,U.to)&&insideWord(q,Q,U.from,U.to)))return Decoration.none}else if(F=Q.sliceDoc(U.from,U.to).trim(),!F)return Decoration.none}let W=[];for(let Y of X.visibleRanges){let G=new SearchCursor(Q.doc,F,Y.from,Y.to);for(;!G.next().done;){let{from:K,to:J}=G.value;if((!q||insideWordBoundaries(q,Q,K,J))&&(U.empty&&K<=U.from&&J>=U.to?W.push(mainMatchDeco.range(K,J)):(K>=U.to||J<=U.from)&&W.push(matchDeco.range(K,J)),W.length>O.maxMatches))return Decoration.none}}return Decoration.set(W)}},{decorations:X=>X.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:X,dispatch:O})=>{let{selection:Q}=X,j=EditorSelection.create(Q.ranges.map(U=>X.wordAt(U.head)||EditorSelection.cursor(U.head)),Q.mainIndex);return j.eq(Q)?!1:(O(X.update({selection:j})),!0)};function findNextOccurrence(X,O){let{main:Q,ranges:j}=X.selection,U=X.wordAt(Q.head),F=U&&U.from==Q.from&&U.to==Q.to;for(let q=!1,W=new SearchCursor(X.doc,O,j[j.length-1].to);;)if(W.next(),W.done){if(q)return null;W=new SearchCursor(X.doc,O,0,Math.max(0,j[j.length-1].from-1)),q=!0}else{if(q&&j.some(Y=>Y.from==W.value.from))continue;if(F){let Y=X.wordAt(W.value.from);if(!Y||Y.from!=W.value.from||Y.to!=W.value.to)continue}return W.value}}const selectNextOccurrence=({state:X,dispatch:O})=>{let{ranges:Q}=X.selection;if(Q.some(F=>F.from===F.to))return selectWord({state:X,dispatch:O});let j=X.sliceDoc(Q[0].from,Q[0].to);if(X.selection.ranges.some(F=>X.sliceDoc(F.from,F.to)!=j))return!1;let U=findNextOccurrence(X,j);return U?(O(X.update({selection:X.selection.addRange(EditorSelection.range(U.from,U.to),!1),effects:EditorView.scrollIntoView(U.to)})),!0):!1},searchConfigFacet=Facet.define({combine(X){return combineConfig(X,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:O=>new SearchPanel(O),scrollToMatch:O=>EditorView.scrollIntoView(O)})}});class SearchQuery{constructor(O){this.search=O.search,this.caseSensitive=!!O.caseSensitive,this.literal=!!O.literal,this.regexp=!!O.regexp,this.replace=O.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!O.wholeWord}unquote(O){return this.literal?O:O.replace(/\\([nrt\\])/g,(Q,j)=>j=="n"?`
`:j=="r"?"\r":j=="t"?"	":"\\")}eq(O){return this.search==O.search&&this.replace==O.replace&&this.caseSensitive==O.caseSensitive&&this.regexp==O.regexp&&this.wholeWord==O.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(O,Q=0,j){let U=O.doc?O:EditorState.create({doc:O});return j==null&&(j=U.doc.length),this.regexp?regexpCursor(this,U,Q,j):stringCursor(this,U,Q,j)}}class QueryType{constructor(O){this.spec=O}}function stringCursor(X,O,Q,j){return new SearchCursor(O.doc,X.unquoted,Q,j,X.caseSensitive?void 0:U=>U.toLowerCase(),X.wholeWord?stringWordTest(O.doc,O.charCategorizer(O.selection.main.head)):void 0)}function stringWordTest(X,O){return(Q,j,U,F)=>((F>Q||F+U.length<j)&&(F=Math.max(0,Q-2),U=X.sliceString(F,Math.min(X.length,j+2))),(O(charBefore(U,Q-F))!=CharCategory.Word||O(charAfter(U,Q-F))!=CharCategory.Word)&&(O(charAfter(U,j-F))!=CharCategory.Word||O(charBefore(U,j-F))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(O){super(O)}nextMatch(O,Q,j){let U=stringCursor(this.spec,O,j,O.doc.length).nextOverlapping();return U.done&&(U=stringCursor(this.spec,O,0,Q).nextOverlapping()),U.done?null:U.value}prevMatchInRange(O,Q,j){for(let U=j;;){let F=Math.max(Q,U-1e4-this.spec.unquoted.length),q=stringCursor(this.spec,O,F,U),W=null;for(;!q.nextOverlapping().done;)W=q.value;if(W)return W;if(F==Q)return null;U-=1e4}}prevMatch(O,Q,j){return this.prevMatchInRange(O,0,Q)||this.prevMatchInRange(O,j,O.doc.length)}getReplacement(O){return this.spec.unquote(this.spec.replace)}matchAll(O,Q){let j=stringCursor(this.spec,O,0,O.doc.length),U=[];for(;!j.next().done;){if(U.length>=Q)return null;U.push(j.value)}return U}highlight(O,Q,j,U){let F=stringCursor(this.spec,O,Math.max(0,Q-this.spec.unquoted.length),Math.min(j+this.spec.unquoted.length,O.doc.length));for(;!F.next().done;)U(F.value.from,F.value.to)}}function regexpCursor(X,O,Q,j){return new RegExpCursor(O.doc,X.search,{ignoreCase:!X.caseSensitive,test:X.wholeWord?regexpWordTest(O.charCategorizer(O.selection.main.head)):void 0},Q,j)}function charBefore(X,O){return X.slice(findClusterBreak(X,O,!1),O)}function charAfter(X,O){return X.slice(O,findClusterBreak(X,O))}function regexpWordTest(X){return(O,Q,j)=>!j[0].length||(X(charBefore(j.input,j.index))!=CharCategory.Word||X(charAfter(j.input,j.index))!=CharCategory.Word)&&(X(charAfter(j.input,j.index+j[0].length))!=CharCategory.Word||X(charBefore(j.input,j.index+j[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(O,Q,j){let U=regexpCursor(this.spec,O,j,O.doc.length).next();return U.done&&(U=regexpCursor(this.spec,O,0,Q).next()),U.done?null:U.value}prevMatchInRange(O,Q,j){for(let U=1;;U++){let F=Math.max(Q,j-U*1e4),q=regexpCursor(this.spec,O,F,j),W=null;for(;!q.next().done;)W=q.value;if(W&&(F==Q||W.from>F+10))return W;if(F==Q)return null}}prevMatch(O,Q,j){return this.prevMatchInRange(O,0,Q)||this.prevMatchInRange(O,j,O.doc.length)}getReplacement(O){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(Q,j)=>j=="$"?"$":j=="&"?O.match[0]:j!="0"&&+j<O.match.length?O.match[j]:Q))}matchAll(O,Q){let j=regexpCursor(this.spec,O,0,O.doc.length),U=[];for(;!j.next().done;){if(U.length>=Q)return null;U.push(j.value)}return U}highlight(O,Q,j,U){let F=regexpCursor(this.spec,O,Math.max(0,Q-250),Math.min(j+250,O.doc.length));for(;!F.next().done;)U(F.value.from,F.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(X){return new SearchState(defaultQuery(X).create(),null)},update(X,O){for(let Q of O.effects)Q.is(setSearchQuery)?X=new SearchState(Q.value.create(),X.panel):Q.is(togglePanel$1)&&(X=new SearchState(X.query,Q.value?createSearchPanel:null));return X},provide:X=>showPanel.from(X,O=>O.panel)});class SearchState{constructor(O,Q){this.query=O,this.panel=Q}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(X){this.view=X,this.decorations=this.highlight(X.state.field(searchState))}update(X){let O=X.state.field(searchState);(O!=X.startState.field(searchState)||X.docChanged||X.selectionSet||X.viewportChanged)&&(this.decorations=this.highlight(O))}highlight({query:X,panel:O}){if(!O||!X.spec.valid)return Decoration.none;let{view:Q}=this,j=new RangeSetBuilder;for(let U=0,F=Q.visibleRanges,q=F.length;U<q;U++){let{from:W,to:Y}=F[U];for(;U<q-1&&Y>F[U+1].from-2*250;)Y=F[++U].to;X.highlight(Q.state,W,Y,(G,K)=>{let J=Q.state.selection.ranges.some(ee=>ee.from==G&&ee.to==K);j.add(G,K,J?selectedMatchMark:matchMark)})}return j.finish()}},{decorations:X=>X.decorations});function searchCommand(X){return O=>{let Q=O.state.field(searchState,!1);return Q&&Q.query.spec.valid?X(O,Q):openSearchPanel(O)}}const findNext=searchCommand((X,{query:O})=>{let{to:Q}=X.state.selection.main,j=O.nextMatch(X.state,Q,Q);if(!j)return!1;let U=EditorSelection.single(j.from,j.to),F=X.state.facet(searchConfigFacet);return X.dispatch({selection:U,effects:[announceMatch(X,j),F.scrollToMatch(U.main)],userEvent:"select.search"}),!0}),findPrevious=searchCommand((X,{query:O})=>{let{state:Q}=X,{from:j}=Q.selection.main,U=O.prevMatch(Q,j,j);if(!U)return!1;let F=EditorSelection.single(U.from,U.to),q=X.state.facet(searchConfigFacet);return X.dispatch({selection:F,effects:[announceMatch(X,U),q.scrollToMatch(F.main)],userEvent:"select.search"}),!0}),selectMatches=searchCommand((X,{query:O})=>{let Q=O.matchAll(X.state,1e3);return!Q||!Q.length?!1:(X.dispatch({selection:EditorSelection.create(Q.map(j=>EditorSelection.range(j.from,j.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:X,dispatch:O})=>{let Q=X.selection;if(Q.ranges.length>1||Q.main.empty)return!1;let{from:j,to:U}=Q.main,F=[],q=0;for(let W=new SearchCursor(X.doc,X.sliceDoc(j,U));!W.next().done;){if(F.length>1e3)return!1;W.value.from==j&&(q=F.length),F.push(EditorSelection.range(W.value.from,W.value.to))}return O(X.update({selection:EditorSelection.create(F,q),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((X,{query:O})=>{let{state:Q}=X,{from:j,to:U}=Q.selection.main;if(Q.readOnly)return!1;let F=O.nextMatch(Q,j,j);if(!F)return!1;let q=[],W,Y,G=[];if(F.from==j&&F.to==U&&(Y=Q.toText(O.getReplacement(F)),q.push({from:F.from,to:F.to,insert:Y}),F=O.nextMatch(Q,F.from,F.to),G.push(EditorView.announce.of(Q.phrase("replaced match on line $",Q.doc.lineAt(j).number)+"."))),F){let K=q.length==0||q[0].from>=F.to?0:F.to-F.from-Y.length;W=EditorSelection.single(F.from-K,F.to-K),G.push(announceMatch(X,F)),G.push(Q.facet(searchConfigFacet).scrollToMatch(W.main))}return X.dispatch({changes:q,selection:W,effects:G,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((X,{query:O})=>{if(X.state.readOnly)return!1;let Q=O.matchAll(X.state,1e9).map(U=>{let{from:F,to:q}=U;return{from:F,to:q,insert:O.getReplacement(U)}});if(!Q.length)return!1;let j=X.state.phrase("replaced $ matches",Q.length)+".";return X.dispatch({changes:Q,effects:EditorView.announce.of(j),userEvent:"input.replace.all"}),!0});function createSearchPanel(X){return X.state.facet(searchConfigFacet).createPanel(X)}function defaultQuery(X,O){var Q,j,U,F;let q=X.selection.main,W=q.empty||q.to>q.from+100?"":X.sliceDoc(q.from,q.to);if(O&&!W)return O;let Y=X.facet(searchConfigFacet);return new SearchQuery({search:((Q=O==null?void 0:O.literal)!==null&&Q!==void 0?Q:Y.literal)?W:W.replace(/\n/g,"\\n"),caseSensitive:(j=O==null?void 0:O.caseSensitive)!==null&&j!==void 0?j:Y.caseSensitive,literal:(U=O==null?void 0:O.literal)!==null&&U!==void 0?U:Y.literal,wholeWord:(F=O==null?void 0:O.wholeWord)!==null&&F!==void 0?F:Y.wholeWord})}const openSearchPanel=X=>{let O=X.state.field(searchState,!1);if(O&&O.panel){let Q=getPanel(X,createSearchPanel);if(!Q)return!1;let j=Q.dom.querySelector("[main-field]");if(j&&j!=X.root.activeElement){let U=defaultQuery(X.state,O.query.spec);U.valid&&X.dispatch({effects:setSearchQuery.of(U)}),j.focus(),j.select()}}else X.dispatch({effects:[togglePanel$1.of(!0),O?setSearchQuery.of(defaultQuery(X.state,O.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=X=>{let O=X.state.field(searchState,!1);if(!O||!O.panel)return!1;let Q=getPanel(X,createSearchPanel);return Q&&Q.dom.contains(X.root.activeElement)&&X.focus(),X.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(O){this.view=O;let Q=this.query=O.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:Q.search,placeholder:phrase(O,"Find"),"aria-label":phrase(O,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:Q.replace,placeholder:phrase(O,"Replace"),"aria-label":phrase(O,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:Q.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:Q.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:Q.wholeWord,onchange:this.commit});function j(U,F,q){return crelt("button",{class:"cm-button",name:U,onclick:F,type:"button"},q)}this.dom=crelt("div",{onkeydown:U=>this.keydown(U),class:"cm-search"},[this.searchField,j("next",()=>findNext(O),[phrase(O,"next")]),j("prev",()=>findPrevious(O),[phrase(O,"previous")]),j("select",()=>selectMatches(O),[phrase(O,"all")]),crelt("label",null,[this.caseField,phrase(O,"match case")]),crelt("label",null,[this.reField,phrase(O,"regexp")]),crelt("label",null,[this.wordField,phrase(O,"by word")]),...O.state.readOnly?[]:[crelt("br"),this.replaceField,j("replace",()=>replaceNext(O),[phrase(O,"replace")]),j("replaceAll",()=>replaceAll(O),[phrase(O,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(O),"aria-label":phrase(O,"close"),type:"button"},["\xD7"])])}commit(){let O=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});O.eq(this.query)||(this.query=O,this.view.dispatch({effects:setSearchQuery.of(O)}))}keydown(O){runScopeHandlers(this.view,O,"search-panel")?O.preventDefault():O.keyCode==13&&O.target==this.searchField?(O.preventDefault(),(O.shiftKey?findPrevious:findNext)(this.view)):O.keyCode==13&&O.target==this.replaceField&&(O.preventDefault(),replaceNext(this.view))}update(O){for(let Q of O.transactions)for(let j of Q.effects)j.is(setSearchQuery)&&!j.value.eq(this.query)&&this.setQuery(j.value)}setQuery(O){this.query=O,this.searchField.value=O.search,this.replaceField.value=O.replace,this.caseField.checked=O.caseSensitive,this.reField.checked=O.regexp,this.wordField.checked=O.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(X,O){return X.state.phrase(O)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(X,{from:O,to:Q}){let j=X.state.doc.lineAt(O),U=X.state.doc.lineAt(Q).to,F=Math.max(j.from,O-AnnounceMargin),q=Math.min(U,Q+AnnounceMargin),W=X.state.sliceDoc(F,q);if(F!=j.from){for(let Y=0;Y<AnnounceMargin;Y++)if(!Break.test(W[Y+1])&&Break.test(W[Y])){W=W.slice(Y);break}}if(q!=U){for(let Y=W.length-1;Y>W.length-AnnounceMargin;Y--)if(!Break.test(W[Y-1])&&Break.test(W[Y])){W=W.slice(0,Y);break}}return EditorView.announce.of(`${X.state.phrase("current match")}. ${W} ${X.state.phrase("on line")} ${j.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class CompletionContext{constructor(O,Q,j){this.state=O,this.pos=Q,this.explicit=j,this.abortListeners=[]}tokenBefore(O){let Q=syntaxTree(this.state).resolveInner(this.pos,-1);for(;Q&&O.indexOf(Q.name)<0;)Q=Q.parent;return Q?{from:Q.from,to:this.pos,text:this.state.sliceDoc(Q.from,this.pos),type:Q.type}:null}matchBefore(O){let Q=this.state.doc.lineAt(this.pos),j=Math.max(Q.from,this.pos-250),U=Q.text.slice(j-Q.from,this.pos-Q.from),F=U.search(ensureAnchor(O,!1));return F<0?null:{from:j+F,to:this.pos,text:U.slice(F)}}get aborted(){return this.abortListeners==null}addEventListener(O,Q){O=="abort"&&this.abortListeners&&this.abortListeners.push(Q)}}function toSet(X){let O=Object.keys(X).join(""),Q=/\w/.test(O);return Q&&(O=O.replace(/\w/g,"")),`[${Q?"\\w":""}${O.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(X){let O=Object.create(null),Q=Object.create(null);for(let{label:U}of X){O[U[0]]=!0;for(let F=1;F<U.length;F++)Q[U[F]]=!0}let j=toSet(O)+toSet(Q)+"*$";return[new RegExp("^"+j),new RegExp(j)]}function completeFromList(X){let O=X.map(U=>typeof U=="string"?{label:U}:U),[Q,j]=O.every(U=>/^\w+$/.test(U.label))?[/\w*$/,/\w+$/]:prefixMatch(O);return U=>{let F=U.matchBefore(j);return F||U.explicit?{from:F?F.from:U.pos,options:O,validFor:Q}:null}}function ifNotIn(X,O){return Q=>{for(let j=syntaxTree(Q.state).resolveInner(Q.pos,-1);j;j=j.parent){if(X.indexOf(j.name)>-1)return null;if(j.type.isTop)break}return O(Q)}}class Option{constructor(O,Q,j,U){this.completion=O,this.source=Q,this.match=j,this.score=U}}function cur(X){return X.selection.main.from}function ensureAnchor(X,O){var Q;let{source:j}=X,U=O&&j[0]!="^",F=j[j.length-1]!="$";return!U&&!F?X:new RegExp(`${U?"^":""}(?:${j})${F?"$":""}`,(Q=X.flags)!==null&&Q!==void 0?Q:X.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(X,O,Q,j){let{main:U}=X.selection,F=Q-U.from,q=j-U.from;return Object.assign(Object.assign({},X.changeByRange(W=>W!=U&&Q!=j&&X.sliceDoc(W.from+F,W.from+q)!=X.sliceDoc(Q,j)?{range:W}:{changes:{from:W.from+F,to:j==U.from?W.to:W.from+q,insert:O},range:EditorSelection.cursor(W.from+F+O.length)})),{userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(X){if(!Array.isArray(X))return X;let O=SourceCache.get(X);return O||SourceCache.set(X,O=completeFromList(X)),O}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(O){this.pattern=O,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let Q=0;Q<O.length;){let j=codePointAt(O,Q),U=codePointSize(j);this.chars.push(j);let F=O.slice(Q,Q+U),q=F.toUpperCase();this.folded.push(codePointAt(q==F?F.toLowerCase():q,0)),Q+=U}this.astral=O.length!=this.chars.length}match(O){if(this.pattern.length==0)return[-100];if(O.length<this.pattern.length)return null;let{chars:Q,folded:j,any:U,precise:F,byWord:q}=this;if(Q.length==1){let de=codePointAt(O,0),he=codePointSize(de),fe=he==O.length?0:-100;if(de!=Q[0])if(de==j[0])fe+=-200;else return null;return[fe,0,he]}let W=O.indexOf(this.pattern);if(W==0)return[O.length==this.pattern.length?0:-100,0,this.pattern.length];let Y=Q.length,G=0;if(W<0){for(let de=0,he=Math.min(O.length,200);de<he&&G<Y;){let fe=codePointAt(O,de);(fe==Q[G]||fe==j[G])&&(U[G++]=de),de+=codePointSize(fe)}if(G<Y)return null}let K=0,J=0,ee=!1,te=0,re=-1,oe=-1,se=/[a-z]/.test(O),ne=!0;for(let de=0,he=Math.min(O.length,200),fe=0;de<he&&J<Y;){let Oe=codePointAt(O,de);W<0&&(K<Y&&Oe==Q[K]&&(F[K++]=de),te<Y&&(Oe==Q[te]||Oe==j[te]?(te==0&&(re=de),oe=de+1,te++):te=0));let ce,me=Oe<255?Oe>=48&&Oe<=57||Oe>=97&&Oe<=122?2:Oe>=65&&Oe<=90?1:0:(ce=fromCodePoint(Oe))!=ce.toLowerCase()?1:ce!=ce.toUpperCase()?2:0;(!de||me==1&&se||fe==0&&me!=0)&&(Q[J]==Oe||j[J]==Oe&&(ee=!0)?q[J++]=de:q.length&&(ne=!1)),fe=me,de+=codePointSize(Oe)}return J==Y&&q[0]==0&&ne?this.result(-100+(ee?-200:0),q,O):te==Y&&re==0?[-200-O.length+(oe==O.length?0:-100),0,oe]:W>-1?[-700-O.length,W,W+this.pattern.length]:te==Y?[-200+-700-O.length,re,oe]:J==Y?this.result(-100+(ee?-200:0)+-700+(ne?0:-1100),q,O):Q.length==2?null:this.result((U[0]?-700:0)+-200+-1100,U,O)}result(O,Q,j){let U=[O-j.length],F=1;for(let q of Q){let W=q+(this.astral?codePointSize(codePointAt(j,q)):1);F>1&&U[F-1]==q?U[F-1]=W:(U[F++]=q,U[F++]=W)}return U}}const completionConfig=Facet.define({combine(X){return combineConfig(X,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(O,Q)=>O.label.localeCompare(Q.label),interactionDelay:75},{defaultKeymap:(O,Q)=>O&&Q,closeOnBlur:(O,Q)=>O&&Q,icons:(O,Q)=>O&&Q,tooltipClass:(O,Q)=>j=>joinClass(O(j),Q(j)),optionClass:(O,Q)=>j=>joinClass(O(j),Q(j)),addToOptions:(O,Q)=>O.concat(Q)})}});function joinClass(X,O){return X?O?X+" "+O:X:O}function defaultPositionInfo(X,O,Q,j,U){let F=X.textDirection==Direction.RTL,q=F,W=!1,Y="top",G,K,J=O.left-U.left,ee=U.right-O.right,te=j.right-j.left,re=j.bottom-j.top;if(q&&J<Math.min(te,ee)?q=!1:!q&&ee<Math.min(te,J)&&(q=!0),te<=(q?J:ee))G=Math.max(U.top,Math.min(Q.top,U.bottom-re))-O.top,K=Math.min(400,q?J:ee);else{W=!0,K=Math.min(400,(F?O.right:U.right-O.left)-30);let oe=U.bottom-O.bottom;oe>=re||oe>O.top?G=Q.bottom-O.top:(Y="bottom",G=O.bottom-Q.top)}return{style:`${Y}: ${G}px; max-width: ${K}px`,class:"cm-completionInfo-"+(W?F?"left-narrow":"right-narrow":q?"left":"right")}}function optionContent(X){let O=X.addToOptions.slice();return X.icons&&O.push({render(Q){let j=document.createElement("div");return j.classList.add("cm-completionIcon"),Q.type&&j.classList.add(...Q.type.split(/\s+/g).map(U=>"cm-completionIcon-"+U)),j.setAttribute("aria-hidden","true"),j},position:20}),O.push({render(Q,j,U){let F=document.createElement("span");F.className="cm-completionLabel";let{label:q}=Q,W=0;for(let Y=1;Y<U.length;){let G=U[Y++],K=U[Y++];G>W&&F.appendChild(document.createTextNode(q.slice(W,G)));let J=F.appendChild(document.createElement("span"));J.appendChild(document.createTextNode(q.slice(G,K))),J.className="cm-completionMatchedText",W=K}return W<q.length&&F.appendChild(document.createTextNode(q.slice(W))),F},position:50},{render(Q){if(!Q.detail)return null;let j=document.createElement("span");return j.className="cm-completionDetail",j.textContent=Q.detail,j},position:80}),O.sort((Q,j)=>Q.position-j.position).map(Q=>Q.render)}function rangeAroundSelected(X,O,Q){if(X<=Q)return{from:0,to:X};if(O<0&&(O=0),O<=X>>1){let U=Math.floor(O/Q);return{from:U*Q,to:(U+1)*Q}}let j=Math.floor((X-O)/Q);return{from:X-(j+1)*Q,to:X-j*Q}}class CompletionTooltip{constructor(O,Q,j){this.view=O,this.stateField=Q,this.applyCompletion=j,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:Y=>this.placeInfo(Y),key:this},this.space=null,this.currentClass="";let U=O.state.field(Q),{options:F,selected:q}=U.open,W=O.state.facet(completionConfig);this.optionContent=optionContent(W),this.optionClass=W.optionClass,this.tooltipClass=W.tooltipClass,this.range=rangeAroundSelected(F.length,q,W.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(O.state),this.dom.addEventListener("mousedown",Y=>{for(let G=Y.target,K;G&&G!=this.dom;G=G.parentNode)if(G.nodeName=="LI"&&(K=/-(\d+)$/.exec(G.id))&&+K[1]<F.length){this.applyCompletion(O,F[+K[1]]),Y.preventDefault();return}}),this.dom.addEventListener("focusout",Y=>{let G=O.state.field(this.stateField,!1);G&&G.tooltip&&O.state.facet(completionConfig).closeOnBlur&&Y.relatedTarget!=O.contentDOM&&O.dispatch({effects:closeCompletionEffect.of(null)})}),this.list=this.dom.appendChild(this.createListBox(F,U.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(O){var Q,j,U;let F=O.state.field(this.stateField),q=O.startState.field(this.stateField);this.updateTooltipClass(O.state),F!=q&&(this.updateSel(),((Q=F.open)===null||Q===void 0?void 0:Q.disabled)!=((j=q.open)===null||j===void 0?void 0:j.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((U=F.open)===null||U===void 0)&&U.disabled)))}updateTooltipClass(O){let Q=this.tooltipClass(O);if(Q!=this.currentClass){for(let j of this.currentClass.split(" "))j&&this.dom.classList.remove(j);for(let j of Q.split(" "))j&&this.dom.classList.add(j);this.currentClass=Q}}positioned(O){this.space=O,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let O=this.view.state.field(this.stateField),Q=O.open;if((Q.selected>-1&&Q.selected<this.range.from||Q.selected>=this.range.to)&&(this.range=rangeAroundSelected(Q.options.length,Q.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(Q.options,O.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(Q.selected)){this.destroyInfo();let{completion:j}=Q.options[Q.selected],{info:U}=j;if(!U)return;let F=typeof U=="string"?document.createTextNode(U):U(j);if(!F)return;"then"in F?F.then(q=>{q&&this.view.state.field(this.stateField,!1)==O&&this.addInfoPane(q,j)}).catch(q=>logException(this.view.state,q,"completion info")):this.addInfoPane(F,j)}}addInfoPane(O,Q){this.destroyInfo();let j=this.info=document.createElement("div");if(j.className="cm-tooltip cm-completionInfo",O.nodeType!=null)j.appendChild(O),this.infoDestroy=null;else{let{dom:U,destroy:F}=O;j.appendChild(U),this.infoDestroy=F||null}this.dom.appendChild(j),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(O){let Q=null;for(let j=this.list.firstChild,U=this.range.from;j;j=j.nextSibling,U++)j.nodeName!="LI"||!j.id?U--:U==O?j.hasAttribute("aria-selected")||(j.setAttribute("aria-selected","true"),Q=j):j.hasAttribute("aria-selected")&&j.removeAttribute("aria-selected");return Q&&scrollIntoView(this.list,Q),Q}measureInfo(){let O=this.dom.querySelector("[aria-selected]");if(!O||!this.info)return null;let Q=this.dom.getBoundingClientRect(),j=this.info.getBoundingClientRect(),U=O.getBoundingClientRect(),F=this.space;if(!F){let q=this.dom.ownerDocument.defaultView||window;F={left:0,top:0,right:q.innerWidth,bottom:q.innerHeight}}return U.top>Math.min(F.bottom,Q.bottom)-10||U.bottom<Math.max(F.top,Q.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,Q,U,j,F)}placeInfo(O){this.info&&(O?(O.style&&(this.info.style.cssText=O.style),this.info.className="cm-tooltip cm-completionInfo "+(O.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(O,Q,j){const U=document.createElement("ul");U.id=Q,U.setAttribute("role","listbox"),U.setAttribute("aria-expanded","true"),U.setAttribute("aria-label",this.view.state.phrase("Completions"));let F=null;for(let q=j.from;q<j.to;q++){let{completion:W,match:Y}=O[q],{section:G}=W;if(G){let ee=typeof G=="string"?G:G.name;if(ee!=F&&(q>j.from||j.from==0))if(F=ee,typeof G!="string"&&G.header)U.appendChild(G.header(G));else{let te=U.appendChild(document.createElement("completion-section"));te.textContent=ee}}const K=U.appendChild(document.createElement("li"));K.id=Q+"-"+q,K.setAttribute("role","option");let J=this.optionClass(W);J&&(K.className=J);for(let ee of this.optionContent){let te=ee(W,this.view.state,Y);te&&K.appendChild(te)}}return j.from&&U.classList.add("cm-completionListIncompleteTop"),j.to<O.length&&U.classList.add("cm-completionListIncompleteBottom"),U}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(X,O){return Q=>new CompletionTooltip(Q,X,O)}function scrollIntoView(X,O){let Q=X.getBoundingClientRect(),j=O.getBoundingClientRect();j.top<Q.top?X.scrollTop-=Q.top-j.top:j.bottom>Q.bottom&&(X.scrollTop+=j.bottom-Q.bottom)}function score(X){return(X.boost||0)*100+(X.apply?10:0)+(X.info?5:0)+(X.type?1:0)}function sortOptions(X,O){let Q=[],j=null,U=Y=>{Q.push(Y);let{section:G}=Y.completion;if(G){j||(j=[]);let K=typeof G=="string"?G:G.name;j.some(J=>J.name==K)||j.push(typeof G=="string"?{name:K}:G)}};for(let Y of X)if(Y.hasResult())if(Y.result.filter===!1){let G=Y.result.getMatch;for(let K of Y.result.options){let J=[1e9-Q.length];if(G)for(let ee of G(K))J.push(ee);U(new Option(K,Y.source,J,J[0]))}}else{let G=new FuzzyMatcher(O.sliceDoc(Y.from,Y.to)),K;for(let J of Y.result.options)(K=G.match(J.label))&&U(new Option(J,Y.source,K,K[0]+(J.boost||0)))}if(j){let Y=Object.create(null),G=0,K=(J,ee)=>{var te,re;return((te=J.rank)!==null&&te!==void 0?te:1e9)-((re=ee.rank)!==null&&re!==void 0?re:1e9)||(J.name<ee.name?-1:1)};for(let J of j.sort(K))G-=1e5,Y[J.name]=G;for(let J of Q){let{section:ee}=J.completion;ee&&(J.score+=Y[typeof ee=="string"?ee:ee.name])}}let F=[],q=null,W=O.facet(completionConfig).compareCompletions;for(let Y of Q.sort((G,K)=>K.score-G.score||W(G.completion,K.completion))){let G=Y.completion;!q||q.label!=G.label||q.detail!=G.detail||q.type!=null&&G.type!=null&&q.type!=G.type||q.apply!=G.apply||q.boost!=G.boost?F.push(Y):score(Y.completion)>score(q)&&(F[F.length-1]=Y),q=Y.completion}return F}class CompletionDialog{constructor(O,Q,j,U,F,q){this.options=O,this.attrs=Q,this.tooltip=j,this.timestamp=U,this.selected=F,this.disabled=q}setSelected(O,Q){return O==this.selected||O>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(Q,O),this.tooltip,this.timestamp,O,this.disabled)}static build(O,Q,j,U,F){let q=sortOptions(O,Q);if(!q.length)return U&&O.some(Y=>Y.state==1)?new CompletionDialog(U.options,U.attrs,U.tooltip,U.timestamp,U.selected,!0):null;let W=Q.facet(completionConfig).selectOnOpen?0:-1;if(U&&U.selected!=W&&U.selected!=-1){let Y=U.options[U.selected].completion;for(let G=0;G<q.length;G++)if(q[G].completion==Y){W=G;break}}return new CompletionDialog(q,makeAttrs(j,W),{pos:O.reduce((Y,G)=>G.hasResult()?Math.min(Y,G.from):Y,1e8),create:completionTooltip(completionState,applyCompletion),above:F.aboveCursor},U?U.timestamp:Date.now(),W,!1)}map(O){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:O.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(O,Q,j){this.active=O,this.id=Q,this.open=j}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(O){let{state:Q}=O,j=Q.facet(completionConfig),F=(j.override||Q.languageDataAt("autocomplete",cur(Q)).map(asSource)).map(W=>(this.active.find(G=>G.source==W)||new ActiveSource(W,this.active.some(G=>G.state!=0)?1:0)).update(O,j));F.length==this.active.length&&F.every((W,Y)=>W==this.active[Y])&&(F=this.active);let q=this.open;q&&O.docChanged&&(q=q.map(O.changes)),O.selection||F.some(W=>W.hasResult()&&O.changes.touchesRange(W.from,W.to))||!sameResults(F,this.active)?q=CompletionDialog.build(F,Q,this.id,q,j):q&&q.disabled&&!F.some(W=>W.state==1)&&(q=null),!q&&F.every(W=>W.state!=1)&&F.some(W=>W.hasResult())&&(F=F.map(W=>W.hasResult()?new ActiveSource(W.source,0):W));for(let W of O.effects)W.is(setSelectedEffect)&&(q=q&&q.setSelected(W.value,this.id));return F==this.active&&q==this.open?this:new CompletionState(F,this.id,q)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(X,O){if(X==O)return!0;for(let Q=0,j=0;;){for(;Q<X.length&&!X[Q].hasResult;)Q++;for(;j<O.length&&!O[j].hasResult;)j++;let U=Q==X.length,F=j==O.length;if(U||F)return U==F;if(X[Q++].result!=O[j++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(X,O){let Q={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":X};return O>-1&&(Q["aria-activedescendant"]=X+"-"+O),Q}const none=[];function getUserEvent(X){return X.isUserEvent("input.type")?"input":X.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(O,Q,j=-1){this.source=O,this.state=Q,this.explicitPos=j}hasResult(){return!1}update(O,Q){let j=getUserEvent(O),U=this;j?U=U.handleUserEvent(O,j,Q):O.docChanged?U=U.handleChange(O):O.selection&&U.state!=0&&(U=new ActiveSource(U.source,0));for(let F of O.effects)if(F.is(startCompletionEffect))U=new ActiveSource(U.source,1,F.value?cur(O.state):-1);else if(F.is(closeCompletionEffect))U=new ActiveSource(U.source,0);else if(F.is(setActiveEffect))for(let q of F.value)q.source==U.source&&(U=q);return U}handleUserEvent(O,Q,j){return Q=="delete"||!j.activateOnTyping?this.map(O.changes):new ActiveSource(this.source,1)}handleChange(O){return O.changes.touchesRange(cur(O.startState))?new ActiveSource(this.source,0):this.map(O.changes)}map(O){return O.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,O.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(O,Q,j,U,F){super(O,2,Q),this.result=j,this.from=U,this.to=F}hasResult(){return!0}handleUserEvent(O,Q,j){var U;let F=O.changes.mapPos(this.from),q=O.changes.mapPos(this.to,1),W=cur(O.state);if((this.explicitPos<0?W<=F:W<this.from)||W>q||Q=="delete"&&cur(O.startState)==this.from)return new ActiveSource(this.source,Q=="input"&&j.activateOnTyping?1:0);let Y=this.explicitPos<0?-1:O.changes.mapPos(this.explicitPos),G;return checkValid(this.result.validFor,O.state,F,q)?new ActiveResult(this.source,Y,this.result,F,q):this.result.update&&(G=this.result.update(this.result,F,q,new CompletionContext(O.state,W,Y>=0)))?new ActiveResult(this.source,Y,G,G.from,(U=G.to)!==null&&U!==void 0?U:cur(O.state)):new ActiveSource(this.source,1,Y)}handleChange(O){return O.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(O.changes)}map(O){return O.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:O.mapPos(this.explicitPos),this.result,O.mapPos(this.from),O.mapPos(this.to,1))}}function checkValid(X,O,Q,j){if(!X)return!1;let U=O.sliceDoc(Q,j);return typeof X=="function"?X(U,Q,j,O):ensureAnchor(X,!0).test(U)}const setActiveEffect=StateEffect.define({map(X,O){return X.map(Q=>Q.map(O))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(X,O){return X.update(O)},provide:X=>[showTooltip.from(X,O=>O.tooltip),EditorView.contentAttributes.from(X,O=>O.attrs)]});function applyCompletion(X,O){const Q=O.completion.apply||O.completion.label;let j=X.state.field(completionState).active.find(U=>U.source==O.source);return j instanceof ActiveResult?(typeof Q=="string"?X.dispatch(Object.assign(Object.assign({},insertCompletionText(X.state,Q,j.from,j.to)),{annotations:pickedCompletion.of(O.completion)})):Q(X,O.completion,j.from,j.to),!0):!1}function moveCompletionSelection(X,O="option"){return Q=>{let j=Q.state.field(completionState,!1);if(!j||!j.open||j.open.disabled||Date.now()-j.open.timestamp<Q.state.facet(completionConfig).interactionDelay)return!1;let U=1,F;O=="page"&&(F=getTooltip(Q,j.open.tooltip))&&(U=Math.max(2,Math.floor(F.dom.offsetHeight/F.dom.querySelector("li").offsetHeight)-1));let{length:q}=j.open.options,W=j.open.selected>-1?j.open.selected+U*(X?1:-1):X?0:q-1;return W<0?W=O=="page"?0:q-1:W>=q&&(W=O=="page"?q-1:0),Q.dispatch({effects:setSelectedEffect.of(W)}),!0}}const acceptCompletion=X=>{let O=X.state.field(completionState,!1);return X.state.readOnly||!O||!O.open||O.open.selected<0||O.open.disabled||Date.now()-O.open.timestamp<X.state.facet(completionConfig).interactionDelay?!1:applyCompletion(X,O.open.options[O.open.selected])},startCompletion=X=>X.state.field(completionState,!1)?(X.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=X=>{let O=X.state.field(completionState,!1);return!O||!O.active.some(Q=>Q.state!=0)?!1:(X.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(O,Q){this.active=O,this.context=Q,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(X){this.view=X,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let O of X.state.field(completionState).active)O.state==1&&this.startQuery(O)}update(X){let O=X.state.field(completionState);if(!X.selectionSet&&!X.docChanged&&X.startState.field(completionState)==O)return;let Q=X.transactions.some(j=>(j.selection||j.docChanged)&&!getUserEvent(j));for(let j=0;j<this.running.length;j++){let U=this.running[j];if(Q||U.updates.length+X.transactions.length>MaxUpdateCount&&Date.now()-U.time>MinAbortTime){for(let F of U.context.abortListeners)try{F()}catch(q){logException(this.view.state,q)}U.context.abortListeners=null,this.running.splice(j--,1)}else U.updates.push(...X.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=O.active.some(j=>j.state==1&&!this.running.some(U=>U.active.source==j.source))?setTimeout(()=>this.startUpdate(),DebounceTime):-1,this.composing!=0)for(let j of X.transactions)getUserEvent(j)=="input"?this.composing=2:this.composing==2&&j.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:X}=this.view,O=X.field(completionState);for(let Q of O.active)Q.state==1&&!this.running.some(j=>j.active.source==Q.source)&&this.startQuery(Q)}startQuery(X){let{state:O}=this.view,Q=cur(O),j=new CompletionContext(O,Q,X.explicitPos==Q),U=new RunningQuery(X,j);this.running.push(U),Promise.resolve(X.source(j)).then(F=>{U.context.aborted||(U.done=F||null,this.scheduleAccept())},F=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,F)})}scheduleAccept(){this.running.every(X=>X.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DebounceTime))}accept(){var X;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let O=[],Q=this.view.state.facet(completionConfig);for(let j=0;j<this.running.length;j++){let U=this.running[j];if(U.done===void 0)continue;if(this.running.splice(j--,1),U.done){let q=new ActiveResult(U.active.source,U.active.explicitPos,U.done,U.done.from,(X=U.done.to)!==null&&X!==void 0?X:cur(U.updates.length?U.updates[0].startState:this.view.state));for(let W of U.updates)q=q.update(W,Q);if(q.hasResult()){O.push(q);continue}}let F=this.view.state.field(completionState).active.find(q=>q.source==U.active.source);if(F&&F.state==1)if(U.done==null){let q=new ActiveSource(U.active.source,0);for(let W of U.updates)q=q.update(W,Q);q.state!=1&&O.push(q)}else this.startQuery(F)}O.length&&this.view.dispatch({effects:setActiveEffect.of(O)})}},{eventHandlers:{blur(X){let O=this.view.state.field(completionState,!1);if(O&&O.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let Q=O.open&&getTooltip(this.view,O.open.tooltip);(!Q||!Q.dom.contains(X.relatedTarget))&&this.view.dispatch({effects:closeCompletionEffect.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(O,Q,j,U){this.field=O,this.line=Q,this.from=j,this.to=U}}class FieldRange{constructor(O,Q,j){this.field=O,this.from=Q,this.to=j}map(O){let Q=O.mapPos(this.from,-1,MapMode.TrackDel),j=O.mapPos(this.to,1,MapMode.TrackDel);return Q==null||j==null?null:new FieldRange(this.field,Q,j)}}class Snippet{constructor(O,Q){this.lines=O,this.fieldPositions=Q}instantiate(O,Q){let j=[],U=[Q],F=O.doc.lineAt(Q),q=/^\s*/.exec(F.text)[0];for(let Y of this.lines){if(j.length){let G=q,K=/^\t*/.exec(Y)[0].length;for(let J=0;J<K;J++)G+=O.facet(indentUnit);U.push(Q+G.length-K),Y=G+Y.slice(K)}j.push(Y),Q+=Y.length+1}let W=this.fieldPositions.map(Y=>new FieldRange(Y.field,U[Y.line]+Y.from,U[Y.line]+Y.to));return{text:j,ranges:W}}static parse(O){let Q=[],j=[],U=[],F;for(let q of O.split(/\r\n?|\n/)){for(;F=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(q);){let W=F[1]?+F[1]:null,Y=F[2]||F[3]||"",G=-1;for(let K=0;K<Q.length;K++)(W!=null?Q[K].seq==W:Y?Q[K].name==Y:!1)&&(G=K);if(G<0){let K=0;for(;K<Q.length&&(W==null||Q[K].seq!=null&&Q[K].seq<W);)K++;Q.splice(K,0,{seq:W,name:Y}),G=K;for(let J of U)J.field>=G&&J.field++}U.push(new FieldPos(G,j.length,F.index,F.index+Y.length)),q=q.slice(0,F.index)+Y+q.slice(F.index+F[0].length)}for(let W;W=/\\([{}])/.exec(q);){q=q.slice(0,W.index)+W[1]+q.slice(W.index+W[0].length);for(let Y of U)Y.line==j.length&&Y.from>W.index&&(Y.from--,Y.to--)}j.push(q)}return new Snippet(j,U)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let X=document.createElement("span");return X.className="cm-snippetFieldPosition",X}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(O,Q){this.ranges=O,this.active=Q,this.deco=Decoration.set(O.map(j=>(j.from==j.to?fieldMarker:fieldRange).range(j.from,j.to)))}map(O){let Q=[];for(let j of this.ranges){let U=j.map(O);if(!U)return null;Q.push(U)}return new ActiveSnippet(Q,this.active)}selectionInsideField(O){return O.ranges.every(Q=>this.ranges.some(j=>j.field==this.active&&j.from<=Q.from&&j.to>=Q.to))}}const setActive=StateEffect.define({map(X,O){return X&&X.map(O)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(X,O){for(let Q of O.effects){if(Q.is(setActive))return Q.value;if(Q.is(moveToField)&&X)return new ActiveSnippet(X.ranges,Q.value)}return X&&O.docChanged&&(X=X.map(O.changes)),X&&O.selection&&!X.selectionInsideField(O.selection)&&(X=null),X},provide:X=>EditorView.decorations.from(X,O=>O?O.deco:Decoration.none)});function fieldSelection(X,O){return EditorSelection.create(X.filter(Q=>Q.field==O).map(Q=>EditorSelection.range(Q.from,Q.to)))}function snippet(X){let O=Snippet.parse(X);return(Q,j,U,F)=>{let{text:q,ranges:W}=O.instantiate(Q.state,U),Y={changes:{from:U,to:F,insert:Text.of(q)},scrollIntoView:!0,annotations:j?pickedCompletion.of(j):void 0};if(W.length&&(Y.selection=fieldSelection(W,0)),W.length>1){let G=new ActiveSnippet(W,0),K=Y.effects=[setActive.of(G)];Q.state.field(snippetState,!1)===void 0&&K.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$1]))}Q.dispatch(Q.state.update(Y))}}function moveField(X){return({state:O,dispatch:Q})=>{let j=O.field(snippetState,!1);if(!j||X<0&&j.active==0)return!1;let U=j.active+X,F=X>0&&!j.ranges.some(q=>q.field==U+X);return Q(O.update({selection:fieldSelection(j.ranges,U),effects:setActive.of(F?null:new ActiveSnippet(j.ranges,U))})),!0}}const clearSnippet=({state:X,dispatch:O})=>X.field(snippetState,!1)?(O(X.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(X){return X.length?X[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],X=>X.facet(snippetKeymap)));function snippetCompletion(X,O){return Object.assign(Object.assign({},O),{apply:snippet(X)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(X,O){let Q=O.state.field(snippetState,!1),j;if(!Q||(j=O.posAtCoords({x:X.clientX,y:X.clientY}))==null)return!1;let U=Q.ranges.find(F=>F.from<=j&&F.to>=j);return!U||U.field==Q.active?!1:(O.dispatch({selection:fieldSelection(Q.ranges,U.field),effects:setActive.of(Q.ranges.some(F=>F.field>U.field)?new ActiveSnippet(Q.ranges,U.field):null)}),!0)}}),defaults$1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(X,O){let Q=O.mapPos(X,-1,MapMode.TrackAfter);return Q==null?void 0:Q}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(X,O){if(O.selection){let Q=O.state.doc.lineAt(O.selection.main.head).from,j=O.startState.doc.lineAt(O.startState.selection.main.head).from;Q!=O.changes.mapPos(j,-1)&&(X=RangeSet.empty)}X=X.map(O.changes);for(let Q of O.effects)Q.is(closeBracketEffect)&&(X=X.update({add:[closedBracket.range(Q.value,Q.value+1)]}));return X}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(X){for(let O=0;O<definedClosing.length;O+=2)if(definedClosing.charCodeAt(O)==X)return definedClosing.charAt(O+1);return fromCodePoint(X<128?X:X+1)}function config(X,O){return X.languageDataAt("closeBrackets",O)[0]||defaults$1}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((X,O,Q,j)=>{if((android$1?X.composing:X.compositionStarted)||X.state.readOnly)return!1;let U=X.state.selection.main;if(j.length>2||j.length==2&&codePointSize(codePointAt(j,0))==1||O!=U.from||Q!=U.to)return!1;let F=insertBracket(X.state,j);return F?(X.dispatch(F),!0):!1}),deleteBracketPair=({state:X,dispatch:O})=>{if(X.readOnly)return!1;let j=config(X,X.selection.main.head).brackets||defaults$1.brackets,U=null,F=X.changeByRange(q=>{if(q.empty){let W=prevChar(X.doc,q.head);for(let Y of j)if(Y==W&&nextChar(X.doc,q.head)==closing(codePointAt(Y,0)))return{changes:{from:q.head-Y.length,to:q.head+Y.length},range:EditorSelection.cursor(q.head-Y.length)}}return{range:U=q}});return U||O(X.update(F,{scrollIntoView:!0,userEvent:"delete.backward"})),!U},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(X,O){let Q=config(X,X.selection.main.head),j=Q.brackets||defaults$1.brackets;for(let U of j){let F=closing(codePointAt(U,0));if(O==U)return F==U?handleSame(X,U,j.indexOf(U+U+U)>-1,Q):handleOpen(X,U,F,Q.before||defaults$1.before);if(O==F&&closedBracketAt(X,X.selection.main.from))return handleClose(X,U,F)}return null}function closedBracketAt(X,O){let Q=!1;return X.field(bracketState).between(0,X.doc.length,j=>{j==O&&(Q=!0)}),Q}function nextChar(X,O){let Q=X.sliceString(O,O+2);return Q.slice(0,codePointSize(codePointAt(Q,0)))}function prevChar(X,O){let Q=X.sliceString(O-2,O);return codePointSize(codePointAt(Q,0))==Q.length?Q:Q.slice(1)}function handleOpen(X,O,Q,j){let U=null,F=X.changeByRange(q=>{if(!q.empty)return{changes:[{insert:O,from:q.from},{insert:Q,from:q.to}],effects:closeBracketEffect.of(q.to+O.length),range:EditorSelection.range(q.anchor+O.length,q.head+O.length)};let W=nextChar(X.doc,q.head);return!W||/\s/.test(W)||j.indexOf(W)>-1?{changes:{insert:O+Q,from:q.head},effects:closeBracketEffect.of(q.head+O.length),range:EditorSelection.cursor(q.head+O.length)}:{range:U=q}});return U?null:X.update(F,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(X,O,Q){let j=null,U=X.changeByRange(F=>F.empty&&nextChar(X.doc,F.head)==Q?{changes:{from:F.head,to:F.head+Q.length,insert:Q},range:EditorSelection.cursor(F.head+Q.length)}:j={range:F});return j?null:X.update(U,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(X,O,Q,j){let U=j.stringPrefixes||defaults$1.stringPrefixes,F=null,q=X.changeByRange(W=>{if(!W.empty)return{changes:[{insert:O,from:W.from},{insert:O,from:W.to}],effects:closeBracketEffect.of(W.to+O.length),range:EditorSelection.range(W.anchor+O.length,W.head+O.length)};let Y=W.head,G=nextChar(X.doc,Y),K;if(G==O){if(nodeStart(X,Y))return{changes:{insert:O+O,from:Y},effects:closeBracketEffect.of(Y+O.length),range:EditorSelection.cursor(Y+O.length)};if(closedBracketAt(X,Y)){let ee=Q&&X.sliceDoc(Y,Y+O.length*3)==O+O+O?O+O+O:O;return{changes:{from:Y,to:Y+ee.length,insert:ee},range:EditorSelection.cursor(Y+ee.length)}}}else{if(Q&&X.sliceDoc(Y-2*O.length,Y)==O+O&&(K=canStartStringAt(X,Y-2*O.length,U))>-1&&nodeStart(X,K))return{changes:{insert:O+O+O+O,from:Y},effects:closeBracketEffect.of(Y+O.length),range:EditorSelection.cursor(Y+O.length)};if(X.charCategorizer(Y)(G)!=CharCategory.Word&&canStartStringAt(X,Y,U)>-1&&!probablyInString(X,Y,O,U))return{changes:{insert:O+O,from:Y},effects:closeBracketEffect.of(Y+O.length),range:EditorSelection.cursor(Y+O.length)}}return{range:F=W}});return F?null:X.update(q,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(X,O){let Q=syntaxTree(X).resolveInner(O+1);return Q.parent&&Q.from==O}function probablyInString(X,O,Q,j){let U=syntaxTree(X).resolveInner(O,-1),F=j.reduce((q,W)=>Math.max(q,W.length),0);for(let q=0;q<5;q++){let W=X.sliceDoc(U.from,Math.min(U.to,U.from+Q.length+F)),Y=W.indexOf(Q);if(!Y||Y>-1&&j.indexOf(W.slice(0,Y))>-1){let K=U.firstChild;for(;K&&K.from==U.from&&K.to-K.from>Q.length+Y;){if(X.sliceDoc(K.to-Q.length,K.to)==Q)return!1;K=K.firstChild}return!0}let G=U.to==O&&U.parent;if(!G)break;U=G}return!1}function canStartStringAt(X,O,Q){let j=X.charCategorizer(O);if(j(X.sliceDoc(O-1,O))!=CharCategory.Word)return O;for(let U of Q){let F=O-U.length;if(X.sliceDoc(F,O)==U&&j(X.sliceDoc(F-1,F))!=CharCategory.Word)return F}return-1}function autocompletion(X={}){return[completionState,completionConfig.of(X),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],X=>X.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(O,Q,j){this.from=O,this.to=Q,this.diagnostic=j}}class LintState{constructor(O,Q,j){this.diagnostics=O,this.panel=Q,this.selected=j}static init(O,Q,j){let U=O,F=j.facet(lintConfig).markerFilter;F&&(U=F(U));let q=Decoration.set(U.map(W=>W.from==W.to||W.from==W.to-1&&j.doc.lineAt(W.from).to==W.from?Decoration.widget({widget:new DiagnosticWidget(W),diagnostic:W}).range(W.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+W.severity+(W.markClass?" "+W.markClass:"")},diagnostic:W}).range(W.from,W.to)),!0);return new LintState(q,Q,findDiagnostic(q))}}function findDiagnostic(X,O=null,Q=0){let j=null;return X.between(Q,1e9,(U,F,{spec:q})=>{if(!(O&&q.diagnostic!=O))return j=new SelectedDiagnostic(U,F,q.diagnostic),!1}),j}function hideTooltip(X,O){let Q=X.startState.doc.lineAt(O.pos);return!!(X.effects.some(j=>j.is(setDiagnosticsEffect))||X.changes.touchesRange(Q.from,Q.to))}function maybeEnableLint(X,O){return X.field(lintState,!1)?O:O.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(X,O){if(O.docChanged){let Q=X.diagnostics.map(O.changes),j=null;if(X.selected){let U=O.changes.mapPos(X.selected.from,1);j=findDiagnostic(Q,X.selected.diagnostic,U)||findDiagnostic(Q,null,U)}X=new LintState(Q,X.panel,j)}for(let Q of O.effects)Q.is(setDiagnosticsEffect)?X=LintState.init(Q.value,X.panel,O.state):Q.is(togglePanel)?X=new LintState(X.diagnostics,Q.value?LintPanel.open:null,X.selected):Q.is(movePanelSelection)&&(X=new LintState(X.diagnostics,X.panel,Q.value));return X},provide:X=>[showPanel.from(X,O=>O.panel),EditorView.decorations.from(X,O=>O.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(X,O,Q){let{diagnostics:j}=X.state.field(lintState),U=[],F=2e8,q=0;j.between(O-(Q<0?1:0),O+(Q>0?1:0),(Y,G,{spec:K})=>{O>=Y&&O<=G&&(Y==G||(O>Y||Q>0)&&(O<G||Q<0))&&(U.push(K.diagnostic),F=Math.min(Y,F),q=Math.max(G,q))});let W=X.state.facet(lintConfig).tooltipFilter;return W&&(U=W(U)),U.length?{pos:F,end:q,above:X.state.doc.lineAt(F).to<q,create(){return{dom:diagnosticsTooltip(X,U)}}}:null}function diagnosticsTooltip(X,O){return crelt("ul",{class:"cm-tooltip-lint"},O.map(Q=>renderDiagnostic(X,Q,!1)))}const openLintPanel=X=>{let O=X.state.field(lintState,!1);(!O||!O.panel)&&X.dispatch({effects:maybeEnableLint(X.state,[togglePanel.of(!0)])});let Q=getPanel(X,LintPanel.open);return Q&&Q.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=X=>{let O=X.state.field(lintState,!1);return!O||!O.panel?!1:(X.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=X=>{let O=X.state.field(lintState,!1);if(!O)return!1;let Q=X.state.selection.main,j=O.diagnostics.iter(Q.to+1);return!j.value&&(j=O.diagnostics.iter(0),!j.value||j.from==Q.from&&j.to==Q.to)?!1:(X.dispatch({selection:{anchor:j.from,head:j.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(X){return Object.assign({sources:X.map(O=>O.source)},combineConfig(X.map(O=>O.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(O,Q)=>O?Q?j=>O(j)||Q(j):O:Q}))}});function assignKeys(X){let O=[];if(X)e:for(let{name:Q}of X){for(let j=0;j<Q.length;j++){let U=Q[j];if(/[a-zA-Z]/.test(U)&&!O.some(F=>F.toLowerCase()==U.toLowerCase())){O.push(U);continue e}}O.push("")}return O}function renderDiagnostic(X,O,Q){var j;let U=Q?assignKeys(O.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+O.severity},crelt("span",{class:"cm-diagnosticText"},O.renderMessage?O.renderMessage():O.message),(j=O.actions)===null||j===void 0?void 0:j.map((F,q)=>{let W=!1,Y=ee=>{if(ee.preventDefault(),W)return;W=!0;let te=findDiagnostic(X.state.field(lintState).diagnostics,O);te&&F.apply(X,te.from,te.to)},{name:G}=F,K=U[q]?G.indexOf(U[q]):-1,J=K<0?G:[G.slice(0,K),crelt("u",G.slice(K,K+1)),G.slice(K+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:Y,onmousedown:Y,"aria-label":` Action: ${G}${K<0?"":` (access key "${U[q]})"`}.`},J)}),O.source&&crelt("div",{class:"cm-diagnosticSource"},O.source))}class DiagnosticWidget extends WidgetType{constructor(O){super(),this.diagnostic=O}eq(O){return O.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(O,Q){this.diagnostic=Q,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(O,Q,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(O){this.view=O,this.items=[];let Q=U=>{if(U.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(U.keyCode==38||U.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(U.keyCode==40||U.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(U.keyCode==36)this.moveSelection(0);else if(U.keyCode==35)this.moveSelection(this.items.length-1);else if(U.keyCode==13)this.view.focus();else if(U.keyCode>=65&&U.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:F}=this.items[this.selectedIndex],q=assignKeys(F.actions);for(let W=0;W<q.length;W++)if(q[W].toUpperCase().charCodeAt(0)==U.keyCode){let Y=findDiagnostic(this.view.state.field(lintState).diagnostics,F);Y&&F.actions[W].apply(O,Y.from,Y.to)}}else return;U.preventDefault()},j=U=>{for(let F=0;F<this.items.length;F++)this.items[F].dom.contains(U.target)&&this.moveSelection(F)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:Q,onclick:j}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"\xD7")),this.update()}get selectedIndex(){let O=this.view.state.field(lintState).selected;if(!O)return-1;for(let Q=0;Q<this.items.length;Q++)if(this.items[Q].diagnostic==O.diagnostic)return Q;return-1}update(){let{diagnostics:O,selected:Q}=this.view.state.field(lintState),j=0,U=!1,F=null;for(O.between(0,this.view.state.doc.length,(q,W,{spec:Y})=>{let G=-1,K;for(let J=j;J<this.items.length;J++)if(this.items[J].diagnostic==Y.diagnostic){G=J;break}G<0?(K=new PanelItem(this.view,Y.diagnostic),this.items.splice(j,0,K),U=!0):(K=this.items[G],G>j&&(this.items.splice(j,G-j),U=!0)),Q&&K.diagnostic==Q.diagnostic?K.dom.hasAttribute("aria-selected")||(K.dom.setAttribute("aria-selected","true"),F=K):K.dom.hasAttribute("aria-selected")&&K.dom.removeAttribute("aria-selected"),j++});j<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)U=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),U=!0),F?(this.list.setAttribute("aria-activedescendant",F.id),this.view.requestMeasure({key:this,read:()=>({sel:F.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:q,panel:W})=>{q.top<W.top?this.list.scrollTop-=W.top-q.top:q.bottom>W.bottom&&(this.list.scrollTop+=q.bottom-W.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),U&&this.sync()}sync(){let O=this.list.firstChild;function Q(){let j=O;O=j.nextSibling,j.remove()}for(let j of this.items)if(j.dom.parentNode==this.list){for(;O!=j.dom;)Q();O=j.dom.nextSibling}else this.list.insertBefore(j.dom,O);for(;O;)Q()}moveSelection(O){if(this.selectedIndex<0)return;let Q=this.view.state.field(lintState),j=findDiagnostic(Q.diagnostics,this.items[O].diagnostic);!j||this.view.dispatch({selection:{anchor:j.from,head:j.to},scrollIntoView:!0,effects:movePanelSelection.of(j)})}static open(O){return new LintPanel(O)}}function svg(X,O='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${O}>${encodeURIComponent(X)}</svg>')`}function underline(X){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${X}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],X=>{let{selected:O,panel:Q}=X.field(lintState);return!O||!Q||O.from==O.to?Decoration.none:Decoration.set([activeMark.range(O.from,O.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];class Stack{constructor(O,Q,j,U,F,q,W,Y,G,K=0,J){this.p=O,this.stack=Q,this.state=j,this.reducePos=U,this.pos=F,this.score=q,this.buffer=W,this.bufferBase=Y,this.curContext=G,this.lookAhead=K,this.parent=J}toString(){return`[${this.stack.filter((O,Q)=>Q%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(O,Q,j=0){let U=O.parser.context;return new Stack(O,[],Q,j,j,0,[],0,U?new StackContext(U,U.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(O,Q){this.stack.push(this.state,Q,this.bufferBase+this.buffer.length),this.state=O}reduce(O){var Q;let j=O>>19,U=O&65535,{parser:F}=this.p,q=F.dynamicPrecedence(U);if(q&&(this.score+=q),j==0){this.pushState(F.getGoto(this.state,U,!0),this.reducePos),U<F.minRepeatTerm&&this.storeNode(U,this.reducePos,this.reducePos,4,!0),this.reduceContext(U,this.reducePos);return}let W=this.stack.length-(j-1)*3-(O&262144?6:0),Y=W?this.stack[W-2]:this.p.ranges[0].from,G=this.reducePos-Y;G>=2e3&&!(!((Q=this.p.parser.nodeSet.types[U])===null||Q===void 0)&&Q.isAnonymous)&&(Y==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=G):this.p.lastBigReductionSize<G&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=Y,this.p.lastBigReductionSize=G));let K=W?this.stack[W-1]:0,J=this.bufferBase+this.buffer.length-K;if(U<F.minRepeatTerm||O&131072){let ee=F.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(U,Y,ee,J+4,!0)}if(O&262144)this.state=this.stack[W];else{let ee=this.stack[W-3];this.state=F.getGoto(ee,U,!0)}for(;this.stack.length>W;)this.stack.pop();this.reduceContext(U,Y)}storeNode(O,Q,j,U=4,F=!1){if(O==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let q=this,W=this.buffer.length;if(W==0&&q.parent&&(W=q.bufferBase-q.parent.bufferBase,q=q.parent),W>0&&q.buffer[W-4]==0&&q.buffer[W-1]>-1){if(Q==j)return;if(q.buffer[W-2]>=Q){q.buffer[W-2]=j;return}}}if(!F||this.pos==j)this.buffer.push(O,Q,j,U);else{let q=this.buffer.length;if(q>0&&this.buffer[q-4]!=0)for(;q>0&&this.buffer[q-2]>j;)this.buffer[q]=this.buffer[q-4],this.buffer[q+1]=this.buffer[q-3],this.buffer[q+2]=this.buffer[q-2],this.buffer[q+3]=this.buffer[q-1],q-=4,U>4&&(U-=4);this.buffer[q]=O,this.buffer[q+1]=Q,this.buffer[q+2]=j,this.buffer[q+3]=U}}shift(O,Q,j){let U=this.pos;if(O&131072)this.pushState(O&65535,this.pos);else if((O&262144)==0){let F=O,{parser:q}=this.p;(j>this.pos||Q<=q.maxNode)&&(this.pos=j,q.stateFlag(F,1)||(this.reducePos=j)),this.pushState(F,U),this.shiftContext(Q,U),Q<=q.maxNode&&this.buffer.push(Q,U,j,4)}else this.pos=j,this.shiftContext(Q,U),Q<=this.p.parser.maxNode&&this.buffer.push(Q,U,j,4)}apply(O,Q,j){O&65536?this.reduce(O):this.shift(O,Q,j)}useNode(O,Q){let j=this.p.reused.length-1;(j<0||this.p.reused[j]!=O)&&(this.p.reused.push(O),j++);let U=this.pos;this.reducePos=this.pos=U+O.length,this.pushState(Q,U),this.buffer.push(j,U,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,O,this,this.p.stream.reset(this.pos-O.length)))}split(){let O=this,Q=O.buffer.length;for(;Q>0&&O.buffer[Q-2]>O.reducePos;)Q-=4;let j=O.buffer.slice(Q),U=O.bufferBase+Q;for(;O&&U==O.bufferBase;)O=O.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,j,U,this.curContext,this.lookAhead,O)}recoverByDelete(O,Q){let j=O<=this.p.parser.maxNode;j&&this.storeNode(O,this.pos,Q,4),this.storeNode(0,this.pos,Q,j?8:4),this.pos=this.reducePos=Q,this.score-=190}canShift(O){for(let Q=new SimulatedStack(this);;){let j=this.p.parser.stateSlot(Q.state,4)||this.p.parser.hasAction(Q.state,O);if(j==0)return!1;if((j&65536)==0)return!0;Q.reduce(j)}}recoverByInsert(O){if(this.stack.length>=300)return[];let Q=this.p.parser.nextStates(this.state);if(Q.length>4<<1||this.stack.length>=120){let U=[];for(let F=0,q;F<Q.length;F+=2)(q=Q[F+1])!=this.state&&this.p.parser.hasAction(q,O)&&U.push(Q[F],q);if(this.stack.length<120)for(let F=0;U.length<4<<1&&F<Q.length;F+=2){let q=Q[F+1];U.some((W,Y)=>Y&1&&W==q)||U.push(Q[F],q)}Q=U}let j=[];for(let U=0;U<Q.length&&j.length<4;U+=2){let F=Q[U+1];if(F==this.state)continue;let q=this.split();q.pushState(F,this.pos),q.storeNode(0,q.pos,q.pos,4,!0),q.shiftContext(Q[U],this.pos),q.score-=200,j.push(q)}return j}forceReduce(){let{parser:O}=this.p,Q=O.stateSlot(this.state,5);if((Q&65536)==0)return!1;if(!O.validAction(this.state,Q)){let j=Q>>19,U=Q&65535,F=this.stack.length-j*3;if(F<0||O.getGoto(this.stack[F],U,!1)<0){let q=this.findForcedReduction();if(q==null)return!1;Q=q}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(Q),!0}findForcedReduction(){let{parser:O}=this.p,Q=[],j=(U,F)=>{if(!Q.includes(U))return Q.push(U),O.allActions(U,q=>{if(!(q&393216))if(q&65536){let W=(q>>19)-F;if(W>1){let Y=q&65535,G=this.stack.length-W*3;if(G>=0&&O.getGoto(this.stack[G],Y,!1)>=0)return W<<19|65536|Y}}else{let W=j(q,F+1);if(W!=null)return W}})};return j(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:O}=this.p;return O.data[O.stateSlot(this.state,1)]==65535&&!O.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(O){if(this.state!=O.state||this.stack.length!=O.stack.length)return!1;for(let Q=0;Q<this.stack.length;Q+=3)if(this.stack[Q]!=O.stack[Q])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(O){return this.p.parser.dialect.flags[O]}shiftContext(O,Q){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,O,this,this.p.stream.reset(Q)))}reduceContext(O,Q){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,O,this,this.p.stream.reset(Q)))}emitContext(){let O=this.buffer.length-1;(O<0||this.buffer[O]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let O=this.buffer.length-1;(O<0||this.buffer[O]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(O){if(O!=this.curContext.context){let Q=new StackContext(this.curContext.tracker,O);Q.hash!=this.curContext.hash&&this.emitContext(),this.curContext=Q}}setLookAhead(O){O>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=O)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(O,Q){this.tracker=O,this.context=Q,this.hash=O.strict?O.hash(Q):0}}var Recover;(function(X){X[X.Insert=200]="Insert",X[X.Delete=190]="Delete",X[X.Reduce=100]="Reduce",X[X.MaxNext=4]="MaxNext",X[X.MaxInsertStackDepth=300]="MaxInsertStackDepth",X[X.DampenInsertStackDepth=120]="DampenInsertStackDepth",X[X.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor(O){this.start=O,this.state=O.state,this.stack=O.stack,this.base=this.stack.length}reduce(O){let Q=O&65535,j=O>>19;j==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(j-1)*3;let U=this.start.p.parser.getGoto(this.stack[this.base-3],Q,!0);this.state=U}}class StackBufferCursor{constructor(O,Q,j){this.stack=O,this.pos=Q,this.index=j,this.buffer=O.buffer,this.index==0&&this.maybeNext()}static create(O,Q=O.bufferBase+O.buffer.length){return new StackBufferCursor(O,Q,Q-O.bufferBase)}maybeNext(){let O=this.stack.parent;O!=null&&(this.index=this.stack.bufferBase-O.bufferBase,this.stack=O,this.buffer=O.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(X,O=Uint16Array){if(typeof X!="string")return X;let Q=null;for(let j=0,U=0;j<X.length;){let F=0;for(;;){let q=X.charCodeAt(j++),W=!1;if(q==126){F=65535;break}q>=92&&q--,q>=34&&q--;let Y=q-32;if(Y>=46&&(Y-=46,W=!0),F+=Y,W)break;F*=46}Q?Q[U++]=F:Q=new O(F)}return Q}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(O,Q){this.input=O,this.ranges=Q,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=Q[0].from,this.range=Q[0],this.end=Q[Q.length-1].to,this.readNext()}resolveOffset(O,Q){let j=this.range,U=this.rangeIndex,F=this.pos+O;for(;F<j.from;){if(!U)return null;let q=this.ranges[--U];F-=j.from-q.to,j=q}for(;Q<0?F>j.to:F>=j.to;){if(U==this.ranges.length-1)return null;let q=this.ranges[++U];F+=q.from-j.to,j=q}return F}clipPos(O){if(O>=this.range.from&&O<this.range.to)return O;for(let Q of this.ranges)if(Q.to>O)return Math.max(O,Q.from);return this.end}peek(O){let Q=this.chunkOff+O,j,U;if(Q>=0&&Q<this.chunk.length)j=this.pos+O,U=this.chunk.charCodeAt(Q);else{let F=this.resolveOffset(O,1);if(F==null)return-1;if(j=F,j>=this.chunk2Pos&&j<this.chunk2Pos+this.chunk2.length)U=this.chunk2.charCodeAt(j-this.chunk2Pos);else{let q=this.rangeIndex,W=this.range;for(;W.to<=j;)W=this.ranges[++q];this.chunk2=this.input.chunk(this.chunk2Pos=j),j+this.chunk2.length>W.to&&(this.chunk2=this.chunk2.slice(0,W.to-j)),U=this.chunk2.charCodeAt(0)}}return j>=this.token.lookAhead&&(this.token.lookAhead=j+1),U}acceptToken(O,Q=0){let j=Q?this.resolveOffset(Q,-1):this.pos;if(j==null||j<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=O,this.token.end=j}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:O,chunkPos:Q}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=O,this.chunk2Pos=Q,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let O=this.input.chunk(this.pos),Q=this.pos+O.length;this.chunk=Q>this.range.to?O.slice(0,this.range.to-this.pos):O,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(O=1){for(this.chunkOff+=O;this.pos+O>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();O-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=O,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(O,Q){if(Q?(this.token=Q,Q.start=O,Q.lookAhead=O+1,Q.value=Q.extended=-1):this.token=nullToken,this.pos!=O){if(this.pos=O,O==this.end)return this.setDone(),this;for(;O<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;O>=this.range.to;)this.range=this.ranges[++this.rangeIndex];O>=this.chunkPos&&O<this.chunkPos+this.chunk.length?this.chunkOff=O-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(O,Q){if(O>=this.chunkPos&&Q<=this.chunkPos+this.chunk.length)return this.chunk.slice(O-this.chunkPos,Q-this.chunkPos);if(O>=this.chunk2Pos&&Q<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(O-this.chunk2Pos,Q-this.chunk2Pos);if(O>=this.range.from&&Q<=this.range.to)return this.input.read(O,Q);let j="";for(let U of this.ranges){if(U.from>=Q)break;U.to>O&&(j+=this.input.read(Math.max(U.from,O),Math.min(U.to,Q)))}return j}}class TokenGroup{constructor(O,Q){this.data=O,this.id=Q}token(O,Q){let{parser:j}=Q.p;readToken(this.data,O,Q,this.id,j.data,j.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(O,Q,j){this.precTable=Q,this.elseToken=j,this.data=typeof O=="string"?decodeArray(O):O}token(O,Q){let j=O.pos,U=0;for(;;){let F=O.next<0,q=O.resolveOffset(1,1);if(readToken(this.data,O,Q,0,this.data,this.precTable),O.token.value>-1)break;if(this.elseToken==null)return;if(F||U++,q==null)break;O.reset(q,O.token)}U&&(O.reset(j,O.token),O.acceptToken(this.elseToken,U))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(O,Q={}){this.token=O,this.contextual=!!Q.contextual,this.fallback=!!Q.fallback,this.extend=!!Q.extend}}function readToken(X,O,Q,j,U,F){let q=0,W=1<<j,{dialect:Y}=Q.p.parser;e:for(;(W&X[q])!=0;){let G=X[q+1];for(let te=q+3;te<G;te+=2)if((X[te+1]&W)>0){let re=X[te];if(Y.allows(re)&&(O.token.value==-1||O.token.value==re||overrides(re,O.token.value,U,F))){O.acceptToken(re);break}}let K=O.next,J=0,ee=X[q+2];if(O.next<0&&ee>J&&X[G+ee*3-3]==65535&&X[G+ee*3-3]==65535){q=X[G+ee*3-1];continue e}for(;J<ee;){let te=J+ee>>1,re=G+te+(te<<1),oe=X[re],se=X[re+1]||65536;if(K<oe)ee=te;else if(K>=se)J=te+1;else{q=X[re+2],O.advance();continue e}}break}}function findOffset(X,O,Q){for(let j=O,U;(U=X[j])!=65535;j++)if(U==Q)return j-O;return-1}function overrides(X,O,Q,j){let U=findOffset(Q,j,O);return U<0||findOffset(Q,j,X)<U}const verbose=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety;(function(X){X[X.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(X,O,Q){let j=X.cursor(IterMode.IncludeAnonymous);for(j.moveTo(O);;)if(!(Q<0?j.childBefore(O):j.childAfter(O)))for(;;){if((Q<0?j.to<O:j.from>O)&&!j.type.isError)return Q<0?Math.max(0,Math.min(j.to-1,O-25)):Math.min(X.length,Math.max(j.from+1,O+25));if(Q<0?j.prevSibling():j.nextSibling())break;if(!j.parent())return Q<0?0:X.length}}class FragmentCursor{constructor(O,Q){this.fragments=O,this.nodeSet=Q,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let O=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(O){for(this.safeFrom=O.openStart?cutAt(O.tree,O.from+O.offset,1)-O.offset:O.from,this.safeTo=O.openEnd?cutAt(O.tree,O.to+O.offset,-1)-O.offset:O.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(O.tree),this.start.push(-O.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(O){if(O<this.nextStart)return null;for(;this.fragment&&this.safeTo<=O;)this.nextFragment();if(!this.fragment)return null;for(;;){let Q=this.trees.length-1;if(Q<0)return this.nextFragment(),null;let j=this.trees[Q],U=this.index[Q];if(U==j.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let F=j.children[U],q=this.start[Q]+j.positions[U];if(q>O)return this.nextStart=q,null;if(F instanceof Tree){if(q==O){if(q<this.safeFrom)return null;let W=q+F.length;if(W<=this.safeTo){let Y=F.prop(NodeProp.lookAhead);if(!Y||W+Y<this.fragment.to)return F}}this.index[Q]++,q+F.length>=Math.max(this.safeFrom,O)&&(this.trees.push(F),this.start.push(q),this.index.push(0))}else this.index[Q]++,this.nextStart=q+F.length}}}class TokenCache{constructor(O,Q){this.stream=Q,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=O.tokenizers.map(j=>new CachedToken)}getActions(O){let Q=0,j=null,{parser:U}=O.p,{tokenizers:F}=U,q=U.stateSlot(O.state,3),W=O.curContext?O.curContext.hash:0,Y=0;for(let G=0;G<F.length;G++){if((1<<G&q)==0)continue;let K=F[G],J=this.tokens[G];if(!(j&&!K.fallback)&&((K.contextual||J.start!=O.pos||J.mask!=q||J.context!=W)&&(this.updateCachedToken(J,K,O),J.mask=q,J.context=W),J.lookAhead>J.end+25&&(Y=Math.max(J.lookAhead,Y)),J.value!=0)){let ee=Q;if(J.extended>-1&&(Q=this.addActions(O,J.extended,J.end,Q)),Q=this.addActions(O,J.value,J.end,Q),!K.extend&&(j=J,Q>ee))break}}for(;this.actions.length>Q;)this.actions.pop();return Y&&O.setLookAhead(Y),!j&&O.pos==this.stream.end&&(j=new CachedToken,j.value=O.p.parser.eofTerm,j.start=j.end=O.pos,Q=this.addActions(O,j.value,j.end,Q)),this.mainToken=j,this.actions}getMainToken(O){if(this.mainToken)return this.mainToken;let Q=new CachedToken,{pos:j,p:U}=O;return Q.start=j,Q.end=Math.min(j+1,U.stream.end),Q.value=j==U.stream.end?U.parser.eofTerm:0,Q}updateCachedToken(O,Q,j){let U=this.stream.clipPos(j.pos);if(Q.token(this.stream.reset(U,O),j),O.value>-1){let{parser:F}=j.p;for(let q=0;q<F.specialized.length;q++)if(F.specialized[q]==O.value){let W=F.specializers[q](this.stream.read(O.start,O.end),j);if(W>=0&&j.p.parser.dialect.allows(W>>1)){(W&1)==0?O.value=W>>1:O.extended=W>>1;break}}}else O.value=0,O.end=this.stream.clipPos(U+1)}putAction(O,Q,j,U){for(let F=0;F<U;F+=3)if(this.actions[F]==O)return U;return this.actions[U++]=O,this.actions[U++]=Q,this.actions[U++]=j,U}addActions(O,Q,j,U){let{state:F}=O,{parser:q}=O.p,{data:W}=q;for(let Y=0;Y<2;Y++)for(let G=q.stateSlot(F,Y?2:1);;G+=3){if(W[G]==65535)if(W[G+1]==1)G=pair(W,G+2);else{U==0&&W[G+1]==2&&(U=this.putAction(pair(W,G+2),Q,j,U));break}W[G]==Q&&(U=this.putAction(pair(W,G+1),Q,j,U))}return U}}var Rec;(function(X){X[X.Distance=5]="Distance",X[X.MaxRemainingPerStep=3]="MaxRemainingPerStep",X[X.MinBufferLengthPrune=500]="MinBufferLengthPrune",X[X.ForceReduceLimit=10]="ForceReduceLimit",X[X.CutDepth=15e3]="CutDepth",X[X.CutTo=9e3]="CutTo",X[X.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",X[X.MaxStackCount=12]="MaxStackCount"})(Rec||(Rec={}));class Parse{constructor(O,Q,j,U){this.parser=O,this.input=Q,this.ranges=U,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(Q,U),this.tokens=new TokenCache(O,this.stream),this.topTerm=O.top[1];let{from:F}=U[0];this.stacks=[Stack.start(this,O.top[0],F)],this.fragments=j.length&&this.stream.end-F>O.bufferLength*4?new FragmentCursor(j,O.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let O=this.stacks,Q=this.minStackPos,j=this.stacks=[],U,F;if(this.bigReductionCount>300&&O.length==1){let[q]=O;for(;q.forceReduce()&&q.stack.length&&q.stack[q.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let q=0;q<O.length;q++){let W=O[q];for(;;){if(this.tokens.mainToken=null,W.pos>Q)j.push(W);else{if(this.advanceStack(W,j,O))continue;{U||(U=[],F=[]),U.push(W);let Y=this.tokens.getMainToken(W);F.push(Y.value,Y.end)}}break}}if(!j.length){let q=U&&findFinished(U);if(q)return this.stackToTree(q);if(this.parser.strict)throw verbose&&U&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+Q);this.recovering||(this.recovering=5)}if(this.recovering&&U){let q=this.stoppedAt!=null&&U[0].pos>this.stoppedAt?U[0]:this.runRecovery(U,F,j);if(q)return this.stackToTree(q.forceAll())}if(this.recovering){let q=this.recovering==1?1:this.recovering*3;if(j.length>q)for(j.sort((W,Y)=>Y.score-W.score);j.length>q;)j.pop();j.some(W=>W.reducePos>Q)&&this.recovering--}else if(j.length>1){e:for(let q=0;q<j.length-1;q++){let W=j[q];for(let Y=q+1;Y<j.length;Y++){let G=j[Y];if(W.sameState(G)||W.buffer.length>500&&G.buffer.length>500)if((W.score-G.score||W.buffer.length-G.buffer.length)>0)j.splice(Y--,1);else{j.splice(q--,1);continue e}}}j.length>12&&j.splice(12,j.length-12)}this.minStackPos=j[0].pos;for(let q=1;q<j.length;q++)j[q].pos<this.minStackPos&&(this.minStackPos=j[q].pos);return null}stopAt(O){if(this.stoppedAt!=null&&this.stoppedAt<O)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=O}advanceStack(O,Q,j){let U=O.pos,{parser:F}=this,q=verbose?this.stackID(O)+" -> ":"";if(this.stoppedAt!=null&&U>this.stoppedAt)return O.forceReduce()?O:null;if(this.fragments){let G=O.curContext&&O.curContext.tracker.strict,K=G?O.curContext.hash:0;for(let J=this.fragments.nodeAt(U);J;){let ee=this.parser.nodeSet.types[J.type.id]==J.type?F.getGoto(O.state,J.type.id):-1;if(ee>-1&&J.length&&(!G||(J.prop(NodeProp.contextHash)||0)==K))return O.useNode(J,ee),verbose&&console.log(q+this.stackID(O)+` (via reuse of ${F.getName(J.type.id)})`),!0;if(!(J instanceof Tree)||J.children.length==0||J.positions[0]>0)break;let te=J.children[0];if(te instanceof Tree&&J.positions[0]==0)J=te;else break}}let W=F.stateSlot(O.state,4);if(W>0)return O.reduce(W),verbose&&console.log(q+this.stackID(O)+` (via always-reduce ${F.getName(W&65535)})`),!0;if(O.stack.length>=15e3)for(;O.stack.length>9e3&&O.forceReduce(););let Y=this.tokens.getActions(O);for(let G=0;G<Y.length;){let K=Y[G++],J=Y[G++],ee=Y[G++],te=G==Y.length||!j,re=te?O:O.split();if(re.apply(K,J,ee),verbose&&console.log(q+this.stackID(re)+` (via ${(K&65536)==0?"shift":`reduce of ${F.getName(K&65535)}`} for ${F.getName(J)} @ ${U}${re==O?"":", split"})`),te)return!0;re.pos>U?Q.push(re):j.push(re)}return!1}advanceFully(O,Q){let j=O.pos;for(;;){if(!this.advanceStack(O,null,null))return!1;if(O.pos>j)return pushStackDedup(O,Q),!0}}runRecovery(O,Q,j){let U=null,F=!1;for(let q=0;q<O.length;q++){let W=O[q],Y=Q[q<<1],G=Q[(q<<1)+1],K=verbose?this.stackID(W)+" -> ":"";if(W.deadEnd&&(F||(F=!0,W.restart(),verbose&&console.log(K+this.stackID(W)+" (restarted)"),this.advanceFully(W,j))))continue;let J=W.split(),ee=K;for(let te=0;J.forceReduce()&&te<10&&(verbose&&console.log(ee+this.stackID(J)+" (via force-reduce)"),!this.advanceFully(J,j));te++)verbose&&(ee=this.stackID(J)+" -> ");for(let te of W.recoverByInsert(Y))verbose&&console.log(K+this.stackID(te)+" (via recover-insert)"),this.advanceFully(te,j);this.stream.end>W.pos?(G==W.pos&&(G++,Y=0),W.recoverByDelete(Y,G),verbose&&console.log(K+this.stackID(W)+` (via recover-delete ${this.parser.getName(Y)})`),pushStackDedup(W,j)):(!U||U.score<W.score)&&(U=W)}return U}stackToTree(O){return O.close(),Tree.build({buffer:StackBufferCursor.create(O),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:O.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(O){let Q=(stackIDs||(stackIDs=new WeakMap)).get(O);return Q||stackIDs.set(O,Q=String.fromCodePoint(this.nextStackID++)),Q+O}}function pushStackDedup(X,O){for(let Q=0;Q<O.length;Q++){let j=O[Q];if(j.pos==X.pos&&j.sameState(X)){O[Q].score<X.score&&(O[Q]=X);return}}O.push(X)}class Dialect{constructor(O,Q,j){this.source=O,this.flags=Q,this.disabled=j}allows(O){return!this.disabled||this.disabled[O]==0}}const id=X=>X;class ContextTracker{constructor(O){this.start=O.start,this.shift=O.shift||id,this.reduce=O.reduce||id,this.reuse=O.reuse||id,this.hash=O.hash||(()=>0),this.strict=O.strict!==!1}}class LRParser extends Parser{constructor(O){if(super(),this.wrappers=[],O.version!=14)throw new RangeError(`Parser version (${O.version}) doesn't match runtime version (${14})`);let Q=O.nodeNames.split(" ");this.minRepeatTerm=Q.length;for(let W=0;W<O.repeatNodeCount;W++)Q.push("");let j=Object.keys(O.topRules).map(W=>O.topRules[W][1]),U=[];for(let W=0;W<Q.length;W++)U.push([]);function F(W,Y,G){U[W].push([Y,Y.deserialize(String(G))])}if(O.nodeProps)for(let W of O.nodeProps){let Y=W[0];typeof Y=="string"&&(Y=NodeProp[Y]);for(let G=1;G<W.length;){let K=W[G++];if(K>=0)F(K,Y,W[G++]);else{let J=W[G+-K];for(let ee=-K;ee>0;ee--)F(W[G++],Y,J);G++}}}this.nodeSet=new NodeSet(Q.map((W,Y)=>NodeType.define({name:Y>=this.minRepeatTerm?void 0:W,id:Y,props:U[Y],top:j.indexOf(Y)>-1,error:Y==0,skipped:O.skippedNodes&&O.skippedNodes.indexOf(Y)>-1}))),O.propSources&&(this.nodeSet=this.nodeSet.extend(...O.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let q=decodeArray(O.tokenData);this.context=O.context,this.specializerSpecs=O.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let W=0;W<this.specializerSpecs.length;W++)this.specialized[W]=this.specializerSpecs[W].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(O.states,Uint32Array),this.data=decodeArray(O.stateData),this.goto=decodeArray(O.goto),this.maxTerm=O.maxTerm,this.tokenizers=O.tokenizers.map(W=>typeof W=="number"?new TokenGroup(q,W):W),this.topRules=O.topRules,this.dialects=O.dialects||{},this.dynamicPrecedences=O.dynamicPrecedences||null,this.tokenPrecTable=O.tokenPrec,this.termNames=O.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(O,Q,j){let U=new Parse(this,O,Q,j);for(let F of this.wrappers)U=F(U,O,Q,j);return U}getGoto(O,Q,j=!1){let U=this.goto;if(Q>=U[0])return-1;for(let F=U[Q+1];;){let q=U[F++],W=q&1,Y=U[F++];if(W&&j)return Y;for(let G=F+(q>>1);F<G;F++)if(U[F]==O)return Y;if(W)return-1}}hasAction(O,Q){let j=this.data;for(let U=0;U<2;U++)for(let F=this.stateSlot(O,U?2:1),q;;F+=3){if((q=j[F])==65535)if(j[F+1]==1)q=j[F=pair(j,F+2)];else{if(j[F+1]==2)return pair(j,F+2);break}if(q==Q||q==0)return pair(j,F+1)}return 0}stateSlot(O,Q){return this.states[O*6+Q]}stateFlag(O,Q){return(this.stateSlot(O,0)&Q)>0}validAction(O,Q){return!!this.allActions(O,j=>j==Q?!0:null)}allActions(O,Q){let j=this.stateSlot(O,4),U=j?Q(j):void 0;for(let F=this.stateSlot(O,1);U==null;F+=3){if(this.data[F]==65535)if(this.data[F+1]==1)F=pair(this.data,F+2);else break;U=Q(pair(this.data,F+1))}return U}nextStates(O){let Q=[];for(let j=this.stateSlot(O,1);;j+=3){if(this.data[j]==65535)if(this.data[j+1]==1)j=pair(this.data,j+2);else break;if((this.data[j+2]&1)==0){let U=this.data[j+1];Q.some((F,q)=>q&1&&F==U)||Q.push(this.data[j],U)}}return Q}configure(O){let Q=Object.assign(Object.create(LRParser.prototype),this);if(O.props&&(Q.nodeSet=this.nodeSet.extend(...O.props)),O.top){let j=this.topRules[O.top];if(!j)throw new RangeError(`Invalid top rule name ${O.top}`);Q.top=j}return O.tokenizers&&(Q.tokenizers=this.tokenizers.map(j=>{let U=O.tokenizers.find(F=>F.from==j);return U?U.to:j})),O.specializers&&(Q.specializers=this.specializers.slice(),Q.specializerSpecs=this.specializerSpecs.map((j,U)=>{let F=O.specializers.find(W=>W.from==j.external);if(!F)return j;let q=Object.assign(Object.assign({},j),{external:F.to});return Q.specializers[U]=getSpecializer(q),q})),O.contextTracker&&(Q.context=O.contextTracker),O.dialect&&(Q.dialect=this.parseDialect(O.dialect)),O.strict!=null&&(Q.strict=O.strict),O.wrap&&(Q.wrappers=Q.wrappers.concat(O.wrap)),O.bufferLength!=null&&(Q.bufferLength=O.bufferLength),Q}hasWrappers(){return this.wrappers.length>0}getName(O){return this.termNames?this.termNames[O]:String(O<=this.maxNode&&this.nodeSet.types[O].name||O)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(O){let Q=this.dynamicPrecedences;return Q==null?0:Q[O]||0}parseDialect(O){let Q=Object.keys(this.dialects),j=Q.map(()=>!1);if(O)for(let F of O.split(" ")){let q=Q.indexOf(F);q>=0&&(j[q]=!0)}let U=null;for(let F=0;F<Q.length;F++)if(!j[F])for(let q=this.dialects[Q[F]],W;(W=this.data[q++])!=65535;)(U||(U=new Uint8Array(this.maxTerm+1)))[W]=1;return new Dialect(O,j,U)}static deserialize(O){return new LRParser(O)}}function pair(X,O){return X[O]|X[O+1]<<16}function findFinished(X){let O=null;for(let Q of X){let j=Q.p.stoppedAt;(Q.pos==Q.p.stream.end||j!=null&&Q.pos>j)&&Q.p.parser.stateFlag(Q.state,2)&&(!O||O.score<Q.score)&&(O=Q)}return O}function getSpecializer(X){if(X.external){let O=X.extend?1:0;return(Q,j)=>X.external(Q,j)<<1|O}return X.get}const jsonHighlighting=styleTags({String:tags.string,Number:tags.number,"True False":tags.bool,PropertyName:tags.propertyName,Null:tags.null,",":tags.separator,"[ ]":tags.squareBracket,"{ }":tags.brace}),parser$1=LRParser.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[jsonHighlighting],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),jsonLanguage=LRLanguage.define({name:"json",parser:parser$1.configure({props:[indentNodeProp.add({Object:continuedIndent({except:/^\s*\}/}),Array:continuedIndent({except:/^\s*\]/})}),foldNodeProp.add({"Object Array":foldInside})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function json(){return new LanguageSupport(jsonLanguage)}const noSemi=303,incdec=1,incdecPrefix=2,insertSemi=304,spaces$1=306,newline=307,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift(X,O){return O==LineComment||O==BlockComment||O==spaces$1?X:O==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((X,O)=>{let{next:Q}=X;(Q==braceR||Q==-1||O.context)&&X.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((X,O)=>{let{next:Q}=X,j;space.indexOf(Q)>-1||Q==slash&&((j=X.peek(1))==slash||j==star)||Q!=braceR&&Q!=semicolon&&Q!=-1&&!O.context&&X.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((X,O)=>{let{next:Q}=X;if((Q==plus||Q==minus)&&(X.advance(),Q==X.next)){X.advance();let j=!O.context&&O.canShift(incdec);X.acceptToken(j?incdec:incdecPrefix)}},{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:221,private:221,protected:221,readonly:223,instanceof:242,satisfies:245,in:246,const:248,import:280,keyof:335,unique:339,infer:345,is:381,abstract:401,implements:403,type:405,let:408,var:410,using:413,interface:419,enum:423,namespace:429,module:431,declare:435,global:439,for:458,of:467,while:470,with:474,do:478,if:482,else:484,switch:488,case:494,try:500,catch:504,finally:508,return:512,throw:516,break:520,continue:524,debugger:528},spec_word={__proto__:null,async:117,get:119,set:121,declare:181,public:183,private:183,protected:183,static:185,abstract:187,override:189,readonly:195,accessor:197,new:385},spec_LessThan={__proto__:null,"<":137},parser=LRParser.deserialize({version:14,states:"$6tO`QUOOO%TQUOOO'WQWOOP(eOSOOO*sQ(CjO'#CfO*zOpO'#CgO+YO!bO'#CgO+hO07`O'#DZO-yQUO'#DaO.ZQUO'#DlO%TQUO'#DvO0_QUO'#EOOOQ(CY'#EW'#EWO0xQSO'#ETOOQO'#Ei'#EiOOQO'#Ic'#IcO1QQSO'#GkO1]QSO'#EhO1bQSO'#EhO3dQ(CjO'#JdO6TQ(CjO'#JeO6qQSO'#FWO6vQ#tO'#FoOOQ(CY'#F`'#F`O7RO&jO'#F`O7aQ,UO'#FvO8wQSO'#FuOOQ(CY'#Je'#JeOOQ(CW'#Jd'#JdO8|QSO'#GoOOQQ'#KP'#KPO9XQSO'#IPO9^Q(C[O'#IQOOQQ'#JQ'#JQOOQQ'#IU'#IUQ`QUOOO%TQUO'#DnO9fQUO'#DzO9mQUO'#D|O9SQSO'#GkO9tQ,UO'#ClO:SQSO'#EgO:_QSO'#ErO:dQ,UO'#F_O;RQSO'#GkOOQO'#KQ'#KQO;WQSO'#KQO;fQSO'#GsO;fQSO'#GtO;fQSO'#GvO9SQSO'#GyO<]QSO'#G|O=tQSO'#CbO>UQSO'#HYO>^QSO'#H`O>^QSO'#HbO`QUO'#HdO>^QSO'#HfO>^QSO'#HiO>cQSO'#HoO>hQ(C]O'#HuO%TQUO'#HwO>sQ(C]O'#HyO?OQ(C]O'#H{O9^Q(C[O'#H}O?ZQ(CjO'#CfO@]QWO'#DfQOQSOOO%TQUO'#D|O@sQSO'#EPO9tQ,UO'#EgOAOQSO'#EgOAZQ`O'#F_OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jh'#JhO%TQUO'#JhOOQO'#Jl'#JlOOQO'#I`'#I`OBZQWO'#E`OOQ(CW'#E_'#E_OCVQ(C`O'#E`OCaQWO'#ESOOQO'#Jk'#JkOCuQWO'#JlOESQWO'#ESOCaQWO'#E`PEaO?MpO'#C`POOO)CDo)CDoOOOO'#IV'#IVOElOpO,59ROOQ(CY,59R,59ROOOO'#IW'#IWOEzO!bO,59RO%TQUO'#D]OOOO'#IY'#IYOFYO07`O,59uOOQ(CY,59u,59uOFhQUO'#IZOF{QSO'#JfOH}QbO'#JfO+vQUO'#JfOIUQSO,59{OIlQSO'#EiOIyQSO'#JtOJUQSO'#JsOJUQSO'#JsOJ^QSO,5;VOJcQSO'#JrOOQ(CY,5:W,5:WOJjQUO,5:WOLkQ(CjO,5:bOM[QSO,5:jOMuQ(C[O'#JqOM|QSO'#JpO8|QSO'#JpONbQSO'#JpONjQSO,5;UONoQSO'#JpO!!wQbO'#JeOOQ(CY'#Cf'#CfO%TQUO'#EOO!#gQ`O,5:oOOQO'#Jm'#JmOOQO-E<a-E<aO9SQSO,5=VO!#}QSO,5=VO!$SQUO,5;SO!&VQ,UO'#EdO!'jQSO,5;SO!)SQ,UO'#DpO!)ZQUO'#DuO!)eQWO,5;]O!)mQWO,5;]O%TQUO,5;]OOQQ'#FO'#FOOOQQ'#FQ'#FQO%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^O%TQUO,5;^OOQQ'#FU'#FUO!){QUO,5;oOOQ(CY,5;t,5;tOOQ(CY,5;u,5;uO!,OQSO,5;uOOQ(CY,5;v,5;vO%TQUO'#IgO!,WQ(C[O,5<cO!&VQ,UO,5;^O!,uQ,UO,5;^O%TQUO,5;rO!,|Q#tO'#FeO!-yQ#tO'#JxO!-eQ#tO'#JxO!.QQ#tO'#JxOOQO'#Jx'#JxO!.fQ#tO,5;}OOOO,5<Z,5<ZO!.wQUO'#FqOOOO'#If'#IfO7RO&jO,5;zO!/OQ#tO'#FsOOQ(CY,5;z,5;zO!/oQ7[O'#CrOOQ(CY'#Cv'#CvO!0SQSO'#CvO!0XO07`O'#CzO!0uQ,UO,5<`O!0|QSO,5<bO!2cQMhO'#GQO!2pQSO'#GRO!2uQSO'#GRO!2zQMhO'#GVO!3yQWO'#GZO!4lQ7[O'#J_OOQ(CY'#J_'#J_O!4vQSO'#J^O!5UQSO'#J]O!5^QSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0{QSO'#DSO!'oQ,UO'#FxO!'oQ,UO'#FzO!5fQSO'#F|O!5kQSO'#F}O!2uQSO'#GTO!'oQ,UO'#GYO!5pQSO'#EjO!6_QSO,5<aOOQ(CW'#Co'#CoO!6gQSO'#EkO!7aQWO'#ElOOQ(CW'#Jr'#JrO!7hQ(C[O'#KRO9^Q(C[O,5=ZO`QUO,5>kOOQQ'#JY'#JYOOQQ,5>l,5>lOOQQ-E<S-E<SO!9jQ(CjO,5:YO!<WQ(CjO,5:fO%TQUO,5:fO!>qQ(CjO,5:hOOQO,5@l,5@lO!?bQ,UO,5=VO!?pQ(C[O'#JZO8wQSO'#JZO!@RQ(C[O,59WO!@^QWO,59WO!@fQ,UO,59WO9tQ,UO,59WO!@qQSO,5;SO!@yQSO'#HXO!A[QSO'#KUO%TQUO,5;wO!7[QWO,5;yO!AdQSO,5=rO!AiQSO,5=rO!AnQSO,5=rO9^Q(C[O,5=rO;fQSO,5=bOOQO'#Cr'#CrO!A|QWO,5=_O!BUQ,UO,5=`O!BaQSO,5=bO!BfQ`O,5=eO!BnQSO'#KQO>cQSO'#HOO9SQSO'#HQO!BsQSO'#HQO9tQ,UO'#HSO!BxQSO'#HSOOQQ,5=h,5=hO!B}QSO'#HTO!CVQSO'#ClO!C[QSO,58|O!CfQSO,58|O!EkQUO,58|OOQQ,58|,58|O!E{Q(C[O,58|O%TQUO,58|O!HWQUO'#H[OOQQ'#H]'#H]OOQQ'#H^'#H^O`QUO,5=tO!HnQSO,5=tO`QUO,5=zO`QUO,5=|O!HsQSO,5>OO`QUO,5>QO!HxQSO,5>TO!H}QUO,5>ZOOQQ,5>a,5>aO%TQUO,5>aO9^Q(C[O,5>cOOQQ,5>e,5>eO!MXQSO,5>eOOQQ,5>g,5>gO!MXQSO,5>gOOQQ,5>i,5>iO!M^QWO'#DXO%TQUO'#JhO!M{QWO'#JhO!NjQWO'#DgO!N{QWO'#DgO##^QUO'#DgO##eQSO'#JgO##mQSO,5:QO##rQSO'#EmO#$QQSO'#JuO#$YQSO,5;WO#$_QWO'#DgO#$lQWO'#EROOQ(CY,5:k,5:kO%TQUO,5:kO#$sQSO,5:kO>cQSO,5;RO!@^QWO,5;RO!@fQ,UO,5;RO9tQ,UO,5;RO#${QSO,5@SO#%QQ!LQO,5:oOOQO-E<^-E<^O#&WQ(C`O,5:zOCaQWO,5:nO#&bQWO,5:nOCaQWO,5:zO!@RQ(C[O,5:nOOQ(CW'#Ec'#EcOOQO,5:z,5:zO%TQUO,5:zO#&oQ(C[O,5:zO#&zQ(C[O,5:zO!@^QWO,5:nOOQO,5;Q,5;QO#'YQ(C[O,5:zPOOO'#IT'#ITP#'nO?MpO,58zPOOO,58z,58zOOOO-E<T-E<TOOQ(CY1G.m1G.mOOOO-E<U-E<UO#'yQ`O,59wOOOO-E<W-E<WOOQ(CY1G/a1G/aO#(OQbO,5>uO+vQUO,5>uOOQO,5>{,5>{O#(YQUO'#IZOOQO-E<X-E<XO#(gQSO,5@QO#(oQbO,5@QO#(vQSO,5@_OOQ(CY1G/g1G/gO%TQUO,5@`O#)OQSO'#IaOOQO-E<_-E<_O#(vQSO,5@_OOQ(CW1G0q1G0qOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO%TQUO,5@]O#)dQ(C[O,5@]O#)uQ(C[O,5@]O#)|QSO,5@[O8|QSO,5@[O#*UQSO,5@[O#*dQSO'#IdO#)|QSO,5@[OOQ(CW1G0p1G0pO!)eQWO,5:qO!)pQWO,5:qOOQO,5:s,5:sO#+UQSO,5:sO#+^Q,UO1G2qO9SQSO1G2qOOQ(CY1G0n1G0nO#+lQ(CjO1G0nO#,qQ(ChO,5;OOOQ(CY'#GP'#GPO#-_Q(CjO'#J_O!$SQUO1G0nO#/gQ,UO'#JiO#/qQSO,5:[O#/vQbO'#JjO%TQUO'#JjO#0QQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0w1G0wO%TQUO1G0wOOQ(CY1G1a1G1aO#0VQSO1G0wO#2nQ(CjO1G0xO#2uQ(CjO1G0xO#5`Q(CjO1G0xO#5gQ(CjO1G0xO#7qQ(CjO1G0xO#8XQ(CjO1G0xO#;RQ(CjO1G0xO#;YQ(CjO1G0xO#=sQ(CjO1G0xO#=zQ(CjO1G0xO#?rQ(CjO1G0xO#BrQ$IUO'#CfO#DpQ$IUO1G1ZO#DwQ$IUO'#JeO!,RQSO1G1aO#EXQ(CjO,5?ROOQ(CW-E<e-E<eO#E{Q(CjO1G0xOOQ(CY1G0x1G0xO#HWQ(CjO1G1^O#HzQ#tO,5<RO#ISQ#tO,5<SO#I[Q#tO'#FjO#IsQSO'#FiOOQO'#Jy'#JyOOQO'#Ie'#IeO#IxQ#tO1G1iOOQ(CY1G1i1G1iOOOO1G1t1G1tO#JZQ$IUO'#JdO#JeQSO,5<]O!){QUO,5<]OOOO-E<d-E<dOOQ(CY1G1f1G1fO#JjQWO'#JxOOQ(CY,5<_,5<_O#JrQWO,5<_OOQ(CY,59b,59bO!&VQ,UO'#C|OOOO'#IX'#IXO#JwO07`O,59fOOQ(CY,59f,59fO%TQUO1G1zO!5kQSO'#IiO#KSQSO,5<sOOQ(CY,5<p,5<pOOQO'#Gf'#GfO!'oQ,UO,5=POOQO'#Gh'#GhO!'oQ,UO,5=RO!&VQ,UO,5=TOOQO1G1|1G1|O#KbQ`O'#CoO#KuQ`O,5<lO#K|QSO'#J|O9SQSO'#J|O#L[QSO,5<nO!'oQ,UO,5<mO#LaQSO'#GSO#LlQSO,5<mO#LqQ`O'#GPO#MOQ`O'#J}O#MYQSO'#J}O!&VQ,UO'#J}O#M_QSO,5<qO#MdQWO'#G[O!3tQWO'#G[O#MuQSO'#G^O#MzQSO'#G`O!2uQSO'#GcO#NPQ(C[O'#IkO#N[QWO,5<uOOQ(CY,5<u,5<uO#NcQWO'#G[O#NqQWO'#G]O#NyQWO'#G]OOQ(CY,5=U,5=UO!'oQ,UO,5?xO!'oQ,UO,5?xO$ OQSO'#IlO$ ZQSO,5?wO$ cQSO,59]O$!SQ,UO,59nOOQ(CY,59n,59nO$!uQ,UO,5<dO$#hQ,UO,5<fO@TQSO,5<hOOQ(CY,5<i,5<iO$#rQSO,5<oO$#wQ,UO,5<tO$$XQSO'#JpO!$SQUO1G1{O$$^QSO1G1{O8|QSO'#JsO8|QSO'#EmO%TQUO'#EmO8|QSO'#InO$$cQ(C[O,5@mOOQQ1G2u1G2uOOQQ1G4V1G4VOOQ(CY1G/t1G/tO!,OQSO1G/tO$&hQ(CjO1G0QOOQQ1G2q1G2qO!&VQ,UO1G2qO%TQUO1G2qO$'XQSO1G2qO$'dQ,UO'#EdOOQ(CW,5?u,5?uO$'nQ(C[O,5?uOOQQ1G.r1G.rO!@RQ(C[O1G.rO!@^QWO1G.rO!@fQ,UO1G.rO$(PQSO1G0nO$(UQSO'#CfO$(aQSO'#KVO$(iQSO,5=sO$(nQSO'#KVO$(sQSO'#KVO$)OQSO'#ItO$)^QSO,5@pO$)fQbO1G1cOOQ(CY1G1e1G1eO9SQSO1G3^O@TQSO1G3^O$)mQSO1G3^O$)rQSO1G3^OOQQ1G3^1G3^O!BaQSO1G2|O!&VQ,UO1G2yO$)wQSO1G2yOOQQ1G2z1G2zO!&VQ,UO1G2zO$)|QSO1G2zO$*UQWO'#GxOOQQ1G2|1G2|O!3tQWO'#IpO!BfQ`O1G3POOQQ1G3P1G3POOQQ,5=j,5=jO$*^Q,UO,5=lO9SQSO,5=lO#MzQSO,5=nO8wQSO,5=nO!@^QWO,5=nO!@fQ,UO,5=nO9tQ,UO,5=nO$*lQSO'#KTO$*wQSO,5=oOOQQ1G.h1G.hO$*|Q(C[O1G.hO@TQSO1G.hO$+XQSO1G.hO9^Q(C[O1G.hO$-^QbO,5@rO$-nQSO,5@rO8|QSO,5@rO$-yQUO,5=vO$.QQSO,5=vOOQQ1G3`1G3`O`QUO1G3`OOQQ1G3f1G3fOOQQ1G3h1G3hO>^QSO1G3jO$.VQUO1G3lO$2ZQUO'#HkOOQQ1G3o1G3oO$2hQSO'#HqO>cQSO'#HsOOQQ1G3u1G3uO$2pQUO1G3uO9^Q(C[O1G3{OOQQ1G3}1G3}OOQ(CW'#GW'#GWO9^Q(C[O1G4PO9^Q(C[O1G4RO$6wQSO,5@SO!){QUO,5;XO8|QSO,5;XO>cQSO,5:RO!){QUO,5:RO!@^QWO,5:RO$6|Q$IUO,5:ROOQO,5;X,5;XO$7WQWO'#I[O$7nQSO,5@ROOQ(CY1G/l1G/lO$7vQWO'#IbO$8QQSO,5@aOOQ(CW1G0r1G0rO!N{QWO,5:ROOQO'#I_'#I_O$8YQWO,5:mOOQ(CY,5:m,5:mO#$vQSO1G0VOOQ(CY1G0V1G0VO%TQUO1G0VOOQ(CY1G0m1G0mO>cQSO1G0mO!@^QWO1G0mO!@fQ,UO1G0mOOQ(CW1G5n1G5nO!@RQ(C[O1G0YOOQO1G0f1G0fO%TQUO1G0fO$8aQ(C[O1G0fO$8lQ(C[O1G0fO!@^QWO1G0YOCaQWO1G0YO$8zQ(C[O1G0fOOQO1G0Y1G0YO$9`Q(CjO1G0fPOOO-E<R-E<RPOOO1G.f1G.fOOOO1G/c1G/cO$9jQ`O,5<cO$9rQbO1G4aOOQO1G4g1G4gO%TQUO,5>uO$9|QSO1G5lO$:UQSO1G5yO$:^QbO1G5zO8|QSO,5>{O$:hQ(CjO1G5wO%TQUO1G5wO$:xQ(C[O1G5wO$;ZQSO1G5vO$;ZQSO1G5vO8|QSO1G5vO$;cQSO,5?OO8|QSO,5?OOOQO,5?O,5?OO$;wQSO,5?OO$$XQSO,5?OOOQO-E<b-E<bOOQO1G0]1G0]OOQO1G0_1G0_O!,RQSO1G0_OOQQ7+(]7+(]O!&VQ,UO7+(]O%TQUO7+(]O$<VQSO7+(]O$<bQ,UO7+(]O$<pQ(CjO,59nO$>xQ(CjO,5<dO$ATQ(CjO,5<fO$C`Q(CjO,5<tOOQ(CY7+&Y7+&YO$EqQ(CjO7+&YO$FeQ,UO'#I]O$FoQSO,5@TOOQ(CY1G/v1G/vO$FwQUO'#I^O$GUQSO,5@UO$G^QbO,5@UOOQ(CY1G/{1G/{O$GhQSO7+&cOOQ(CY7+&c7+&cO$GmQ$IUO,5:bO%TQUO7+&uO$GwQ$IUO,5:YO$HUQ$IUO,5:fO$H`Q$IUO,5:hOOQ(CY7+&{7+&{OOQO1G1m1G1mOOQO1G1n1G1nO$HjQ#tO,5<UO!){QUO,5<TOOQO-E<c-E<cOOQ(CY7+'T7+'TOOOO7+'`7+'`OOOO1G1w1G1wO$HuQSO1G1wOOQ(CY1G1y1G1yO$HzQ`O,59hOOOO-E<V-E<VOOQ(CY1G/Q1G/QO$IRQ(CjO7+'fOOQ(CY,5?T,5?TO$IuQSO,5?TOOQ(CY1G2_1G2_P$IzQSO'#IiPOQ(CY-E<g-E<gO$JnQ,UO1G2kO$KaQ,UO1G2mO$KkQ`O1G2oOOQ(CY1G2W1G2WO$KrQSO'#IhO$LQQSO,5@hO$LQQSO,5@hO$LYQSO,5@hO$LeQSO,5@hOOQO1G2Y1G2YO$LsQ,UO1G2XO!'oQ,UO1G2XO$MTQMhO'#IjO$MeQSO,5@iO!&VQ,UO,5@iO$MmQ`O,5@iOOQ(CY1G2]1G2]OOQ(CW,5<v,5<vOOQ(CW,5<w,5<wO$$XQSO,5<wOCQQSO,5<wO!@^QWO,5<vOOQO'#G_'#G_O$MwQSO,5<xOOQ(CW,5<z,5<zO$$XQSO,5<}OOQO,5?V,5?VOOQO-E<i-E<iOOQ(CY1G2a1G2aO!3tQWO,5<vO$NPQSO,5<wO#MuQSO,5<xO!3tQWO,5<wO$N[Q,UO1G5dO$NfQ,UO1G5dOOQO,5?W,5?WOOQO-E<j-E<jOOQO1G.w1G.wO!7[QWO,59pO%TQUO,59pO$NsQSO1G2SO!'oQ,UO1G2ZO$NxQ(CjO7+'gOOQ(CY7+'g7+'gO!$SQUO7+'gO% lQSO,5;XOOQ(CW,5?Y,5?YOOQ(CW-E<l-E<lOOQ(CY7+%`7+%`O% qQ`O'#KOO#$vQSO7+(]O% {QbO7+(]O$<YQSO7+(]O%!SQ(ChO'#CfO%!gQ(ChO,5<{O%#XQSO,5<{OOQ(CW1G5a1G5aOOQQ7+$^7+$^O!@RQ(C[O7+$^O!@^QWO7+$^O!$SQUO7+&YO%#^QSO'#IsO%#rQSO,5@qOOQO1G3_1G3_O9SQSO,5@qO%#rQSO,5@qO%#zQSO,5@qOOQO,5?`,5?`OOQO-E<r-E<rOOQ(CY7+&}7+&}O%$PQSO7+(xO9^Q(C[O7+(xO9SQSO7+(xO@TQSO7+(xOOQQ7+(h7+(hO%$UQ(ChO7+(eO!&VQ,UO7+(eO%$`Q`O7+(fOOQQ7+(f7+(fO!&VQ,UO7+(fO%$gQSO'#KSO%$rQSO,5=dOOQO,5?[,5?[OOQO-E<n-E<nOOQQ7+(k7+(kO%&RQWO'#HROOQQ1G3W1G3WO!&VQ,UO1G3WO%TQUO1G3WO%&YQSO1G3WO%&eQ,UO1G3WO9^Q(C[O1G3YO#MzQSO1G3YO8wQSO1G3YO!@^QWO1G3YO!@fQ,UO1G3YO%&sQSO'#IrO%'OQSO,5@oO%'WQWO,5@oOOQ(CW1G3Z1G3ZOOQQ7+$S7+$SO@TQSO7+$SO9^Q(C[O7+$SO%'cQSO7+$SO%TQUO1G6^O%TQUO1G6_O%'hQ(C[O1G6^O%'rQUO1G3bO%'yQSO1G3bO%(OQUO1G3bOOQQ7+(z7+(zO9^Q(C[O7+)UO`QUO7+)WOOQQ'#KY'#KYOOQQ'#Iu'#IuO%(VQUO,5>VOOQQ,5>V,5>VO%TQUO'#HlO%(dQSO'#HnOOQQ,5>],5>]O8|QSO,5>]OOQQ,5>_,5>_OOQQ7+)a7+)aOOQQ7+)g7+)gOOQQ7+)k7+)kOOQQ7+)m7+)mO%(iQWO1G5nO%(}Q$IUO1G0sO%)XQSO1G0sOOQO1G/m1G/mO%)dQ$IUO1G/mO>cQSO1G/mO!){QUO'#DgOOQO,5>v,5>vOOQO-E<Y-E<YOOQO,5>|,5>|OOQO-E<`-E<`O!@^QWO1G/mOOQO-E<]-E<]OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO#$vQSO7+%qOOQ(CY7+&X7+&XO>cQSO7+&XO!@^QWO7+&XOOQO7+%t7+%tO$9`Q(CjO7+&QOOQO7+&Q7+&QO%TQUO7+&QO%)nQ(C[O7+&QO!@RQ(C[O7+%tO!@^QWO7+%tO%)yQ(C[O7+&QO%*XQ(CjO7++cO%TQUO7++cO%*iQSO7++bO%*iQSO7++bOOQO1G4j1G4jO8|QSO1G4jO%*qQSO1G4jOOQO7+%y7+%yO#$vQSO<<KwO% {QbO<<KwO%+PQSO<<KwOOQQ<<Kw<<KwO!&VQ,UO<<KwO%TQUO<<KwO%+XQSO<<KwO%+dQ(CjO1G2kO%-oQ(CjO1G2mO%/zQ(CjO1G2XO%2]Q,UO,5>wOOQO-E<Z-E<ZO%2gQbO,5>xO%TQUO,5>xOOQO-E<[-E<[O%2qQSO1G5pOOQ(CY<<I}<<I}O%2yQ$IUO1G0nO%5TQ$IUO1G0xO%5[Q$IUO1G0xO%7`Q$IUO1G0xO%7gQ$IUO1G0xO%9[Q$IUO1G0xO%9rQ$IUO1G0xO%<VQ$IUO1G0xO%<^Q$IUO1G0xO%>bQ$IUO1G0xO%>iQ$IUO1G0xO%@aQ$IUO1G0xO%@tQ(CjO<<JaO%AyQ$IUO1G0xO%CoQ$IUO'#J_O%ErQ$IUO1G1^O%FPQ$IUO1G0QO!){QUO'#FlOOQO'#Jz'#JzOOQO1G1p1G1pO%FZQSO1G1oO%F`Q$IUO,5?ROOOO7+'c7+'cOOOO1G/S1G/SOOQ(CY1G4o1G4oO!'oQ,UO7+(ZO%FjQSO,5?SO9SQSO,5?SOOQO-E<f-E<fO%FxQSO1G6SO%FxQSO1G6SO%GQQSO1G6SO%G]Q,UO7+'sO%GmQ`O,5?UO%GwQSO,5?UO!&VQ,UO,5?UOOQO-E<h-E<hO%G|Q`O1G6TO%HWQSO1G6TOOQ(CW1G2c1G2cO$$XQSO1G2cOOQ(CW1G2b1G2bO%H`QSO1G2dO!&VQ,UO1G2dOOQ(CW1G2i1G2iO!@^QWO1G2bOCQQSO1G2cO%HeQSO1G2dO%HmQSO1G2cO!'oQ,UO7++OOOQ(CY1G/[1G/[O%HxQSO1G/[OOQ(CY7+'n7+'nO%H}Q,UO7+'uO%I_Q(CjO<<KROOQ(CY<<KR<<KRO%JRQSO1G0sO!&VQ,UO'#ImO%JWQSO,5@jO!&VQ,UO1G2gOOQQ<<Gx<<GxO!@RQ(C[O<<GxO%J`Q(CjO<<ItOOQ(CY<<It<<ItOOQO,5?_,5?_O%KSQSO,5?_O$(sQSO,5?_OOQO-E<q-E<qO%KXQSO1G6]O%KXQSO1G6]O9SQSO1G6]O@TQSO<<LdOOQQ<<Ld<<LdO%KaQSO<<LdO9^Q(C[O<<LdOOQQ<<LP<<LPO%$UQ(ChO<<LPOOQQ<<LQ<<LQO%$`Q`O<<LQO%KfQWO'#IoO%KqQSO,5@nO!){QUO,5@nOOQQ1G3O1G3OO%KyQUO'#JhOOQO'#Iq'#IqO9^Q(C[O'#IqO%LTQWO,5=mOOQQ,5=m,5=mO%L[QWO'#E`O%LpQSO7+(rO%LuQSO7+(rOOQQ7+(r7+(rO!&VQ,UO7+(rO%TQUO7+(rO%L}QSO7+(rOOQQ7+(t7+(tO9^Q(C[O7+(tO#MzQSO7+(tO8wQSO7+(tO!@^QWO7+(tO%MYQSO,5?^OOQO-E<p-E<pOOQO'#HU'#HUO%MeQSO1G6ZO9^Q(C[O<<GnOOQQ<<Gn<<GnO@TQSO<<GnO%MmQSO7++xO%MrQSO7++yO%TQUO7++xO%TQUO7++yOOQQ7+(|7+(|O%MwQSO7+(|O%M|QUO7+(|O%NTQSO7+(|OOQQ<<Lp<<LpOOQQ<<Lr<<LrOOQQ-E<s-E<sOOQQ1G3q1G3qO%NYQSO,5>WOOQQ,5>Y,5>YO%N_QSO1G3wO8|QSO7+&_O!){QUO7+&_OOQO7+%X7+%XO%NdQ$IUO1G5zO>cQSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Is<<IsO>cQSO<<IsOOQO<<Il<<IlO$9`Q(CjO<<IlO%TQUO<<IlOOQO<<I`<<I`O!@RQ(C[O<<I`O%NnQ(C[O<<IlO%NyQ(CjO<<N}O& ZQSO<<N|OOQO7+*U7+*UO8|QSO7+*UOOQQANAcANAcO& cQSOANAcO!&VQ,UOANAcO#$vQSOANAcO% {QbOANAcO%TQUOANAcO& kQ(CjO7+'sO&#|Q(CjO7+'uO&&_QbO1G4dO&&iQ$IUO7+&YO&&vQ$IUO,59nO&(yQ$IUO,5<dO&*|Q$IUO,5<fO&-PQ$IUO,5<tO&.uQ$IUO7+'fO&/SQ$IUO7+'gO&/aQSO,5<WOOQO7+'Z7+'ZO&/fQ,UO<<KuOOQO1G4n1G4nO&/mQSO1G4nO&/xQSO1G4nO&0WQSO7++nO&0WQSO7++nO!&VQ,UO1G4pO&0`Q`O1G4pO&0jQSO7++oOOQ(CW7+'}7+'}O$$XQSO7+(OO&0rQ`O7+(OOOQ(CW7+'|7+'|O$$XQSO7+'}O&0yQSO7+(OO!&VQ,UO7+(OOCQQSO7+'}O&1OQ,UO<<NjOOQ(CY7+$v7+$vO&1YQ`O,5?XOOQO-E<k-E<kO&1dQ(ChO7+(ROOQQAN=dAN=dO9SQSO1G4yOOQO1G4y1G4yO&1tQSO1G4yO&1yQSO7++wO&1yQSO7++wO9^Q(C[OANBOO@TQSOANBOOOQQANBOANBOOOQQANAkANAkOOQQANAlANAlO&2RQSO,5?ZOOQO-E<m-E<mO&2^Q$IUO1G6YO&4nQbO'#CfOOQO,5?],5?]OOQO-E<o-E<oOOQQ1G3X1G3XO%KyQUO,5<xOOQQ<<L^<<L^O!&VQ,UO<<L^O%LpQSO<<L^O&4xQSO<<L^O%TQUO<<L^OOQQ<<L`<<L`O9^Q(C[O<<L`O#MzQSO<<L`O8wQSO<<L`O&5QQWO1G4xO&5]QSO7++uOOQQAN=YAN=YO9^Q(C[OAN=YOOQQ<= d<= dOOQQ<= e<= eO&5eQSO<= dO&5jQSO<= eOOQQ<<Lh<<LhO&5oQSO<<LhO&5tQUO<<LhOOQQ1G3r1G3rO>cQSO7+)cO&5{QSO<<IyO&6WQ$IUO<<IyOOQO<<Hs<<HsOOQ(CYAN?_AN?_OOQOAN?WAN?WO$9`Q(CjOAN?WOOQOAN>zAN>zO%TQUOAN?WOOQO<<Mp<<MpOOQQG26}G26}O!&VQ,UOG26}O#$vQSOG26}O&6bQSOG26}O% {QbOG26}O&6jQ$IUO<<JaO&6wQ$IUO1G2XO&8mQ$IUO1G2kO&:pQ$IUO1G2mO&<sQ$IUO<<KRO&=QQ$IUO<<ItOOQO1G1r1G1rO!'oQ,UOANAaOOQO7+*Y7+*YO&=_QSO7+*YO&=jQSO<= YO&=rQ`O7+*[OOQ(CW<<Kj<<KjO$$XQSO<<KjOOQ(CW<<Ki<<KiO&=|Q`O<<KjO$$XQSO<<KiOOQO7+*e7+*eO9SQSO7+*eO&>TQSO<= cOOQQG27jG27jO9^Q(C[OG27jO!){QUO1G4uO&>]QSO7++tO%LpQSOANAxOOQQANAxANAxO!&VQ,UOANAxO&>eQSOANAxOOQQANAzANAzO9^Q(C[OANAzO#MzQSOANAzOOQO'#HV'#HVOOQO7+*d7+*dOOQQG22tG22tOOQQANEOANEOOOQQANEPANEPOOQQANBSANBSO&>mQSOANBSOOQQ<<L}<<L}O!){QUOAN?eOOQOG24rG24rO$9`Q(CjOG24rO#$vQSOLD,iOOQQLD,iLD,iO!&VQ,UOLD,iO&>rQSOLD,iO&>zQ$IUO7+'sO&@pQ$IUO7+'uO&BfQ,UOG26{OOQO<<Mt<<MtOOQ(CWANAUANAUO$$XQSOANAUOOQ(CWANATANATOOQO<<NP<<NPOOQQLD-ULD-UO&BvQ$IUO7+*aOOQQG27dG27dO%LpQSOG27dO!&VQ,UOG27dOOQQG27fG27fO9^Q(C[OG27fOOQQG27nG27nO&CQQ$IUOG25POOQOLD*^LD*^OOQQ!$(!T!$(!TO#$vQSO!$(!TO!&VQ,UO!$(!TO&C[Q(CjOG26{OOQ(CWG26pG26pOOQQLD-OLD-OO%LpQSOLD-OOOQQLD-QLD-QOOQQ!)9Eo!)9EoO#$vQSO!)9EoOOQQ!$(!j!$(!jOOQQ!.K;Z!.K;ZO&EmQ$IUOG26{O!){QUO'#DvO0xQSO'#ETO&GcQbO'#JdO!){QUO'#DnO&GjQUO'#DzO&GqQbO'#CfO&JXQbO'#CfO!){QUO'#D|O&JiQUO,5;SO!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO,5;^O!){QUO'#IgO&LlQSO,5<cO&LtQ,UO,5;^O&NXQ,UO,5;^O!){QUO,5;rO0{QSO'#DSO0{QSO'#DSO!&VQ,UO'#FxO&LtQ,UO'#FxO!&VQ,UO'#FzO&LtQ,UO'#FzO!&VQ,UO'#GYO&LtQ,UO'#GYO!){QUO,5:fO!){QUO,5@`O&JiQUO1G0nO&N`Q$IUO'#CfO!){QUO1G1zO!&VQ,UO,5=PO&LtQ,UO,5=PO!&VQ,UO,5=RO&LtQ,UO,5=RO!&VQ,UO,5<mO&LtQ,UO,5<mO&JiQUO1G1{O!){QUO7+&uO!&VQ,UO1G2XO&LtQ,UO1G2XO!&VQ,UO1G2ZO&LtQ,UO1G2ZO&JiQUO7+'gO&JiQUO7+&YO!&VQ,UOANAaO&LtQ,UOANAaO&NjQSO'#EhO&NoQSO'#EhO&NwQSO'#FWO&N|QSO'#ErO' RQSO'#JtO' ^QSO'#JrO' iQSO,5;SO' nQ,UO,5<`O' uQSO'#GRO' zQSO'#GRO'!PQSO,5<aO'!XQSO,5;SO'!aQ$IUO1G1ZO'!hQSO,5<mO'!mQSO,5<mO'!rQSO,5<oO'!wQSO,5<oO'!|QSO1G1{O'#RQSO1G0nO'#WQ,UO<<KuO'#_Q,UO<<KuO7aQ,UO'#FvO8wQSO'#FuOAOQSO'#EgO!){QUO,5;oO!2uQSO'#GRO!2uQSO'#GRO!2uQSO'#GTO!2uQSO'#GTO!'oQ,UO7+(ZO!'oQ,UO7+(ZO$KkQ`O1G2oO$KkQ`O1G2oO!&VQ,UO,5=TO!&VQ,UO,5=T",stateData:"'$h~O'nOS'oOSROS'pRQ~OPYOQYOV!UO^qOayObxOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!ctO!hZO!kYO!lYO!mYO!ouO!qvO!twO!x]O#p!OO$Q{O$UfO%`|O%b!PO%d}O%e}O%f}O%i!QO%k!RO%n!SO%o!SO%q!TO%}!VO&T!WO&V!XO&X!YO&Z!ZO&^![O&d!]O&j!^O&l!_O&n!`O&p!aO&r!bO'uSO'wTO'zUO(SVO(b[O(oiO~OPYOQYOa!iOb!hOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!dO!ctO!hZO!kYO!lYO!mYO!ouO!q!fO!t!gO$Q!jO$UfO'u!cO'wTO'zUO(SVO(b[O(oiO~O^!uOl!mO|!nO![!wO!]!tO!^!tO!x9qO!|!oO!}!oO#O!vO#P!oO#Q!oO#T!xO#U!xO'v!kO'wTO'zUO(V!lO(b!rO~O'p!yO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX'lYX(SYX(cYX(jYX(kYX~O!a$zX~P(jO[!{O'w!}O'x!{O'y!}O~O[#OO'y!}O'z!}O'{#OO~Oq#QO!O#RO(T#RO(U#TO~OPYOQYOa!iOb!hOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!dO!ctO!hZO!kYO!lYO!mYO!ouO!q!fO!t!gO$Q!jO$UfO'u9uO'wTO'zUO(SVO(b[O(oiO~O!U#XO!V#UO!S(YP!S(gP~P+vO!W#aO~P`OPYOQYOa!iOb!hOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!dO!ctO!hZO!kYO!lYO!mYO!ouO!q!fO!t!gO$Q!jO$UfO'wTO'zUO(SVO(b[O(oiO~Oi#kO!U#gO!x]O#b#jO#c#gO'u9vO!g(dP~P.bO!h#mO'u#lO~O!t#qO!x]O%`#rO~O#d#sO~O!a#tO#d#sO~OP$[OX$cOk$POy#xOz#yO|#zO!V$`O!e$RO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO#l$RO#m$RO#n$bO#o$RO#q$SO#s$UO#u$WO#v$XO(SVO(c$YO(j#{O(k#|O~O^(WX'l(WX'j(WX!g(WX!S(WX!X(WX%a(WX!a(WX~P1jO#X$dO#{$dOP(XXX(XXk(XXy(XXz(XX|(XX!V(XX!e(XX!h(XX!l(XX#g(XX#h(XX#i(XX#j(XX#k(XX#l(XX#m(XX#n(XX#o(XX#q(XX#s(XX#u(XX#v(XX(S(XX(c(XX(j(XX(k(XX!X(XX%a(XX~O^(XX!f(XX'l(XX'j(XX!S(XX!g(XXo(XX!a(XX~P4QO#X$dO~O$W$fO$Y$eO$a$kO~O!X$lO$UfO$d$mO$f$oO~Oi%ROk$sOl$rOm$rOs%SOu%TOw%UO|$zO!X${O!c%ZO!h$wO#c%[O$Q%XO$m%VO$o%WO$r%YO'u$qO'wTO'zUO(O%QO(S$tOd(PP~O!h%]O~O|%`O!X%aO'u%_O~O!a%eO~O^%fO'l%fO~O'v!kO~P%TO%f%mO~P%TO!h%]O'u%_O'v!kO(O%QO~Ob%tO!h%]O'u%_O~O#o$RO~Oy%yO!X%vO!h%xO%b%|O'u%_O'v!kO'wTO'zUO](xP~O!t#qO~O%k&OO|(tX!X(tX'u(tX~O'u&PO~O!q&UO#p!OO%b!PO%d}O%e}O%f}O%i!QO%k!RO%n!SO%o!SO~Oa&ZOb&YO!t&WO%`&XO%s&VO~P;kOa&^ObxO!X&]O!q&UO!twO!x]O#p!OO%`|O%d}O%e}O%f}O%i!QO%k!RO%n!SO%o!SO%q!TO~O_&aO#X&dO%b&_O'v!kO~P<pO!h&eO!q&iO~O!h#mO~O!XXO~O^%fO'k&qO'l%fO~O^%fO'k&tO'l%fO~O^%fO'k&vO'l%fO~O'jYX!SYXoYX!gYX&RYX!XYX%aYX!aYX~P(jO!['TO!]&|O!^&|O'v!kO'wTO'zUO~Ol&zO|&yO!U&}O(V&xO!W(ZP!W(iP~P?wOg'WO!X'UO'u%_O~Ob']O!h%]O'u%_O~Oy%yO!h%xO~Ol!mO|!nO!x9qO!|!oO!}!oO#P!oO#Q!oO'v!kO'wTO'zUO(V!lO(b!rO~O!['cO!]'bO!^'bO#O!oO#T'dO#U'dO~PAcO^%fO!a#tO!h%]O'l%fO(O%QO(c'fO~O!l'jO#X'hO~PBqOl!mO|!nO'wTO'zUO(V!lO(b!rO~O!XXOl(`X|(`X![(`X!](`X!^(`X!x(`X!|(`X!}(`X#O(`X#P(`X#Q(`X#T(`X#U(`X'v(`X'w(`X'z(`X(V(`X(b(`X~O!]'bO!^'bO'v!kO~PCaO'q'nO'r'nO's'pO~O[!{O'w'rO'x!{O'y'rO~O[#OO'y'rO'z'rO'{#OO~Oq#QO!O#RO(T#RO(U'vO~O!U'xO!S&}X!S'TX!V&}X!V'TX~P+vO!V'zO!S(YX~OP$[OX$cOk$POy#xOz#yO|#zO!V'zO!e$RO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO#l$RO#m$RO#n$bO#o$RO#q$SO#s$UO#u$WO#v$XO(SVO(c$YO(j#{O(k#|O~O!S(YX~PGTO!S(PO~O!S(fX!V(fX!a(fX!g(fX(c(fX~O#X(fX#d#]X!W(fX~PIZO#X(QO!S(hX!V(hX~O!V(RO!S(gX~O!S(UO~O#X$dO~PIZO!W(VO~P`Oy#xOz#yO|#zO!f#vO!h#wO(SVOP!jaX!jak!ja!V!ja!e!ja!l!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#o!ja#q!ja#s!ja#u!ja#v!ja(c!ja(j!ja(k!ja~O^!ja'l!ja'j!ja!S!ja!g!jao!ja!X!ja%a!ja!a!ja~PJqO!g(WO~O!a#tO#X(XO(c'fO!V(eX^(eX'l(eX~O!g(eX~PMaO|%`O!X%aO!x]O#b(^O#c(]O'u%_O~O!V(_O!g(dX~O!g(aO~O|%`O!X%aO#c(]O'u%_O~OP(XXX(XXk(XXy(XXz(XX|(XX!V(XX!e(XX!f(XX!h(XX!l(XX#g(XX#h(XX#i(XX#j(XX#k(XX#l(XX#m(XX#n(XX#o(XX#q(XX#s(XX#u(XX#v(XX(S(XX(c(XX(j(XX(k(XX~O!a#tO!g(XX~PN}Oy(bOz(cO!f#vO!h#wO!x!wa|!wa~O!t!wa%`!wa!X!wa#b!wa#c!wa'u!wa~P!#RO!t(gO~OPYOQYOa!iOb!hOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!ctO!hZO!kYO!lYO!mYO!ouO!q!fO!t!gO$Q!jO$UfO'u!cO'wTO'zUO(SVO(b[O(oiO~Oi%ROk$sOl$rOm$rOs%SOu%TOw:ZO|$zO!X${O!c;eO!h$wO#c:aO$Q%XO$m:]O$o:_O$r%YO'u(kO'wTO'zUO(O%QO(S$tO~O#d(mO~Oi%ROk$sOl$rOm$rOs%SOu%TOw%UO|$zO!X${O!c%ZO!h$wO#c%[O$Q%XO$m%VO$o%WO$r%YO'u(kO'wTO'zUO(O%QO(S$tO~Od(]P~P!'oO!U(qO!g(^P~P%TO(V(sO(b[O~O|(uO!h#wO(V(sO(b[O~OP9pOQ9pOa;aOb!hOikOk9pOlkOmkOskOu9pOw9pO|WO!QkO!RkO!X!dO!c9sO!hZO!k9pO!l9pO!m9pO!o9tO!q9wO!t!gO$Q!jO$UfO'u)TO'wTO'zUO(SVO(b[O(o;_O~Oz)WO!h#wO~O!V$`O^$ka'l$ka'j$ka!g$ka!S$ka!X$ka%a$ka!a$ka~O#p)[O~P!&VOy)_O!a)^O!X$XX$T$XX$W$XX$Y$XX$a$XX~O!a)^O!X(lX$T(lX$W(lX$Y(lX$a(lX~Oy)_O~P!-eOy)_O!X(lX$T(lX$W(lX$Y(lX$a(lX~O!X)aO$T)eO$W)`O$Y)`O$a)fO~O!U)iO~P!){O$W$fO$Y$eO$a)mO~Og$sXy$sX|$sX!f$sX(j$sX(k$sX~OdfXd$sXgfX!VfX#XfX~P!/ZOl)oO~Oq)pO(T)qO(U)sO~Og)|Oy)uO|)vO(j)xO(k)zO~Od)tO~P!0dOd)}O~Oi%ROk$sOl$rOm$rOs%SOu%TOw:ZO|$zO!X${O!c;eO!h$wO#c:aO$Q%XO$m:]O$o:_O$r%YO'wTO'zUO(O%QO(S$tO~O!U*RO'u*OO!g(pP~P!1RO#d*TO~O!h*UO~O!U*ZO'u*WO!S(qP~P!1ROk*gO|*_O![*eO!]*^O!^*^O!h*UO#T*fO%W*aO'v!kO(V!lO~O!W*dO~P!3XO!f#vOg(RXy(RX|(RX(j(RX(k(RX!V(RX#X(RX~Od(RX#y(RX~P!4QOg*jO#X*iOd(QX!V(QX~O!V*kOd(PX~O'u&POd(PP~O!h*rO~O'u(kO~Oi*vO|%`O!U#gO!X%aO!x]O#b#jO#c#gO'u%_O!g(dP~O!a#tO#d*wO~O|%`O!U*yO!V(RO!X%aO'u%_O!S(gP~Ol'QO|*{O!U*zO'wTO'zUO(V(sO~O!W(iP~P!6{O!V*|O^(uX'l(uX~OP$[OX$cOk$POy#xOz#yO|#zO!e$RO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO#l$RO#m$RO#n$bO#o$RO#q$SO#s$UO#u$WO#v$XO(SVO(c$YO(j#{O(k#|O~O^!ba!V!ba'l!ba'j!ba!S!ba!g!bao!ba!X!ba%a!ba!a!ba~P!7sOy#xOz#yO|#zO!f#vO!h#wO(SVOP!naX!nak!na!V!na!e!na!l!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#o!na#q!na#s!na#u!na#v!na(c!na(j!na(k!na~O^!na'l!na'j!na!S!na!g!nao!na!X!na%a!na!a!na~P!:^Oy#xOz#yO|#zO!f#vO!h#wO(SVOP!paX!pak!pa!V!pa!e!pa!l!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#o!pa#q!pa#s!pa#u!pa#v!pa(c!pa(j!pa(k!pa~O^!pa'l!pa'j!pa!S!pa!g!pao!pa!X!pa%a!pa!a!pa~P!<wOg+VO!X'UO%a+UO(O%QO~O!a+XO^'}X!X'}X'l'}X!V'}X~O^%fO!XXO'l%fO~O!h%]O(O%QO~O!h%]O'u%_O(O%QO~O!a#tO#d(mO~O%b+eO'u+aO'wTO'zUO!W(yP~O!V+fO](xX~OX+jO~O]+kO~O!X%vO'u%_O'v!kO](xP~O#X+pO(O%QO~Og+sO!X${O(O%QO~O!X+uO~Oy+wO!XXO~O%f%mO~O!t+|O~Ob,RO~O'u#lO!W(wP~Ob%tO~O%b!PO'u&PO~P<pOX,XO],WO~OPYOQYOayObxOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!ctO!hZO!kYO!lYO!mYO!ouO!twO!x]O$UfO%`|O'wTO'zUO(SVO(b[O(oiO~O!X!dO!q!fO$Q!jO'u!cO~P!CnO],WO^%fO'l%fO~OPYOQYOa!iOb!hOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!dO!ctO!hZO!kYO!lYO!mYO!ouO!t!gO$Q!jO$UfO'u!cO'wTO'zUO(SVO(b[O(oiO~O^,^O!qvO#p}O%d}O%e}O%f}O~P!FWO!h&eO~O&T,dO~O!X,fO~O&f,hO&h,iOP&caQ&caV&ca^&caa&cab&cai&cak&cal&cam&cas&cau&caw&ca|&ca!Q&ca!R&ca!X&ca!c&ca!h&ca!k&ca!l&ca!m&ca!o&ca!q&ca!t&ca!x&ca#p&ca$Q&ca$U&ca%`&ca%b&ca%d&ca%e&ca%f&ca%i&ca%k&ca%n&ca%o&ca%q&ca%}&ca&T&ca&V&ca&X&ca&Z&ca&^&ca&d&ca&j&ca&l&ca&n&ca&p&ca&r&ca'j&ca'u&ca'w&ca'z&ca(S&ca(b&ca(o&ca!W&ca&[&ca_&ca&a&ca~O'u,nO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#X{X(O!_X~O!a,sO#X,rO!V#aX!V([X!W#aX!W([X!a([X!h([X(O([X~O!a,uO!h%]O(O%QO!V!ZX!W!ZX~Ol!mO|!nO'wTO'zUO(V!lO~OP9pOQ9pOa;aOb!hOikOk9pOlkOmkOskOu9pOw9pO|WO!QkO!RkO!X!dO!c9sO!hZO!k9pO!l9pO!m9pO!o9tO!q9wO!t!gO$Q!jO$UfO'wTO'zUO(SVO(b[O(o;_O~O'u:fO~P# ^O!V,yO!W(ZX~O!W,{O~O!a,sO#X,rO!V#aX!W#aX~O!V,|O!W(iX~O!W-OO~O!]-PO!^-PO'v!kO~P!N{O!W-SO~P'WOg-VO!X'UO~O!S-[O~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#Q!wa#T!wa#U!wa'v!wa'w!wa'z!wa(V!wa(b!wa~P!#RO!l-aO#X-_O~PBqO!]-cO!^-cO'v!kO~PCaO^%fO#X-_O'l%fO~O^%fO!a#tO#X-_O'l%fO~O^%fO!a#tO!l-aO#X-_O'l%fO(c'fO~O'q'nO'r'nO's-hO~Oo-iO~O!S&}a!V&}a~P!7sO!U-mO!S&}X!V&}X~P%TO!V'zO!S(Ya~O!S(Ya~PGTO!V(RO!S(ga~O|%`O!U-qO!X%aO'u%_O!S'TX!V'TX~O#X-sO!V(ea!g(ea^(ea'l(ea~O!a#tO~P#)dO!V(_O!g(da~O|%`O!X%aO#c-wO'u%_O~Oi-|O|%`O!U-yO!X%aO!x]O#b-{O#c-yO'u%_O!V'WX!g'WX~Oz.QO!h#wO~Og.TO!X'UO%a.SO(O%QO~O^#[i!V#[i'l#[i'j#[i!S#[i!g#[io#[i!X#[i%a#[i!a#[i~P!7sOg;kOy)uO|)vO(j)xO(k)zO~O#d#Wa^#Wa#X#Wa'l#Wa!V#Wa!g#Wa!X#Wa!S#Wa~P#,`O#d(RXP(RXX(RX^(RXk(RXz(RX!e(RX!h(RX!l(RX#g(RX#h(RX#i(RX#j(RX#k(RX#l(RX#m(RX#n(RX#o(RX#q(RX#s(RX#u(RX#v(RX'l(RX(S(RX(c(RX!g(RX!S(RX'j(RXo(RX!X(RX%a(RX!a(RX~P!4QO!V.^Od(]X~P!0dOd.`O~O!V.aO!g(^X~P!7sO!g.dO~O!S.fO~OP$[Oy#xOz#yO|#zO!f#vO!h#wO!l$[O(SVOX#fi^#fik#fi!V#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'l#fi(c#fi(j#fi(k#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O#g#fi~P#0[O#g#}O~P#0[OP$[Oy#xOz#yO|#zO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO(SVOX#fi^#fi!V#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'l#fi(c#fi(j#fi(k#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~Ok#fi~P#2|Ok$PO~P#2|OP$[Ok$POy#xOz#yO|#zO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO(SVO^#fi!V#fi#q#fi#s#fi#u#fi#v#fi'l#fi(c#fi(j#fi(k#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P#5nOX$cO!e$RO#l$RO#m$RO#n$bO#o$RO~P#5nOP$[OX$cOk$POy#xOz#yO|#zO!e$RO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO#l$RO#m$RO#n$bO#o$RO#q$SO(SVO^#fi!V#fi#s#fi#u#fi#v#fi'l#fi(c#fi(k#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(j#fi~P#8oO(j#{O~P#8oOP$[OX$cOk$POy#xOz#yO|#zO!e$RO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO#l$RO#m$RO#n$bO#o$RO#q$SO#s$UO(SVO(j#{O^#fi!V#fi#u#fi#v#fi'l#fi(c#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(k#fi~P#;aO(k#|O~P#;aOP$[OX$cOk$POy#xOz#yO|#zO!e$RO!f#vO!h#wO!l$[O#g#}O#h$OO#i$OO#j$OO#k$QO#l$RO#m$RO#n$bO#o$RO#q$SO#s$UO#u$WO(SVO(j#{O(k#|O~O^#fi!V#fi#v#fi'l#fi(c#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#>ROPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(SYX(cYX(jYX(kYX!VYX!WYX~O#yYX~P#@lOP$[OX:XOk9{Oy#xOz#yO|#zO!e9}O!f#vO!h#wO!l$[O#g9yO#h9zO#i9zO#j9zO#k9|O#l9}O#m9}O#n:WO#o9}O#q:OO#s:QO#u:SO#v:TO(SVO(c$YO(j#{O(k#|O~O#y.hO~P#ByO#X:YO#{:YO#y(XX!W(XX~PN}O^'Za!V'Za'l'Za'j'Za!g'Za!S'Zao'Za!X'Za%a'Za!a'Za~P!7sOP#fiX#fi^#fik#fiz#fi!V#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'l#fi(S#fi(c#fi'j#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#,`O^#zi!V#zi'l#zi'j#zi!S#zi!g#zio#zi!X#zi%a#zi!a#zi~P!7sO$W.mO$Y.mO~O$W.nO$Y.nO~O!a)^O#X.oO!X$^X$T$^X$W$^X$Y$^X$a$^X~O!U.pO~O!X)aO$T.rO$W)`O$Y)`O$a.sO~O!V:UO!W(WX~P#ByO!W.tO~O!a)^O$a(lX~O$a.vO~Oq)pO(T)qO(U.yO~Ol.|O!S.}O'wTO'zUO~O!VcX!acX!gcX!g$sX(ccX~P!/ZO!g/TO~P#,`O!V/UO!a#tO(c'fO!g(pX~O!g/ZO~O!U*RO'u%_O!g(pP~O#d/]O~O!S$sX!V$sX!a$zX~P!/ZO!V/^O!S(qX~P#,`O!a/`O~O!S/bO~Ok/fO!a#tO!h%]O(O%QO(c'fO~O'u/hO~O!a+XO~O^%fO!V/lO'l%fO~O!W/nO~P!3XO!]/oO!^/oO'v!kO(V!lO~O|/qO(V!lO~O#T/rO~O'u&POd'`X!V'`X~O!V*kOd(Pa~Od/wO~Oy/xOz/xO|/yOgva(jva(kva!Vva#Xva~Odva#yva~P$ hOy)uO|)vOg$la(j$la(k$la!V$la#X$la~Od$la#y$la~P$!^Oy)uO|)vOg$na(j$na(k$na!V$na#X$na~Od$na#y$na~P$#PO#d/{O~Od$|a!V$|a#X$|a#y$|a~P!0dO!a#tO~O#d0OO~O!V*|O^(ua'l(ua~Oy#xOz#yO|#zO!f#vO!h#wO(SVOP!niX!nik!ni!V!ni!e!ni!l!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#o!ni#q!ni#s!ni#u!ni#v!ni(c!ni(j!ni(k!ni~O^!ni'l!ni'j!ni!S!ni!g!nio!ni!X!ni%a!ni!a!ni~P$$nOg.TO!X'UO%a.SO~Oi0YO'u0XO~P!1UO!a+XO^'}a!X'}a'l'}a!V'}a~O#d0`O~OXYX!VcX!WcX~O!V0aO!W(yX~O!W0cO~OX0dO~O'u+aO'wTO'zUO~O!X%vO'u%_O]'hX!V'hX~O!V+fO](xa~O!g0iO~P!7sOX0lO~O]0mO~O#X0pO~Og0sO!X${O~O(V(sO!W(vP~Og0|O!X0yO%a0{O(O%QO~OX1WO!V1UO!W(wX~O!W1XO~O]1ZO^%fO'l%fO~O'u#lO'wTO'zUO~O#X$dO#{$dOP(XXX(XXk(XXy(XXz(XX|(XX!V(XX!e(XX!h(XX!l(XX#g(XX#h(XX#i(XX#j(XX#k(XX#l(XX#m(XX#n(XX#q(XX#s(XX#u(XX#v(XX(S(XX(c(XX(j(XX(k(XX~O#o1^O&R1_O^(XX!f(XX~P$+dO#X$dO#o1^O&R1_O~O^1aO~P%TO^1cO~O&[1fOP&YiQ&YiV&Yi^&Yia&Yib&Yii&Yik&Yil&Yim&Yis&Yiu&Yiw&Yi|&Yi!Q&Yi!R&Yi!X&Yi!c&Yi!h&Yi!k&Yi!l&Yi!m&Yi!o&Yi!q&Yi!t&Yi!x&Yi#p&Yi$Q&Yi$U&Yi%`&Yi%b&Yi%d&Yi%e&Yi%f&Yi%i&Yi%k&Yi%n&Yi%o&Yi%q&Yi%}&Yi&T&Yi&V&Yi&X&Yi&Z&Yi&^&Yi&d&Yi&j&Yi&l&Yi&n&Yi&p&Yi&r&Yi'j&Yi'u&Yi'w&Yi'z&Yi(S&Yi(b&Yi(o&Yi!W&Yi_&Yi&a&Yi~O_1lO!W1jO&a1kO~P`O!XXO!h1nO~O&h,iOP&ciQ&ciV&ci^&cia&cib&cii&cik&cil&cim&cis&ciu&ciw&ci|&ci!Q&ci!R&ci!X&ci!c&ci!h&ci!k&ci!l&ci!m&ci!o&ci!q&ci!t&ci!x&ci#p&ci$Q&ci$U&ci%`&ci%b&ci%d&ci%e&ci%f&ci%i&ci%k&ci%n&ci%o&ci%q&ci%}&ci&T&ci&V&ci&X&ci&Z&ci&^&ci&d&ci&j&ci&l&ci&n&ci&p&ci&r&ci'j&ci'u&ci'w&ci'z&ci(S&ci(b&ci(o&ci!W&ci&[&ci_&ci&a&ci~O!S1tO~O!V!Za!W!Za~P#ByOl!mO|!nO!U1zO(V!lO!V'OX!W'OX~P?wO!V,yO!W(Za~O!V'UX!W'UX~P!6{O!V,|O!W(ia~O!W2RO~P'WO^%fO#X2[O'l%fO~O^%fO!a#tO#X2[O'l%fO~O^%fO!a#tO!l2`O#X2[O'l%fO(c'fO~O^%fO'l%fO~P!7sO!V$`Oo$ka~O!S&}i!V&}i~P!7sO!V'zO!S(Yi~O!V(RO!S(gi~O!S(hi!V(hi~P!7sO!V(ei!g(ei^(ei'l(ei~P!7sO#X2bO!V(ei!g(ei^(ei'l(ei~O!V(_O!g(di~O|%`O!X%aO!x]O#b2gO#c2fO'u%_O~O|%`O!X%aO#c2fO'u%_O~Og2nO!X'UO%a2mO~Og2nO!X'UO%a2mO(O%QO~O#dvaPvaXva^vakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva'lva(Sva(cva!gva!Sva'jvaova!Xva%ava!ava~P$ hO#d$laP$laX$la^$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la'l$la(S$la(c$la!g$la!S$la'j$lao$la!X$la%a$la!a$la~P$!^O#d$naP$naX$na^$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na'l$na(S$na(c$na!g$na!S$na'j$nao$na!X$na%a$na!a$na~P$#PO#d$|aP$|aX$|a^$|ak$|az$|a!V$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a'l$|a(S$|a(c$|a!g$|a!S$|a'j$|a#X$|ao$|a!X$|a%a$|a!a$|a~P#,`O^#[q!V#[q'l#[q'j#[q!S#[q!g#[qo#[q!X#[q%a#[q!a#[q~P!7sOd'PX!V'PX~P!'oO!V.^Od(]a~O!U2vO!V'QX!g'QX~P%TO!V.aO!g(^a~O!V.aO!g(^a~P!7sO!S2yO~O#y!ja!W!ja~PJqO#y!ba!V!ba!W!ba~P#ByO#y!na!W!na~P!:^O#y!pa!W!pa~P!<wO!X3]O$UfO$_3^O~O!W3bO~Oo3cO~P#,`O^$hq!V$hq'l$hq'j$hq!S$hq!g$hqo$hq!X$hq%a$hq!a$hq~P!7sO!S3dO~Ol.|O'wTO'zUO~Oy)uO|)vO(k)zOg%Xi(j%Xi!V%Xi#X%Xi~Od%Xi#y%Xi~P$JVOy)uO|)vOg%Zi(j%Zi(k%Zi!V%Zi#X%Zi~Od%Zi#y%Zi~P$JxO(c$YO~P#,`O!U3gO'u%_O!V'[X!g'[X~O!V/UO!g(pa~O!V/UO!a#tO!g(pa~O!V/UO!a#tO(c'fO!g(pa~Od$ui!V$ui#X$ui#y$ui~P!0dO!U3oO'u*WO!S'^X!V'^X~P!1RO!V/^O!S(qa~O!V/^O!S(qa~P#,`O!a#tO#o3wO~Ok3zO!a#tO(c'fO~Od(Qi!V(Qi~P!0dO#X3}Od(Qi!V(Qi~P!0dO!g4QO~O^$iq!V$iq'l$iq'j$iq!S$iq!g$iqo$iq!X$iq%a$iq!a$iq~P!7sO!S4UO~O!V4VO!X(rX~P#,`O!f#vO~P4QO^$sX!X$sX%UYX'l$sX!V$sX~P!/ZO%U4XO^hXghXyhX|hX!XhX'lhX(jhX(khX!VhX~O%U4XO~O%b4`O'u+aO'wTO'zUO!V'gX!W'gX~O!V0aO!W(ya~OX4dO~O]4eO~O^%fO'l%fO~P#,`O!X${O~P#,`O!V4mO#X4oO!W(vX~O!W4pO~Ol!mO|4qO![!wO!]!tO!^!tO!x9qO!|!oO!}!oO#O!oO#P!oO#Q!oO#T4vO#U!xO'v!kO'wTO'zUO(V!lO(b!rO~O!W4uO~P%$wOg4{O!X0yO%a4zO~Og4{O!X0yO%a4zO(O%QO~O'u#lO!V'fX!W'fX~O!V1UO!W(wa~O'wTO'zUO(V5UO~O]5YO~O#o5]O&R5^O~PMaO!g5_O~P%TO^5aO~O^5aO~P%TO_1lO!W5fO&a1kO~P`O!a5hO~O!a5jO!V([i!W([i!a([i!h([i(O([i~O!V#ai!W#ai~P#ByO#X5kO!V#ai!W#ai~O!V!Zi!W!Zi~P#ByO^%fO#X5tO'l%fO~O^%fO!a#tO#X5tO'l%fO~O!V(eq!g(eq^(eq'l(eq~P!7sO!V(_O!g(dq~O|%`O!X%aO#c5{O'u%_O~O!X'UO%a6OO~Og6RO!X'UO%a6OO~O#d%XiP%XiX%Xi^%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi'l%Xi(S%Xi(c%Xi!g%Xi!S%Xi'j%Xio%Xi!X%Xi%a%Xi!a%Xi~P$JVO#d%ZiP%ZiX%Zi^%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi'l%Zi(S%Zi(c%Zi!g%Zi!S%Zi'j%Zio%Zi!X%Zi%a%Zi!a%Zi~P$JxO#d$uiP$uiX$ui^$uik$uiz$ui!V$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui'l$ui(S$ui(c$ui!g$ui!S$ui'j$ui#X$uio$ui!X$ui%a$ui!a$ui~P#,`Od'Pa!V'Pa~P!0dO!V'Qa!g'Qa~P!7sO!V.aO!g(^i~O#y#[i!V#[i!W#[i~P#ByOP$[Oy#xOz#yO|#zO!f#vO!h#wO!l$[O(SVOX#fik#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(c#fi(j#fi(k#fi!V#fi!W#fi~O#g#fi~P%3WO#g9yO~P%3WOP$[Oy#xOz#yO|#zO!f#vO!h#wO!l$[O#g9yO#h9zO#i9zO#j9zO(SVOX#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(c#fi(j#fi(k#fi!V#fi!W#fi~Ok#fi~P%5cOk9{O~P%5cOP$[Ok9{Oy#xOz#yO|#zO!f#vO!h#wO!l$[O#g9yO#h9zO#i9zO#j9zO#k9|O(SVO#q#fi#s#fi#u#fi#v#fi#y#fi(c#fi(j#fi(k#fi!V#fi!W#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P%7nOX:XO!e9}O#l9}O#m9}O#n:WO#o9}O~P%7nOP$[OX:XOk9{Oy#xOz#yO|#zO!e9}O!f#vO!h#wO!l$[O#g9yO#h9zO#i9zO#j9zO#k9|O#l9}O#m9}O#n:WO#o9}O#q:OO(SVO#s#fi#u#fi#v#fi#y#fi(c#fi(k#fi!V#fi!W#fi~O(j#fi~P%:YO(j#{O~P%:YOP$[OX:XOk9{Oy#xOz#yO|#zO!e9}O!f#vO!h#wO!l$[O#g9yO#h9zO#i9zO#j9zO#k9|O#l9}O#m9}O#n:WO#o9}O#q:OO#s:QO(SVO(j#{O#u#fi#v#fi#y#fi(c#fi!V#fi!W#fi~O(k#fi~P%<eO(k#|O~P%<eOP$[OX:XOk9{Oy#xOz#yO|#zO!e9}O!f#vO!h#wO!l$[O#g9yO#h9zO#i9zO#j9zO#k9|O#l9}O#m9}O#n:WO#o9}O#q:OO#s:QO#u:SO(SVO(j#{O(k#|O~O#v#fi#y#fi(c#fi!V#fi!W#fi~P%>pO^#wy!V#wy'l#wy'j#wy!S#wy!g#wyo#wy!X#wy%a#wy!a#wy~P!7sOg;lOy)uO|)vO(j)xO(k)zO~OP#fiX#fik#fiz#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(S#fi(c#fi!V#fi!W#fi~P%AhO!f#vOP(RXX(RXg(RXk(RXy(RXz(RX|(RX!e(RX!h(RX!l(RX#g(RX#h(RX#i(RX#j(RX#k(RX#l(RX#m(RX#n(RX#o(RX#q(RX#s(RX#u(RX#v(RX#y(RX(S(RX(c(RX(j(RX(k(RX!V(RX!W(RX~O#y#zi!V#zi!W#zi~P#ByO#y!ni!W!ni~P$$nO!W6_O~O!V'Za!W'Za~P#ByO!a#tO(c'fO!V'[a!g'[a~O!V/UO!g(pi~O!V/UO!a#tO!g(pi~Od$uq!V$uq#X$uq#y$uq~P!0dO!S'^a!V'^a~P#,`O!a6fO~O!V/^O!S(qi~P#,`O!V/^O!S(qi~O!S6jO~O!a#tO#o6oO~Ok6pO!a#tO(c'fO~O!S6rO~Od$wq!V$wq#X$wq#y$wq~P!0dO^$iy!V$iy'l$iy'j$iy!S$iy!g$iyo$iy!X$iy%a$iy!a$iy~P!7sO!a5jO~O!V4VO!X(ra~O^#[y!V#[y'l#[y'j#[y!S#[y!g#[yo#[y!X#[y%a#[y!a#[y~P!7sOX6wO~O!V0aO!W(yi~O]6}O~O(V(sO!V'cX!W'cX~O!V4mO!W(va~OikO'u7UO~P.bO!W7XO~P%$wOl!mO|7YO'wTO'zUO(V!lO(b!rO~O!X0yO~O!X0yO%a7[O~Og7_O!X0yO%a7[O~OX7dO!V'fa!W'fa~O!V1UO!W(wi~O!g7hO~O!g7iO~O!g7lO~O!g7lO~P%TO^7nO~O!a7oO~O!g7pO~O!V(hi!W(hi~P#ByO^%fO#X7xO'l%fO~O!V(ey!g(ey^(ey'l(ey~P!7sO!V(_O!g(dy~O!X'UO%a7{O~O#d$uqP$uqX$uq^$uqk$uqz$uq!V$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq'l$uq(S$uq(c$uq!g$uq!S$uq'j$uq#X$uqo$uq!X$uq%a$uq!a$uq~P#,`O#d$wqP$wqX$wq^$wqk$wqz$wq!V$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq'l$wq(S$wq(c$wq!g$wq!S$wq'j$wq#X$wqo$wq!X$wq%a$wq!a$wq~P#,`O!V'Qi!g'Qi~P!7sO#y#[q!V#[q!W#[q~P#ByOy/xOz/xO|/yOPvaXvagvakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva#yva(Sva(cva(jva(kva!Vva!Wva~Oy)uO|)vOP$laX$lag$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la#y$la(S$la(c$la(j$la(k$la!V$la!W$la~Oy)uO|)vOP$naX$nag$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na#y$na(S$na(c$na(j$na(k$na!V$na!W$na~OP$|aX$|ak$|az$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a#y$|a(S$|a(c$|a!V$|a!W$|a~P%AhO#y$hq!V$hq!W$hq~P#ByO#y$iq!V$iq!W$iq~P#ByO!W8VO~O#y8WO~P!0dO!a#tO!V'[i!g'[i~O!a#tO(c'fO!V'[i!g'[i~O!V/UO!g(pq~O!S'^i!V'^i~P#,`O!V/^O!S(qq~O!S8^O~P#,`O!S8^O~Od(Qy!V(Qy~P!0dO!V'aa!X'aa~P#,`O^%Tq!X%Tq'l%Tq!V%Tq~P#,`OX8cO~O!V0aO!W(yq~O#X8gO!V'ca!W'ca~O!V4mO!W(vi~P#ByOPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(SYX(cYX(jYX(kYX~O!a%RX#o%RX~P&2hO!X0yO%a8kO~O'wTO'zUO(V8pO~O!V1UO!W(wq~O!g8sO~O!g8tO~O!g8uO~O!g8uO~P%TO#X8xO!V#ay!W#ay~O!V#ay!W#ay~P#ByO!X'UO%a8}O~O#y#wy!V#wy!W#wy~P#ByOP$uiX$uik$uiz$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui#y$ui(S$ui(c$ui!V$ui!W$ui~P%AhOy)uO|)vO(k)zOP%XiX%Xig%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi#y%Xi(S%Xi(c%Xi(j%Xi!V%Xi!W%Xi~Oy)uO|)vOP%ZiX%Zig%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi#y%Zi(S%Zi(c%Zi(j%Zi(k%Zi!V%Zi!W%Zi~O#y$iy!V$iy!W$iy~P#ByO#y#[y!V#[y!W#[y~P#ByO!a#tO!V'[q!g'[q~O!V/UO!g(py~O!S'^q!V'^q~P#,`O!S9UO~P#,`O!V0aO!W(yy~O!V4mO!W(vq~O!X0yO%a9]O~O!g9`O~O!X'UO%a9eO~OP$uqX$uqk$uqz$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq#y$uq(S$uq(c$uq!V$uq!W$uq~P%AhOP$wqX$wqk$wqz$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq#y$wq(S$wq(c$wq!V$wq!W$wq~P%AhOd%]!Z!V%]!Z#X%]!Z#y%]!Z~P!0dO!V'cq!W'cq~P#ByO!V#a!Z!W#a!Z~P#ByO#d%]!ZP%]!ZX%]!Z^%]!Zk%]!Zz%]!Z!V%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z'l%]!Z(S%]!Z(c%]!Z!g%]!Z!S%]!Z'j%]!Z#X%]!Zo%]!Z!X%]!Z%a%]!Z!a%]!Z~P#,`OP%]!ZX%]!Zk%]!Zz%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z#y%]!Z(S%]!Z(c%]!Z!V%]!Z!W%]!Z~P%AhOo(WX~P1jO'v!kO~P!){O!ScX!VcX#XcX~P&2hOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#XYX#XcX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(SYX(cYX(jYX(kYX~O!acX!gYX!gcX(ccX~P&HOOP9pOQ9pOa;aOb!hOikOk9pOlkOmkOskOu9pOw9pO|WO!QkO!RkO!XXO!c9sO!hZO!k9pO!l9pO!m9pO!o9tO!q9wO!t!gO$Q!jO$UfO'u)TO'wTO'zUO(SVO(b[O(o;_O~O!V:UO!W$ka~Oi%ROk$sOl$rOm$rOs%SOu%TOw:[O|$zO!X${O!c;fO!h$wO#c:bO$Q%XO$m:^O$o:`O$r%YO'u(kO'wTO'zUO(O%QO(S$tO~O#p)[O~P&LtO!WYX!WcX~P&HOO#d9xO~O!a#tO#d9xO~O#X:YO~O#o9}O~O#X:dO!V(hX!W(hX~O#X:YO!V(fX!W(fX~O#d:eO~Od:gO~P!0dO#d:lO~O#d:mO~O!a#tO#d:nO~O!a#tO#d:eO~O#y:oO~P#ByO#d:pO~O#d:qO~O#d:rO~O#d:sO~O#d:tO~O#d:uO~O#y:vO~P!0dO#y:wO~P!0dO$U~!f!|!}#P#Q#T#b#c#n(o$m$o$r%U%`%a%b%i%k%n%o%q%s~'pR$U(o#h!R'n'v#il#g#jky'o(V'o'u$W$Y$W~",goto:"$&O(}PPPP)OP)RP)cP*r.uPPPP5WPP5mP;h>mP?QP?QPPP?QP@pP?QP?QP?QP@tPP@yPAdPFZPPPF_PPPPF_I_PPPIeJ`PF_PLmPPPPN{F_PPPF_PF_P!#ZF_P!&n!'p!'yP!(l!(p!(lPPPPP!+z!'pPP!,h!-bP!0UF_F_!0Z!3d!7x!7x!;mPPP!;tF_PPPPPPPPPPP!?QP!@cPPF_!ApPF_PF_F_F_F_PF_!CSPP!FZP!I^P!Ib!Il!Ip!IpP!FWP!It!ItP!LwP!L{F_F_!MR#!T?QP?QP?Q?QP##_?Q?Q#%X?Q#'f?Q#)Y?Q?Q#)v#+r#+r#+v#,O#+r#,WP#+rP?Q#,p?Q#-x?Q?Q5WPPP#/TPPP#/m#/mP#/mP#0S#/mPP#0YP#0PP#0P#0l#0P#1W#1^5T)R#1a)RP#1h#1h#1hP)RP)RP)RP)RPP)RP#1n#1qP#1q)RP#1uP#1xP)RP)RP)RP)RP)RP)R)RPP#2O#2U#2`#2f#2l#2r#2x#3W#3^#3d#3n#3t#4O#4_#4e#5U#5h#5n#5t#6S#6i#7y#8X#8_#8e#8k#8q#8{#9R#9X#9c#9u#9{PPPPPPPPPP#:RPPPPPPP#:u#=|P#?]#?d#?lPPPP#Cv#Fl#MS#MV#MY#NR#NU#NX#N`#NhPP#Nn#Nr$ j$!i$!m$#RPP$#V$#]$#aP$#d$#h$#k$$a$$w$%_$%c$%f$%i$%o$%r$%v$%zR!zRmqOXs!Y#b%e&h&j&k&m,a,f1f1iY!tQ'U-R0y4tQ%kuQ%sxQ%z{Q&`!US&|!d,yQ'[!hS'b!q!wS*^${*cQ+_%tQ+l%|Q,Q&YQ-P'TQ-Z']Q-c'cQ/o*eQ1T,RR:c9t$|dOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&h&j&k&m&q&y'W'h'x'z(Q(X(m(q(u)t*w*{,^,a,f-V-_-m-s.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2v4q4{5]5^5a5t7Y7_7n7xS#o]9q!r)V$Z$l&})i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bQ*n%UQ+d%vQ,S&]Q,Z&eQ.W:ZQ0V+VQ0Z+XQ0f+eQ1],XQ2j.TQ4_0aQ5S1UQ6Q2nQ6W:[Q6y4`R8O6R&zkOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bt!mQ!q!t!w!x&|'T'U'b'c'd,y-P-R-c0y4t4v$Y$ri#t#v$b$c$w$z%V%W%[)p)y){)|*T*Z*i*j+U+X+p+s.S.^/]/^/`/{0p0s0{2m3e3o3w3}4V4X4z6O6f6o7[7{8W8k8}9]9e:W:X:]:^:_:`:a:b:h:i:j:k:l:m:p:q:r:s:v:w;_;g;h;k;lQ%}{Q&z!dS'Q%a,|Q+d%vS.|)v/OQ/z*rQ0f+eQ0k+kQ1[,WQ1],XQ4_0aQ4h0mQ5V1WQ5W1ZQ6y4`Q6|4eQ7g5YQ8f6}R8q7dpnOXs!U!Y#b%e&_&h&j&k&m,a,f1f1iR,U&a&t^OPXYstuvy!Y!_!f!i!n#Q#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l%e%k%x&a&d&e&h&j&k&m&q&y'W'h'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;a;b[#ZWZ#U#X&}'x!S%bm#f#g#j%]%`(R(](^(_*y*z*|,],s-q-w-x-y-{1n2f2g5j5{Q%nwQ%rxS%w{%|Q&T!SQ'X!gQ'Z!hQ(f#qS*Q$w*US+^%s%tQ+b%vQ+{&WQ,P&YS-Y'[']Q.V(gQ/Y*RQ0_+_Q0e+eQ0g+fQ0j+jQ1O+|S1S,Q,RQ2W-ZQ3f/UQ4^0aQ4b0dQ4g0lQ5R1TQ6c3gQ6x4`Q6{4dQ8b6wR9W8cv$yi#v%V%W%[)y){*T*i*j.^/]/{3e3}8W;_;g;h!S%px!h!s%r%s%t&{'Z'[']'a'k*]+^+_,v-Y-Z-b/g0_2P2W2_3yQ+W%nQ+q&QQ+t&RQ,O&YQ.U(fQ0}+{U1R,P,Q,RQ2o.VQ4|1OS5Q1S1TQ7c5R!z;c#t$b$c$w$z)p)|*Z+U+X+p+s.S/^/`0p0s0{2m3o3w4V4X4z6O6f6o7[7{8k8}9]9e:]:_:a:h:j:l:p:r:v;k;lg;d:W:X:^:`:b:i:k:m:q:s:wW%Oi%Q*k;_S&Q!P&_Q&R!QQ&S!RR+o&O$Z$}i#t#v$b$c$w$z%V%W%[)p)y){)|*T*Z*i*j+U+X+p+s.S.^/]/^/`/{0p0s0{2m3e3o3w3}4V4X4z6O6f6o7[7{8W8k8}9]9e:W:X:]:^:_:`:a:b:h:i:j:k:l:m:p:q:r:s:v:w;_;g;h;k;lT)q$t)rV*o%U:Z:[U'Q!d%a,|S(t#x#yQ+i%yS.O(b(cQ0t+uQ4O/xR7R4m&zkOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;b$i$_c#W#c%i%j%l'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g+S+h,w-f-k-p-r.].c.g.i.j.k.z/|1u1x2Y2a2u2z2{2|2}3O3P3Q3R3S3T3U3V3W3Z3[3a4S4[5m5s5x6U6V6[6]7T7r7v8P8T8U8z9Y9a9r;UT#RV#S&{kOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bQ'O!dR1{,yv!mQ!d!q!t!w!x&|'T'U'b'c'd,y-P-R-c0y4t4vS*]${*cS/g*^*eQ/p*fQ0v+wQ3y/oR3|/rlqOXs!Y#b%e&h&j&k&m,a,f1f1iQ&o!]Q'l!vS(h#s9xQ+[%qQ+y&TQ+z&VQ-W'YQ-e'eS.[(m:eS/}*w:nQ0]+]Q0x+xQ1m,hQ1o,iQ1w,tQ2U-XQ2X-]S4T0O:tQ4Y0^S4]0`:uQ5l1yQ5p2VQ5u2^Q6v4ZQ7s5nQ7t5qQ7w5vR8w7p$d$^c#W#c%j%l'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g+S+h,w-f-k-p-r.].c.g.j.k.z/|1u1x2Y2a2u2z2{2|2}3O3P3Q3R3S3T3U3V3W3Z3[3a4S4[5m5s5x6U6V6[6]7T7r7v8P8T8U8z9Y9a9r;US(e#n'_U*h$|(l3YS+R%i.iQ2k0VQ5}2jQ7}6QR9O8O$d$]c#W#c%j%l'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g+S+h,w-f-k-p-r.].c.g.j.k.z/|1u1x2Y2a2u2z2{2|2}3O3P3Q3R3S3T3U3V3W3Z3[3a4S4[5m5s5x6U6V6[6]7T7r7v8P8T8U8z9Y9a9r;US(d#n'_S(v#y$^S+Q%i.iS.P(c(eQ.l)WQ0S+RR2h.Q&zkOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bS#o]9qQ&j!WQ&k!XQ&m!ZQ&n![R1e,dQ'V!gQ+T%nQ-U'XS.R(f+WQ2S-TW2l.U.V0U0WQ5o2TU5|2i2k2oS7z5}6PS8|7|7}S9c8{9OQ9k9dR9n9lU!uQ'U-RT4r0y4t!O_OXZ`s!U!Y#b#f%]%e&_&a&h&j&k&m(_,a,f-x1f1i]!oQ!q'U-R0y4tT#o]9q%WzOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&e&h&j&k&m&q&y'W'h'x'z(Q(X(m(q(u)t*w*{+V,^,a,f-V-_-m-s.T.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2n2v4q4{5]5^5a5t6R7Y7_7n7xS(t#x#yS.O(b(c!s:{$Z$l&})i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bY!sQ'U-R0y4tQ'a!qS'k!t!wS'm!x4vS-b'b'cQ-d'dR2_-cQ'j!sS(Z#e1`S-a'a'mQ/X*QQ/e*]Q2`-dQ3k/YS3t/f/pQ6b3fS6m3z3|Q8Y6cR8a6pQ#ubQ'i!sS(Y#e1`S([#k*vQ*x%^Q+Y%oQ+`%uU-`'a'j'mQ-t(ZQ/W*QQ/d*]Q/j*`Q0[+ZQ1P+}S2]-a-dQ2e-|S3j/X/YS3s/e/pQ3v/iQ3x/kQ5O1QQ5w2`Q6a3fQ6e3kS6i3t3|Q6n3{Q7a5PS8X6b6cQ8]6jQ8_6mQ8n7bQ9S8YQ9T8^Q9V8aQ9_8oQ9g9UQ;O:yQ;Z;SR;[;TV!uQ'U-R%WaOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&e&h&j&k&m&q&y'W'h'x'z(Q(X(m(q(u)t*w*{+V,^,a,f-V-_-m-s.T.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2n2v4q4{5]5^5a5t6R7Y7_7n7xS#uy!i!r:x$Z$l&})i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bR;O;a%WbOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&e&h&j&k&m&q&y'W'h'x'z(Q(X(m(q(u)t*w*{+V,^,a,f-V-_-m-s.T.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2n2v4q4{5]5^5a5t6R7Y7_7n7xQ%^j!S%ox!h!s%r%s%t&{'Z'[']'a'k*]+^+_,v-Y-Z-b/g0_2P2W2_3yS%uy!iQ+Z%pQ+}&YW1Q,O,P,Q,RU5P1R1S1TS7b5Q5RQ8o7c!r:y$Z$l&})i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bQ;S;`R;T;a$zeOPXYstuv!Y!_!f!n#Q#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&h&j&k&m&q&y'W'h'z(Q(X(m(q(u)t*w*{+V,^,a,f-V-_-m-s.T.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2n2v4q4{5]5^5a5t6R7Y7_7n7xY#`WZ#U#X'x!S%bm#f#g#j%]%`(R(](^(_*y*z*|,],s-q-w-x-y-{1n2f2g5j5{Q,[&e!p:z$Z$l)i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bR:}&}S'R!d%aR1},|$|dOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&h&j&k&m&q&y'W'h'x'z(Q(X(m(q(u)t*w*{,^,a,f-V-_-m-s.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2v4q4{5]5^5a5t7Y7_7n7x!r)V$Z$l&})i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bQ,Z&eQ0V+VQ2j.TQ6Q2nR8O6R!f$Tc#W%i'w'}(i(p)P)Q)R)S)X)]+h-f-k-p-r.].c.z/|2Y2a2u3W4S4[5s5x6U7v8z9r!T:P)U)g,w.i1u1x2z3S3T3U3V3Z3a5m6V6[6]7T7r8P8T8U9Y9a;U!b$Vc#W%i'w'}(i(p)R)S)X)]+h-f-k-p-r.].c.z/|2Y2a2u3W4S4[5s5x6U7v8z9r!P:R)U)g,w.i1u1x2z3U3V3Z3a5m6V6[6]7T7r8P8T8U9Y9a;U!^$Zc#W%i'w'}(i(p)X)]+h-f-k-p-r.].c.z/|2Y2a2u3W4S4[5s5x6U7v8z9rQ3e/Sz;b)U)g,w.i1u1x2z3Z3a5m6V6[6]7T7r8P8T8U9Y9a;UQ;g;iR;h;j&zkOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bS$mh$nR3^.o'RgOPWXYZhstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l$n%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.o.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bT$if$oQ$gfS)`$j)dR)l$oT$hf$oT)b$j)d'RhOPWXYZhstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$Z$`$d$l$n%e%k%x&a&d&e&h&j&k&m&q&y&}'W'h'x'z(Q(X(m(q(u)i)t*w*{+V,^,a,f,r,u-V-_-m-s.T.a.h.o.p/y0O0`0|1^1_1a1c1f1i1k1z2[2b2n2v3]4o4q4{5]5^5a5k5t6R7Y7_7n7x8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;bT$mh$nQ$phR)k$n%WjOPWXYZstuv!Y!_!f!n#Q#U#X#b#m#s#w#z#}$O$P$Q$R$S$T$U$V$W$X$`$d%e%k%x&a&d&e&h&j&k&m&q&y'W'h'x'z(Q(X(m(q(u)t*w*{+V,^,a,f-V-_-m-s.T.a.h/y0O0`0|1^1_1a1c1f1i1k2[2b2n2v4q4{5]5^5a5t6R7Y7_7n7x!s;`$Z$l&})i,r,u.p1z3]4o5k8g8x9p9s9t9w9x9y9z9{9|9}:O:P:Q:R:S:T:U:Y:c:d:e:g:n:o:t:u;b#alOPXZs!Y!_!n#Q#b#m#z$l%e&a&d&e&h&j&k&m&q&y'W(u)i*{+V,^,a,f-V.T.p/y0|1^1_1a1c1f1i1k2n3]4q4{5]5^5a6R7Y7_7nv$|i#v%V%W%[)y){*T*i*j.^/]/{3e3}8W;_;g;h!z(l#t$b$c$w$z)p)|*Z+U+X+p+s.S/^/`0p0s0{2m3o3w4V4X4z6O6f6o7[7{8k8}9]9e:]:_:a:h:j:l:p:r:v;k;lQ*s%YQ.{)ug3Y:W:X:^:`:b:i:k:m:q:s:wv$xi#v%V%W%[)y){*T*i*j.^/]/{3e3}8W;_;g;hQ*V$yS*`${*cQ*t%ZQ/k*a!z;Q#t$b$c$w$z)p)|*Z+U+X+p+s.S/^/`0p0s0{2m3o3w4V4X4z6O6f6o7[7{8k8}9]9e:]:_:a:h:j:l:p:r:v;k;lf;R:W:X:^:`:b:i:k:m:q:s:wQ;V;cQ;W;dQ;X;eR;Y;fv$|i#v%V%W%[)y){*T*i*j.^/]/{3e3}8W;_;g;h!z(l#t$b$c$w$z)p)|*Z+U+X+p+s.S/^/`0p0s0{2m3o3w4V4X4z6O6f6o7[7{8k8}9]9e:]:_:a:h:j:l:p:r:v;k;lg3Y:W:X:^:`:b:i:k:m:q:s:wloOXs!Y#b%e&h&j&k&m,a,f1f1iQ*Y$zQ,o&tQ,p&vR3n/^$Y$}i#t#v$b$c$w$z%V%W%[)p)y){)|*T*Z*i*j+U+X+p+s.S.^/]/^/`/{0p0s0{2m3e3o3w3}4V4X4z6O6f6o7[7{8W8k8}9]9e:W:X:]:^:_:`:a:b:h:i:j:k:l:m:p:q:r:s:v:w;_;g;h;k;lQ+r&RQ0r+tQ4k0qR7Q4lT*b${*cS*b${*cT4s0y4tS/i*_4qT3{/q7YQ+Y%oQ/j*`Q0[+ZQ1P+}Q5O1QQ7a5PQ8n7bR9_8on)y$u(n*u/[/s/t2s3l4R6`6q9R;P;];^!W:h(j)Z*P*X.Z.w/S/a0T0o0q2r3m3q4j4l6S6T6g6k6s6u8[8`9f;i;j]:i3X6Z8Q9P9Q9op){$u(n*u/Q/[/s/t2s3l4R6`6q9R;P;];^!Y:j(j)Z*P*X.Z.w/S/a0T0o0q2p2r3m3q4j4l6S6T6g6k6s6u8[8`9f;i;j_:k3X6Z8Q8R9P9Q9opnOXs!U!Y#b%e&_&h&j&k&m,a,f1f1iQ&[!TR,^&epnOXs!U!Y#b%e&_&h&j&k&m,a,f1f1iR&[!TQ+v&SR0n+oqnOXs!U!Y#b%e&_&h&j&k&m,a,f1f1iQ0z+{S4y0}1OU7Z4w4x4|S8j7]7^S9Z8i8lQ9h9[R9m9iQ&c!UR,V&_R5V1WS%w{%|R0g+fQ&h!VR,a&iR,g&nT1g,f1iR,k&oQ,j&oR1p,kQ'o!yR-g'oQsOQ#bXT%hs#bQ!|TR'q!|Q#PUR's#PQ)r$tR.x)rQ#SVR'u#SQ#VWU'{#V'|-nQ'|#WR-n'}Q,z'OR1|,zQ._(nR2t._Q.b(pS2w.b2xR2x.cQ-R'UR2Q-RY!qQ'U-R0y4tR'`!qS#]W%`U(S#](T-oQ(T#^R-o(OQ,}'RR2O,}r`OXs!U!Y#b%e&_&a&h&j&k&m,a,f1f1iS#fZ%]U#p`#f-xR-x(_Q(`#hQ-u([W-}(`-u2c5yQ2c-vR5y2dQ)d$jR.q)dQ$nhR)j$nQ$acU)Y$a-j:VQ-j9rR:V)gQ/V*QW3h/V3i6d8ZU3i/W/X/YS6d3j3kR8Z6e#m)w$u(j(n)Z*P*X*p*q*u.X.Y.Z.w/Q/R/S/[/a/s/t0T0o0q2p2q2r2s3X3l3m3q4R4j4l6S6T6X6Y6Z6`6g6k6q6s6u8Q8R8S8[8`9P9Q9R9f9o;P;];^;i;jQ/_*XU3p/_3r6hQ3r/aR6h3qQ*c${R/m*cQ*l%PR/v*lQ4W0TR6t4WQ*}%cR0R*}Q4n0tS7S4n8hR8h7TQ+x&TR0w+xQ4t0yR7W4tQ1V,SS5T1V7eR7e5VQ0b+bW4a0b4c6z8dQ4c0eQ6z4bR8d6{Q+g%wR0h+gQ1i,fR5e1iWrOXs#bQ&l!YQ+P%eQ,`&hQ,b&jQ,c&kQ,e&mQ1d,aS1g,f1iR5d1fQ%gpQ&p!^Q&s!`Q&u!aQ&w!bQ'g!sQ+O%dQ+[%qQ+n%}Q,U&cQ,m&rW-^'a'i'j'mQ-e'eQ/l*bQ0]+]S1Y,V,YQ1q,lQ1r,oQ1s,pQ2X-]W2Z-`-a-d-fQ4Y0^Q4f0kQ4i0oQ4}1PQ5X1[Q5c1eU5r2Y2]2`Q5u2^Q6v4ZQ7O4hQ7P4jQ7V4sQ7`5OQ7f5WS7u5s5wQ7w5vQ8e6|Q8m7aQ8r7gQ8y7vQ9X8fQ9^8nQ9b8zR9j9_Q%qxQ'Y!hQ'e!sU+]%r%s%tQ,t&{U-X'Z'[']S-]'a'kQ/c*]S0^+^+_Q1y,vS2V-Y-ZQ2^-bQ3u/gQ4Z0_Q5n2PQ5q2WQ5v2_R6l3yS$vi;_R*m%QU%Pi%Q;_R/u*kQ$uiS(j#t+XQ(n#vS)Z$b$cQ*P$wQ*X$zQ*p%VQ*q%WQ*u%[Q.X:]Q.Y:_Q.Z:aQ.w)pQ/Q)yQ/R){Q/S)|Q/[*TQ/a*ZQ/s*iQ/t*jh0T+U.S0{2m4z6O7[7{8k8}9]9eQ0o+pQ0q+sQ2p:hQ2q:jQ2r:lQ2s.^S3X:W:XQ3l/]Q3m/^Q3q/`Q4R/{Q4j0pQ4l0sQ6S:pQ6T:rQ6X:^Q6Y:`Q6Z:bQ6`3eQ6g3oQ6k3wQ6q3}Q6s4VQ6u4XQ8Q:mQ8R:iQ8S:kQ8[6fQ8`6oQ9P:qQ9Q:sQ9R8WQ9f:vQ9o:wQ;P;_Q;];gQ;^;hQ;i;kR;j;llpOXs!Y#b%e&h&j&k&m,a,f1f1iQ!ePS#dZ#mQ&r!_U'^!n4q7YQ't#QQ(w#zQ)h$lS,Y&a&dQ,_&eQ,l&qQ,q&yQ-T'WQ.e(uQ.u)iQ0P*{Q0W+VQ1b,^Q2T-VQ2k.TQ3`.pQ4P/yQ4x0|Q5Z1^Q5[1_Q5`1aQ5b1cQ5g1kQ5}2nQ6^3]Q7^4{Q7j5]Q7k5^Q7m5aQ7}6RQ8l7_R8v7n#UcOPXZs!Y!_!n#b#m#z%e&a&d&e&h&j&k&m&q&y'W(u*{+V,^,a,f-V.T/y0|1^1_1a1c1f1i1k2n4q4{5]5^5a6R7Y7_7nQ#WWQ#cYQ%itQ%juS%lv!fS'w#U'zQ'}#XQ(i#sQ(p#wQ(x#}Q(y$OQ(z$PQ({$QQ(|$RQ(}$SQ)O$TQ)P$UQ)Q$VQ)R$WQ)S$XQ)U$ZQ)X$`Q)]$dW)g$l)i.p3]Q+S%kQ+h%xS,w&}1zQ-f'hS-k'x-mQ-p(QQ-r(XQ.](mQ.c(qQ.g9pQ.i9sQ.j9tQ.k9wQ.z)tQ/|*wQ1u,rQ1x,uQ2Y-_Q2a-sQ2u.aQ2z9xQ2{9yQ2|9zQ2}9{Q3O9|Q3P9}Q3Q:OQ3R:PQ3S:QQ3T:RQ3U:SQ3V:TQ3W.hQ3Z:YQ3[:cQ3a:UQ4S0OQ4[0`Q5m:dQ5s2[Q5x2bQ6U2vQ6V:eQ6[:gQ6]:nQ7T4oQ7r5kQ7v5tQ8P:oQ8T:tQ8U:uQ8z7xQ9Y8gQ9a8xQ9r#QR;U;bR#YWR'P!dY!sQ'U-R0y4tS&{!d,yQ'a!qS'k!t!wS'm!x4vS,v&|'TS-b'b'cQ-d'dQ2P-PR2_-cR(o#vR(r#wQ!eQT-Q'U-R]!pQ!q'U-R0y4tQ#n]R'_9qT#iZ%]S#hZ%]S%cm,]U([#f#g#jS-v(](^Q-z(_Q0Q*|Q2d-wU2e-x-y-{S5z2f2gR7y5{`#[W#U#X%`'x(R*y-qr#eZm#f#g#j%](](^(_*|-w-x-y-{2f2g5{Q1`,]Q1v,sQ5i1nQ7q5jT:|&}*zT#_W%`S#^W%`S'y#U(RS(O#X*yS,x&}*zT-l'x-qT'S!d%aQ$jfR)n$oT)c$j)dR3_.oT*S$w*UR*[$zQ0U+UQ2i.SQ4w0{Q6P2mQ7]4zQ7|6OQ8i7[Q8{7{Q9[8kQ9d8}Q9i9]R9l9elqOXs!Y#b%e&h&j&k&m,a,f1f1iQ&b!UR,U&_rmOXs!T!U!Y#b%e&_&h&j&k&m,a,f1f1iR,]&eT%dm,]R0u+uR,T&]Q%{{R+m%|R+c%vT&f!V&iT&g!V&iT1h,f1i",nodeNames:"\u26A0 ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:366,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,199,203,207,208,210,213,216,226,228,234,236,238,240,243,249,255,257,259,261,263,265,266,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,103,104,113,114,131,134,136,137,138,139,141,142,162,163,165,"Expression",-23,24,26,30,34,36,38,166,168,170,171,173,174,175,177,178,179,181,182,183,193,195,197,198,"Type",-3,84,96,102,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",143,"JSXStartTag",155,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",144,"JSXSelfCloseEndTag JSXEndTag",160,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,269],repeatNodeCount:33,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$d&j'{!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'{!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$d&j'xpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'xpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'xp'{!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$d&j'xp'{!b'n(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'y#S$d&j'o(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$d&j'xp'{!b'o(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$d&j!l$Ip'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#q$Id$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#q$Id$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'w$(n$d&j'{!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$d&j'{!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$d&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$_#t$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$_#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$_#t$d&j'{!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'{!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$_#t'{!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$d&j(b!L^'xp'{!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$d&j'xp'{!b(V!LY'u&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$d&j'xp'{!b$W#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$d&j'xp'{!b#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$d&j#{$Id'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(k%<v$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$d&j#u$Id'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'z$)`$d&j'xpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$d&j'xpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$d&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$_#t$d&j'xpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'xpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$_#t'xpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$d&j'xp'{!b'v#)d#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$d&j'xp'{!b#g$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$d&j'xp'{!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$d&j'xp'{!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$d&j'xp'{!b#h$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$d&j'xp'{!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$d&j'{!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$d&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$d&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$d&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$d&j'{!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'{!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'{!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'{!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$d&j'{!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$d&j'xp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$d&j'xp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'xp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'xp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'xpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$d&j'xpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$d&j'xp'{!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'xp'{!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'xp'{!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'xp'{!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$d&j'xp'{!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$d&j'xp'{!b'p(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$d&j'xp'{!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$d&j'{!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$d&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'{!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$d&j'xpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'xpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'xp'{!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$d&j#{$Id'xp'{!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$T#t$d&j'xp'{!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$d&j'xp'{!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$d&j#y%<f'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^(O!*v!e'.r'xp'{!b$U)d(oSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$f&j'xp'{!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#k$Id'xp'{!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#{$Id'xp'{!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#l$Id'xp'{!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#X%?x$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#d$Ih$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#l$Id$a#|$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#l$Id$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#k$Id$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#k$Id$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(c$Ip$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$d&j#v$Id'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$d&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$d&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$d&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$d&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$d&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#s$Id$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$d&j'xp'{!b(S&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$d&j'xp'{!b(V!LY'u&;d$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$d&j'xp'{!b$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'xp'{!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(j%<v$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$d&j'xp'{!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$d&j'xp'{!b'n(;d(V!LY'u&;d$W#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$d&j'xp'{!b'o(;d(V!LY'u&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(U~~",141,327),new LocalTokenGroup("j~RQYZXz{^~^O'r~~aP!P!Qd~iO's~~",25,309)],topRules:{Script:[0,5],SingleExpression:[1,267],SingleClassItem:[2,268]},dialects:{jsx:12810,ts:12812},dynamicPrecedences:{76:1,78:1,163:1,191:1},specialized:[{term:313,get:X=>spec_identifier[X]||-1},{term:329,get:X=>spec_word[X]||-1},{term:67,get:X=>spec_LessThan[X]||-1}],tokenPrec:12836}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(X){return(O,Q)=>{let j=O.node.getChild("VariableDefinition");return j&&Q(j,X),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(X,O){X.matchContext(functionContext)||O(X,"variable")},TypeDefinition(X,O){O(X,"type")},__proto__:null};function getScope(X,O){let Q=cache.get(O);if(Q)return Q;let j=[],U=!0;function F(q,W){let Y=X.sliceString(q.from,q.to);j.push({label:Y,type:W})}return O.cursor(IterMode.IncludeAnonymous).iterate(q=>{if(U)U=!1;else if(q.name){let W=gatherCompletions[q.name];if(W&&W(q,F)||ScopeNodes.has(q.name))return!1}else if(q.to-q.from>8192){for(let W of getScope(X,q.node))j.push(W);return!1}}),cache.set(O,j),j}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(X){let O=syntaxTree(X.state).resolveInner(X.pos,-1);if(dontComplete.indexOf(O.name)>-1)return null;let Q=O.name=="VariableName"||O.to-O.from<20&&Identifier.test(X.state.sliceDoc(O.from,O.to));if(!Q&&!X.explicit)return null;let j=[];for(let U=O;U;U=U.parent)ScopeNodes.has(U.name)&&(j=j.concat(getScope(X.state.doc,U)));return{options:j,from:Q?O.from:X.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:X=>{let O=X.textAfter,Q=/^\s*\}/.test(O),j=/^\s*(case|default)\b/.test(O);return X.baseIndent+(Q?0:j?1:2)*X.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:X=>X.baseIndent+X.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(X){let O=/^\s*<\//.test(X.textAfter);return X.lineIndent(X.node.from)+(O?0:X.unit)},JSXEscape(X){let O=/\s*\}/.test(X.textAfter);return X.lineIndent(X.node.from)+(O?0:X.unit)},"JSXOpenTag JSXSelfClosingTag"(X){return X.column(X.node.from)+X.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(X){return{from:X.from+2,to:X.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:X=>/^JSX/.test(X.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(X=>X.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(X=>X.isTop?[jsxSublanguage]:void 0)]},"typescript"),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(X=>({label:X,type:"keyword"}));function javascript(X={}){let O=X.jsx?X.typescript?tsxLanguage:jsxLanguage:X.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport(O,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),X.jsx?autoCloseTags:[]])}function findOpenTag(X){for(;;){if(X.name=="JSXOpenTag"||X.name=="JSXSelfClosingTag"||X.name=="JSXFragmentTag")return X;if(X.name=="JSXEscape"||!X.parent)return null;X=X.parent}}function elementName(X,O,Q=X.length){for(let j=O==null?void 0:O.firstChild;j;j=j.nextSibling)if(j.name=="JSXIdentifier"||j.name=="JSXBuiltin"||j.name=="JSXNamespacedName"||j.name=="JSXMemberExpression")return X.sliceString(j.from,Math.min(j.to,Q));return""}function isEndTag(X){return X&&(X.name=="JSXEndTag"||X.name=="JSXSelfCloseEndTag")}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((X,O,Q,j)=>{if((android?X.composing:X.compositionStarted)||X.state.readOnly||O!=Q||j!=">"&&j!="/"||!javascriptLanguage.isActiveAt(X.state,O,-1))return!1;let{state:U}=X,F=U.changeByRange(q=>{var W;let{head:Y}=q,G=syntaxTree(U).resolveInner(Y,-1),K;if(G.name=="JSXStartTag"&&(G=G.parent),!(G.name=="JSXAttributeValue"&&G.to>Y)){if(j==">"&&G.name=="JSXFragmentTag")return{range:EditorSelection.cursor(Y+1),changes:{from:Y,insert:"></>"}};if(j=="/"&&G.name=="JSXFragmentTag"){let J=G.parent,ee=J==null?void 0:J.parent;if(J.from==Y-1&&((W=ee.lastChild)===null||W===void 0?void 0:W.name)!="JSXEndTag"&&(K=elementName(U.doc,ee==null?void 0:ee.firstChild,Y))){let te=`/${K}>`;return{range:EditorSelection.cursor(Y+te.length),changes:{from:Y,insert:te}}}}else if(j==">"){let J=findOpenTag(G);if(J&&!isEndTag(J.lastChild)&&U.sliceDoc(Y,Y+2)!="</"&&(K=elementName(U.doc,J,Y)))return{range:EditorSelection.cursor(Y+1),changes:{from:Y,insert:`></${K}>`}}}}return{range:q}});return F.changes.empty?!1:(X.dispatch(F,{userEvent:"input.type",scrollIntoView:!0}),!0)});var CodeEditorEvents;(function(X){X.sync="code-editor-sync",X.update="code-editor-update"})(CodeEditorEvents||(CodeEditorEvents={}));function increment(X=1,O=0,Q){let j=O;return function*(){for(;Q===void 0||j<Q;)yield j,j+=X}()}const emitter=new EventTarget,dispatchEvent=debounce(X=>{emitter.dispatchEvent(X)},1500),myHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:"#708"},{tag:tags.name,color:"#292c3a"},{tag:tags.string,color:"#aa1111"},{tag:tags.comment,color:"#292c3a"},{tag:tags.bool,color:"#221199"}]);function getEditorState(X,O,Q=[],j){return setupEditor(),EditorState.create({doc:X,extensions:[lineNumbers(),foldGutter(),drawSelection(),indentOnInput(),highlightActiveLine(),highlightSelectionMatches(),highlightSpecialChars(),syntaxHighlighting(myHighlightStyle),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),indentOnInput(),history(),fromEditorType(O),EditorView.editable.of(j),keymap.of([...defaultKeymap,...foldKeymap,...historyKeymap,...searchKeymap,...lintKeymap,...closeBracketsKeymap,...completionKeymap]),...Q,updateStateField]})}function fromEditorType(X){return X==="javascript"?javascript():(X==="json"||console.log(`Unknown editor type: ${X}. Using JSON syntax highlighter.`),json())}const setupEditor=once(()=>{EditorView.baseTheme({})}),updateStateField=StateField.define({create(){return 0},update(X,O){if(O.docChanged){const Q=new CustomEvent(CodeEditorEvents.update,{detail:{transaction:O},bubbles:!0,composed:!0});dispatchEvent(Q)}return O.docChanged?X+1:X}}),resizeObserver=new ResizeObserver(ResizeObserverHandler);function ResizeObserverHandler(X){for(let O of X)O.target instanceof s$1&&O.target.requestUpdate()}var __decorate$2=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F},CodeEditor_1,Mt;let CodeEditor=CodeEditor_1=(Mt=class extends s$1{static get styles(){return[i$3`

        :host {
          position: relative;
        }

        sl-button::part(base) {
          --sl-button-font-size-medium: 14px;
        }
        
        #copy-block {
          display: flex;
          justify-content: flex-end;
          margin-bottom: 10px;
          position: sticky;
          top: 0;
          z-index: 1;
        }

        .editor-container {
          font-size: 14px;
        }
      `]}constructor(){super(),this.copyText="Copy Manifest",this.editorStateType="json",this.readOnly=!1,this.editorEmitter=emitter,this.copied=!1,this.updateEditor=debounce(()=>{var O;this.editorState=getEditorState(this.startText||"",this.editorStateType,[],!this.readOnly),this.editorView?this.editorView.setState(this.editorState):this.editorView=new EditorView({state:this.editorState,root:this.shadowRoot||void 0,parent:((O=this.shadowRoot)==null?void 0:O.getElementById(this.editorId))||void 0})},2e3),this.editorId=`editor-${CodeEditor_1.editorIdGenerator.next().value}`,this.editorEmitter.addEventListener(CodeEditorEvents.sync,O=>{const Q=O;this.startText=Q.detail.text,this.updateEditor()}),this.editorEmitter.addEventListener(CodeEditorEvents.update,debounce(O=>{this.dispatchEvent(O)})),resizeObserver.observe(this)}connectedCallback(){super.connectedCallback(),this.updateEditor()}updated(O){var Q;O.has("startText")&&(this.editorState=getEditorState(this.startText||"",this.editorStateType,[],!this.readOnly),this.editorView?this.editorView.setState(this.editorState):this.editorView=new EditorView({state:this.editorState,root:this.shadowRoot||void 0,parent:((Q=this.shadowRoot)==null?void 0:Q.getElementById(this.editorId))||void 0}))}async copyCode(){var j;let O=new CustomEvent("editorCopied",{bubbles:!0,composed:!0});this.dispatchEvent(O);const Q=(j=this.editorState)==null?void 0:j.doc;if(Q)try{await navigator.clipboard.writeText(Q.toString()),this.copyText="Copied",this.copied=!0,setTimeout(()=>{this.copyText="Copy Manifest",this.copied=!1},3e3)}catch(U){console.warn("Copying failed with the following err",U)}}render(){return x`
      <div id="copy-block">
        <slot>
          <sl-button
            ?disabled="${this.copied}"
            @click="${()=>this.copyCode()}"
            class="copy-button"
          >
            ${this.copyText}</sl-button
          >
        </slot>
      </div>

      <div tabindex="0" id=${this.editorId} class="editor-container ${this.className}" ></div>
    `}},(()=>{Mt.editorIdGenerator=increment()})(),Mt);__decorate$2([n$5({type:String})],CodeEditor.prototype,"startText",void 0);__decorate$2([n$5({type:String})],CodeEditor.prototype,"copyText",void 0);__decorate$2([n$5({type:String})],CodeEditor.prototype,"editorStateType",void 0);__decorate$2([n$5({type:Boolean})],CodeEditor.prototype,"readOnly",void 0);__decorate$2([t$1()],CodeEditor.prototype,"editorState",void 0);__decorate$2([t$1()],CodeEditor.prototype,"editorView",void 0);__decorate$2([t$1()],CodeEditor.prototype,"editorId",void 0);__decorate$2([t$1()],CodeEditor.prototype,"editorEmitter",void 0);__decorate$2([t$1()],CodeEditor.prototype,"copied",void 0);CodeEditor=CodeEditor_1=__decorate$2([e$2("code-editor")],CodeEditor);var __decorate$1=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let ManifestCodeForm=class extends s$5{constructor(){super(),this.manifest={},this.showCopyToast=!1}static get styles(){return[i$7`
        #code-holder {
          position: relative;
          max-width: 700px;
        }
        #code-editor {
          overflow-x: scroll;
          margin: 0;
          background-color: #f6f8fa;
          padding: 5px;
          padding-top: 0;
          font-size: 16px;
        }
        #copy-manifest {
          position: absolute;
          top: 5px;
          right: 5px;
          display: flex;
          align-items: center;
        }
        #copy-manifest:hover {
          cursor: pointer;
        }
      `]}firstUpdated(){}render(){return x$1`
      <div id="code-holder">
        <code-editor .startText=${prettyString(this.manifest)} .readOnly=${!0}></code-editor>
      </div>
      ${this.showCopyToast?x$1`<app-toast>Manifest Copied to Clipboard</app-toast>`:x$1``}
    `}};__decorate$1([e$7({type:Object})],ManifestCodeForm.prototype,"manifest",void 0);__decorate$1([t$5()],ManifestCodeForm.prototype,"showCopyToast",void 0);ManifestCodeForm=__decorate$1([e$8("manifest-code-form")],ManifestCodeForm);var __decorate=globalThis&&globalThis.__decorate||function(X,O,Q,j){var U=arguments.length,F=U<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,Q):j,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(X,O,Q,j);else for(var W=X.length-1;W>=0;W--)(q=X[W])&&(F=(U<3?q(F):U>3?q(O,Q,F):q(O,Q))||F);return U>3&&F&&Object.defineProperty(O,Q,F),F};let PWAManifestEditor=class extends s$5{constructor(){super(),this._initialManifest={},this.manifestURL="",this.baseURL="",this.startingTab="info",this.focusOn="",this.manifest={},this.selectedTab="info",this.openTooltips=[]}set initialManifest(O){let Q=this._initialManifest;this._initialManifest=this.removeEmptyFields(O),this.manifest=JSON.parse(JSON.stringify(this.initialManifest)),this.requestUpdate("initialManifest",Q)}get initialManifest(){return this._initialManifest}static get styles(){return i$7`
      
      sl-tab::part(base) {
        --sl-font-size-small: 14px;
        --sl-spacing-medium: .75rem;
        --sl-space-large: 1rem;
        position: relative;
      }
      .error-indicator {
        position: absolute;
        right: 1.25em;
      }
      sl-tab-group {
        --indicator-color: #4F3FB6;
      }
      sl-tab::part(base):hover {
        color: #4F3FB6;
      }
      sl-tab::part(base):focus-visible{
        color: #4F3FB6;
        outline: 1px solid black;
      }
      sl-tab[active]::part(base) {
        color: #4F3FB6;
        font-weight: bold;
      }
      sl-tab-panel::part(base){
        overflow-y: auto;
        overflow-x: hidden;
        height: 500px;
        padding: 1em .5em .5em .5em;
      }

      @media(max-width: 765px){

      }

      @media(max-width: 600px){

      }

      @media(max-width: 480px){
        sl-tab::part(base) {
          --sl-font-size-small: 12px;
          --sl-spacing-medium: .5rem;
          --sl-space-large: .75em;
        }
      }
    `}async updated(){var O;(O=this.shadowRoot)==null||O.querySelector("sl-tab-group").show(this.startingTab)}removeEmptyFields(O){var Q=O;for(const j in O){const U=O[j];(typeof U=="string"||Array.isArray(U))&&U.length===0&&delete Q[j]}return Q}updateManifest(O){let Q=O.detail.field,j=O.detail.change,U=O.detail.removal;if(Q==="screenshots"||Q==="icons"){let F=this.manifest[Q]||[];j.forEach(q=>{F.push(q)}),j=F}if(U){delete this.manifest[Q],this.manifest={...this.manifest};return}this.manifest={...this.manifest,[Q]:j}}resetManifest(){this.manifest=JSON.parse(JSON.stringify(this.initialManifest)),this.shadowRoot.getElementById("info-tab").initMissingColors(),this.shadowRoot.getElementById("platform-tab").reset()}downloadManifest(){let O="manifest.json";var Q=document.createElement("a");Q.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(prettyString(this.manifest))),Q.setAttribute("download",O),Q.style.display="none",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q);let j=new CustomEvent("manifestDownloaded",{bubbles:!0,composed:!0});this.dispatchEvent(j)}getScreenshots(){return this.manifest.screenshots}errorInTab(O){let Q=this.shadowRoot.querySelectorAll("sl-tab"),j=Q[0],U=O.detail.panel,F=O.detail.areThereErrors;Q.forEach(q=>{q.panel===U&&(j=q)}),F?j.childElementCount==0&&(j.innerHTML=`${j.innerHTML}<span class="error-indicator" style='color: #eb5757'>!</span>`):j.innerHTML=j.innerHTML.split("<")[0]}cleanUrl(O){let Q;if(O&&!O.startsWith("http")&&!O.startsWith("https")&&(Q="https://"+O),Q){if(this.isValidURL(Q)===!1&&!O.toLowerCase().startsWith("http://"))throw new Error("This error means that you may have a bad https cert or the url may not be correct");return Q}return O}isValidURL(O){var Q=new RegExp("^((https?:)?\\/\\/)?(?:\\S+(?::\\S*)?@)?(([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?","i");return!!Q.test(O)}setSelectedTab(O){this.selectedTab=O.detail.name,this.startingTab=this.selectedTab;let Q=new CustomEvent("tabSwitched",{detail:{tab:this.selectedTab},bubbles:!0,composed:!0});this.dispatchEvent(Q)}handleShowingTooltip(O){O.detail.entering?(this.openTooltips.length>0&&(this.openTooltips[0].hide(),this.openTooltips=[]),O.detail.tooltip.show(),this.openTooltips.push(O.detail.tooltip)):(O.detail.tooltip.hide(),this.openTooltips=[])}render(){return x$1`
      <sl-tab-group 
        id="editor-tabs" 
        @sl-tab-show=${O=>this.setSelectedTab(O)}
        @manifestUpdated=${O=>this.updateManifest(O)}
        @errorInTab=${O=>this.errorInTab(O)}
        @trigger-hover=${O=>this.handleShowingTooltip(O)}
      >
        <sl-tab slot="nav" panel="info" ?active=${this.startingTab==="info"}>Info</sl-tab>
        <sl-tab slot="nav" panel="settings" ?active=${this.startingTab==="settings"}>Settings</sl-tab>
        <sl-tab slot="nav" panel="platform" ?active=${this.startingTab==="platform"}>Platform</sl-tab>
        <sl-tab slot="nav" panel="icons" ?active=${this.startingTab==="icons"}>Icons</sl-tab>
        <sl-tab slot="nav" panel="screenshots" ?active=${this.startingTab==="screenshots"}>Screenshots</sl-tab>
        <sl-tab slot="nav" panel="share" ?active=${this.startingTab==="share"}>Share Target</sl-tab>
        <sl-tab slot="nav" panel="code">Code</sl-tab>
        <sl-tab-panel name="info"><manifest-info-form id="info-tab" .manifest=${this.manifest} .focusOn=${this.focusOn}></manifest-info-form></sl-tab-panel>
        <sl-tab-panel name="settings"><manifest-settings-form .manifest=${this.manifest} .focusOn=${this.focusOn}></manifest-settings-form></sl-tab-panel>
        <sl-tab-panel name="platform"><manifest-platform-form id="platform-tab" .manifest=${this.manifest} .focusOn=${this.focusOn}></manifest-platform-form></sl-tab-panel>
        <sl-tab-panel name="icons"><manifest-icons-form .manifest=${this.manifest} .focusOn=${this.focusOn} .manifestURL=${this.cleanUrl(this.manifestURL)}></manifest-icons-form></sl-tab-panel>
        <sl-tab-panel name="screenshots"><manifest-screenshots-form .manifest=${this.manifest} .focusOn=${this.focusOn} .manifestURL=${this.cleanUrl(this.manifestURL)} .baseURL=${this.cleanUrl(this.baseURL)}></manifest-screenshots-form></sl-tab-panel>
        <sl-tab-panel name="share"><manifest-share-form .manifest=${this.manifest} .focusOn=${this.focusOn} .manifestURL=${this.cleanUrl(this.manifestURL)}</manifest-share-form></sl-tab-panel>
        <sl-tab-panel name="code"><manifest-code-form .manifest=${this.manifest}></manifest-code-form></sl-tab-panel>

      </sl-tab-group>
    `}};__decorate([e$7({type:Object})],PWAManifestEditor.prototype,"initialManifest",null);__decorate([e$7({type:String})],PWAManifestEditor.prototype,"manifestURL",void 0);__decorate([e$7({type:String})],PWAManifestEditor.prototype,"baseURL",void 0);__decorate([e$7({type:String})],PWAManifestEditor.prototype,"startingTab",void 0);__decorate([e$7({type:String})],PWAManifestEditor.prototype,"focusOn",void 0);__decorate([t$5()],PWAManifestEditor.prototype,"manifest",void 0);__decorate([t$5()],PWAManifestEditor.prototype,"selectedTab",void 0);__decorate([t$5()],PWAManifestEditor.prototype,"openTooltips",void 0);PWAManifestEditor=__decorate([e$8("pwa-manifest-editor")],PWAManifestEditor);var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__decorateClass$4=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$4(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$4(O,Q,U),U};let ManifestEditorFrame=class extends s$9{constructor(){super(),this.isGenerated=!1,this.startingTab="info",this.focusOn="",this.manifest={},this.manifestURL="",this.baseURL=""}static get styles(){return[i$8`
      * {
        box-sizing: border-box;
      }
      
      #frame-wrapper {
        display: flex;
        flex-direction: column;
        row-gap: .5em;
        width: 100%;
      }
      #frame-content {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
        padding: 1.5em;
      }
      #frame-header {
        display: flex;
        flex-direction: column;
        row-gap: .5em;
      }
      #frame-header > * {
        margin: 0;
      }
      #frame-header h1 {
        font-size: 24px;
      }
      #frame-header p {
        font-size: 14px;
      }
      #frame-footer {
        background-color: #F2F3FB;
        padding: 1.5em 2em;
        border-bottom-left-radius: var(--card-border-radius);
        border-bottom-right-radius: var(--card-border-radius);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .arrow_link {
        margin: 0;
        border-bottom: 1px solid #4F3FB6;
      }
      .arrow_anchor {
        text-decoration: none;
        font-size: 14px;
        font-weight: bold;
        margin: 0px 0.5em 0px 0px;
        line-height: 1em;
        color: rgb(79, 63, 182);
        display: flex;
        column-gap: 10px;
        white-space: nowrap;
        width: fit-content;
      }
      .arrow_anchor:visited {
        color: #4F3FB6;
      }
      .arrow_anchor:hover {
        cursor: pointer;
      }
      .arrow_anchor:hover img {
        animation: bounce 1s;
      }
      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }
        40% {
          transform: translateX(-5px);
        }
        60% {
            transform: translateX(5px);
        }
      }
      #footer-links {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
        width: 50%;
      }
      #footer-actions {
        display: flex;
        flex-direction: column;
        row-gap: .5em;
        align-items: center;
        width: 50%;
      }
      #footer-actions sl-checkbox::part(base){
        --sl-input-font-size-medium: 12px;
      }
      .primary {
        background: black;
        color: white;
        border: none;
        font-size: 16px;
        font-weight: bold;
        border-radius: 50px;
        padding: 1em 1em;
        width: 75%;
      }
      .primary:hover {
        cursor: pointer;
      }

      #add-to-pack {
        white-space: nowrap;
      }

      .dialog {
        --footer-spacing: 0;
      }
      
      .dialog::part(body){
        padding: 0;
      }
      .dialog::part(title){
        display: none;
      }
      .dialog::part(panel) {
        position: relative;
        border-radius: var(--card-border-radius);
      }
      .dialog::part(overlay){
          backdrop-filter: blur(10px);
        }
      .dialog::part(close-button__base){
        position: absolute;
        top: 5px;
        right: 5px;
        z-index: 1000;
      }

      .dialog::part(close-button__base):focus-visible{
        outline: 1px solid black;
      }

      @media(max-width: 600px){  
        
        #frame-footer {
          flex-direction: column-reverse;
          gap: 1em;
        }
        #footer-actions {
          width: 100%;
        }
        #footer-links {
          width: 100%;
          align-items: center;
        }
        .primary {
          font-size: 14px;
          white-space: nowrap;
          width: 100%;
        }
      }

      @media(max-width: 480px){  
        #frame-header h1 {
          font-size: 22px;
        }
        #frame-header p {
          font-size: 12px;
        }
        .arrow_anchor {
          font-size: 12px;
        }
      }

      /* < 480px */
      ${smallBreakPoint(i$8`
          
      `)}
      /* 480px - 639px */
      ${mediumBreakPoint(i$8`
      `)}
      /* 640px - 1023px */
      ${largeBreakPoint(i$8`
      `)}
      /*1024px - 1365px*/
      ${xLargeBreakPoint(i$8`
      `)}
      /* > 1920 */
      ${xxxLargeBreakPoint(i$8`
          
      `)}
    `]}connectedCallback(){super.connectedCallback(),this.manifest=getManifestContext().manifest,this.manifestURL=getManifestContext().manifestUrl,this.baseURL=sessionStorage.getItem("current_url")}downloadManifest(){this.shadowRoot.querySelector("pwa-manifest-editor").downloadManifest();let O=new CustomEvent("readyForRetest",{bubbles:!0,composed:!0});this.dispatchEvent(O)}async hideDialog(X){let O=this.shadowRoot.querySelector(".dialog");X.target===O&&(await O.hide(),recordPWABuilderProcessStep("manifest_editor_closed",AnalyticsBehavior.ProcessCheckpoint),document.body.style.height="unset")}handleTabSwitch(X){recordPWABuilderProcessStep("manifest_editor.tab_switched",AnalyticsBehavior.ProcessCheckpoint),recordPWABuilderProcessStep(`manifest_editor.${X.detail.tab}_tab_selected`,AnalyticsBehavior.ProcessCheckpoint)}handleManifestDownloaded(){recordPWABuilderProcessStep("manifest_editor.download_manifest_clicked",AnalyticsBehavior.ProcessCheckpoint)}handleFieldChange(X){let O=new CustomEvent("readyForRetest",{bubbles:!0,composed:!0});this.dispatchEvent(O),recordPWABuilderProcessStep("manifest_editor.field_change_attempted",AnalyticsBehavior.ProcessCheckpoint,{field:X.detail.field})}handleManifestCopied(){recordPWABuilderProcessStep("manifest_editor.copy_manifest_clicked",AnalyticsBehavior.ProcessCheckpoint)}handleImageGeneration(X,O){O==="icons"?recordPWABuilderProcessStep("manifest_editor.icon_generation_attempted",AnalyticsBehavior.ProcessCheckpoint,{platforms:[...X.detail.selectedPlatforms]}):recordPWABuilderProcessStep("manifest_editor.screenshot_generation_attempted",AnalyticsBehavior.ProcessCheckpoint)}handleUploadIcon(){recordPWABuilderProcessStep("manifest_editor.upload_icon_clicked",AnalyticsBehavior.ProcessCheckpoint)}render(){return x$2`
      <sl-dialog class="dialog" @sl-show=${()=>document.body.style.height="100vh"} @sl-hide=${X=>this.hideDialog(X)} noHeader>
        <div id="frame-wrapper">
          <div id="frame-content">
            <div id="frame-header">
              <h1>${this.isGenerated?"Generate manifest":"Edit your manifest"}</h1>
              <p>Update your app name and description, add or update your icons, enable platform capabilities and more by editing the fields below. Once you are done with your changes, download or copy the generated manifest and/or icons and upload them to your site. Once done, re-test the url to make sure your PWA is ready for stores!</p>
            </div>
            <pwa-manifest-editor 
              .initialManifest=${this.manifest} 
              .manifestURL=${this.manifestURL} 
              .baseURL=${this.baseURL}
              .focusOn=${this.focusOn}
              .startingTab=${this.startingTab}
              @tabSwitched=${X=>this.handleTabSwitch(X)}
              @manifestDownloaded=${()=>this.handleManifestDownloaded()}
              @fieldChangeAttempted=${X=>this.handleFieldChange(X)}
              @editorCopied=${()=>this.handleManifestCopied()}
              @generateScreenshotsAttempted=${X=>this.handleImageGeneration(X,"screenshots")}
              @uploadIcons=${()=>this.handleUploadIcon()}
              @generateIconsAttempted=${X=>this.handleImageGeneration(X,"icons")}
            ></pwa-manifest-editor>
            
          </div>
          <div id="frame-footer" slot="footer">
            <div id="footer-links">
                <a class="arrow_anchor" href="https://aka.ms/install-pwa-studio" rel="noopener" target="_blank">
                  <p class="arrow_link">VS Code Extension</p> 
                  <img src="/assets/new/arrow.svg" alt="arrow" role="presentation"/>
                </a>
                <a class="arrow_anchor" href="https://docs.pwabuilder.com/#/home/pwa-intro?id=web-app-manifests" rel="noopener" target="_blank">
                  <p class="arrow_link">Manifest Documentation</p> 
                  <img src="/assets/new/arrow.svg" alt="arrow" role="presentation"/>
                </a>
            </div>
            <div id="footer-actions">
              <button type="button" class="primary" @click=${()=>this.downloadManifest()}>Download Manifest</button>
            </div>
          </div>
        </div>
      </sl-dialog>
    `}};__decorateClass$4([n$f({type:Boolean})],ManifestEditorFrame.prototype,"isGenerated",2);__decorateClass$4([n$f({type:String})],ManifestEditorFrame.prototype,"startingTab",2);__decorateClass$4([n$f({type:String})],ManifestEditorFrame.prototype,"focusOn",2);__decorateClass$4([t$8()],ManifestEditorFrame.prototype,"manifest",2);__decorateClass$4([t$8()],ManifestEditorFrame.prototype,"manifestURL",2);__decorateClass$4([t$8()],ManifestEditorFrame.prototype,"baseURL",2);ManifestEditorFrame=__decorateClass$4([e$c("manifest-editor-frame")],ManifestEditorFrame);var __defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__decorateClass$3=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$3(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$3(O,Q,U),U};let SWPanel=class extends s$9{constructor(){super(),this.sw={}}static get styles(){return i$8`

      .panel-holder {
        display: flex;
        flex-direction: column;
        gap: 1em;
      }

      .panel-holder h2 {
        margin: 0;
        font-size: 22px;
      }

      .panel-holder p {
        margin: 0;
        font-size: 14px;
        color: #808080;
      }

      .panel-desc .code-block {
        display: flex;
        flex-direction: column;
        gap: .75em;
      }


    `}handleEditorUpdate(){console.log("update")}render(){return x$2`
      <div class="panel-holder">
        <div class="panel-desc">
          <h2>${this.sw.type}</h2>
          <p>${this.sw.desc}</p>
        </div>
        <div class="code-block">
          <h2>Code</h2>
          <code-editor
            copyText="Copy Service Worker"
            .startText=${this.sw.code}
            .readOnly=${!0}
            .editorStateType=${"javascript"}
          >
        </code-editor>
        </div>
      </div>
    `}};__decorateClass$3([n$f({type:Object})],SWPanel.prototype,"sw",2);SWPanel=__decorateClass$3([e$c("sw-panel")],SWPanel);const service_workers=[{type:"Offline Pages",desc:'This simple but elegant solution pulls a file from your web server called "offline.html" (make sure that file is actually there) and serves the file whenever a network connection can not be made.',code:`// This is the "Offline page" service worker

importScripts('https://storage.googleapis.com/workbox-cdn/releases/5.1.2/workbox-sw.js');

const CACHE = "pwabuilder-page";

// TODO: replace the following with the correct offline fallback page i.e.: const offlineFallbackPage = "offline.html";
const offlineFallbackPage = "ToDo-replace-this-name.html";

self.addEventListener("message", (event) => {
  if (event.data && event.data.type === "SKIP_WAITING") {
    self.skipWaiting();
  }
});

self.addEventListener('install', async (event) => {
  event.waitUntil(
    caches.open(CACHE)
      .then((cache) => cache.add(offlineFallbackPage))
  );
});

if (workbox.navigationPreload.isSupported()) {
  workbox.navigationPreload.enable();
}

self.addEventListener('fetch', (event) => {
  if (event.request.mode === 'navigate') {
    event.respondWith((async () => {
      try {
        const preloadResp = await event.preloadResponse;

        if (preloadResp) {
          return preloadResp;
        }

        const networkResp = await fetch(event.request);
        return networkResp;
      } catch (error) {

        const cache = await caches.open(CACHE);
        const cachedResp = await cache.match(offlineFallbackPage);
        return cachedResp;
      }
    })());
  }
});`},{type:"Offline Page Copy of Pages",desc:"A solution that expands the offline capabilities of your app. A copy of each page is stored in the cache as your visitors view them. This allows a visitor to load any previously viewed page while they are offline",code:`// This is the "Offline copy of pages" service worker

const CACHE = "pwabuilder-offline";

importScripts('https://storage.googleapis.com/workbox-cdn/releases/5.1.2/workbox-sw.js');

self.addEventListener("message", (event) => {
  if (event.data && event.data.type === "SKIP_WAITING") {
    self.skipWaiting();
  }
});

workbox.routing.registerRoute(
  new RegExp('/*'),
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: CACHE
  })
);`},{type:"Offline Copy with Backup Offline Page",desc:'A copy of each page is stored in the cache as your visitors view them. This allows a visitor to load any previously viewed page while they are offline. This then adds the "offline page" that allows you to customize the message and experience if the app is offline, and the page is not in the cache.',code:`// This is the service worker with the combined offline experience (Offline page + Offline copy of pages)

const CACHE = "pwabuilder-offline-page";

importScripts('https://storage.googleapis.com/workbox-cdn/releases/5.1.2/workbox-sw.js');

// TODO: replace the following with the correct offline fallback page i.e.: const offlineFallbackPage = "offline.html";
const offlineFallbackPage = "ToDo-replace-this-name.html";

self.addEventListener("message", (event) => {
  if (event.data && event.data.type === "SKIP_WAITING") {
    self.skipWaiting();
  }
});

self.addEventListener('install', async (event) => {
  event.waitUntil(
    caches.open(CACHE)
      .then((cache) => cache.add(offlineFallbackPage))
  );
});

if (workbox.navigationPreload.isSupported()) {
  workbox.navigationPreload.enable();
}

workbox.routing.registerRoute(
  new RegExp('/*'),
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: CACHE
  })
);

self.addEventListener('fetch', (event) => {
  if (event.request.mode === 'navigate') {
    event.respondWith((async () => {
      try {
        const preloadResp = await event.preloadResponse;

        if (preloadResp) {
          return preloadResp;
        }

        const networkResp = await fetch(event.request);
        return networkResp;
      } catch (error) {

        const cache = await caches.open(CACHE);
        const cachedResp = await cache.match(offlineFallbackPage);
        return cachedResp;
      }
    })());
  }
});`}];var __defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__decorateClass$2=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$2(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$2(O,Q,U),U};let SWSelector=class extends s$9{constructor(){super(),this.selectedSW="0",this.swNameList=["Offline Pages","Offline Page Copy of Pages","Offline Copy with Backup Offline Page"]}static get styles(){return i$8`

      sl-tab-group {
        --indicator-color: #4F3FB6;
      }
      sl-tab {
        display: flex;
      }
      sl-tab::part(base) {
        --sl-font-size-small: 14px;
        --sl-spacing-medium: .75rem;
        --sl-space-large: 1rem;
        max-width: 190px;
        white-space: unset;
        text-align: center;
        align-self: flex-end;
      }
      sl-tab[active]::part(base) {
        color: #4F3FB6;
      }
      sl-tab::part(base):hover {
        color: #4F3FB6;
      }
      sl-tab::part(base):focus-visible{
        color: #4F3FB6;
        outline: 1px solid black;
      }
      sl-tab-panel::part(base){
        overflow-y: auto;
        overflow-x: hidden;
        height: 500px;
        padding: .5em 0;
      }
      #selector-header {
        display: flex;
        flex-direction: column;
        gap: .5em;
        padding-top: 1em;
      }
      #selector-header h1 {
        margin: 0;
        font-size: 24px;
      }
      #selector-header p {
        margin: 0;
        font-size: 14px;
      }
      .dialog {
        --footer-spacing: 0;
      }
      .dialog::part(body){
        padding-top: 0;
      }
      .dialog::part(title){
        display: none;
      }
      .dialog::part(overlay){
          backdrop-filter: blur(10px);
        }
      .dialog::part(panel) {
        position: relative;
        border-radius: var(--card-border-radius);
      }
      .dialog::part(close-button__base){
        position: absolute;
        top: 5px;
        right: 5px;
        z-index: 1000;
      }
      .dialog::part(close-button__base):focus-visible{
        outline: 1px solid black;
      }

      #frame-footer {
        background-color: #F2F3FB;
        padding: 1.5em 2em;
        border-bottom-left-radius: var(--card-border-radius);
        border-bottom-right-radius: var(--card-border-radius);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .arrow_link {
        margin: 0;
        border-bottom: 1px solid #4F3FB6;
      }
      .arrow_anchor {
        text-decoration: none;
        font-size: 14px;
        font-weight: bold;
        margin: 0px 0.5em 0px 0px;
        line-height: 1em;
        color: rgb(79, 63, 182);
        display: flex;
        column-gap: 10px;
        white-space: nowrap;
        width: fit-content;
      }
      .arrow_anchor:visited {
        color: #4F3FB6;
      }
      .arrow_anchor:hover {
        cursor: pointer;
      }
      .arrow_anchor:hover img {
        animation: bounce 1s;
      }
      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }
        40% {
          transform: translateX(-5px);
        }
        60% {
            transform: translateX(5px);
        }
      }
      #footer-links {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
        width: 50%;
      }
      #footer-links #instructions {
        font-size: 14px;
        color: #808080;
        text-align: left;
        margin: 0;
      }
      #footer-actions {
        display: flex;
        flex-direction: column;
        row-gap: .5em;
        align-items: center;
        width: 50%;
      }
      #footer-actions sl-checkbox::part(base){
        --sl-input-font-size-medium: 12px;
      }
      .primary {
        background: black;
        color: white;
        border: none;
        font-size: 16px;
        font-weight: bold;
        border-radius: 50px;
        padding: 1em 1em;
        width: 75%;
      }
      .primary:hover {
        cursor: pointer;
      }

      @media(max-width: 600px){  
        
        #frame-footer {
          flex-direction: column-reverse;
          gap: 1em;
        }
        #footer-actions {
          width: 100%;
        }
        #footer-links {
          width: 100%;
          align-items: center;
        }
        .primary {
          font-size: 14px;
          white-space: nowrap;
          width: 100%;
        }
      }
    `}async hideDialog(X){let O=this.shadowRoot.querySelector(".dialog");X.target===O&&(await O.hide(),recordPWABuilderProcessStep("sw_selector_closed",AnalyticsBehavior.ProcessCheckpoint),document.body.style.height="unset")}setSelectedSW(X){this.selectedSW=X.detail.name,recordPWABuilderProcessStep(`${this.selectedSW}_tab_clicked`,AnalyticsBehavior.ProcessCheckpoint)}downloadSW(){let X="pwabuilder-sw.js";var O=document.createElement("a");O.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(service_workers[parseInt(this.selectedSW)].code)),O.setAttribute("download",X),O.style.display="none",document.body.appendChild(O),O.click(),document.body.removeChild(O),recordPWABuilderProcessStep(`sw_modal.${this.selectedSW}_downloaded`,AnalyticsBehavior.ProcessCheckpoint);let Q=new CustomEvent("readyForRetest",{bubbles:!0,composed:!0});this.dispatchEvent(Q)}render(){return x$2`
      <sl-dialog class="dialog" @sl-show=${()=>document.body.style.height="100vh"} @sl-hide=${X=>this.hideDialog(X)} noHeader>
        <div id="selector-header">
          <h1>Download a Service Worker</h1>
          <p>Download one of our pre-built Service Workers package that utilize Workbox to make building your offline experience easy.</p>
        </div>
        <sl-tab-group id="sw-tabs" @sl-tab-show=${X=>this.setSelectedSW(X)}>
          ${service_workers.map((X,O)=>x$2`
            <sl-tab tabindex="0" slot="nav" panel=${O}>${this.swNameList[O]}</sl-tab>`)}
          ${service_workers.map((X,O)=>x$2`
            <sl-tab-panel name=${O}><sw-panel .sw=${X} ></sw-panel></sl-tab-panel>`)}
        </sl-tab-group>

        <div id="frame-footer" slot="footer">
          <div id="footer-links">
            <p id="instructions">Click below for instructions on how to register your Service Worker.</p>
            <a 
              class="arrow_anchor" 
              href="https://docs.pwabuilder.com/#/home/sw-intro?id=registration" 
              rel="noopener" 
              target="_blank"
              @click=${()=>recordPWABuilderProcessStep("sw_modal.sw_documentation_clicked",AnalyticsBehavior.ProcessCheckpoint)}>
              <p class="arrow_link">Register your Service Worker</p> 
              <img src="/assets/new/arrow.svg" alt="arrow" role="presentation"/>
            </a>
          </div>
          <div id="footer-actions">
            <button type="button" class="primary" @click=${()=>this.downloadSW()}>Download Service Worker</button>
          </div>
        </div>
      </sl-dialog>
    `}};__decorateClass$2([t$8()],SWSelector.prototype,"selectedSW",2);SWSelector=__decorateClass$2([e$c("sw-selector")],SWSelector);const colorMap=new Map([["green","#3ba372"],["yellow","#ebc157"],["red","#eb5757"],["purple","#8976FF"]]),accentMap=new Map([["green","#E3FFF2"],["yellow","#FFFAED"],["red","#FFF3F3"],["purple","#F1F3FF"]]);async function draw(canvas,manifestData,swrData,securityData,siteName){const maniData=manifestData.split("/"),maniPercent=`${parseFloat(maniData[0])} / ${parseFloat(maniData[1])}`,maniColor=maniData[2],maniHeader=maniData[3],swData=swrData.split("/"),swTotal=`${parseFloat(swData[0])}`,swColor=swData[1],swHeader=swData[2],enhData=securityData.split("/"),enhTotal=`${parseFloat(enhData[0])}`,enhColor=enhData[1],enhHeader=enhData[2];let ctx=canvas.getContext("2d");canvas.width=824,canvas.height=660;const ringYpos=243;let background=new Image;background.src="assets/share_score_backdrop.jpg",await new Promise(X=>background.onload=X),ctx.drawImage(background,0,0);const start=-.5*Math.PI,trackColor="#e4e4e7";ctx.lineCap="round",ctx.lineJoin="round",ctx.font="bold 48px Hind, sans-serif",ctx.fillStyle="#292c3a",ctx.fillText(siteName.replace(/\/$/,""),30,70),ctx.textAlign="center",ctx.font="30px Hind, sans-serif",ctx.fillStyle="#292c3a",ctx.fillText("PWA Score",105,115),ctx.textAlign="center",drawRingPart(ctx,6,trackColor,200,ringYpos,57.44,0,2*Math.PI,!1,accentMap.get(maniColor));let percentMani=eval(maniPercent);if(percentMani===0)await drawExclamation(ctx,145),ctx.font="24px Hind, sans-serif",ctx.fillStyle="#292c3a",ctx.fillText(maniHeader,200,340);else{let X=360*percentMani*(Math.PI/180),O=start+X;drawRingPart(ctx,12,colorMap.get(maniColor),200,ringYpos,57.44,start,O,!1,"transparent"),writeText(ctx,200,maniPercent,maniHeader)}drawRingPart(ctx,6,trackColor,412.5,ringYpos,57.44,0,2*Math.PI,!1,accentMap.get(swColor));let percentSW=eval(swTotal);if(percentSW===0)await drawExclamation(ctx,357.5),ctx.font="24px Hind, sans-serif",ctx.fillStyle="#292c3a",ctx.fillText(swHeader,412.5,340);else{let X=360*percentSW*(Math.PI/180),O=start+X;drawRingPart(ctx,12,colorMap.get(swColor),412.5,ringYpos,57.44,start,O,!1,"transparent"),writeText(ctx,412.5,`+${swTotal}`,swHeader)}drawRingPart(ctx,6,trackColor,624.5,ringYpos,57.44,0,2*Math.PI,!1,accentMap.get(enhColor));let percentSec=eval(enhTotal);if(percentSec===0)await drawExclamation(ctx,569.5),ctx.font="24px Hind, sans-serif",ctx.fillStyle="#292c3a",ctx.fillText(enhHeader,624.5,340);else{let X=360*percentSec*(Math.PI/180),O=start+X;drawRingPart(ctx,12,colorMap.get(enhColor),624.5,ringYpos,57.44,start,O,!1,"transparent"),writeText(ctx,624.5,`+${enhTotal}`,enhHeader)}}function drawRingPart(X,O,Q,j,U,F,q,W,Y,G){X.beginPath(),X.lineWidth=O,X.strokeStyle=Q,X.arc(j,U,F,q,W,Y),X.fillStyle=G,X.fill(),X.stroke()}async function drawExclamation(X,O){let Q=new Image;Q.src="assets/new/macro_error.svg",await new Promise(j=>Q.onload=j),X.drawImage(Q,O,188,110,110)}function writeText(X,O,Q,j){X.font="bold 24px Hind, sans-serif",X.fillStyle="#4f3fb6",X.fillText(Q,O,250),X.font="24px Hind, sans-serif",X.fillStyle="#292c3a",X.fillText(j,O,340)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const s=(X,O)=>{var Q,j;const U=X._$AN;if(U===void 0)return!1;for(const F of U)(j=(Q=F)._$AO)===null||j===void 0||j.call(Q,O,!1),s(F,O);return!0},o$1=X=>{let O,Q;do{if((O=X._$AM)===void 0)break;Q=O._$AN,Q.delete(X),X=O}while((Q==null?void 0:Q.size)===0)},r=X=>{for(let O;O=X._$AM;X=O){let Q=O._$AN;if(Q===void 0)O._$AN=Q=new Set;else if(Q.has(X))break;Q.add(X),l(O)}};function n$3(X){this._$AN!==void 0?(o$1(this),this._$AM=X,r(this)):this._$AM=X}function h$1(X,O=!1,Q=0){const j=this._$AH,U=this._$AN;if(U!==void 0&&U.size!==0)if(O)if(Array.isArray(j))for(let F=Q;F<j.length;F++)s(j[F],!1),o$1(j[F]);else j!=null&&(s(j,!1),o$1(j));else s(this,X)}const l=X=>{var O,Q,j,U;X.type==t$9.CHILD&&((O=(j=X)._$AP)!==null&&O!==void 0||(j._$AP=h$1),(Q=(U=X)._$AQ)!==null&&Q!==void 0||(U._$AQ=n$3))};class c$1 extends i$9{constructor(){super(...arguments),this._$AN=void 0}_$AT(O,Q,j){super._$AT(O,Q,j),r(this),this.isConnected=O._$AU}_$AO(O,Q=!0){var j,U;O!==this.isConnected&&(this.isConnected=O,O?(j=this.reconnected)===null||j===void 0||j.call(this):(U=this.disconnected)===null||U===void 0||U.call(this)),Q&&(s(this,O),o$1(this))}setValue(O){if(e$d(this._$Ct))this._$Ct._$AI(O,this);else{const Q=[...this._$Ct._$AH];Q[this._$Ci]=O,this._$Ct._$AI(Q,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e=()=>new o;class o{}const h=new WeakMap,n$2=e$e(class extends c$1{render(X){return A$2}update(X,[O]){var Q;const j=O!==this.G;return j&&this.G!==void 0&&this.ot(void 0),(j||this.rt!==this.lt)&&(this.G=O,this.dt=(Q=X.options)===null||Q===void 0?void 0:Q.host,this.ot(this.lt=X.element)),A$2}ot(X){var O;if(typeof this.G=="function"){const Q=(O=this.dt)!==null&&O!==void 0?O:globalThis;let j=h.get(Q);j===void 0&&(j=new WeakMap,h.set(Q,j)),j.get(this.G)!==void 0&&this.G.call(this.dt,void 0),j.set(this.G,X),X!==void 0&&this.G.call(this.dt,X)}else this.G.value=X}get rt(){var X,O,Q;return typeof this.G=="function"?(O=h.get((X=this.dt)!==null&&X!==void 0?X:globalThis))===null||O===void 0?void 0:O.get(this.G):(Q=this.G)===null||Q===void 0?void 0:Q.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});var __defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__decorateClass$1=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc$1(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp$1(O,Q,U),U};let ShareCard=class extends s$9{constructor(){super(...arguments),this.preventClosing=!1,this.manifestData="",this.swData="",this.enhancementsData="",this.siteName="",this.dataURL="",this.canShare=!0,this.shareCanvas=e(),this.downloadText=e(),this.copyText=e()}static get styles(){return i$8`
      .dialog::part(header){
        margin-bottom: 20px;
      }
      .dialog::part(body){
        padding: 0;
        width: 100%;
      }
      .dialog::part(title){
        display: none;
      }
      .dialog::part(panel) {
        width: 460px !important;
        height: auto;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        border-radius: 10px;
      }
      .dialog::part(overlay){
        backdrop-filter: blur(10px);
      }
      .dialog::part(close-button__base){
        position: absolute;
        padding: 0;
        top: 5px;
        right: 5px;
        z-index: 1000;
        color: #C2C9D1;
      }
      .dialog_header {
        height: 12px !important;
      }
      .share-modal-header {
        font-weight: 600;
        font-size: 16px;
        line-height: 22px;
        text-align: center;
        color: #292C3A;
      }
      #frame-wrapper {
        display: flex;
        flex-direction: column;
        height: 100%;
        padding: 0 20px;
      }
      #frame-content {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
      }

      #canvas-holder {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #myCanvas {
        width: 413px;
        height: 322px;
        margin: 20px 0;
      }

      #share-actions {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
        gap: 10px;
        text-align: center;
      }
      .standard-button {
        padding: 12px 40px;
        white-space: nowrap;
        width: 80px;
        height: 45px;
        font-size: var(--button-font-size);
        font-weight: bold;
        border-radius: var(--button-border-radius);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
      }

      #share-button {
        padding: 12px 30px;
      }

      .standard-button-label {
        font-size: 14px;
        font-weight: bold;
        color: #292C3A;
      }

      .standard-button:hover {
        cursor: pointer;
        box-shadow: var(--button-box-shadow);
      }
      .primary {
        background-color: var(--font-color);
        border-color: var(--font-color);
        color: var(--primary-color);
      }

      .secondary {
        border: 1px solid var(--primary-color);
        color: var(--primary-color);
        background-color: transparent;
      }

      .actions-icons {
        width: 25px;
        height: auto;
      }

      ${smallBreakPoint(i$8`

        #myCanvas {
          width: 313px;
          height: auto;
        }

        #share-actions {
          justify-content: space-evenly;
        }

        .standard-button {
          margin-bottom: 8px;
        }

      `)}
    `}async setup(){this.canvas=this.shareCanvas.value,await draw(this.canvas,this.manifestData,this.swData,this.enhancementsData,this.siteName),this.dataURL=this.canvas.toDataURL("image/png",1),this.file=this.dataURLtoFile(this.dataURL,`${this.siteName}_pwabuilder_score.png`),!navigator.canShare||!navigator.canShare({files:[this.file]})?this.canShare=!1:this.canShare=!0}htmlToImage(X){if(X==="download")recordPWABuilderProcessStep("sharepwascorecard.download_clicked",AnalyticsBehavior.ProcessCheckpoint),this.downloadImage(`${this.siteName}_pwabuilder_score.png`);else if(X==="share")recordPWABuilderProcessStep("sharepwascorecard.share_clicked",AnalyticsBehavior.ProcessCheckpoint),this.shareFile(this.file,`${this.siteName} PWABuilder report card score`,"Check out my report card scores from #PWABuilder #BuildPackageShip");else return}downloadImage(X){let O=document.createElement("a");O.href="data:image/png;base64"+this.dataURL,O.download=X,O.click(),URL.revokeObjectURL(O.href),this.downloadText.value.innerText="Downloaded"}copyImage(){recordPWABuilderProcessStep("sharecard.copy_clicked",AnalyticsBehavior.ProcessCheckpoint),this.canvas.toBlob(X=>navigator.clipboard.write([new ClipboardItem({"image/png":X})]).then(()=>{this.copyText.value.innerText="Copied"}))}dataURLtoFile(X,O){for(var Q=X.split(","),j=Q[0].match(/:(.*?);/)[1],U=atob(Q[1]),F=U.length,q=new Uint8Array(F);F--;)q[F]=U.charCodeAt(F);return new File([q],O,{type:j})}shareFile(X,O,Q){navigator.canShare&&navigator.canShare({files:[X]})?navigator.share({files:[X],title:O,text:Q}).then(()=>console.log("Share was successful.")).catch(j=>console.log("Sharing failed",j)):console.log("Your system doesn't support sharing files.")}hideDialog(){this.shadowRoot.querySelector(".dialog").hide()}handleRequestClose(X){this.preventClosing&&X.preventDefault()}render(){return x$2`
      <sl-dialog class="dialog" @sl-show=${()=>this.setup()} @sl-hide=${()=>this.hideDialog()} noHeader>
        <div class="share-modal-header">Share your PWA score with the community!</div>
        <div id="frame-wrapper">
          <div id="frame-content">
            <div id="canvas-holder">
              <canvas id="myCanvas" ${n$2(this.shareCanvas)} aria-label="Shareable PWA Report card score image">
                Your browser does not support the canvas element.
              </canvas>
            </div>
            <div id="share-actions">
              <div>
                <button type="button" id="copy-button" class="standard-button secondary"  @click=${()=>this.copyImage()}><img class="actions-icons" src="/assets/copy-icon-standard-color.svg" alt="Click here to copy PWA score image" role="img"/></button>
                <span id="copy-button-label" class="standard-button-label" ${n$2(this.copyText)}>Copy</span>
              </div>
              <div>
                <button type="button" id="download-button" class="standard-button secondary" @click=${()=>this.htmlToImage("download")}><img class="actions-icons" src="/assets/download-icon-standard-color.svg" alt="Click here to download PWA score image" role="img"/></button>
                <span id="download-button-label" class="standard-button-label" ${n$2(this.downloadText)}>Download</span>
              </div>
              ${this.canShare?x$2`
                <div>
                  <button type="button" id="share-button" class="standard-button secondary" @click=${()=>this.htmlToImage("share")}><img class="actions-icons" src="/assets/share_icon.svg" alt="Click here to share PWA score image"/></button>
                  <span class="standard-button-label">Share</span>
                </div>
              `:""}
            </div>
          </div>
        </div>
      </sl-dialog>
    `}};__decorateClass$1([n$f()],ShareCard.prototype,"preventClosing",2);__decorateClass$1([n$f()],ShareCard.prototype,"manifestData",2);__decorateClass$1([n$f()],ShareCard.prototype,"swData",2);__decorateClass$1([n$f()],ShareCard.prototype,"enhancementsData",2);__decorateClass$1([n$f()],ShareCard.prototype,"siteName",2);__decorateClass$1([t$8()],ShareCard.prototype,"dataURL",2);__decorateClass$1([t$8()],ShareCard.prototype,"canShare",2);ShareCard=__decorateClass$1([e$c("share-card")],ShareCard);function multiplyMatrices(X,O){let Q=X.length;Array.isArray(X[0])||(X=[X]),Array.isArray(O[0])||(O=O.map(q=>[q]));let j=O[0].length,U=O[0].map((q,W)=>O.map(Y=>Y[W])),F=X.map(q=>U.map(W=>{let Y=0;if(!Array.isArray(q)){for(let G of W)Y+=q*G;return Y}for(let G=0;G<q.length;G++)Y+=q[G]*(W[G]||0);return Y}));return Q===1&&(F=F[0]),j===1?F.map(q=>q[0]):F}function isString(X){return type(X)==="string"}function type(X){return(Object.prototype.toString.call(X).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function toPrecision(X,O){X=+X,O=+O;let Q=(Math.floor(X)+"").length;if(O>Q)return+X.toFixed(O-Q);{let j=10**(Q-O);return Math.round(X/j)*j}}function parseFunction(X){if(!X)return;X=X.trim();const O=/^([a-z]+)\((.+?)\)$/i,Q=/^-?[\d.]+$/;let j=X.match(O);if(j){let U=[];return j[2].replace(/\/?\s*([-\w.]+(?:%|deg)?)/g,(F,q)=>{/%$/.test(q)?(q=new Number(q.slice(0,-1)/100),q.type="<percentage>"):/deg$/.test(q)?(q=new Number(+q.slice(0,-3)),q.type="<angle>",q.unit="deg"):Q.test(q)&&(q=new Number(q),q.type="<number>"),F.startsWith("/")&&(q=q instanceof Number?q:new Number(q),q.alpha=!0),U.push(q)}),{name:j[1].toLowerCase(),rawName:j[1],rawArgs:j[2],args:U}}}function last(X){return X[X.length-1]}function interpolate(X,O,Q){return isNaN(X)?O:isNaN(O)?X:X+(O-X)*Q}function interpolateInv(X,O,Q){return(Q-X)/(O-X)}function mapRange(X,O,Q){return interpolate(O[0],O[1],interpolateInv(X[0],X[1],Q))}function parseCoordGrammar(X){return X.map(O=>O.split("|").map(Q=>{Q=Q.trim();let j=Q.match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(j){let U=new String(j[1]);return U.range=[+j[2],+j[3]],U}return Q}))}var util=Object.freeze({__proto__:null,interpolate,interpolateInv,isString,last,mapRange,multiplyMatrices,parseCoordGrammar,parseFunction,toPrecision,type});class Hooks{add(O,Q,j){if(typeof arguments[0]!="string"){for(var O in arguments[0])this.add(O,arguments[0][O],arguments[1]);return}(Array.isArray(O)?O:[O]).forEach(function(U){this[U]=this[U]||[],Q&&this[U][j?"unshift":"push"](Q)},this)}run(O,Q){this[O]=this[O]||[],this[O].forEach(function(j){j.call(Q&&Q.context?Q.context:Q,Q)})}}const hooks=new Hooks;var defaults={gamut_mapping:"lch.c",precision:5,deltaE:"76"};const WHITES={D50:[.3457/.3585,1,(1-.3457-.3585)/.3585],D65:[.3127/.329,1,(1-.3127-.329)/.329]};function getWhite(X){return Array.isArray(X)?X:WHITES[X]}function adapt$1(X,O,Q,j={}){if(X=getWhite(X),O=getWhite(O),!X||!O)throw new TypeError(`Missing white point to convert ${X?"":"from"}${!X&&!O?"/":""}${O?"":"to"}`);if(X===O)return Q;let U={W1:X,W2:O,XYZ:Q,options:j};if(hooks.run("chromatic-adaptation-start",U),U.M||(U.W1===WHITES.D65&&U.W2===WHITES.D50?U.M=[[1.0479298208405488,.022946793341019088,-.05019222954313557],[.029627815688159344,.990434484573249,-.01707382502938514],[-.009243058152591178,.015055144896577895,.7518742899580008]]:U.W1===WHITES.D50&&U.W2===WHITES.D65&&(U.M=[[.9554734527042182,-.023098536874261423,.0632593086610217],[-.028369706963208136,1.0099954580058226,.021041398966943008],[.012314001688319899,-.020507696433477912,1.3303659366080753]])),hooks.run("chromatic-adaptation-end",U),U.M)return multiplyMatrices(U.M,U.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}const \u03B5$4=75e-6,st=class{constructor(O){var U,F,q,W,Y,G,K;this.id=O.id,this.name=O.name,this.base=O.base?st.get(O.base):null,this.aliases=O.aliases,this.base&&(this.fromBase=O.fromBase,this.toBase=O.toBase);let Q=(U=O.coords)!=null?U:this.base.coords;for(let J in Q)"name"in Q[J]||(Q[J].name=J);this.coords=Q;let j=(q=(F=O.white)!=null?F:this.base.white)!=null?q:"D65";this.white=getWhite(j),this.formats=(W=O.formats)!=null?W:{};for(let J in this.formats){let ee=this.formats[J];ee.type||(ee.type="function"),ee.name||(ee.name=J)}O.cssId&&!((Y=this.formats.functions)!=null&&Y.color)?(this.formats.color={id:O.cssId},Object.defineProperty(this,"cssId",{value:O.cssId})):((G=this.formats)==null?void 0:G.color)&&!((K=this.formats)!=null&&K.color.id)&&(this.formats.color.id=this.id),this.referred=O.referred,Object.defineProperty(this,"path",{value:getPath(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),hooks.run("colorspace-init-end",this)}inGamut(O,{epsilon:Q=\u03B5$4}={}){if(this.isPolar)return O=this.toBase(O),this.base.inGamut(O,{epsilon:Q});let j=Object.values(this.coords);return O.every((U,F)=>{let q=j[F];if(q.type!=="angle"&&q.range){if(Number.isNaN(U))return!0;let[W,Y]=q.range;return(W===void 0||U>=W-Q)&&(Y===void 0||U<=Y+Q)}return!0})}get cssId(){var O,Q;return((Q=(O=this.formats.functions)==null?void 0:O.color)==null?void 0:Q.id)||this.id}get isPolar(){for(let O in this.coords)if(this.coords[O].type==="angle")return!0;return!1}getFormat(O){if(typeof O=="object")return O=processFormat(O,this),O;let Q;return O==="default"?Q=Object.values(this.formats)[0]:Q=this.formats[O],Q?(Q=processFormat(Q,this),Q):null}equals(O){return O?this===O||this.id===O.id:!1}to(O,Q){if(arguments.length===1&&([O,Q]=[O.space,O.coords]),O=st.get(O),this.equals(O))return Q;Q=Q.map(W=>Number.isNaN(W)?0:W);let j=this.path,U=O.path,F,q;for(let W=0;W<j.length&&j[W].equals(U[W]);W++)F=j[W],q=W;if(!F)throw new Error(`Cannot convert between color spaces ${this} and ${O}: no connection space was found`);for(let W=j.length-1;W>q;W--)Q=j[W].toBase(Q);for(let W=q+1;W<U.length;W++)Q=U[W].fromBase(Q);return Q}from(O,Q){return arguments.length===1&&([O,Q]=[O.space,O.coords]),O=st.get(O),O.to(this,Q)}toString(){return`${this.name} (${this.id})`}getMinCoords(){var Q;let O=[];for(let j in this.coords){let U=this.coords[j],F=U.range||U.refRange;O.push((Q=F==null?void 0:F.min)!=null?Q:0)}return O}static get all(){return[...new Set(Object.values(st.registry))]}static register(O,Q){if(arguments.length===1&&(Q=arguments[0],O=Q.id),Q=this.get(Q),this.registry[O]&&this.registry[O]!==Q)throw new Error(`Duplicate color space registration: '${O}'`);if(this.registry[O]=Q,arguments.length===1&&Q.aliases)for(let j of Q.aliases)this.register(j,Q);return Q}static get(O,...Q){if(!O||O instanceof st)return O;if(type(O)==="string"){let U=st.registry[O.toLowerCase()];if(!U)throw new TypeError(`No color space found with id = "${O}"`);return U}if(Q.length)return st.get(...Q);throw new TypeError(`${O} is not a valid color space`)}static resolveCoord(O,Q){var Y;let j=type(O),U,F;if(j==="string"?O.includes(".")?[U,F]=O.split("."):[U,F]=[,O]:Array.isArray(O)?[U,F]=O:(U=O.space,F=O.coordId),U=st.get(U),U||(U=Q),!U)throw new TypeError(`Cannot resolve coordinate reference ${O}: No color space specified and relative references are not allowed here`);if(j=type(F),j==="number"||j==="string"&&F>=0){let G=Object.entries(U.coords)[F];if(G)return{space:U,id:G[0],index:F,...G[1]}}U=st.get(U);let q=F.toLowerCase(),W=0;for(let G in U.coords){let K=U.coords[G];if(G.toLowerCase()===q||((Y=K.name)==null?void 0:Y.toLowerCase())===q)return{space:U,id:G,index:W,...K};W++}throw new TypeError(`No "${F}" coordinate found in ${U.name}. Its coordinates are: ${Object.keys(U.coords).join(", ")}`)}};let ColorSpace=st;jt(ColorSpace,"registry",{}),jt(ColorSpace,"DEFAULT_FORMAT",{type:"functions",name:"color"});function getPath(X){let O=[X];for(let Q=X;Q=Q.base;)O.push(Q);return O}function processFormat(X,{coords:O}={}){if(X.coords&&!X.coordGrammar){X.type||(X.type="function"),X.name||(X.name="color"),X.coordGrammar=parseCoordGrammar(X.coords);let Q=Object.entries(O).map(([j,U],F)=>{let q=X.coordGrammar[F][0],W=U.range||U.refRange,Y=q.range,G="";return q=="<percentage>"?(Y=[0,100],G="%"):q=="<angle>"&&(G="deg"),{fromRange:W,toRange:Y,suffix:G}});X.serializeCoords=(j,U)=>j.map((F,q)=>{let{fromRange:W,toRange:Y,suffix:G}=Q[q];return W&&Y&&(F=mapRange(W,Y,F)),F=toPrecision(F,U),G&&(F+=G),F})}return X}var XYZ_D65=new ColorSpace({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class RGBColorSpace extends ColorSpace{constructor(O){var Q,j,U;O.coords||(O.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),O.base||(O.base=XYZ_D65),O.toXYZ_M&&O.fromXYZ_M&&((Q=O.toBase)!=null||(O.toBase=F=>{let q=multiplyMatrices(O.toXYZ_M,F);return this.white!==this.base.white&&(q=adapt$1(this.white,this.base.white,q)),q}),(j=O.fromBase)!=null||(O.fromBase=F=>(F=adapt$1(this.base.white,this.white,F),multiplyMatrices(O.fromXYZ_M,F)))),(U=O.referred)!=null||(O.referred="display"),super(O)}}function parse(X,{meta:O}={}){var j,U,F,q,W,Y;let Q={str:(j=String(X))==null?void 0:j.trim()};if(hooks.run("parse-start",Q),Q.color)return Q.color;if(Q.parsed=parseFunction(Q.str),Q.parsed){let G=Q.parsed.name;if(G==="color"){let K=Q.parsed.args.shift(),J=Q.parsed.rawArgs.indexOf("/")>0?Q.parsed.args.pop():1;for(let te of ColorSpace.all){let re=te.getFormat("color");if(re&&(K===re.id||((U=re.ids)==null?void 0:U.includes(K)))){const oe=Object.keys(te.coords).map((se,ne)=>Q.parsed.args[ne]||0);return O&&(O.formatId="color"),{spaceId:te.id,coords:oe,alpha:J}}}let ee="";if(K in ColorSpace.registry){let te=(W=(q=(F=ColorSpace.registry[K].formats)==null?void 0:F.functions)==null?void 0:q.color)==null?void 0:W.id;te&&(ee=`Did you mean color(${te})?`)}throw new TypeError(`Cannot parse color(${K}). `+(ee||"Missing a plugin?"))}else for(let K of ColorSpace.all){let J=K.getFormat(G);if(J&&J.type==="function"){let ee=1;(J.lastAlpha||last(Q.parsed.args).alpha)&&(ee=Q.parsed.args.pop());let te=Q.parsed.args,re;return J.coordGrammar&&(re=Object.entries(K.coords).map(([oe,se],ne)=>{var me;let de=J.coordGrammar[ne],he=(me=te[ne])==null?void 0:me.type,fe=de.find(we=>we==he);if(!fe){let we=se.name||oe;throw new TypeError(`${he} not allowed for ${we} in ${G}()`)}let Oe=fe.range;he==="<percentage>"&&(Oe||(Oe=[0,1]));let ce=se.range||se.refRange;return Oe&&ce&&(te[ne]=mapRange(Oe,ce,te[ne])),fe})),O&&Object.assign(O,{formatId:J.name,types:re}),{spaceId:K.id,coords:te,alpha:ee}}}}else for(let G of ColorSpace.all)for(let K in G.formats){let J=G.formats[K];if(J.type!=="custom"||J.test&&!J.test(Q.str))continue;let ee=J.parse(Q.str);if(ee)return(Y=ee.alpha)!=null||(ee.alpha=1),O&&(O.formatId=K),ee}throw new TypeError(`Could not parse ${X} as a color. Missing a plugin?`)}function getColor(X){if(!X)throw new TypeError("Empty color reference");isString(X)&&(X=parse(X));let O=X.space||X.spaceId;return O instanceof ColorSpace||(X.space=ColorSpace.get(O)),X.alpha===void 0&&(X.alpha=1),X}function getAll(X,O){return O=ColorSpace.get(O),O.from(X)}function get(X,O){let{space:Q,index:j}=ColorSpace.resolveCoord(O,X.space);return getAll(X,Q)[j]}function setAll(X,O,Q){return O=ColorSpace.get(O),X.coords=O.to(X.space,Q),X}function set(X,O,Q){if(X=getColor(X),arguments.length===2&&type(arguments[1])==="object"){let j=arguments[1];for(let U in j)set(X,U,j[U])}else{typeof Q=="function"&&(Q=Q(get(X,O)));let{space:j,index:U}=ColorSpace.resolveCoord(O,X.space),F=getAll(X,j);F[U]=Q,setAll(X,j,F)}return X}var XYZ_D50=new ColorSpace({id:"xyz-d50",name:"XYZ D50",white:"D50",base:XYZ_D65,fromBase:X=>adapt$1(XYZ_D65.white,"D50",X),toBase:X=>adapt$1("D50",XYZ_D65.white,X),formats:{color:{}}});const \u03B5$3=216/24389,\u03B53$1=24/116,\u03BA$1=24389/27;let white$1=WHITES.D50;var lab=new ColorSpace({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:white$1,base:XYZ_D50,fromBase(X){let Q=X.map((j,U)=>j/white$1[U]).map(j=>j>\u03B5$3?Math.cbrt(j):(\u03BA$1*j+16)/116);return[116*Q[1]-16,500*(Q[0]-Q[1]),200*(Q[1]-Q[2])]},toBase(X){let O=[];return O[1]=(X[0]+16)/116,O[0]=X[1]/500+O[1],O[2]=O[1]-X[2]/200,[O[0]>\u03B53$1?Math.pow(O[0],3):(116*O[0]-16)/\u03BA$1,X[0]>8?Math.pow((X[0]+16)/116,3):X[0]/\u03BA$1,O[2]>\u03B53$1?Math.pow(O[2],3):(116*O[2]-16)/\u03BA$1].map((j,U)=>j*white$1[U])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function constrain(X){return(X%360+360)%360}function adjust(X,O){if(X==="raw")return O;let[Q,j]=O.map(constrain),U=j-Q;return X==="increasing"?U<0&&(j+=360):X==="decreasing"?U>0&&(Q+=360):X==="longer"?-180<U&&U<180&&(U>0?Q+=360:j+=360):X==="shorter"&&(U>180?Q+=360:U<-180&&(j+=360)),[Q,j]}var lch=new ColorSpace({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:lab,fromBase(X){let[O,Q,j]=X,U;const F=.02;return Math.abs(Q)<F&&Math.abs(j)<F?U=NaN:U=Math.atan2(j,Q)*180/Math.PI,[O,Math.sqrt(Q**2+j**2),constrain(U)]},toBase(X){let[O,Q,j]=X;return Q<0&&(Q=0),isNaN(j)&&(j=0),[O,Q*Math.cos(j*Math.PI/180),Q*Math.sin(j*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Gfactor=25**7,\u03C0$1=Math.PI,r2d=180/\u03C0$1,d2r$1=\u03C0$1/180;function deltaE2000(X,O,{kL:Q=1,kC:j=1,kH:U=1}={}){let[F,q,W]=lab.from(X),Y=lch.from(lab,[F,q,W])[1],[G,K,J]=lab.from(O),ee=lch.from(lab,[G,K,J])[1];Y<0&&(Y=0),ee<0&&(ee=0);let re=((Y+ee)/2)**7,oe=.5*(1-Math.sqrt(re/(re+Gfactor))),se=(1+oe)*q,ne=(1+oe)*K,de=Math.sqrt(se**2+W**2),he=Math.sqrt(ne**2+J**2),fe=se===0&&W===0?0:Math.atan2(W,se),Oe=ne===0&&J===0?0:Math.atan2(J,ne);fe<0&&(fe+=2*\u03C0$1),Oe<0&&(Oe+=2*\u03C0$1),fe*=r2d,Oe*=r2d;let ce=G-F,me=he-de,we=Oe-fe,ke=fe+Oe,Ce=Math.abs(we),Qe;de*he===0?Qe=0:Ce<=180?Qe=we:we>180?Qe=we-360:we<-180?Qe=we+360:console.log("the unthinkable has happened");let Ae=2*Math.sqrt(he*de)*Math.sin(Qe*d2r$1/2),Be=(F+G)/2,Ie=(de+he)/2,Ue=Math.pow(Ie,7),Xe;de*he===0?Xe=ke:Ce<=180?Xe=ke/2:ke<360?Xe=(ke+360)/2:Xe=(ke-360)/2;let Ke=(Be-50)**2,We=1+.015*Ke/Math.sqrt(20+Ke),Ze=1+.045*Ie,_e=1;_e-=.17*Math.cos((Xe-30)*d2r$1),_e+=.24*Math.cos(2*Xe*d2r$1),_e+=.32*Math.cos((3*Xe+6)*d2r$1),_e-=.2*Math.cos((4*Xe-63)*d2r$1);let ye=1+.015*Ie*_e,xe=30*Math.exp(-1*((Xe-275)/25)**2),$e=2*Math.sqrt(Ue/(Ue+Gfactor)),ae=-1*Math.sin(2*xe*d2r$1)*$e,pe=(ce/(Q*We))**2;return pe+=(me/(j*Ze))**2,pe+=(Ae/(U*ye))**2,pe+=ae*(me/(j*Ze))*(Ae/(U*ye)),Math.sqrt(pe)}const \u03B5$2=75e-6;function inGamut(X,O=X.space,{epsilon:Q=\u03B5$2}={}){X=getColor(X),O=ColorSpace.get(O);let j=X.coords;return O!==X.space&&(j=O.from(X)),O.inGamut(j,{epsilon:Q})}function clone(X){return{space:X.space,coords:X.coords.slice(),alpha:X.alpha}}function toGamut(X,{method:O=defaults.gamut_mapping,space:Q=X.space}={}){if(isString(arguments[1])&&(Q=arguments[1]),Q=ColorSpace.get(Q),inGamut(X,Q,{epsilon:0}))return getColor(X);let j=to(X,Q);if(O!=="clip"&&!inGamut(X,Q)){let U=toGamut(clone(j),{method:"clip",space:Q});if(deltaE2000(X,U)>2){let F=ColorSpace.resolveCoord(O),q=F.space,W=F.id,Y=to(j,q),K=(F.range||F.refRange)[0],J=.01,ee=K,te=get(Y,W);for(;te-ee>J;){let re=clone(Y);re=toGamut(re,{space:Q,method:"clip"}),deltaE2000(Y,re)-2<J?ee=get(Y,W):te=get(Y,W),set(Y,W,(ee+te)/2)}j=to(Y,Q)}else j=U}if(O==="clip"||!inGamut(j,Q,{epsilon:0})){let U=Object.values(Q.coords).map(F=>F.range||[]);j.coords=j.coords.map((F,q)=>{let[W,Y]=U[q];return W!==void 0&&(F=Math.max(W,F)),Y!==void 0&&(F=Math.min(F,Y)),F})}return Q!==X.space&&(j=to(j,X.space)),X.coords=j.coords,X}toGamut.returns="color";function to(X,O,{inGamut:Q}={}){X=getColor(X),O=ColorSpace.get(O);let j=O.from(X),U={space:O,coords:j,alpha:X.alpha};return Q&&(U=toGamut(U)),U}to.returns="color";function serialize(X,{precision:O=defaults.precision,format:Q="default",inGamut:j=!0,...U}={}){var Y,G,K;let F;X=getColor(X);let q=Q;Q=(G=(Y=X.space.getFormat(Q))!=null?Y:X.space.getFormat("default"))!=null?G:ColorSpace.DEFAULT_FORMAT,j||(j=Q.toGamut);let W=X.coords;if(W=W.map(J=>J||0),j&&!inGamut(X)&&(W=toGamut(clone(X),j===!0?void 0:j).coords),Q.type==="custom")if(U.precision=O,Q.serialize)F=Q.serialize(W,X.alpha,U);else throw new TypeError(`format ${q} can only be used to parse colors, not for serialization`);else{let J=Q.name||"color";Q.serializeCoords?W=Q.serializeCoords(W,O):O!==null&&(W=W.map(oe=>toPrecision(oe,O)));let ee=[...W];if(J==="color"){let oe=Q.id||((K=Q.ids)==null?void 0:K[0])||X.space.id;ee.unshift(oe)}let te=X.alpha;O!==null&&(te=toPrecision(te,O));let re=X.alpha<1&&!Q.noAlpha?`${Q.commas?",":" /"} ${te}`:"";F=`${J}(${ee.join(Q.commas?", ":" ")}${re})`}return F}const toXYZ_M$5=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M$5=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]];var REC2020Linear=new RGBColorSpace({id:"rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:toXYZ_M$5,fromXYZ_M:fromXYZ_M$5,formats:{color:{}}});const \u03B1=1.09929682680944,\u03B2=.018053968510807;var REC2020=new RGBColorSpace({id:"rec2020",name:"REC.2020",base:REC2020Linear,toBase(X){return X.map(function(O){return O<\u03B2*4.5?O/4.5:Math.pow((O+\u03B1-1)/\u03B1,1/.45)})},fromBase(X){return X.map(function(O){return O>=\u03B2?\u03B1*Math.pow(O,.45)-(\u03B1-1):4.5*O})},formats:{color:{}}});const toXYZ_M$4=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M$4=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]];var P3Linear=new RGBColorSpace({id:"p3-linear",name:"Linear P3",white:"D65",toXYZ_M:toXYZ_M$4,fromXYZ_M:fromXYZ_M$4});const toXYZ_M$3=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M$3=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var sRGBLinear=new RGBColorSpace({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:toXYZ_M$3,fromXYZ_M:fromXYZ_M$3,formats:{color:{}}}),KEYWORDS={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[102/255,51/255,153/255],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let coordGrammar=Array(3).fill("<percentage> | <number>[0, 255]"),coordGrammarNumber=Array(3).fill("<number>[0, 255]");var sRGB=new RGBColorSpace({id:"srgb",name:"sRGB",base:sRGBLinear,fromBase:X=>X.map(O=>{let Q=O<0?-1:1,j=O*Q;return j>.0031308?Q*(1.055*j**(1/2.4)-.055):12.92*O}),toBase:X=>X.map(O=>{let Q=O<0?-1:1,j=O*Q;return j<.04045?O/12.92:Q*((j+.055)/1.055)**2.4}),formats:{rgb:{coords:coordGrammar},rgb_number:{name:"rgb",commas:!0,coords:coordGrammarNumber,noAlpha:!0},color:{},rgba:{coords:coordGrammar,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:coordGrammarNumber},hex:{type:"custom",toGamut:!0,test:X=>/^#([a-f0-9]{3,4}){1,2}$/i.test(X),parse(X){X.length<=5&&(X=X.replace(/[a-f0-9]/gi,"$&$&"));let O=[];return X.replace(/[a-f0-9]{2}/gi,Q=>{O.push(parseInt(Q,16)/255)}),{spaceId:"srgb",coords:O.slice(0,3),alpha:O.slice(3)[0]}},serialize:(X,O,{collapse:Q=!0}={})=>{O<1&&X.push(O),X=X.map(F=>Math.round(F*255));let j=Q&&X.every(F=>F%17===0),U=X.map(F=>j?(F/17).toString(16):F.toString(16).padStart(2,"0")).join("");return"#"+U}},keyword:{type:"custom",test:X=>/^[a-z]+$/i.test(X),parse(X){X=X.toLowerCase();let O={spaceId:"srgb",coords:null,alpha:1};if(X==="transparent"?(O.coords=KEYWORDS.black,O.alpha=0):O.coords=KEYWORDS[X],O.coords)return O}}}}),P3=new RGBColorSpace({id:"p3",name:"P3",base:P3Linear,fromBase:sRGB.fromBase,toBase:sRGB.toBase,formats:{color:{id:"display-p3"}}});defaults.display_space=sRGB;if(typeof CSS!="undefined"&&CSS.supports)for(let X of[lab,REC2020,P3]){let O=X.getMinCoords(),j=serialize({space:X,coords:O,alpha:1});if(CSS.supports("color",j)){defaults.display_space=X;break}}function display(X,{space:O=defaults.display_space,...Q}={}){let j=serialize(X,Q);if(typeof CSS=="undefined"||CSS.supports("color",j)||!defaults.display_space)j=new String(j),j.color=X;else{let U=to(X,O);j=new String(serialize(U,Q)),j.color=U}return j}function distance(X,O,Q="lab"){Q=ColorSpace.get(Q);let j=Q.from(X),U=Q.from(O);return Math.sqrt(j.reduce((F,q,W)=>{let Y=U[W];return isNaN(q)||isNaN(Y)?F:F+(Y-q)**2},0))}function equals(X,O){return X=getColor(X),O=getColor(O),X.space===O.space&&X.alpha===O.alpha&&X.coords.every((Q,j)=>Q===O.coords[j])}function getLuminance(X){return get(X,[XYZ_D65,"y"])}function setLuminance(X,O){set(X,[XYZ_D65,"y"],O)}function register$2(X){Object.defineProperty(X.prototype,"luminance",{get(){return getLuminance(this)},set(O){setLuminance(this,O)}})}var luminance=Object.freeze({__proto__:null,getLuminance,register:register$2,setLuminance});function contrastWCAG21(X,O){X=getColor(X),O=getColor(O);let Q=Math.max(getLuminance(X),0),j=Math.max(getLuminance(O),0);return j>Q&&([Q,j]=[j,Q]),(Q+.05)/(j+.05)}const normBG=.56,normTXT=.57,revTXT=.62,revBG=.65,blkThrs=.022,blkClmp=1.414,loClip=.1,deltaYmin=5e-4,scaleBoW=1.14,loBoWoffset=.027,scaleWoB=1.14;function fclamp(X){return X>=blkThrs?X:X+(blkThrs-X)**blkClmp}function linearize(X){let O=X<0?-1:1,Q=Math.abs(X);return O*Math.pow(Q,2.4)}function contrastAPCA(X,O){O=getColor(O),X=getColor(X);let Q,j,U,F,q,W;O=to(O,"srgb"),[F,q,W]=O.coords;let Y=linearize(F)*.2126729+linearize(q)*.7151522+linearize(W)*.072175;X=to(X,"srgb"),[F,q,W]=X.coords;let G=linearize(F)*.2126729+linearize(q)*.7151522+linearize(W)*.072175,K=fclamp(Y),J=fclamp(G),ee=J>K;return Math.abs(J-K)<deltaYmin?j=0:ee?(Q=J**normBG-K**normTXT,j=Q*scaleBoW):(Q=J**revBG-K**revTXT,j=Q*scaleWoB),Math.abs(j)<loClip?U=0:j>0?U=j-loBoWoffset:U=j+loBoWoffset,U*100}function contrastMichelson(X,O){X=getColor(X),O=getColor(O);let Q=Math.max(getLuminance(X),0),j=Math.max(getLuminance(O),0);j>Q&&([Q,j]=[j,Q]);let U=Q+j;return U===0?0:(Q-j)/U}const max=5e4;function contrastWeber(X,O){X=getColor(X),O=getColor(O);let Q=Math.max(getLuminance(X),0),j=Math.max(getLuminance(O),0);return j>Q&&([Q,j]=[j,Q]),j===0?max:(Q-j)/j}function contrastLstar(X,O){X=getColor(X),O=getColor(O);let Q=get(X,[lab,"l"]),j=get(O,[lab,"l"]);return Math.abs(Q-j)}const \u03B5$1=216/24389,\u03B53=24/116,\u03BA=24389/27;let white=WHITES.D65;var lab_d65=new ColorSpace({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white,base:XYZ_D65,fromBase(X){let Q=X.map((j,U)=>j/white[U]).map(j=>j>\u03B5$1?Math.cbrt(j):(\u03BA*j+16)/116);return[116*Q[1]-16,500*(Q[0]-Q[1]),200*(Q[1]-Q[2])]},toBase(X){let O=[];return O[1]=(X[0]+16)/116,O[0]=X[1]/500+O[1],O[2]=O[1]-X[2]/200,[O[0]>\u03B53?Math.pow(O[0],3):(116*O[0]-16)/\u03BA,X[0]>8?Math.pow((X[0]+16)/116,3):X[0]/\u03BA,O[2]>\u03B53?Math.pow(O[2],3):(116*O[2]-16)/\u03BA].map((j,U)=>j*white[U])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});const phi=Math.pow(5,.5)*.5+.5;function contrastDeltaPhi(X,O){X=getColor(X),O=getColor(O);let Q=get(X,[lab_d65,"l"]),j=get(O,[lab_d65,"l"]),U=Math.abs(Math.pow(Q,phi)-Math.pow(j,phi)),F=Math.pow(U,1/phi)*Math.SQRT2-40;return F<7.5?0:F}var contrastMethods=Object.freeze({__proto__:null,contrastAPCA,contrastDeltaPhi,contrastLstar,contrastMichelson,contrastWCAG21,contrastWeber});function contrast(X,O,Q={}){isString(Q)&&(Q={algorithm:Q});let{algorithm:j,...U}=Q;if(!j){let F=Object.keys(contrastMethods).map(q=>q.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${F}`)}X=getColor(X),O=getColor(O);for(let F in contrastMethods)if("contrast"+j.toLowerCase()===F.toLowerCase())return contrastMethods[F](X,O,U);throw new TypeError(`Unknown contrast algorithm: ${j}`)}function uv(X){let[O,Q,j]=getAll(X,XYZ_D65),U=O+15*Q+3*j;return[4*O/U,9*Q/U]}function xy(X){let[O,Q,j]=getAll(X,XYZ_D65),U=O+Q+j;return[O/U,Q/U]}function register$1(X){Object.defineProperty(X.prototype,"uv",{get(){return uv(this)}}),Object.defineProperty(X.prototype,"xy",{get(){return xy(this)}})}var chromaticity=Object.freeze({__proto__:null,register:register$1,uv,xy});function deltaE76(X,O){return distance(X,O,"lab")}const \u03C0=Math.PI,d2r=\u03C0/180;function deltaECMC(X,O,{l:Q=2,c:j=1}={}){let[U,F,q]=lab.from(X),[,W,Y]=lch.from(lab,[U,F,q]),[G,K,J]=lab.from(O),ee=lch.from(lab,[G,K,J])[1];W<0&&(W=0),ee<0&&(ee=0);let te=U-G,re=W-ee,oe=F-K,se=q-J,ne=oe**2+se**2-re**2,de=.511;U>=16&&(de=.040975*U/(1+.01765*U));let he=.0638*W/(1+.0131*W)+.638,fe;Number.isNaN(Y)&&(Y=0),Y>=164&&Y<=345?fe=.56+Math.abs(.2*Math.cos((Y+168)*d2r)):fe=.36+Math.abs(.4*Math.cos((Y+35)*d2r));let Oe=Math.pow(W,4),ce=Math.sqrt(Oe/(Oe+1900)),me=he*(ce*fe+1-ce),we=(te/(Q*de))**2;return we+=(re/(j*he))**2,we+=ne/me**2,Math.sqrt(we)}const Yw$1=203;var XYZ_Abs_D65=new ColorSpace({id:"xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:XYZ_D65,fromBase(X){return X.map(O=>Math.max(O*Yw$1,0))},toBase(X){return X.map(O=>Math.max(O/Yw$1,0))}});const b$1=1.15,g=.66,n$1=2610/2**14,ninv$1=2**14/2610,c1$2=3424/2**12,c2$2=2413/2**7,c3$2=2392/2**7,p=1.7*2523/2**5,pinv=2**5/(1.7*2523),d=-.56,d0=16295499532821565e-27,XYZtoCone_M=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],ConetoXYZ_M=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],ConetoIab_M=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],IabtoCone_M=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var Jzazbz=new ColorSpace({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:XYZ_Abs_D65,fromBase(X){let[O,Q,j]=X,U=b$1*O-(b$1-1)*j,F=g*Q-(g-1)*O,W=multiplyMatrices(XYZtoCone_M,[U,F,j]).map(function(ee){let te=c1$2+c2$2*(ee/1e4)**n$1,re=1+c3$2*(ee/1e4)**n$1;return(te/re)**p}),[Y,G,K]=multiplyMatrices(ConetoIab_M,W);return[(1+d)*Y/(1+d*Y)-d0,G,K]},toBase(X){let[O,Q,j]=X,U=(O+d0)/(1+d-d*(O+d0)),q=multiplyMatrices(IabtoCone_M,[U,Q,j]).map(function(ee){let te=c1$2-ee**pinv,re=c3$2*ee**pinv-c2$2;return 1e4*(te/re)**ninv$1}),[W,Y,G]=multiplyMatrices(ConetoXYZ_M,q),K=(W+(b$1-1)*G)/b$1,J=(Y+(g-1)*K)/g;return[K,J,G]},formats:{color:{}}}),jzczhz=new ColorSpace({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Jzazbz,fromBase(X){let[O,Q,j]=X,U;const F=2e-4;return Math.abs(Q)<F&&Math.abs(j)<F?U=NaN:U=Math.atan2(j,Q)*180/Math.PI,[O,Math.sqrt(Q**2+j**2),constrain(U)]},toBase(X){return[X[0],X[1]*Math.cos(X[2]*Math.PI/180),X[1]*Math.sin(X[2]*Math.PI/180)]},formats:{color:{}}});function deltaEJz(X,O){let[Q,j,U]=jzczhz.from(X),[F,q,W]=jzczhz.from(O),Y=Q-F,G=j-q;Number.isNaN(U)&&Number.isNaN(W)?(U=0,W=0):Number.isNaN(U)?U=W:Number.isNaN(W)&&(W=U);let K=U-W,J=2*Math.sqrt(j*q)*Math.sin(K/2*(Math.PI/180));return Math.sqrt(Y**2+G**2+J**2)}const c1$1=3424/4096,c2$1=2413/128,c3$1=2392/128,m1=2610/16384,m2=2523/32,im1=16384/2610,im2=32/2523,XYZtoLMS_M$1=[[.3592,.6976,-.0358],[-.1922,1.1004,.0755],[.007,.0749,.8434]],LMStoIPT_M=[[2048/4096,2048/4096,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],IPTtoLMS_M=[[.9999888965628402,.008605050147287059,.11103437159861648],[1.00001110343716,-.008605050147287059,-.11103437159861648],[1.0000320633910054,.56004913547279,-.3206339100541203]],LMStoXYZ_M$1=[[2.0701800566956137,-1.326456876103021,.20661600684785517],[.3649882500326575,.6804673628522352,-.04542175307585323],[-.04959554223893211,-.04942116118675749,1.1879959417328034]];var ictcp=new ColorSpace({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:XYZ_Abs_D65,fromBase(X){let O=multiplyMatrices(XYZtoLMS_M$1,X);return LMStoICtCp(O)},toBase(X){let O=ICtCptoLMS(X);return multiplyMatrices(LMStoXYZ_M$1,O)},formats:{color:{}}});function LMStoICtCp(X){let O=X.map(function(Q){let j=c1$1+c2$1*(Q/1e4)**m1,U=1+c3$1*(Q/1e4)**m1;return(j/U)**m2});return multiplyMatrices(LMStoIPT_M,O)}function ICtCptoLMS(X){return multiplyMatrices(IPTtoLMS_M,X).map(function(j){let U=Math.max(j**im2-c1$1,0),F=c2$1-c3$1*j**im2;return 1e4*(U/F)**im1})}function deltaEITP(X,O){let[Q,j,U]=ictcp.from(X),[F,q,W]=ictcp.from(O);return 720*Math.sqrt((Q-F)**2+.25*(j-q)**2+(U-W)**2)}const XYZtoLMS_M=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],LMStoXYZ_M=[[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],LMStoLab_M=[[.2104542553,.793617785,-.0040720468],[1.9779984951,-2.428592205,.4505937099],[.0259040371,.7827717662,-.808675766]],LabtoLMS_M=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]];var OKLab=new ColorSpace({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"L"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:XYZ_D65,fromBase(X){let Q=multiplyMatrices(XYZtoLMS_M,X).map(j=>Math.cbrt(j));return multiplyMatrices(LMStoLab_M,Q)},toBase(X){let Q=multiplyMatrices(LabtoLMS_M,X).map(j=>j**3);return multiplyMatrices(LMStoXYZ_M,Q)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function deltaEOK(X,O){let[Q,j,U]=OKLab.from(X),[F,q,W]=OKLab.from(O),Y=Q-F,G=j-q,K=U-W;return Math.sqrt(Y**2+G**2+K**2)}var deltaEMethods={deltaE76,deltaECMC,deltaE2000,deltaEJz,deltaEITP,deltaEOK};function deltaE(X,O,Q={}){isString(Q)&&(Q={method:Q});let{method:j=defaults.deltaE,...U}=Q;X=getColor(X),O=getColor(O);for(let F in deltaEMethods)if("deltae"+j.toLowerCase()===F.toLowerCase())return deltaEMethods[F](X,O,U);throw new TypeError(`Unknown deltaE method: ${j}`)}function lighten(X,O=.25){let j=[ColorSpace.get("oklch","lch"),"l"];return set(X,j,U=>U*(1+O))}function darken(X,O=.25){let j=[ColorSpace.get("oklch","lch"),"l"];return set(X,j,U=>U*(1-O))}var variations=Object.freeze({__proto__:null,darken,lighten});function mix(X,O,Q=.5,j={}){[X,O]=[getColor(X),getColor(O)],type(Q)==="object"&&([Q,j]=[.5,Q]);let{space:U,outputSpace:F,premultiplied:q}=j;return range(X,O,{space:U,outputSpace:F,premultiplied:q})(Q)}function steps(X,O,Q={}){let j;isRange(X)&&([j,Q]=[X,O],[X,O]=j.rangeArgs.colors);let{maxDeltaE:U,deltaEMethod:F,steps:q=2,maxSteps:W=1e3,...Y}=Q;j||([X,O]=[getColor(X),getColor(O)],j=range(X,O,Y));let G=deltaE(X,O),K=U>0?Math.max(q,Math.ceil(G/U)+1):q,J=[];if(W!==void 0&&(K=Math.min(K,W)),K===1)J=[{p:.5,color:j(.5)}];else{let ee=1/(K-1);J=Array.from({length:K},(te,re)=>{let oe=re*ee;return{p:oe,color:j(oe)}})}if(U>0){let ee=J.reduce((te,re,oe)=>{if(oe===0)return 0;let se=deltaE(re.color,J[oe-1].color,F);return Math.max(te,se)},0);for(;ee>U;){ee=0;for(let te=1;te<J.length&&J.length<W;te++){let re=J[te-1],oe=J[te],se=(oe.p+re.p)/2,ne=j(se);ee=Math.max(ee,deltaE(ne,re.color),deltaE(ne,oe.color)),J.splice(te,0,{p:se,color:j(se)}),te++}}}return J=J.map(ee=>ee.color),J}function range(X,O,Q={}){if(isRange(X)){let[Y,G]=[X,O];return range(...Y.rangeArgs.colors,{...Y.rangeArgs.options,...G})}let{space:j,outputSpace:U,progression:F,premultiplied:q}=Q;X=getColor(X),O=getColor(O),X=clone(X),O=clone(O);let W={colors:[X,O],options:Q};if(j?j=ColorSpace.get(j):j=ColorSpace.registry[defaults.interpolationSpace]||X.space,U=U?ColorSpace.get(U):j,X=to(X,j),O=to(O,j),X=toGamut(X),O=toGamut(O),j.coords.h&&j.coords.h.type==="angle"){let Y=Q.hue=Q.hue||"shorter",G=[j,"h"],[K,J]=[get(X,G),get(O,G)];[K,J]=adjust(Y,[K,J]),set(X,G,K),set(O,G,J)}return q&&(X.coords=X.coords.map(Y=>Y*X.alpha),O.coords=O.coords.map(Y=>Y*O.alpha)),Object.assign(Y=>{Y=F?F(Y):Y;let G=X.coords.map((ee,te)=>{let re=O.coords[te];return interpolate(ee,re,Y)}),K=interpolate(X.alpha,O.alpha,Y),J={space:j,coords:G,alpha:K};return q&&(J.coords=J.coords.map(ee=>ee/K)),U!==j&&(J=to(J,U)),J},{rangeArgs:W})}function isRange(X){return type(X)==="function"&&!!X.rangeArgs}defaults.interpolationSpace="lab";function register(X){X.defineFunction("mix",mix,{returns:"color"}),X.defineFunction("range",range,{returns:"function<color>"}),X.defineFunction("steps",steps,{returns:"array<color>"})}var interpolation=Object.freeze({__proto__:null,isRange,mix,range,register,steps}),HSL=new ColorSpace({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:sRGB,fromBase:X=>{let O=Math.max(...X),Q=Math.min(...X),[j,U,F]=X,[q,W,Y]=[NaN,0,(Q+O)/2],G=O-Q;if(G!==0){switch(W=Y===0||Y===1?0:(O-Y)/Math.min(Y,1-Y),O){case j:q=(U-F)/G+(U<F?6:0);break;case U:q=(F-j)/G+2;break;case F:q=(j-U)/G+4}q=q*60}return[q,W*100,Y*100]},toBase:X=>{let[O,Q,j]=X;O=O%360,O<0&&(O+=360),Q/=100,j/=100;function U(F){let q=(F+O/30)%12,W=Q*Math.min(j,1-j);return j-W*Math.max(-1,Math.min(q-3,9-q,1))}return[U(0),U(8),U(4)]},formats:{hsl:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),HSV=new ColorSpace({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:HSL,fromBase(X){let[O,Q,j]=X;Q/=100,j/=100;let U=j+Q*Math.min(j,1-j);return[O,U===0?0:200*(1-j/U),100*U]},toBase(X){let[O,Q,j]=X;Q/=100,j/=100;let U=j*(1-Q/2);return[O,U===0||U===1?0:(j-U)/Math.min(U,1-U)*100,U*100]},formats:{color:{toGamut:!0}}}),hwb=new ColorSpace({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:HSV,fromBase(X){let[O,Q,j]=X;return[O,j*(100-Q)/100,100-j]},toBase(X){let[O,Q,j]=X;Q/=100,j/=100;let U=Q+j;if(U>=1){let W=Q/U;return[O,0,W*100]}let F=1-j,q=F===0?0:1-Q/F;return[O,q*100,F*100]},formats:{hwb:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]}}});const toXYZ_M$2=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M$2=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]];var A98Linear=new RGBColorSpace({id:"a98rgb-linear",name:"Linear Adobe\xAE 98 RGB compatible",white:"D65",toXYZ_M:toXYZ_M$2,fromXYZ_M:fromXYZ_M$2}),a98rgb=new RGBColorSpace({id:"a98rgb",name:"Adobe\xAE 98 RGB compatible",base:A98Linear,toBase:X=>X.map(O=>Math.pow(Math.abs(O),563/256)*Math.sign(O)),fromBase:X=>X.map(O=>Math.pow(Math.abs(O),256/563)*Math.sign(O)),formats:{color:{id:"a98-rgb"}}});const toXYZ_M$1=[[.7977604896723027,.13518583717574031,.0313493495815248],[.2880711282292934,.7118432178101014,8565396060525902e-20],[0,0,.8251046025104601]],fromXYZ_M$1=[[1.3457989731028281,-.25558010007997534,-.05110628506753401],[-.5446224939028347,1.5082327413132781,.02053603239147973],[0,0,1.2119675456389454]];var ProPhotoLinear=new RGBColorSpace({id:"prophoto-linear",name:"Linear ProPhoto",white:"D50",base:XYZ_D50,toXYZ_M:toXYZ_M$1,fromXYZ_M:fromXYZ_M$1});const Et=1/512,Et2=16/512;var prophoto=new RGBColorSpace({id:"prophoto",name:"ProPhoto",base:ProPhotoLinear,toBase(X){return X.map(O=>O<Et2?O/16:O**1.8)},fromBase(X){return X.map(O=>O>=Et?O**(1/1.8):16*O)},formats:{color:{id:"prophoto-rgb"}}}),oklch=new ColorSpace({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:OKLab,fromBase(X){let[O,Q,j]=X,U;const F=2e-4;return Math.abs(Q)<F&&Math.abs(j)<F?U=NaN:U=Math.atan2(j,Q)*180/Math.PI,[O,Math.sqrt(Q**2+j**2),constrain(U)]},toBase(X){let[O,Q,j]=X,U,F;return isNaN(j)?(U=0,F=0):(U=Q*Math.cos(j*Math.PI/180),F=Q*Math.sin(j*Math.PI/180)),[O,U,F]},formats:{oklch:{coords:["<number> | <percentage>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});const Yw=203,n=2610/2**14,ninv=2**14/2610,m=2523/2**5,minv=2**5/2523,c1=3424/2**12,c2=2413/2**7,c3=2392/2**7;var rec2100Pq=new RGBColorSpace({id:"rec2100pq",name:"REC.2100-PQ",base:REC2020Linear,toBase(X){return X.map(function(O){return(Math.max(O**minv-c1,0)/(c2-c3*O**minv))**ninv*1e4/Yw})},fromBase(X){return X.map(function(O){let Q=Math.max(O*Yw/1e4,0),j=c1+c2*Q**n,U=1+c3*Q**n;return(j/U)**m})},formats:{color:{id:"rec2100-pq"}}});const a=.17883277,b=.28466892,c=.55991073,scale=3.7743;var rec2100Hlg=new RGBColorSpace({id:"rec2100hlg",cssid:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:REC2020Linear,toBase(X){return X.map(function(O){return O<=.5?O**2/3*scale:(Math.exp((O-c)/a)+b)/12*scale})},fromBase(X){return X.map(function(O){return O/=scale,O<=1/12?Math.sqrt(3*O):a*Math.log(12*O-b)+c})},formats:{color:{id:"rec2100-hlg"}}});const CATs={};hooks.add("chromatic-adaptation-start",X=>{X.options.method&&(X.M=adapt(X.W1,X.W2,X.options.method))});hooks.add("chromatic-adaptation-end",X=>{X.M||(X.M=adapt(X.W1,X.W2,X.options.method))});function defineCAT({id:X,toCone_M:O,fromCone_M:Q}){CATs[X]=arguments[0]}function adapt(X,O,Q="Bradford"){let j=CATs[Q],[U,F,q]=multiplyMatrices(j.toCone_M,X),[W,Y,G]=multiplyMatrices(j.toCone_M,O),K=[[W/U,0,0],[0,Y/F,0],[0,0,G/q]],J=multiplyMatrices(K,j.toCone_M);return multiplyMatrices(j.fromCone_M,J)}defineCAT({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599364,-1.1293816,.2198974],[.3611914,.6388125,-64e-7],[0,0,1.0890636]]});defineCAT({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]]});defineCAT({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238,-.278869,.1827452],[.454369,.4735332,.0720978],[-.0096276,-.005698,1.0153256]]});defineCAT({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.011254630531685,.1491867754444518],[.3875265432361372,.6214474419314753,-.008973985167612518],[-.01584149884933386,-.03412293802851557,1.04996443687785]]});Object.assign(WHITES,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]});WHITES.ACES=[.32168/.33767,1,(1-.32168-.33767)/.33767];const toXYZ_M=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],fromXYZ_M=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]];var ACEScg=new RGBColorSpace({id:"acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:WHITES.ACES,toXYZ_M,fromXYZ_M,formats:{color:{}}});const \u03B5=2**-16,ACES_min_nonzero=-.35828683,ACES_cc_max=(Math.log2(65504)+9.72)/17.52;var acescc=new RGBColorSpace({id:"acescc",name:"ACEScc",coords:{r:{range:[ACES_min_nonzero,ACES_cc_max],name:"Red"},g:{range:[ACES_min_nonzero,ACES_cc_max],name:"Green"},b:{range:[ACES_min_nonzero,ACES_cc_max],name:"Blue"}},referred:"scene",base:ACEScg,toBase(X){const O=-.3013698630136986;return X.map(function(Q){return Q<=O?(2**(Q*17.52-9.72)-\u03B5)*2:Q<ACES_cc_max?2**(Q*17.52-9.72):65504})},fromBase(X){return X.map(function(O){return O<=0?(Math.log2(\u03B5)+9.72)/17.52:O<\u03B5?(Math.log2(\u03B5+O*.5)+9.72)/17.52:(Math.log2(O)+9.72)/17.52})},formats:{color:{}}}),spaces=Object.freeze({__proto__:null,A98RGB:a98rgb,A98RGB_Linear:A98Linear,ACEScc:acescc,ACEScg,HSL,HSV,HWB:hwb,ICTCP:ictcp,JzCzHz:jzczhz,Jzazbz,LCH:lch,Lab:lab,Lab_D65:lab_d65,OKLCH:oklch,OKLab,P3,P3_Linear:P3Linear,ProPhoto:prophoto,ProPhoto_Linear:ProPhotoLinear,REC_2020:REC2020,REC_2020_Linear:REC2020Linear,REC_2100_HLG:rec2100Hlg,REC_2100_PQ:rec2100Pq,XYZ_ABS_D65:XYZ_Abs_D65,XYZ_D50,XYZ_D65,sRGB,sRGB_Linear:sRGBLinear});class Color{constructor(...O){let Q;O.length===1&&(Q=getColor(O[0]));let j,U,F;Q?(j=Q.space||Q.spaceId,U=Q.coords,F=Q.alpha):[j,U,F]=O,Object.defineProperty(this,"space",{value:ColorSpace.get(j),writable:!1,enumerable:!0,configurable:!0}),this.coords=U?U.slice():[0,0,0],this.alpha=F<1?F:1;for(let q=0;q<this.coords.length;q++)this.coords[q]==="NaN"&&(this.coords[q]=NaN);for(let q in this.space.coords)Object.defineProperty(this,q,{get:()=>this.get(q),set:W=>this.set(q,W)})}get spaceId(){return this.space.id}clone(){return new Color(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...O){let Q=display(this,...O);return Q.color=new Color(Q.color),Q}static get(O,...Q){return O instanceof Color?O:new Color(O,...Q)}static defineFunction(O,Q,j=Q){let{instance:U=!0,returns:F}=j,q=function(...W){let Y=Q(...W);if(F==="color")Y=Color.get(Y);else if(F==="function<color>"){let G=Y;Y=function(...K){let J=G(...K);return Color.get(J)},Object.assign(Y,G)}else F==="array<color>"&&(Y=Y.map(G=>Color.get(G)));return Y};O in Color||(Color[O]=q),U&&(Color.prototype[O]=function(...W){return q(this,...W)})}static defineFunctions(O){for(let Q in O)Color.defineFunction(Q,O[Q],O[Q])}static extend(O){if(O.register)O.register(Color);else for(let Q in O)Color.defineFunction(Q,O[Q])}}Color.defineFunctions({get,getAll,set,setAll,to,equals,inGamut,toGamut,distance,toString:serialize});Object.assign(Color,{util,hooks,WHITES,Space:ColorSpace,spaces:ColorSpace.registry,parse,defaults});for(let X of Object.keys(spaces))ColorSpace.register(spaces[X]);for(let X in ColorSpace.registry)addSpaceAccessors(X,ColorSpace.registry[X]);hooks.add("colorspace-init-end",X=>{var O;addSpaceAccessors(X.id,X),(O=X.aliases)==null||O.forEach(Q=>{addSpaceAccessors(Q,X)})});function addSpaceAccessors(X,O){Object.keys(O.coords),Object.values(O.coords).map(j=>j.name);let Q=X.replace(/-/g,"_");Object.defineProperty(Color.prototype,Q,{get(){let j=this.getAll(X);return typeof Proxy=="undefined"?j:new Proxy(j,{has:(U,F)=>{try{return ColorSpace.resolveCoord([O,F]),!0}catch{}return Reflect.has(U,F)},get:(U,F,q)=>{if(F&&typeof F!="symbol"&&!(F in U)){let{index:W}=ColorSpace.resolveCoord([O,F]);if(W>=0)return U[W]}return Reflect.get(U,F,q)},set:(U,F,q,W)=>{if(F&&typeof F!="symbol"&&!(F in U)||F>=0){let{index:Y}=ColorSpace.resolveCoord([O,F]);if(Y>=0)return U[Y]=q,this.setAll(X,U),!0}return Reflect.set(U,F,q,W)}})},set(j){this.setAll(X,j)},configurable:!0,enumerable:!0})}Color.extend(deltaEMethods);Color.extend({deltaE});Object.assign(Color,{deltaEMethods});Color.extend(variations);Color.extend({contrast});Color.extend(chromaticity);Color.extend(luminance);Color.extend(interpolation);Color.extend(contrastMethods);async function processManifest(X,O){let Q,j;return O!=null&&O.raw?(j=JSON.parse(O.raw),Q={manifest:j,manifestUrl:(O==null?void 0:O.url)||"",isEdited:!1,isGenerated:!1,siteUrl:X}):Q=await createManifestContextFromEmpty(X),Q}function processServiceWorker(X,O){var U;console.info("Testing Service Worker");const Q=((U=X==null?void 0:X.details)==null?void 0:U.features)||null;return[{result:(X==null?void 0:X.score)||!1,infoString:X!=null&&X.score?"Has a Service Worker":"Does not have a Service Worker",category:"highly recommended",member:"has_service_worker"},{result:(Q==null?void 0:Q.detectedPeriodicBackgroundSync)||!1,infoString:Q!=null&&Q.detectedPeriodicBackgroundSync?"Uses Periodic Sync for a rich offline experience":"Does not use Periodic Sync for a rich offline experience",category:"optional",member:"background_sync"},{result:(Q==null?void 0:Q.detectedBackgroundSync)||!1,infoString:Q!=null&&Q.detectedBackgroundSync?"Uses Background Sync for a rich offline experience":"Does not use Background Sync for a rich offline experience",category:"optional",member:"periodic_sync"},{result:(Q==null?void 0:Q.detectedPushRegistration)||!1,infoString:Q!=null&&Q.detectedPushRegistration?"Uses Push Notifications":"Does not use Push Notifications",category:"optional",member:"push_notifications"},{result:(O==null?void 0:O.score)||!1,infoString:O!=null&&O.score?"Has offline support":"Does not have offline support",category:"optional",member:"offline_support"}]}function processSecurity(X){var U,F,q;const O=((U=X==null?void 0:X.isOnHttps)==null?void 0:U.score)||((F=X==null?void 0:X.installableManifest)==null?void 0:F.score)||!1,Q=((q=X==null?void 0:X.noMixedContent)==null?void 0:q.score)||!1;return[{result:O,infoString:O?"Uses HTTPS":"Does not use HTTPS",category:"required",member:"https"},{result:O,infoString:O?"Has a valid SSL certificate":"Does not have a valid SSL certificate",category:"required",member:"ssl"},{result:Q,infoString:Q?"No mixed content on page":"Uses mixed content on page or http redirect on loads",category:"required",member:"mixed_content"}]}var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(X,O,Q,j)=>{for(var U=j>1?void 0:j?__getOwnPropDesc(O,Q):O,F=X.length-1,q;F>=0;F--)(q=X[F])&&(U=(j?q(O,Q,U):q(U))||U);return j&&U&&__defProp(O,Q,U),U};const valid_src="/assets/new/valid.svg",yield_src="/assets/new/yield.svg",stop_src="/assets/new/stop.svg",enhancement_src="/assets/new/enhancement.svg",yield_white_src="/assets/new/yield_white.svg",stop_white_src="/assets/new/stop_white.svg",enhancement_white_src="/assets/new/enhancement_white.svg";let AppReport=class extends s$9{constructor(){super(),this.appCard={siteName:"Site Name",description:"Your site's description",siteUrl:"Site URL",iconURL:"/assets/new/icon_placeholder.png",iconAlt:"Your sites logo"},this.CardStyles={backgroundColor:"#ffffff",color:"#292c3a"},this.BorderStyles={borderTop:"1px solid #00000033"},this.LastEditedStyles={color:"#000000b3"},this.manifestCard={},this.serviceWorkerCard={},this.securityCard={},this.siteURL="",this.swScore=0,this.maniScore=0,this.securityScore=0,this.errored=!1,this.errorMessage=void 0,this.errorLink=void 0,this.mql=window.matchMedia(`(min-width: ${BreakpointValues.largeUpper}px)`),this.isAppCardInfoLoading=!1,this.isDeskTopView=this.mql.matches,this.runningTests=!1,this.canPackageList=[!1,!1,!1],this.canPackage=!1,this.manifestEditorOpened=!1,this.swSelectorOpen=!1,this.lastTested="Last tested seconds ago",this.todoWindow=[],this.pageNumber=1,this.pageSize=5,this.validationResults=[],this.manifestTotalScore=0,this.manifestValidCounter=0,this.manifestRequiredCounter=0,this.manifestRecCounter=0,this.manifestDataLoading=!0,this.manifestMessage="",this.startingManifestEditorTab="info",this.focusOnME="",this.proxyLoadingImage=!1,this.serviceWorkerResults=[],this.swTotalScore=0,this.swValidCounter=0,this.swRequiredCounter=0,this.swRecCounter=0,this.swDataLoading=!0,this.swMessage="",this.secDataLoading=!0,this.showSecurityErrorBanner=!1,this.showSecurityWarningBanner=!1,this.securityIssues=[],this.enhancementTotalScore=0,this.requiredMissingFields=[],this.recMissingFields=[],this.optMissingFields=[],this.showConfirmationModal=!1,this.thingToAdd="",this.retestConfirmed=!1,this.readdDenied=!1,this.createdManifest=!1,this.allTodoItems=[],this.filteredTodoItems=[],this.filterList=[],this.openTooltips=[],this.stopShowingNotificationTooltip=!1,this.closeOpenTooltips=!0,this.darkMode=!1,this.possible_messages=[{messages:{green:"PWABuilder has analyzed your Web Manifest and your manifest is ready for packaging! Great job you have a perfect score!",yellow:"PWABuilder has analyzed your Web Manifest and your manifest is ready for packaging! We have identified recommended and optional fields that you can include to make your PWA better. Use our Manifest Editor to edit and update those fields.",blocked:"PWABuilder has analyzed your Web Manifest. You have one or more fields that need to be updated before you can package. Use our Manifest Editor to edit and update those fields. You can package for the store once you have a valid manifest.",none:"PWABuilder has analyzed your site and did not find a Web Manifest. Use our Manifest Editor to generate one. You can package for the store once you have a valid manifest."}},{messages:{green:"PWABuilder has analyzed your Service Worker and your Service Worker is ready for packaging! Great job you have a perfect score!",yellow:"PWABuilder has analyzed your Service Worker, and has identified additional features you can add to make your app feel more robust.",blocked:"",none:"PWABuilder has analyzed your site and did not find a Service Worker. Having a Service Worker is highly recommended by PWABuilder as it enables an array of features that can enhance your PWA. You can generate a Service Worker below or use our documentation to make your own."}},{messages:{green:"PWABuilder has done a basic analysis of your HTTPS setup and found no issues! Great job you have a perfect score!",yellow:"",blocked:"",none:"PWABuilder has done a basic analysis of your HTTPS setup and has identified required actions before you can package. Check out the documentation linked below to learn more."}}],this.specialManifestTodos={shortcuts:"Add contextual shortcuts to specific parts of your app",display_override:"Extend your app into the titlebar for a more native look and feel with display_override and window-controls-overlay",share_target:"Be a share_target for your users",file_handlers:"Be a default handler for certain filetypes with file_handlers",handle_links:"Open links as an app with handle_links",protocol_handlers:"Create a custom protocol_handler",edge_side_panel:"Increase reach by participating in the edge_side_panel",widgets:"Increase reach with widgets"},this.specialSWTodos={offline_support:"Allow users to use your app without internet connection",push_notifications:"Send notifications to you users even if your app is not running with push notifications",background_sync:"Ensure user actions and content is always in sync even if network connection is lost with background sync",periodic_sync:"Update your app in the background so it's ready next time the user opens it with periodic sync"},this.mql.addEventListener("change",X=>{this.isDeskTopView=X.matches})}static get styles(){return[i$8`

        /* Page wide */
        * {
          box-sizing: border-box;
          font-family: inherit;
        }

        :host {
          --sl-focus-ring-width: 3px;
          --sl-input-focus-ring-color: #4f3fb670;
          --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
          --sl-input-border-color-focus: #4F3FB6ac;
          --sl-input-font-family: Hind, sans-serif;
        }

        app-header::part(header) {
          position: sticky;
          top: 0;
        }

        #report-wrapper {
          width: 100%;
          display: flex;
          flex-direction: column;
          row-gap: 1.5em;
          align-items: center;
          background-color: #f2f3fb;
          padding: 20px;
        }

        #content-holder {
          max-width: 1300px;
          width: 100%;
          display: flex;
          flex-flow: row wrap;
          gap: 1em;
        }

        sl-details {
          width: 100%;
        }

        sl-details::part(header){
          padding: 5px 20px;
        }

        sl-details::part(summary-icon){
          display: none;
        }

        sl-details::part(content) {
          padding-top: .75em;
          padding-bottom: 1.5em;
        }

        sl-details:disabled{
          cursor: no-drop;
        }

        @keyframes bounce {
          0%,
          20%,
          50%,
          80%,
          100% {
            transform: translateY(0);
          }
          40% {
            transform: translateX(-5px);
          }
          60% {
            transform: translateX(5px);
          }
        }

        button:hover {
          cursor: pointer;
        }

        sl-progress-ring {
          height: fit-content;
          --track-width: 4px;
          --indicator-width: 8px;
          --size: 85px;
          font-size: var(--subheader-font-size);
          position: relative;
        }

        sl-progress-ring::part(label){
          color: var(--primary-color);
          font-weight: bold;
          font-size: 18px;
        }

        sl-progress-ring::part(base) {
          border-radius: 50%;
        }

        .red {
          --indicator-color: var(--error-color);
        }

        .red::before {
          content: '';
          position: absolute;
          border-radius: 50%;
          top: calc(var(--indicator-width) / 2);
          left: calc(var(--indicator-width) / 2);
          width: calc(var(--size) - var(--indicator-width));
          height: calc(var(--size) - var(--indicator-width));
          background-color: #FFF3F3;
        }

        .yellow {
          --indicator-color: var(--warning-color);
        }

        .yellow::before {
          content: '';
          position: absolute;
          border-radius: 50%;
          top: calc(var(--indicator-width) / 2);
          left: calc(var(--indicator-width) / 2);
          width: calc(var(--size) - var(--indicator-width));
          height: calc(var(--size) - var(--indicator-width));
          background-color: #FFFAED;
        }

        .green {
          --indicator-color: var(--success-color);
        }

        .green::before {
          content: '';
          position: absolute;
          border-radius: 50%;
          top: calc(var(--indicator-width) / 2);
          left: calc(var(--indicator-width) / 2);
          width: calc(var(--size) - var(--indicator-width));
          height: calc(var(--size) - var(--indicator-width));
          background-color: #E3FFF2;
        }

        .counterRing {
          --indicator-color: #8976FF;
        }

        .counterRing::before {
          content: '';
          position: absolute;
          border-radius: 50%;
          top: calc(var(--indicator-width) / 2);
          left: calc(var(--indicator-width) / 2);
          width: calc(var(--size) - var(--indicator-width));
          height: calc(var(--size) - var(--indicator-width));
          background-color: #F1F3FF;
        }

        .macro_error {
          width: 3em;
          height: auto;
        }

        /* App Card and Packaging */
        #header-row {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          column-gap: 1em;
        }

        /* App Card */

        #app-card {
          width: 60%;
          height: 100%;
          border-radius: var(--card-border-radius);
          background-color: #ffffff;
          justify-content: space-between;
          box-shadow: 0px 4px 30px 0px #00000014;

          container: card / inline-size;
        }

        #app-card-header {
          display: grid;
          grid-template-rows: auto;
          gap: 10px;
          align-items: center;
          padding: 2em 2em 0;
          width: 100%;
        }

        #app-card-header.skeleton{
          grid-template-columns: 0fr 1fr;
          grid-template-rows: 1fr 0fr;
        }

        #app-card-header, #app-card-footer{
          font-size: 14px;
        }

        #app-card-header-col {
          display: grid;
          grid-template-columns: 1fr 4fr 1fr;
          gap: 15px;
        }

        #pwa-image-holder {
          height: fit-content;
          width: fit-content;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #ffffff;
          box-shadow: rgb(0 0 0 / 20%) 0px 4px 10px 0px;
          border-radius: 4px;
        }

        /* #app-image-skeleton {
          height: 85px;
          width: 85px;
          padding: 10px;
        } */

        #pwa-image-holder img{
          height: 115.05px;
          width: 115.05px;
          left: 113px;
          top: 118.951171875px;
          border-radius: 4px;
        }

        #app-card-share-cta {
          display: flex;
          height: 100%;
          flex-direction: column;
          justify-content: start;
        }

        #app-card-share-cta #share-button-desktop {
          height: 32px;
          width: 117.5439453125px;
          left: 509.4560546875px;
          top: 116.7421875px;
          border-radius: 20px;
          text-align: center;
          font-size: 12px;
        }

        #share-icon {
          height: 14px;
          width: 14.78px;
          left: 526.8994140625px;
          top: 125.322265625px;
          border-radius: 0px;

        }

        .proxy-loader {
          width: 48px;
          height: 48px;
          border: 5px solid var(--primary-color);
          border-bottom-color: transparent;
          border-radius: 50%;
          display: inline-block;
          box-sizing: border-box;
          animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
          0% {
              transform: rotate(0deg);
          }
          100% {
              transform: rotate(360deg);
          }
        }

        #site-name {
          margin: 0;
          font-weight: bold;
          font-size: calc(var(--subheader-font-size) + 4px);

          text-overflow: ellipsis;
          overflow: hidden;

        }

        #site-name, #site-url{
          /* 115 is app icon size, 117 is share button, 4em is padding, 30px is gap */
          max-width: calc(((100cqi - 115px) - 117px) - 4em - 30px);
        }

        #card-info {
          //overflow: hidden;
          white-space: nowrap;
          height: 100%;
          display: flex;
          flex-direction: column;
          width: 100%;
          gap: 5px;
        }

        #card-info p {
          margin: 0;
        }

        .visually-hidden {
          font-size: 0;
        }

        #site-url {
          text-overflow: ellipsis;
          overflow: hidden;
          white-space: nowrap;
          /* max-width: 200px; */
          font-weight: bold;
          font-size: 16px;
        }

        #app-card-desc {
          overflow-y:hidden;
          text-overflow:ellipsis;
          font-size: 14px;
          font-weight: 500;
          line-height: 18px;
          white-space: break-spaces;
        }
        #app-card-desc-mobile {
          display: none;
        }

        #app-card-footer {
          padding: 0em 2em;
          min-height: 41px;
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-end;
          border-bottom-left-radius: 10px;
          border-bottom-right-radius: 10px;
          border-top: 1px solid rgb(242 243 251 / 20%);
        }

        #last-edited {
          white-space: nowrap;
          margin: 0;
        }

        #test, #last-edited {
          font-size: 12px;
          line-height: 18px;
        }


        #test.in-progress{
          color: #767676;

          align-items: center;
          display: flex;
          gap: 10px;
          line-height: 10px;
        }

        #test img {
          height: 18px;
        }

        #retest {
          display: flex;
          align-items: center;
          column-gap: 10px;
          border: none;
          background-color: transparent;
        }

        #retest:disabled{
          cursor: no-drop;
        }

        #app-image-skeleton {
          height: 115px;
          width: 115px;
          --border-radius: 4px;
        }

        .app-info-skeleton {
          width: 100%;
          margin-bottom: 10px;
        }

        .app-info-skeleton-half {
          width: 25%;
          height: 20px;
          margin: 10px 0;
        }

        /* Packaging Box */
        #app-actions {
          width: 40%;
          height: 100%;
          border-radius: var(--card-border-radius);
          background-color: #ffffff;
          align-items: center;
          justify-content: space-between;
          box-shadow: 0px 4px 30px 0px #00000014;
        }

        #package {
          row-gap: .5em;
          width: 100%;
          padding: 2em;
        }

        #pfs, #pfs-disabled { // pfs + disabled
          white-space: nowrap;
          padding: var(--button-padding);
          border-radius: var(--button-border-radius);
          font-size: var(--button-font-size);
          font-weight: var(--font-bold);
          border: 1px solid transparent;
          color: #ffffff;
          white-space: nowrap;
        }

        #test-download:disabled {
          cursor: no-drop;
          color: #757575;
        }

        #test-download:disabled .arrow_link {
          border-color: #757575;
        }

        #pfs {
          background-color: var(--font-color);
        }

        #pfs-disabled{
          background-color: #C3C3C3;
        }

        #pfs-disabled:hover{
          cursor: no-drop;
        }

        #pfs:focus, #pfs:hover {
          box-shadow: var(--button-box-shadow);
          border: 1px solid #ffffff;
          outline: 2px solid #000000;
          background-color: rgba(0, 0, 0, 0.75);
        }

        .feedback-holder {
          display: flex;
          gap: .5em;
          padding: .5em;
          border-radius: 3px;
          width: 100%;
          word-break: break-word;
        }

        .type-error {
          align-items: flex-start;
          background-color: #FAEDF1;
          border-left: 4px solid var(--error-color);
        }

        .type-warning {
          align-items: flex-start;
          background-color: var(--warning-accent-color);
          border-left: 4px solid var(--warning-color);
        }

        .feedback-holder p {
          margin: 0;
          font-size: 14px;
        }

        .feedback-holder img {
          margin-top: 3px;
        }

        .error-title {
          font-weight: bold;
        }

        .error-actions {
          display: flex;
          align-items: center;
          gap: 1em;
          margin-top: .25em;
        }

        .error-actions > * {
          all: unset;
          color: var(--font-color);
          font-weight: bold;
          font-size: 14px;
          border-bottom: 1px solid transparent;
        }

        .error-actions > *:hover {
          cursor: pointer;
          border-bottom: 1px solid var(--font-color);
        }

        .error-desc {
          max-height: 175px;
          overflow-y: auto;
          line-height: normal;
        }

        #share-card {
          width: 100%;
          background: #ffffff;
          border-radius: 10px;

          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px 22px;
          position: relative;
        }

        #share-card-mani{
          position: absolute;
          left: 10px;
          bottom: 0;
          height: 85px;
        }

        #share-card-content{
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
        }

        #share-card-text {
          font-size: var(--subheader-font-size);
          color: var(--primary-color);
          font-weight: bold;
          margin-left: 115px;
        }

        #share-card-actions {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 15px;
        }

        .share-banner-buttons {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 5px;
          padding: 10px 20px;
          background: transparent;
          color: var(--primary-color);
          font-size: var(--button-font-size);
          font-weight: bold;
          border: 1px solid var(--primary-color);
          border-radius: var(--button-border-radius);
          white-space: nowrap;
        }
        .share-banner-buttons:hover {
          box-shadow: var(--button-box-shadow)
        }

        #share-button:disabled {
          color: #C3C3C3;
          border-color: #C3C3C3;
        }

        #share-button:disabled:hover {
          cursor: no-drop;
          box-shadow: none;
        }

        .banner-button-icons {
          width: 20px;
          height: auto;
        }
        #share-card-text {
          font-size: var(--subheader-font-size);
          color: var(--primary-color);
          font-weight: bold;
          margin-left: 115px;
        }

        #share-card-actions {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 15px;
        }

        .share-banner-buttons {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 5px;
          padding: 10px 20px;
          background: transparent;
          color: var(--primary-color);
          font-size: var(--button-font-size);
          font-weight: bold;
          border: 1px solid var(--primary-color);
          border-radius: var(--button-border-radius);
          white-space: nowrap;
        }
        .share-banner-buttons:hover {
          box-shadow: var(--button-box-shadow)
        }

        #share-button-desktop:disabled, #share-button-mobile:disabled {
          color: #C3C3C3;
          border-color: #C3C3C3;
        }

        #share-button-desktop:disabled:hover, #share-button-mobile:disabled:hover {
          cursor: no-drop;
          box-shadow: none;
        }

        .banner-button-icons {
          width: 20px;
          height: auto;
        }



        .mani-tooltip {
          --sl-tooltip-padding: 0;
        }

        .mani-tooltip::part(body){
          background-color: #ffffff;
        }

        .mani-tooltip::part(base__arrow){
          background-color: #ffffff;
          z-index: 10;
        }

        .mani-tooltip-content {
          padding: 0;
          display: flex;
          max-width: 325px;
          align-items: center;
          justify-content: center;
          border-radius: var(--card-border-radius);
          gap: .5em;
          background-color: #ffffff;
          color: var(--font-color);
          box-shadow: rgb(0 0 0 / 15%) 0px 0px 40px;
        }

        .mani-tooltip-content img {
          align-self: flex-end;
          justify-self: flex-end;
          height: 50px;
          width: auto;
        }

        .mani-tooltip-p {
          margin: 0;
          padding: .5em;
          font-size: 14px;
        }

        #cl-mani-tooltip-content {
          padding: 5px 10px;
          font-size: 10px;
        }

        #test-download {
          background-color: transparent;
          color: var(--primary-color);
          border: none;
          width: fit-content;
          display: flex;
          column-gap: 0.5em;
          align-items: center;

          font-weight: bold;
          white-space: nowrap;
          font-size: var(--arrow-link-font-size);
        }

        #test-download:hover img {
          animation: bounce 1s;
        }

        #actions-footer {
          background-color: #ffffff;
          width: 100%;
          column-gap: 0.75em;
          border-bottom-left-radius: 10px;
          border-bottom-right-radius: 10px;
          padding: .5em 1em;
          border-top: 1px solid #E5E5E5;
        }

        #actions-footer img {
          height: 15px;
          width: auto;
        }

        #actions-footer p {
          margin: 0;
          font-size: 12px;
          font-weight: bold;
        }

        /* Action Items Card */
        #todo {
          width: 100%;
          box-shadow: 0px 4px 30px 0px #00000014;
          border-radius: var(--card-border-radius);
        }

        #todo-detail::part(base) {
          border-radius: var(--card-border-radius);
          border: none;
        }

        #todo-detail::part(header) {
          height: 60px;
        }

        #todo-detail::part(summary) {
          color: var(--primary-color);
          font-size: 20px;
          font-weight: bold;
        }

        #todo-detail::part(content){
          padding-top: 0;
          padding-bottom: 1em;
        }

        #todo-summary-left {
          display: flex;
          align-items: center;
          gap: 25px;
        }

        #todo-summary-left > h2 {
          font-size: var(--subheader-font-size);
        }

        #pagination-actions {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          margin-top: 10px;
          gap: .25em;
        }

        .pageToggles {
          height: 15px;
          color: var(--primary-color);
        }

        #dots {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: .25em;
        }

        #dots img {
          height: 10px;
          width: auto;
        }

        #pagination-actions > sl-icon:hover{
          cursor:pointer
        }

        .pagination-buttons{
          background-color: transparent;
          border: none;
          display: flex;
          align-items: center;
          justify-content: center;
          height: fit-content;
        }

        #pageStatus {
          font-size: 0;
          color: transparent;
          margin: 0;
        }

        #indicators-holder {
          display: flex;
          gap: .5em;
          align-items: center;
        }

        .indicator {
          display: flex;
          gap: 10px;
          align-items: center;
          background-color: #f1f1f1;
          padding: 5px 10px;
          border-radius: 6px;
          border: none;
        }

        .indicator p {
          line-height: 20px;
          margin: 0;
          font-size: 20px;
          color: var(--primary-color);
          font-weight: bold;
        }

        .indicator:focus {
          outline: 2px solid var(--primary-color);
        }

        .indicator.selected {
          background-color: var(--primary-color)
        }

        .indicator.selected:focus {
          outline: 2px solid #000000;
        }

        .indicator.selected p {
          color: #ffffff;
        }

        .indicator img {
          width: 16px;
          height: auto;
        }

        /* Manifest Card */
        #manifest {
          box-shadow: 0px 4px 30px 0px #00000014;
          background-color: #ffffff;
          border-radius: var(--card-border-radius);
          width: 100%;
        }

        #manifest-header {
          display: grid;
          grid-template-columns: 10fr 2fr 1fr;
          gap: 1em;
          border-bottom: 1px solid #c4c4c4;
          padding: 1em;
        }

        #mh-content{
          display: flex;
          gap: 1em;
          justify-content: space-between;
          width: 100%;
        }

        #mh-text {
          row-gap: 0.5em;
          width: 100%;
        }

        #mh-right {
          display: flex;
          column-gap: 2.5em;
          grid-area: 1/3;
          height: fit-content;
        }

        #mh-actions {
          row-gap: 1em;
          align-items: center;
        }

        #manifest-detail-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 1em;
        }

        .missing {
          font-size: 14px;
          margin: 0;
          font-weight: bold;
          white-space: no-wrap;
        }

        /* S cards */
        #two-cell-row {
          display: flex;
          flex-flow: row wrap;
          align-items: flex-start;
          justify-content: space-between;
          width: 100%;
        }

        #two-cell-row > * {
          width: 49%;
          height: 100%;
          background: #ffffff;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          align-self: flex-start;
          border-radius: var(--card-border-radius);
        }

        /* SW Card */
        #sw-header {
          row-gap: 0.5em;
          height: 100%;
          padding: 1em;
          min-height: 318px;
        }

        #swh-top {
          display: flex;
          justify-content: space-between;
          column-gap: 1em;
        }

        #swh-text {
          width: 100%;
          row-gap: 0.5em;
        }

        #sw-actions {
          row-gap: 1em;
          width: fit-content;
          align-items: flex-start;
          margin-top: auto;
        }

        #sw-header arrow-link {
          margin: 0;
          margin-top: auto;
        }

        /* Sec Card */

        /* Classes used widely */
        .flex-col {
          display: flex;
          flex-direction: column;
          position: relative;
        }

        .flex-col-center {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
        }

        .flex-center {
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .details-summary {
          display: flex;
          align-items: center;
          justify-content: space-between;
          width: 100%;
        }

        .dropdown_icon {
          transform: rotate(0deg);
          transition: transform .5s;
        }

        .card-header {
          font-size: calc(var(--subheader-font-size) + 4px);
          font-weight: bold;
          margin: 0;
          white-space: nowrap;
        }

        .card-desc {
          margin: 0;
          font-size: var(--card-body-font-size);
        }

        #test-download p {
          line-height: 1em;
        }

        arrow-link {
          margin-top: 20px;
          margin-bottom: 10px;
        }

        .arrow_link {
          margin: 0;
          border-bottom: 1px solid var(--primary-color);
          white-space: nowrap;
        }

        .arrow_anchor {
          text-decoration: none;
          font-size: var(--arrow-link-font-size);
          font-weight: bold;
          margin: 0px 0.5em 0px 0px;
          line-height: 1em;
          color: var(--primary-color);
          display: flex;
          column-gap: 10px;
          width: fit-content;
        }

        .arrow_anchor:visited {
          color: var(--primary-color);
        }

        .arrow_anchor:hover {
          cursor: pointer;
        }

        .arrow_anchor:hover img {
          animation: bounce 1s;
        }

        #report-wrapper .alternate {
          background: var(--secondary-color);
          color: var(--primary-color);
          border: 1px solid var(--primary-color);
          font-size: var(--button-font-size);
          font-weight: bold;
          padding: var(--button-padding);
          border-radius: var(--button-border-radius);
          white-space: nowrap;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        #report-wrapper .alternate:hover {
          box-shadow: var(--button-box-shadow)
        }

        #report-wrapper .alternate:disabled {
          color: #C3C3C3;
          border-color: #C3C3C3;
        }

        #report-wrapper .alternate:disabled:hover {
          cursor: no-drop;
          box-shadow: none;
        }

        .detail-list {
          display: flex;
          flex-direction: column;
          row-gap: 18px;
        }

        .detail-list-header {
          font-size: 18px;
          margin: 0;
          font-weight: bold;
        }

        .detail-list p:not(.detail-list-header){
          margin: 0;
        }

        .details::part(base) {
          border-radius: 0;
          border-bottom-left-radius: 10px;
          border-bottom-right-radius: 10px;
          border: none;
        }
        .details::part(summary) {
          font-weight: bold;
          font-size: var(--card-body-font-size);
        }
        .details::part(header) {
          height: 40px;
          padding: 5px 20px;
        }

        .detail-grid {
          display: flex;
          flex-direction: column;
          row-gap: 0.5em;
        }

        #sec-header {
          row-gap: .5em;
          padding: 1em;
          min-height: 318px;
          height: 100%;
        }
        #sec-top {
          display: flex;
          column-gap: 1em;
          justify-content: space-between;
        }
        #sec-text {
          width: 100%;
          row-gap: 0.5em;
        }
        #sec-actions {
          row-gap: 1em;
          width: 66%;
          margin-top: auto;
        }
        #sec-header arrow-link {
          margin: 0;
          margin-top: auto;
        }

        .icons-holder {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          grid-template-rows: repeat(2, 1fr);
          place-content: center;
          gap: 25px;
        }

        .icons-holder.sw {
          grid-template-columns: repeat(4, 1fr);
          grid-template-rows: repeat(1, 1fr);
        }

        .icon-and-name {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
        }

        .circle-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          border-radius: 50%;
          position: relative;
          border: 2px solid transparent
        }

        .circle-icon-img {
          height: 60px;
          width: 60px;
          width: auto;
        }

        .icon-and-name p {
          color: var(--font-color);
          font-size: 12px;
          margin: 0;
          text-align: center;
        }

        .circle-icon:hover {
          cursor: pointer;
          border: 2px solid #8976FF;
        }

        .valid-marker {
          height: 13px;
          width: 13px;
          position: absolute;
          bottom: 0;
          right: 0;
        }

        .progressRingSkeleton::part(base) {
          height: 100px;
          width: 100px;
          border-radius: 50%;
        }

        .test-result {
          display: flex;
          gap: .5em;
          align-items: center;
        }
        .test-result p {
          font-weight: normal;
          font-size: 14px;
        }
        .test-result img {
          height: 17px;
        }
        .summary-skeleton {
          width: 200px;
          --color: #d0d0d3
        }
        .desc-skeleton {
          --color: #d0d0d3
        }
        .desc-skeleton.half {
          width: 50%;
        }
        .desc-skeleton::part(base), .summary-skeleton::part(base), .app-info-skeleton::part(base){
          min-height: .8rem;
        }
        .app-info-skeleton-half::part(base){
          min-height: .8rem;
          max-height: .8rem;
        }
        .gap {
          gap: .5em;
        }
        sl-tooltip::part(base){
          --sl-tooltip-font-size: 14px;
        }

        .animate{
          animation-delay: 1s;
          animation: shake 1s cubic-bezier(.36,.07,.19,.97) both;
          transform: translate3d(0, 0, 0);
          backface-visibility: hidden;
          perspective: 1000px;
        }

        @keyframes shake {
          10%, 90% {
            transform: translate3d(-1px, 0, 0);
          }

          20%, 80% {
            transform: translate3d(2px, 0, 0);
          }

          30%, 50%, 70% {
            transform: translate3d(-4px, 0, 0);
          }

          40%, 60% {
            transform: translate3d(4px, 0, 0);
          }
        }

        .dialog::part(body){
          padding-top: 0;
          padding-bottom: 0;
        }
        .dialog::part(title){
          display: none;
        }
        .dialog::part(panel) {
          display: flex;
          flex-direction: column;
          align-items: center;
          width: 65%;
          position: relative;
        }
        .dialog::part(overlay){
          backdrop-filter: blur(10px);
        }
        .dialog::part(close-button__base){
          position: absolute;
          top: 5px;
          right: 5px;
        }

        /* Retest modal */
        #confirmationButtons {
          display: flex;
          justify-content: space-evenly;
          margin-bottom: 1em;
        }

        #confirmationButtons > *{
         width: 45%;
        }

        .loader {
          width: 12px;
          height: 12px;
          border-radius: 50%;
          display: block;
          margin:15px auto;
          position: relative;
          color: var(--primary-color);
          box-sizing: border-box;
          animation: animloader 2s linear infinite;
          grid-row: 3;
        }

        @keyframes animloader {
          0% {
            box-shadow: 14px 0 0 -2px,  38px 0 0 -2px,  -14px 0 0 -2px,  -38px 0 0 -2px;
          }
          25% {
            box-shadow: 14px 0 0 -2px,  38px 0 0 -2px,  -14px 0 0 -2px,  -38px 0 0 2px;
          }
          50% {
            box-shadow: 14px 0 0 -2px,  38px 0 0 -2px,  -14px 0 0 2px,  -38px 0 0 -2px;
          }
          75% {
            box-shadow: 14px 0 0 2px,  38px 0 0 -2px,  -14px 0 0 -2px,  -38px 0 0 -2px;
          }
          100% {
            box-shadow: 14px 0 0 -2px,  38px 0 0 2px,  -14px 0 0 -2px,  -38px 0 0 -2px;
          }
        }

        .loader-round {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          position: relative;
          flex-shrink: 0;
          animation: rotate 1s linear infinite
        }
        .loader-round::before {
          content: "";
          box-sizing: border-box;
          position: absolute;
          inset: 0px;
          border-radius: 50%;
          border: 2px solid #D6D6D6;
          /* animation: prixClipFix 2s linear infinite, 2s ease-in-out 0.5s infinite normal none running pulse; */
          clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 50%)
        }

        .loader-round.large{
          width: 96px;
          height: 96px;
          margin: 2px;
        }
        .loader-round.large::before{
          border-width: 4px;
          animation: 2s ease-in-out 0.5s infinite normal none running pulse;
        }

        .loader-round.skeleton{
          animation: none;
          /* clip-path: none; */
        }
        .loader-round.skeleton::before{
          /* animation: 2s ease-in-out 0.5s infinite normal none running pulse; */
          clip-path: none;
        }

        @keyframes rotate {
          100%   {transform: rotate(360deg)}
        }

        @keyframes pulse {
          0% {
            opacity: 1;
          }
          50% {
            opacity: 0.4;
          }
          100% {
            opacity: 1;
          }
        }

        /* @keyframes prixClipFix {
            0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,15% 0)}
            25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
            50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
            75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
            100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 25%)}
        } */

        @media(max-width: 900px){
          #header-row {
            flex-direction: column-reverse;
            row-gap: 1em;
          }

          #app-card{
            width: 100%;
          }
          #app-actions {
            width: 100%;
          }

          #two-cell-row {
            flex-direction: column;
            row-gap: 1em;
          }
          #two-cell-row > * {
            width: 100%;
            height: unset;
          }
          #sw-header {
            min-height: unset;
          }
          #sec-header {
            min-height: unset;
          }
          #manifest-header {
            grid-template-columns: 4fr 4fr 1fr;
            grid-template-rows: min-content 1fr;
          }
          #mh-content {
            grid-area: 1 / 1 / 2 / 3;
          }
          #mh-actions {
            align-items: unset;
          }
          #sw-actions {
            width: 42%
          }
          #sw-actions button {
            width: 100%;
          }
        }

        /* @media(max-width: 700px){
          --button-padding
        } */
        @media(max-width: 376px){
          #pwa-image-holder {
            width: 61px !important;
          }
          #pwa-image-holder img {
            width: 55px !important;
          }
        }


        @media(max-width: 600px){
          #app-card-header-col {
            gap: 10px;
          }
          #pwa-image-holder {
            width: 90px;
            height: auto;
          }
          #pwa-image-holder img {
            width: 84px;
            height: auto;
          }
          #card-info {
            display: flex;
            flex-direction: column;
            justify-content: center;
          }
          #app-card-desc {
            max-width: 100%;
          }
          #share-button-desktop {
            display: none;
          }
          #share-button-mobile {
            display: flex;
          }
          #app-card-desc-mobile {
            display: flex;
            flex-direction: column;
          }
          .app-card-desc-desktop {
            display: none;
          }
          #site-name {
            font-size: 20px;
          }
          #site-url {
            margin-bottom: 8px !important;
          }

          #site-name, #site-url{
          /* 84 is app icon size, 4em is padding, 20px is gap */
          max-width: calc((100cqi - 84px) - 4em - 20px);
        }

          #app-card-share-cta {
            justify-content: start;
          }
          #app-card-share-cta #share-button-mobile {
            width: 100px;
          }
          #app-card-desc, .skeleton-desc {
            grid-column: 1 / 3;
          }

          #sw-actions {
            width: 100%;
          }
          #sw-actions button {
            margin-top: 20px;
            width: 100%;
          }

          #mh-actions {
            grid-area: 2/1/3/4;
          }
          #mh-actions button {
            width: 100%;
          }
        }

        ${mediumBreakPoint(i$8`
          #mh-content {
            flex-direction: column;
          }

          #mh-text {
            width: 100%;
          }

          #manifest-detail-grid{
            display: flex;
            flex-direction: column;
          }

          sl-progress-ring {
            --size: 75px;
            --track-width: 4px;
            --subheader-font-size: 14px;
          }
          .progressRingSkeleton::part(base), .loader-round.large  {
            width: 75px;
            height: 75px;
          }

          #share-card {
            flex-direction: column-reverse;
          }

          #share-card-content {
            flex-direction: column-reverse;
          }

          #share-card-text {
            margin-left: 0;
            margin-bottom: 0;
            text-align: center;
          }

          #share-card-mani {
            position: unset;
          }
        `)}

        ${smallBreakPoint(i$8`
          sl-progress-ring {
            --size: 75px;
            --track-width: 4px;
            --indicator-width: 6px;
            font-size: 14px;
          }

          .progressRingSkeleton::part(base), .loader-round.large {
            width: 75px;
            height: 75px;
          }

          #header-row {
            flex-direction: column-reverse;
            row-gap: 1.5em;
          }

          #app-card{
            width: 100%;
          }

          #app-actions {
            width: 100%;
          }

          #app-actions .arrow_link {
            font-size: 12px;
          }

          #retest img {
            height: 14px;
          }

          #package{
            width: 50%;
            row-gap: .75em;
          }

          #test-download {
            font-size: 10px;
          }

          #mh-content {
            flex-direction: column;
          }

          #mh-text {
            width: 100%;
          }
          #mh-actions {
            align-items: flex-start;
          }

          #manifest-detail-grid{
            display: flex;
            flex-direction: column;
          }

          #report-wrapper .alternate {
            font-size: 16px;
          }

          .half-width-cards {
            width: 100%;
          }

          #actions-footer p {
            font-size: 14px;
          }

          #actions-footer img {
            height: 18px;
            width: auto;
          }
          #last-edited {
            font-size: 14px;
          }
          #manifest-header, #sw-header, #sec-header {
            padding-bottom: 2.5em;
          }
          #manifest-header {
            gap: 0;
            row-gap: 20px;
          }
          #mh-actions, #sw-actions, #sec-header {
            row-gap: 1.5em;
          }

          #share-card {
            flex-direction: column-reverse;
          }

          #share-card-content {
            flex-direction: column-reverse;
          }

          #share-card-text {
            margin-left: 0;
            margin-bottom: 0;
            text-align: center;
          }

          #share-card-mani {
            position: unset;
          }

          .icons-holder {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            place-content: center;
            gap: 25px;
          }

          .icons-holder.sw {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
          }
        `)}
      `]}async connectedCallback(){super.connectedCallback();const X=window.matchMedia("(prefers-color-scheme: dark)");this.darkMode=X.matches;const Q=new URLSearchParams(location.search).get("site");Q&&(this.siteURL=Q,this.runAllTests(Q),sessionStorage.setItem("last_tested",JSON.stringify(new Date))),setInterval(()=>this.pollLastTested(),12e4),window.addEventListener("scroll",this.closeTooltipOnScroll.bind(this))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("scroll",this.closeTooltipOnScroll.bind(this))}firstUpdated(){this.rotateNinety("todo",void 0,!0)}pollLastTested(){let X=new Date(JSON.parse(sessionStorage.getItem("last_tested"))),Q=new Date().getTime()-X.getTime();if(Q<6e4)this.lastTested="Last tested seconds ago";else if(Q<36e5){let j=Math.floor(Q/6e4);this.lastTested="Last tested "+j+" minutes ago"}else if(Q<864e5){let j=Math.floor(Q/36e5);this.lastTested="Last tested "+j+" hours ago"}else{let j=Math.floor(Q/864e5);this.lastTested="Last tested "+j+" days ago"}this.requestUpdate()}async populateAppCard(X,O){var j;let Q=(O==null?void 0:O.replace(/(^\w+:|^)\/\//,""))||"";if(X&&!this.createdManifest){const U=X;let F=U.manifest.icons,q;if(F){let Y=0;for(let G=0;G<F.length;G++){let K=F[G],J=(j=K.sizes)==null?void 0:j.split("x")[0];if(J==="512"){q=K;break}else parseInt(J)>Y&&(Y=parseInt(J),q=K)}}let W;q?W=this.iconSrcListParse(q):W="/assets/icons/icon_512.png",this.proxyLoadingImage=!0,await this.testImage(W).then(function(G){},function(){W=`https://pwabuilder-safe-url.azurewebsites.net/api/getSafeUrl?url=${W}`}),this.proxyLoadingImage=!1,this.appCard={siteName:U.manifest.short_name?U.manifest.short_name:U.manifest.name?U.manifest.name:"Untitled App",siteUrl:Q,iconURL:W,iconAlt:"Your sites logo",description:U.manifest.description?U.manifest.description:"Add an app description to your manifest"}}else this.appCard={siteName:"Missing Name",siteUrl:Q,description:"Your manifest description is missing.",iconURL:"/assets/new/icon_placeholder.png",iconAlt:"A placeholder for you sites icon"}}testImage(X){return new Promise(function(j,U){const F=new Image;F.addEventListener("load",function(){j(this)}),F.addEventListener("error",function(){U()}),F.src=X})}pickTextColorBasedOnBgColorAdvanced(X,O,Q){var j=new Color(X).coords,U=j.map(W=>W<=.03928?W/12.92:Math.pow((W+.055)/1.055,2.4)),F=.2126*U[0]+.7152*U[1]+.0722*U[2];return F>.3?Q:O}async applyManifestContext(X,O,Q){this.manifestContext=await processManifest(X,{url:O,raw:Q}),this.createdManifest=this.manifestContext.isGenerated||!1,setManifestContext(this.manifestContext),this.isAppCardInfoLoading=!1,await this.populateAppCard(this.manifestContext,O)}async runAllTests(X){var Q,j,U,F,q,W,Y,G,K,J,ee,te,re,oe,se,ne;this.runningTests=!0,this.isAppCardInfoLoading=!0;let O={manifest:{},serviceWorker:{},manifestTodos:[],workerTodos:[]};this.reportAudit=void 0,FindWebManifest(X).then(async de=>{var he,fe,Oe,ce,me,we;((he=de==null?void 0:de.content)==null?void 0:he.raw)&&!((ce=(Oe=(fe=this.reportAudit)==null?void 0:fe.artifacts)==null?void 0:Oe.webAppManifest)!=null&&ce.raw)&&(O.manifest=de.content,await this.applyManifestContext(X,((me=de==null?void 0:de.content)==null?void 0:me.url)||void 0,(we=de==null?void 0:de.content)==null?void 0:we.raw),O.manifestTodos=await this.testManifest(),this.allTodoItems.push(...O.manifestTodos),this.requestUpdate())}),setTimeout(()=>this.closeOpenTooltips=!1,2e4),this.filteredTodoItems=this.allTodoItems,FindServiceWorker(X).then(async de=>{var he,fe,Oe,ce;((he=de==null?void 0:de.content)==null?void 0:he.url)&&!((ce=(Oe=(fe=this.reportAudit)==null?void 0:fe.audits)==null?void 0:Oe.serviceWorker)!=null&&ce.score)&&(await AuditServiceWorker(de.content.url).then(async me=>{console.log("content:",me.content),O.workerTodos=await this.testServiceWorker(processServiceWorker(me.content)),this.allTodoItems.push(...O.workerTodos),this.requestUpdate()}),O.serviceWorker=de.content)}),this.filteredTodoItems=this.allTodoItems;try{this.reportAudit=await Report(X)}catch(de){console.error(de),this.allTodoItems.push(...await this.testSecurity(processSecurity())),(Q=O.manifest)!=null&&Q.raw||(await this.applyManifestContext(X,void 0,void 0),this.allTodoItems.push(...await this.testManifest())),(j=O.serviceWorker)!=null&&j.raw||this.allTodoItems.push(...await this.testServiceWorker(processServiceWorker({score:!1,details:{}}))),this.filteredTodoItems=this.allTodoItems,this.runningTests=!1,this.requestUpdate();return}this.filteredTodoItems=this.allTodoItems,console.log(this.reportAudit),(q=(F=(U=this.reportAudit)==null?void 0:U.artifacts)==null?void 0:F.webAppManifest)!=null&&q.raw?(!O.manifest.raw||((W=this.reportAudit)==null?void 0:W.artifacts.webAppManifest.raw)!=O.manifest.raw)&&(await this.applyManifestContext(X,(K=(G=(Y=this.reportAudit)==null?void 0:Y.artifacts)==null?void 0:G.webAppManifest)==null?void 0:K.url,(te=(ee=(J=this.reportAudit)==null?void 0:J.artifacts)==null?void 0:ee.webAppManifest)==null?void 0:te.raw),O.manifestTodos=[]):(re=O.manifest)!=null&&re.raw||await this.applyManifestContext(X,void 0,void 0),this.allTodoItems=[],O.manifestTodos.length?this.allTodoItems.push(...O.manifestTodos):this.allTodoItems.push(...await this.testManifest()),this.allTodoItems.push(...await this.testServiceWorker(processServiceWorker((se=(oe=this.reportAudit)==null?void 0:oe.audits)==null?void 0:se.serviceWorker,this.reportAudit.audits.offlineSupport))),this.allTodoItems.push(...await this.testSecurity(processSecurity((ne=this.reportAudit)==null?void 0:ne.audits))),this.filteredTodoItems=this.allTodoItems,this.canPackage=this.canPackageList[0]&&this.canPackageList[1]&&this.canPackageList[2],this.runningTests=!1,this.requestUpdate()}async testManifest(){this.manifestDataLoading=!0;let X,O=[];return this.createdManifest&&(X={},O.push({card:"mani-details",field:"Open Manifest Modal",fix:"Edit and download your created manifest (Manifest not found before detection tests timed out)",status:"missing"})),X=JSON.parse(sessionStorage.getItem("PWABuilderManifest")).manifest,this.validationResults=await validateManifest(X,!0),this.validationResults.sort((Q,j)=>Q.valid&&!j.valid?1:j.valid&&!Q.valid?-1:Q.member.localeCompare(j.member)),this.manifestTotalScore=this.validationResults.length,this.manifestValidCounter=0,this.manifestRequiredCounter=0,this.enhancementTotalScore=0,this.manifestRecCounter=0,this.validationResults.forEach(Q=>{var j,U;if(Q.valid)Q.category==="enhancement"&&this.enhancementTotalScore++,this.manifestValidCounter++;else{let F="";if(Q.category==="required"||Q.testRequired?(F="required",this.manifestRequiredCounter++):Q.category==="recommended"&&this.manifestRecCounter++,F===""&&(F=Q.category),F==="enhancement"){let q=this.specialManifestTodos[Q.member];O.push({card:"mani-details",field:Q.member,displayString:(j=Q.displayString)!=null?j:"",fix:q,status:F})}else O.push({card:"mani-details",field:Q.member,displayString:(U=Q.displayString)!=null?U:"",fix:Q.errorString,status:F})}}),this.manifestRequiredCounter>0?this.canPackageList[0]=!1:this.canPackageList[0]=!0,this.manifestDataLoading=!1,sessionStorage.setItem("manifest_tests",JSON.stringify(this.validationResults)),O}async testServiceWorker(X){let O=[];const Q=X;return this.serviceWorkerResults=Q,this.swValidCounter=0,this.swRequiredCounter=0,this.serviceWorkerResults.forEach(j=>{if(j.result)this.swValidCounter++;else{let U="",F="sw-details",q=!1;switch(j.category){case"highly recommended":q=!0,U="highly recommended",this.swRecCounter++,O.push({card:F,field:"Open SW Modal",fix:"Add Service Worker to Base Package (SW not found before detection tests timed out)",status:U});break;case"recommended":U="recommended",this.swRecCounter++;break;case"required":U="required",this.swRequiredCounter++;break;default:U="optional"}if(!q){let W=this.specialSWTodos[j.member];O.push({card:F,field:j.member,fix:W,status:U})}}}),this.swRequiredCounter>0?this.canPackageList[1]=!1:this.canPackageList[1]=!0,this.swTotalScore=this.serviceWorkerResults.length,this.swDataLoading=!1,sessionStorage.setItem("service_worker_tests",JSON.stringify(Q)),O}async testSecurity(X){let O=[];const Q=X;return Q.forEach(j=>{j.result||(j.member==="https"?this.showSecurityErrorBanner=!0:j.member==="mixed_content"&&(this.showSecurityWarningBanner=!0),O.push({card:"security",field:j.member,fix:j.infoString,status:"required"}))}),this.canPackageList[2]=!this.showSecurityErrorBanner,this.secDataLoading=!1,sessionStorage.setItem("security_tests",JSON.stringify(Q)),this.requestUpdate(),O}async handleMissingFields(X){let O=await reportMissing(X),Q=[];this.requiredMissingFields,this.recMissingFields,this.optMissingFields=[],O.forEach(U=>{let F=!1;required_fields.includes(U)?(this.requiredMissingFields.push(U),this.manifestRequiredCounter++,Q.push({card:"mani-details",field:U,fix:`Add ${U} to your manifest`,status:"required"})):recommended_fields.includes(U)?(this.recMissingFields.push(U),this.manifestRecCounter++,F=!0):optional_fields.includes(U)&&this.optMissingFields.push(U),!this.createdManifest&&!required_fields.includes(U)&&Q.push({card:"mani-details",field:U,fix:`Add ${U} to your manifest`,status:F?"recommended":"optional"})});let j=O.length;return{details:Q,num_missing:j}}async retest(X){recordPWABuilderProcessStep("retest_clicked",AnalyticsBehavior.ProcessCheckpoint),this.retestConfirmed=!0,X&&await this.delay(3e3),this.shadowRoot.querySelector(".dialog").hide(),this.siteURL&&(this.resetData(),this.runAllTests(this.siteURL),sessionStorage.setItem("last_tested",JSON.stringify(new Date)))}delay(X){return new Promise(O=>setTimeout(O,X))}resetData(){this.manifestValidCounter=0,this.manifestTotalScore=0,this.manifestRequiredCounter=0,this.swValidCounter=0,this.swTotalScore=0,this.swRequiredCounter=0,this.enhancementTotalScore=0,this.allTodoItems=[],this.requiredMissingFields=[],this.recMissingFields=[],this.optMissingFields=[],this.validationResults=[],this.serviceWorkerResults=[],this.manifestDataLoading=!0,this.swDataLoading=!0,this.secDataLoading=!0,this.canPackage=!1,this.lastTested="Last tested seconds ago";let X=this.shadowRoot.querySelectorAll("sl-details");this.showConfirmationModal=!1,X.forEach(O=>{O.id!="todo-detail"?O.hide():O.show()}),this.retestConfirmed=!1,this.pageNumber=1}async openShareCardModal(){this.closeOpenTooltips=!1,await this.shadowRoot.querySelector("share-card").shadowRoot.querySelector(".dialog").show(),recordPWABuilderProcessStep("share_card_opened",AnalyticsBehavior.ProcessCheckpoint)}async openManifestEditorModal(X="",O="info"){this.closeOpenTooltips=!1,this.startingManifestEditorTab=O,this.focusOnME=X,await this.shadowRoot.querySelector("manifest-editor-frame").shadowRoot.querySelector(".dialog").show(),recordPWABuilderProcessStep("manifest_editor_opened",AnalyticsBehavior.ProcessCheckpoint)}async openSWSelectorModal(){this.closeOpenTooltips=!1,await this.shadowRoot.querySelector("sw-selector").shadowRoot.querySelector(".dialog").show(),recordPWABuilderProcessStep("sw_selector_opened",AnalyticsBehavior.ProcessCheckpoint)}async openPublishModal(){this.closeOpenTooltips=!1,await this.shadowRoot.querySelector("publish-pane").shadowRoot.querySelector(".dialog").show(),recordPWABuilderProcessStep("publish_modal_opened",AnalyticsBehavior.ProcessCheckpoint)}async openTestPublishModal(){this.closeOpenTooltips=!1,await this.shadowRoot.querySelector("test-publish-pane").shadowRoot.querySelector(".dialog").show(),recordPWABuilderProcessStep("test_publish_modal_opened",AnalyticsBehavior.ProcessCheckpoint)}iconSrcListParse(X){let O=getManifestContext().manifest,Q=getManifestContext().manifestUrl;return this.handleImageUrl(X,O,Q)||""}handleImageUrl(X,O,Q){if(X.src.indexOf("data:")===0&&X.src.indexOf("base64")!==-1)return X.src;let j=resolveUrl$2(Q,O==null?void 0:O.startUrl);if(j=resolveUrl$2(j==null?void 0:j.href,X.src),j)return j.href}decideColor(X){let O=!1;X==="manifest"?O=this.manifestRequiredCounter>0:X==="sw"&&(O=this.swRequiredCounter>0);let Q=!1;return X==="manifest"?Q=this.manifestRecCounter>0:X==="sw"&&(Q=this.swRecCounter>0),O?{green:!1,red:!0,yellow:!1}:Q?{green:!1,red:!1,yellow:!0}:{green:!0,red:!1,yellow:!1}}getRingColor(X){let O=this.shadowRoot.getElementById(`${X}ProgressRing`);if(O)return O.classList[0]}decideMessage(X,O,Q){let j=!1,U=0;Q==="manifest"?j=this.manifestRequiredCounter>0:Q==="sw"&&(U=1,j=this.swRequiredCounter>0);let F=parseFloat(JSON.stringify(X))/O,q=this.possible_messages[U].messages;return this.createdManifest||F==0||Q==="sec"&&F!=1?q.none:j?q.blocked:F!=1?q.yellow:q.green}formatSWStrings(X){return X.split("_").map(U=>U.toLowerCase()).join(" ")}async animateItem(X){if(X.preventDefault,recordPWABuilderProcessStep("todo_item_clicked",AnalyticsBehavior.ProcessCheckpoint),!manifest_fields[X.detail.field]){let O;switch(X.detail.field){case"Manifest":case"Service Worker":this.thingToAdd=X.detail.displayString,this.showConfirmationModal=!0;return;case"Open Manifest Modal":O=this.shadowRoot.querySelector("manifest-editor-frame"),(O==null?void 0:O.shadowRoot.querySelector(".dialog")).show();return;case"Open SW Modal":O=this.shadowRoot.querySelector("sw-selector"),(O==null?void 0:O.shadowRoot.querySelector(".dialog")).show();return}}}addRetestTodo(X){this.hasItemBeenAdded(X)||(this.allTodoItems.push({card:"retest",field:X,fix:`We've noticed you've updated your ${X}. Make sure to add your new ${X} to your server and retest your site!`,status:"retest",displayString:X}),this.requestUpdate())}hasItemBeenAdded(X){var O=!1;for(var Q of this.allTodoItems)if(Q.field==X){O=!0;break}return O}rotateZero(X,O){recordPWABuilderProcessStep(X+"_details_expanded",AnalyticsBehavior.ProcessCheckpoint);let Q=this.shadowRoot.querySelector('[data-card="'+X+'"]'),j=O.target,U=this.shadowRoot.querySelectorAll("sl-details"),F=!1;for(let q=0;q<U.length;q++)if(U[q].isEqualNode(j)){F=!0;break}Q&&F&&(Q.style.transform="rotate(0deg)")}rotateNinety(X,O,Q){recordPWABuilderProcessStep(X+"_details_closed",AnalyticsBehavior.ProcessCheckpoint);let j=this.shadowRoot.querySelector('[data-card="'+X+'"]');if(j&&Q){j.style.transform="rotate(90deg)";return}let U=O.target,F=this.shadowRoot.querySelectorAll("sl-details"),q=!1;for(let W=0;W<F.length;W++)if(F[W].isEqualNode(U)){q=!0;break}j&&q&&(j.style.transform="rotate(90deg)")}sortTodos(){let X={retest:0,missing:1,required:2,enhancement:3,"highly recommended":4,recommended:5,optional:6};return this.manifestRecCounter/recommended_fields.length>.5&&(X={retest:0,missing:1,required:2,"highly recommended":3,recommended:4,enhancement:5,optional:6}),this.filteredTodoItems.sort((O,Q)=>X[O.status]<X[Q.status]?-1:X[O.status]>X[Q.status]?1:O.field.localeCompare(Q.field)),this.filteredTodoItems}paginate(){var j;let O=this.sortTodos().slice((this.pageNumber-1)*this.pageSize,this.pageNumber*this.pageSize),Q=(j=this.shadowRoot)==null?void 0:j.querySelector(".todo-items-holder");return O.length<this.pageSize&&this.pageNumber==1?(Q.style.display="flex",Q.style.flexDirection="column",Q.style.gridTemplateRows="unset"):(Q.style.height="280px;",Q.style.display="grid",Q.style.gridTemplateRows="repeat(5, 1fr)",Q.style.flexDirection="unset"),O}switchPage(X){X&&this.pageNumber*this.pageSize<this.filteredTodoItems.length?this.pageNumber++:!X&&this.pageNumber!=1&&this.pageNumber--;const O=this.shadowRoot.getElementById("pageStatus"),Q=Math.ceil(this.filteredTodoItems.length/this.pageSize);O.textContent=`Action Items Page ${this.pageNumber} of ${Q}`,this.requestUpdate()}getDots(){let X=[],O=Math.ceil(this.filteredTodoItems.length/this.pageSize);for(let Q=0;Q<O;Q++)X.push("dot");return X}renderIndicators(){let X=0,O=0,Q=0;return this.allTodoItems.forEach(j=>{j.status=="required"?Q++:j.status=="enhancement"?O++:(j.status==="optional"||j.status==="recommended")&&X++}),X+O+Q!=0?x$2`
      <div id="indicators-holder">
        ${Q!=0?this.filterList.includes("required")?x$2`<button type="button" class="indicator selected" tabindex="0" @click=${j=>this.filterTodoItems("required",j)}><img src=${stop_white_src} alt="invalid result icon"/><p>${Q}</p></button>`:x$2`<button type="button" class="indicator" tabindex="0" @click=${j=>this.filterTodoItems("required",j)}><img src=${stop_src} alt="invalid result icon"/><p>${Q}</p></button>`:null}
        ${X!=0?this.filterList.includes("recommended")||this.filterList.includes("optional")?x$2`<button type="button" class="indicator selected" tabindex="0" @click=${j=>this.filterTodoItems("yellow",j)}><img src=${yield_white_src} alt="yield result icon"/><p>${X}</p></button>`:x$2`<button type="button" class="indicator" tabindex="0" @click=${j=>this.filterTodoItems("yellow",j)}><img src=${yield_src} alt="yield result icon"/><p>${X}</p></button>`:null}
        ${O!=0?this.filterList.includes("enhancement")?x$2`<button type="button" class="indicator selected" tabindex="0" @click=${j=>this.filterTodoItems("enhancement",j)}><img src=${enhancement_white_src} alt="enhancement result icon"/><p>${O}</p></button>`:x$2`<button type="button" class="indicator" tabindex="0" @click=${j=>this.filterTodoItems("enhancement",j)}><img src=${enhancement_src} alt="enhancement result icon"/><p>${O}</p></button>`:null}
      </div>`:null}filterTodoItems(X,O){if(O.stopPropagation(),recordPWABuilderProcessStep(`${X}_indicator_clicked`,AnalyticsBehavior.ProcessCheckpoint),this.pageNumber=1,this.stopShowingNotificationTooltip=!0,X==="yellow"?this.filterList.includes("optional")?this.filterList=this.filterList.filter(Q=>Q!=="optional"&&Q!=="recommended"):(this.filterList.push("optional"),this.filterList.push("recommended")):this.filterList.includes(X)?this.filterList=this.filterList.filter(Q=>Q!==X):this.filterList.push(X),this.filterList.length===0){this.filteredTodoItems=this.allTodoItems;return}this.filteredTodoItems=this.allTodoItems.filter(Q=>this.filterList.includes(Q.status))}truncateString(X){return X.length>125?X.substring(0,125)+"...":X}handleShowingTooltip(X,O,Q){recordPWABuilderProcessStep(`${O}.tooltip_opened`,AnalyticsBehavior.ProcessCheckpoint),Q=Q.split(" ").join("_"),recordPWABuilderProcessStep(`${O}.${Q}_tooltip_opened`,AnalyticsBehavior.ProcessCheckpoint),X.detail.entering?(this.openTooltips.length>0&&(this.openTooltips[0].hide(),this.openTooltips=[]),X.detail.tooltip.show(),this.openTooltips.push(X.detail.tooltip)):(X.detail.tooltip.hide(),this.openTooltips=[])}closeTooltipOnScroll(){this.openTooltips.length>0&&(this.openTooltips[0].hide(),this.openTooltips=[])}renderReaddDialog(){var X=x$2`
      <p>Have you added your new ${this.thingToAdd} to your site?</p>
      <div id="confirmationButtons">
        <sl-button @click=${()=>this.retest(!0)}> Yes </sl-button>
        <sl-button @click=${()=>this.readdDenied=!0}> No </sl-button>
      </div>
    `;return this.retestConfirmed?X=x$2`
        <p>Retesting your site now!</p>
      `:this.readdDenied&&(X=x$2`
        <p>Add your new ${this.thingToAdd}, and then we can retest your site. </p>
      `),X}render(){return x$2`
      <app-header .page=${"report"}></app-header>
      <div id="report-wrapper">
        <div id="content-holder">
          <div id="header-row">
          ${this.isAppCardInfoLoading?x$2`
            <div id="app-card" class="flex-col skeleton-effects">
              <div id="app-card-header" class="skeleton">
                <sl-skeleton id="app-image-skeleton" effect="pulse"></sl-skeleton>
                <div id="card-info" class="flex-col">
                  <sl-skeleton class="app-info-skeleton" effect="pulse"></sl-skeleton>
                  <sl-skeleton class="app-info-skeleton" effect="pulse"></sl-skeleton>
                </div>
                <!-- <sl-skeleton class="app-info-skeleton skeleton-desc" effect="pulse"></sl-skeleton> -->
              </div>
              <div id="app-card-footer">
                <sl-skeleton class="app-info-skeleton-half" effect="pulse"></sl-skeleton>
              </div>
            </div>`:x$2`
            <div id="app-card" class="flex-col" style=${this.createdManifest?o$c({backgroundColor:"#ffffff",color:"#757575"}):o$c(this.CardStyles)}>
              <div id="app-card-header">
                <div id="app-card-header-col">
                  <div id="pwa-image-holder">
                    ${this.proxyLoadingImage||this.appCard.iconURL.length===0?x$2`<span class="proxy-loader"></span>`:x$2`<img src=${this.appCard.iconURL} alt=${this.appCard.iconAlt} />`}
                  </div>
                  <div id="card-info" class="flex-row">
                    <h1 id="site-name">
                      ${this.appCard.siteName}
                      <span class="visually-hidden" aria-live="polite">Report card page for ${this.appCard.siteName}</span>
                    </h1>
                    <p id="site-url">${this.appCard.siteUrl}</p>
                    <p id="app-card-desc" class="app-card-desc-desktop">${this.truncateString(this.appCard.description)}</p>
                  </div>
                  <div id="app-card-share-cta">
                    <button type="button" id="share-button-desktop" class="share-banner-buttons" @click=${()=>this.openShareCardModal()} ?disabled=${this.runningTests}>
                    ${this.runningTests?x$2`<img id="share-icon" class="banner-button-icons" src="/assets/share_icon_disabled.svg" role="presentation"/>`:x$2`<img id="share-icon" class="banner-button-icons" src="/assets/share_icon.svg" role="presentation"/>`} Share score
                    </button>
                  </div>
                </div>
                <div id="app-card-desc-mobile">
                  <p id="app-card-desc">${this.truncateString(this.appCard.description)}</p>
                  <button type="button" id="share-button-mobile" class="share-banner-buttons" @click=${()=>this.openShareCardModal()} ?disabled=${this.runningTests}>
                    ${this.runningTests?x$2`<img id="share-icon" class="banner-button-icons" src="/assets/share_icon_disabled.svg" role="presentation"/>`:x$2`<img id="share-icon" class="banner-button-icons" src="/assets/share_icon.svg" role="presentation"/>`} Share score
                    </button>

                </div>
              </div>
              <div id="app-card-footer">
                ${this.runningTests?x$2`
                    <div id="test" class="in-progress">
                      <span>testing in progress</span>
                      <div class="loader-round"></div>
                    </div>
                `:x$2`
                  <div id="test" style=${o$c(this.CardStyles)}>
                    <button
                      type="button"
                      id="retest"
                      @click=${()=>{this.retest(!1)}}>
                      <p id="last-edited" style=${o$c(this.LastEditedStyles)}>${this.lastTested}</p>

                      <img
                        src=${`/assets/new/retest-icon${this.darkMode?"_light":""}.svg`}
                        alt="retest site"
                      />
                    </button>
                  </div>`}
              </div>

            </div>`}
            <div id="app-actions" class="flex-col">
              <div id="package" class="flex-col-center">
                  ${this.canPackage?x$2`
                    <button
                      type="button"
                      id="pfs"
                      @click=${()=>this.openPublishModal()}
                    >
                      Package For Stores
                    </button>
                    `:x$2`
                    <sl-tooltip class="mani-tooltip">
                    ${this.runningTests?x$2`<div slot="content" class="mani-tooltip-content"><img src="/assets/new/waivingMani.svg" alt="Waiving Mani" /> <p>Running tests...</p></div>`:x$2`<div slot="content" class="mani-tooltip-content"><img src="/assets/new/waivingMani.svg" alt="Waiving Mani" /><p>Your PWA is not store ready! Check your To-do-list and handle all required items!</p></div>`}
                        <button
                          type="button"
                          id="pfs-disabled"
                          aria-disabled="true"
                        >
                          Package For Stores
                        </button>
                    </sl-tooltip>
                    `}
                <button type="button" id="test-download" @click=${()=>this.openTestPublishModal()} ?disabled=${!this.canPackage||this.createdManifest}>
                  <p class="arrow_link">Download Test Package</p>
                </button>
              </div>
              <div id="actions-footer" class="flex-center">
                <p>Available stores:</p>
                <img
                  title="Windows"
                  src=${`/assets/windows_icon${this.darkMode?"_light":""}.svg`}
                  alt="Windows"
                />
                <img 
                  title="iOS" 
                  src=${`/assets/apple_icon${this.darkMode?"_light":""}.svg`}
                  alt="iOS" />
                <img
                  title="Android"
                  src=${`/assets/android_icon_full${this.darkMode?"_light":""}.svg`}
                  alt="Android"
                />
                <img
                  title="Meta Quest"
                  src=${`/assets/meta_icon${this.darkMode?"_light":""}.svg`}
                  alt="Meta Quest"
                />
              </div>
            </div>
          </div>

          ${this.showSecurityErrorBanner?x$2`
              <div class="feedback-holder type-error">
                <img src="/assets/new/stop.svg" alt="invalid result icon" />
                <div class="error-info">
                  <p class="error-title">You do not have a secure HTTPS server</p>
                  <p class="error-desc">PWABuilder has done a basic analysis of your HTTPS setup and has identified required actions before you can package. Check out the documentation linked below to learn more.</p>
                  <div class="error-actions">
                    <a href="https://microsoft.github.io/win-student-devs/#/30DaysOfPWA/core-concepts/04" target="_blank" rel="noopener">Security Documentation</a>
                  </div>
                </div>
              </div>
            `:null}

          ${this.showSecurityWarningBanner&&!this.showSecurityErrorBanner?x$2`
              <div class="feedback-holder type-warning">
                <img src="/assets/new/yield.svg" alt="warning result icon" />
                <div class="error-info">
                  <p class="error-title">Mixed content is loading on your PWA</p>
                  <p class="error-desc">PWABuilder has done a basic analysis of your HTTPS setup and has identified that you are delivering mixed resources when your PWA is loading. Check out the documentation linked below to learn more.</p>
                  <div class="error-actions">
                    <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content" target="_blank" rel="noopener">Mixed Content Documentation</a>
                  </div>
                </div>
              </div>
            `:null}

          <div id="todo">
            <sl-details
              id="todo-detail"
              @sl-show=${X=>this.rotateNinety("todo",X)}
              @sl-hide=${X=>this.rotateZero("todo",X)}
              open
              >
              <div class="details-summary" slot="summary">
                <div id="todo-summary-left">
                  <h2>Action Items</h2>

                    ${this.allTodoItems.length>0?this.stopShowingNotificationTooltip?this.renderIndicators():x$2`
                          <sl-tooltip class="mani-tooltip" id="notifications" ?open=${this.closeOpenTooltips}>
                            <div slot="content" class="mani-tooltip-content">
                              <img src="/assets/new/waivingMani.svg" alt="Waiving Mani" />
                              <p class="mani-tooltip-p"> Filter through notifications <br> as and when you need! </p>
                            </div>
                            ${this.renderIndicators()}
                          </sl-tooltip>
                        `:null}
                </div>
                  <img class="dropdown_icon" data-card="todo" src="/assets/new/dropdownIcon.svg" alt="dropdown toggler"/>

              </div>
              <div class="todo-items-holder">
                ${this.filteredTodoItems.length>0?this.paginate().map(X=>x$2`
                      <todo-item
                        .status=${X.status}
                        .field=${X.field}
                        .fix=${X.fix}
                        .card=${X.card}
                        .displayString=${X.displayString}
                        @todo-clicked=${O=>this.animateItem(O)}
                        @open-manifest-editor=${O=>this.openManifestEditorModal(O.detail.field,O.detail.tab)}
                        @trigger-hover=${O=>this.handleShowingTooltip(O,"action_items",X.field)}
                      >

                      </todo-item>`):x$2`<span class="loader"></span>`}
              </div>
            ${this.filteredTodoItems.length>this.pageSize?x$2`
              <div id="pagination-actions">
                <button
                  class="pagination-buttons"
                  name="action-items-previous-page-button"
                  aria-label="Previous page button for action items list"
                  type="button"
                  @click=${()=>this.switchPage(!1)}
                  ><sl-icon class="pageToggles" name="chevron-left"></sl-icon>
                </button>
                <div id="dots">
                  ${this.getDots().map((X,O)=>this.pageNumber==O+1?x$2`
                        <img src="/assets/new/active_dot.svg" alt="active dot" />
                      `:x$2`
                        <img src="/assets/new/inactive_dot.svg" alt="inactive dot" />
                      `)}
                </div>
                <button
                  class="pagination-buttons"
                  name="action-items-next-page-button"
                  aria-label="Next page button for action items list"
                  aria-live="polite"
                  type="button"
                  @click=${()=>this.switchPage(!0)}><sl-icon class="pageToggles" name="chevron-right"></sl-icon>
                </button>
              </div>`:null}
              <div id="pageStatus" aria-live="polite" aria-atomic="true"></div>
            </sl-details>
          </div>

          <div id="manifest" class="flex-col">
            <div id="manifest-header">
              <div id="mh-content">
                <div id="mh-text" class="flex-col">
                  <h2 class="card-header">Manifest</h2>
                  ${this.manifestDataLoading?x$2`
                      <div class="flex-col gap">
                        <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                        <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                      </div>
                    `:x$2`
                    <p class="card-desc">
                      ${this.decideMessage(this.manifestValidCounter,this.manifestTotalScore,"manifest")}
                    </p>
                  `}
                </div>
              </div>

              <div id="mh-right">
                ${this.manifestDataLoading?x$2`<div class="loader-round large"></div>`:x$2`<sl-progress-ring
                            id="manifestProgressRing"
                            class=${o$b(this.decideColor("manifest"))}
                            value="${this.createdManifest?0:parseFloat(JSON.stringify(this.manifestValidCounter))/this.manifestTotalScore*100}"
                          >${this.createdManifest?x$2`<img src="assets/new/macro_error.svg" class="macro_error" alt="missing manifest requirements" />`:x$2`<div>${this.manifestValidCounter} / ${this.manifestTotalScore}</div>`}</sl-progress-ring>`}
              </div>
              <div id="mh-actions" class="flex-col">
                ${this.manifestDataLoading?x$2`
                    <div class="flex-col gap">
                      <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                      <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                    </div>
                  `:x$2`
                    ${this.createdManifest?x$2`
                        <sl-tooltip class="mani-tooltip" ?open=${this.closeOpenTooltips}>
                          <div slot="content" class="mani-tooltip-content"><img src="/assets/new/waivingMani.svg" alt="Waiving Mani" /> <p>We did not find a manifest on your site before our tests timed out so we have created a manifest for you! <br> Click here to customize it!</p></div>
                          <button type="button" class="alternate" @click=${()=>this.openManifestEditorModal()}>Edit Your Manifest</button>
                        </sl-tooltip>`:x$2`<button type="button" class="alternate" @click=${()=>this.openManifestEditorModal()}>Edit Your Manifest</button>`}

                    <a
                      class="arrow_anchor"
                      href="https://docs.pwabuilder.com/#/home/pwa-intro?id=web-app-manifests"
                      rel="noopener"
                      target="_blank"
                      @click=${()=>recordPWABuilderProcessStep("manifest_documentation_clicked",AnalyticsBehavior.ProcessCheckpoint)}
                    >
                      <p class="arrow_link">Manifest Documentation</p>
                      <img
                        src="/assets/new/arrow.svg"
                        alt="arrow"
                      />
                    </a>
                `}

                </div>
            </div>
            <sl-details
              id="mani-details"
              class="details"
              ?disabled=${this.manifestDataLoading}
              @sl-show=${X=>this.rotateNinety("mani-details",X)}
              @sl-hide=${X=>this.rotateZero("mani-details",X)}
              >
              ${this.manifestDataLoading?x$2`
              <div slot="summary"><sl-skeleton class="summary-skeleton" effect="pulse"></sl-skeleton></div>`:x$2`<div class="details-summary" slot="summary"><p>View Details</p><img class="dropdown_icon" data-card="mani-details" src="/assets/new/dropdownIcon.svg" alt="dropdown toggler"/></div>
              <div id="manifest-detail-grid">
                <div class="detail-list">
                  <p class="detail-list-header">Required</p>

                  ${this.requiredMissingFields.length>0?x$2`
                    ${this.requiredMissingFields.map(X=>x$2`<div class="test-result" data-field=${X}>
                          <sl-tooltip content=${X+" is missing from your manifest."} placement="right">
                            <img src=${stop_src} alt="invalid result icon"/>
                          </sl-tooltip>
                      <p>Manifest includes ${X} field</p>
                    </div>`)}
                  `:null}

                  ${this.validationResults.map(X=>X.category==="required"||X.testRequired&&!X.valid?x$2`
                    <div class="test-result" data-field=${X.member}>
                      ${X.valid?x$2`<img src=${valid_src} alt="passing result icon"/>`:x$2`<sl-tooltip content=${X.errorString?X.errorString:""} placement="right">
                                <img src=${stop_src} alt="invalid result icon"/>
                              </sl-tooltip>`}
                      <p>${X.displayString}</p>
                    </div>
                  `:null)}
                </div>
                <div class="detail-list">
                  <p class="detail-list-header">Recommended</p>
                  ${this.recMissingFields.length>0?x$2`
                    ${this.recMissingFields.map(X=>x$2`<div class="test-result" data-field=${X}>
                          <sl-tooltip content=${X+" is missing from your manifest."} placement="right">
                            <img src=${yield_src} alt="yield result icon"/>
                          </sl-tooltip>
                      <p>Manifest includes ${X} field</p>
                    </div>`)}
                  `:null}
                  ${this.validationResults.map(X=>X.category==="recommended"&&(X.testRequired&&X.valid||!X.testRequired)?x$2`
                    <div class="test-result" data-field=${X.member}>
                      ${X.valid?x$2`<img src=${valid_src} alt="passing result icon"/>`:x$2`<sl-tooltip content=${X.errorString?X.errorString:""} placement="right">
                                <img src=${yield_src} alt="yield result icon"/>
                              </sl-tooltip>
                        `}
                      <p>${X.displayString}</p>
                    </div>
                  `:null)}
                </div>
                <div class="detail-list">
                  <p class="detail-list-header">Optional</p>
                  ${this.optMissingFields.length>0?x$2`
                    ${this.optMissingFields.map(X=>x$2`
                        <div class="test-result" data-field=${X}>
                          <sl-tooltip content=${X+" is missing from your manifest."} placement="right">
                            <img src=${yield_src} alt="yield result icon"/>
                          </sl-tooltip>
                          <p>Manifest includes ${X} field</p>
                        </div>`)}
                  `:null}

                  ${this.validationResults.map(X=>X.category==="optional"&&(X.testRequired&&X.valid||!X.testRequired)?x$2`
                    <div class="test-result" data-field=${X.member}>
                      ${X.valid?x$2`<img src=${valid_src} alt="passing result icon"/>`:x$2`
                          <sl-tooltip content=${X.errorString?X.errorString:""} placement="right">
                            <img src=${yield_src} alt="yield result icon"/>
                          </sl-tooltip>
                        `}
                      <p>${X.displayString}</p>
                    </div>
                  `:null)}
                </div>
              </div>`}
            </sl-details>
          </div>

          <div id="two-cell-row">
            <div id="sw" class="half-width-cards">
              <div id="sw-header" class="flex-col">
                <div id="swh-top">
                  <div id="swh-text" class="flex-col">
                    <h2 class="card-header">Service Worker</h2>
                    ${this.swDataLoading?x$2`
                        <div class="flex-col gap">
                          <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                          <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                        </div>
                      `:x$2`
                        <p class="card-desc">
                          ${this.decideMessage(this.swValidCounter,this.swTotalScore,"sw")}
                        </p>
                      `}
                  </div>
                  ${this.swDataLoading?x$2`<div class="loader-round large"></div>`:x$2`<sl-progress-ring
                      id="swProgressRing"
                      class="counterRing"
                      value="${this.swValidCounter>0?100:0}"
                      >+${this.swValidCounter}
                    </sl-progress-ring>
                    `}
                </div>
                  <div class="icons-holder sw">
                    ${this.serviceWorkerResults.map(X=>x$2`
                        <div class="icon-and-name"  @trigger-hover=${O=>this.handleShowingTooltip(O,"service_worker",X.member)}>
                          <sw-info-card .field=${X.member}>
                            <div class="circle-icon" tabindex="0" slot="trigger">
                              <img class="circle-icon-img" src="${"/assets/new/"+X.member+"_icon.svg"}" alt="${X.member+" icon"}" />
                              ${X.result?x$2`<img class="valid-marker" src="${valid_src}" alt="valid result indicator" />`:null}
                            </div>
                          </sw-info-card>
                          <p>${this.formatSWStrings(X.member)}</p>
                        </div>
                      `)}
                  </div>
                <div id="sw-actions" class="flex-col">
                  ${this.swDataLoading?x$2`
                    <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                  `:x$2`
                    <button type="button" class="alternate" @click=${()=>this.openSWSelectorModal()}>
                      Generate Service Worker
                    </button>
                  `}

                  ${this.swDataLoading?x$2`
                      <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                    `:x$2`
                      <a
                        class="arrow_anchor"
                        rel="noopener"
                        target="_blank"
                        href="https://docs.pwabuilder.com/#/home/sw-intro"
                        @click=${()=>recordPWABuilderProcessStep("sw_documentation_clicked",AnalyticsBehavior.ProcessCheckpoint)}>
                        <p class="arrow_link">Service Worker Documentation</p>
                        <img
                          src="/assets/new/arrow.svg"
                          alt="arrow"
                        />
                      </a>
                    `}

                </div>
              </div>

            </div>
            <div id="security" class="half-width-cards">
              <div id="sec-header" class="flex-col">
                <div id="sec-top">
                  <div id="sec-text" class="flex-col">
                    <h2 class="card-header">App Capabilities</h2>
                    ${this.manifestDataLoading?x$2`
                        <div class="flex-col gap">
                          <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                          <sl-skeleton class="desc-skeleton" effect="pulse"></sl-skeleton>
                        </div>
                      `:x$2`
                        <p class="card-desc">
                          PWABuilder has analyzed your PWA and has identified some app capabilities that could enhance your PWA
                        </p>
                      `}
                  </div>
                  ${this.manifestDataLoading?x$2`<div class="loader-round large"></div>`:x$2`<sl-progress-ring class="counterRing" value="${this.enhancementTotalScore>0?100:0}">+${this.enhancementTotalScore}</sl-progress-ring>
                    `}

                </div>
                <div class="icons-holder">
                  ${this.validationResults.map(X=>X.category==="enhancement"?x$2`
                      <div class="icon-and-name" @trigger-hover=${O=>this.handleShowingTooltip(O,"app_caps",X.member)} @open-manifest-editor=${O=>this.openManifestEditorModal(O.detail.field,O.detail.tab)}>
                        <manifest-info-card .field=${X.member} .placement=${"bottom"}>
                          <div class="circle-icon" tabindex="0" slot="trigger">
                            <img class="circle-icon-img" src="${"/assets/new/"+X.member+"_icon.svg"}" alt="${X.member+" icon"}" />
                            ${X.valid?x$2`<img class="valid-marker" src="${valid_src}" alt="valid result indicator" />`:null}
                          </div>
                        </manifest-info-card>
                        <p>${X.member}</p>
                    </div>
                    `:null)}
                </div>
                ${this.manifestDataLoading?x$2`<sl-skeleton class="desc-skeleton half" effect="pulse"></sl-skeleton>`:x$2`<arrow-link .link=${"https://docs.pwabuilder.com/#/builder/manifest"} .text=${"App Capabilities documentation"}></arrow-link>`}
              </div>
            </div>
          </div>
        </div>
      </div>


      <sl-dialog class="dialog" ?open=${this.showConfirmationModal} @sl-hide=${()=>{this.showConfirmationModal=!1,this.readdDenied=!1}} noHeader>
        ${this.renderReaddDialog()}
      </sl-dialog>

      <share-card
        .manifestData=${`${this.manifestValidCounter}/${this.manifestTotalScore}/${this.getRingColor("manifest")}/Manifest`}
        .swData=${`${this.swValidCounter}/purple/Service Worker`}
        .enhancementsData=${`${this.enhancementTotalScore}/purple/App Capabilities`}
        .siteName=${this.appCard.siteName}
      > </share-card>

      <publish-pane></publish-pane>
      <test-publish-pane></test-publish-pane>
      ${this.manifestDataLoading?null:x$2`<manifest-editor-frame .isGenerated=${this.createdManifest} .startingTab=${this.startingManifestEditorTab} .focusOn=${this.focusOnME} @readyForRetest=${()=>this.addRetestTodo("Manifest")}></manifest-editor-frame>`}
      <sw-selector @readyForRetest=${()=>this.addRetestTodo("Service Worker")}></sw-selector>

    `}};__decorateClass([n$f({type:Object})],AppReport.prototype,"resultOfTest",2);__decorateClass([n$f({type:Object})],AppReport.prototype,"reportAudit",2);__decorateClass([n$f({type:Object})],AppReport.prototype,"appCard",2);__decorateClass([n$f({type:Object})],AppReport.prototype,"CardStyles",2);__decorateClass([n$f({type:Object})],AppReport.prototype,"BorderStyles",2);__decorateClass([n$f({type:Object})],AppReport.prototype,"LastEditedStyles",2);__decorateClass([n$f()],AppReport.prototype,"manifestCard",2);__decorateClass([n$f()],AppReport.prototype,"serviceWorkerCard",2);__decorateClass([n$f()],AppReport.prototype,"securityCard",2);__decorateClass([n$f()],AppReport.prototype,"siteURL",2);__decorateClass([t$8()],AppReport.prototype,"swScore",2);__decorateClass([t$8()],AppReport.prototype,"maniScore",2);__decorateClass([t$8()],AppReport.prototype,"securityScore",2);__decorateClass([t$8()],AppReport.prototype,"errored",2);__decorateClass([t$8()],AppReport.prototype,"errorMessage",2);__decorateClass([t$8()],AppReport.prototype,"errorLink",2);__decorateClass([t$8()],AppReport.prototype,"mql",2);__decorateClass([t$8()],AppReport.prototype,"isAppCardInfoLoading",2);__decorateClass([t$8()],AppReport.prototype,"isDeskTopView",2);__decorateClass([t$8()],AppReport.prototype,"runningTests",2);__decorateClass([t$8()],AppReport.prototype,"canPackageList",2);__decorateClass([t$8()],AppReport.prototype,"canPackage",2);__decorateClass([t$8()],AppReport.prototype,"manifestEditorOpened",2);__decorateClass([t$8()],AppReport.prototype,"swSelectorOpen",2);__decorateClass([t$8()],AppReport.prototype,"lastTested",2);__decorateClass([t$8()],AppReport.prototype,"todoWindow",2);__decorateClass([t$8()],AppReport.prototype,"validationResults",2);__decorateClass([t$8()],AppReport.prototype,"manifestTotalScore",2);__decorateClass([t$8()],AppReport.prototype,"manifestValidCounter",2);__decorateClass([t$8()],AppReport.prototype,"manifestRequiredCounter",2);__decorateClass([t$8()],AppReport.prototype,"manifestRecCounter",2);__decorateClass([t$8()],AppReport.prototype,"manifestDataLoading",2);__decorateClass([t$8()],AppReport.prototype,"manifestMessage",2);__decorateClass([t$8()],AppReport.prototype,"startingManifestEditorTab",2);__decorateClass([t$8()],AppReport.prototype,"focusOnME",2);__decorateClass([t$8()],AppReport.prototype,"proxyLoadingImage",2);__decorateClass([t$8()],AppReport.prototype,"serviceWorkerResults",2);__decorateClass([t$8()],AppReport.prototype,"swTotalScore",2);__decorateClass([t$8()],AppReport.prototype,"swValidCounter",2);__decorateClass([t$8()],AppReport.prototype,"swRequiredCounter",2);__decorateClass([t$8()],AppReport.prototype,"swRecCounter",2);__decorateClass([t$8()],AppReport.prototype,"swDataLoading",2);__decorateClass([t$8()],AppReport.prototype,"swMessage",2);__decorateClass([t$8()],AppReport.prototype,"secDataLoading",2);__decorateClass([t$8()],AppReport.prototype,"showSecurityErrorBanner",2);__decorateClass([t$8()],AppReport.prototype,"showSecurityWarningBanner",2);__decorateClass([t$8()],AppReport.prototype,"securityIssues",2);__decorateClass([t$8()],AppReport.prototype,"enhancementTotalScore",2);__decorateClass([t$8()],AppReport.prototype,"requiredMissingFields",2);__decorateClass([t$8()],AppReport.prototype,"recMissingFields",2);__decorateClass([t$8()],AppReport.prototype,"optMissingFields",2);__decorateClass([t$8()],AppReport.prototype,"showConfirmationModal",2);__decorateClass([t$8()],AppReport.prototype,"thingToAdd",2);__decorateClass([t$8()],AppReport.prototype,"retestConfirmed",2);__decorateClass([t$8()],AppReport.prototype,"readdDenied",2);__decorateClass([t$8()],AppReport.prototype,"createdManifest",2);__decorateClass([t$8()],AppReport.prototype,"manifestContext",2);__decorateClass([t$8()],AppReport.prototype,"allTodoItems",2);__decorateClass([t$8()],AppReport.prototype,"filteredTodoItems",2);__decorateClass([t$8()],AppReport.prototype,"filterList",2);__decorateClass([t$8()],AppReport.prototype,"openTooltips",2);__decorateClass([t$8()],AppReport.prototype,"stopShowingNotificationTooltip",2);__decorateClass([t$8()],AppReport.prototype,"closeOpenTooltips",2);__decorateClass([t$8()],AppReport.prototype,"darkMode",2);AppReport=__decorateClass([e$c("app-report")],AppReport);export{AppReport};
//# sourceMappingURL=app-report.7301e0bc.js.map
